var U1=Object.defineProperty;var I1=(t,e,i)=>e in t?U1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var ot=(t,e,i)=>I1(t,typeof e!="symbol"?e+"":e,i);function j1(t,e){for(var i=0;i<e.length;i++){const a=e[i];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();function Zb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zf={exports:{}},Po={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function B1(){if(Qy)return Po;Qy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:t,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Po.Fragment=e,Po.jsx=i,Po.jsxs=i,Po}var Xy;function z1(){return Xy||(Xy=1,zf.exports=B1()),zf.exports}var E=z1(),Ff={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function F1(){if(Jy)return Me;Jy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function w(P,Q,K){this.props=P,this.context=Q,this.refs=T,this.updater=K||k}w.prototype.isReactComponent={},w.prototype.setState=function(P,Q){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Q,"setState")},w.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function R(){}R.prototype=w.prototype;function L(P,Q,K){this.props=P,this.context=Q,this.refs=T,this.updater=K||k}var N=L.prototype=new R;N.constructor=L,S(N,w.prototype),N.isPureReactComponent=!0;var A=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function I(P,Q,K,J,le,ke){return K=ke.ref,{$$typeof:t,type:P,key:Q,ref:K!==void 0?K:null,props:ke}}function F(P,Q){return I(P.type,Q,void 0,void 0,void 0,P.props)}function G(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function $(P){var Q={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(K){return Q[K]})}var ae=/\/+/g;function ve(P,Q){return typeof P=="object"&&P!==null&&P.key!=null?$(""+P.key):Q.toString(36)}function Fe(){}function Xe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Fe,Fe):(P.status="pending",P.then(function(Q){P.status==="pending"&&(P.status="fulfilled",P.value=Q)},function(Q){P.status==="pending"&&(P.status="rejected",P.reason=Q)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Re(P,Q,K,J,le){var ke=typeof P;(ke==="undefined"||ke==="boolean")&&(P=null);var ge=!1;if(P===null)ge=!0;else switch(ke){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(P.$$typeof){case t:case e:ge=!0;break;case p:return ge=P._init,Re(ge(P._payload),Q,K,J,le)}}if(ge)return le=le(P),ge=J===""?"."+ve(P,0):J,A(le)?(K="",ge!=null&&(K=ge.replace(ae,"$&/")+"/"),Re(le,Q,K,"",function(ft){return ft})):le!=null&&(G(le)&&(le=F(le,K+(le.key==null||P&&P.key===le.key?"":(""+le.key).replace(ae,"$&/")+"/")+ge)),Q.push(le)),1;ge=0;var Le=J===""?".":J+":";if(A(P))for(var Ge=0;Ge<P.length;Ge++)J=P[Ge],ke=Le+ve(J,Ge),ge+=Re(J,Q,K,ke,le);else if(Ge=y(P),typeof Ge=="function")for(P=Ge.call(P),Ge=0;!(J=P.next()).done;)J=J.value,ke=Le+ve(J,Ge++),ge+=Re(J,Q,K,ke,le);else if(ke==="object"){if(typeof P.then=="function")return Re(Xe(P),Q,K,J,le);throw Q=String(P),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ge}function j(P,Q,K){if(P==null)return P;var J=[],le=0;return Re(P,J,"","",function(ke){return Q.call(K,ke,le++)}),J}function re(P){if(P._status===-1){var Q=P._result;Q=Q(),Q.then(function(K){(P._status===0||P._status===-1)&&(P._status=1,P._result=K)},function(K){(P._status===0||P._status===-1)&&(P._status=2,P._result=K)}),P._status===-1&&(P._status=0,P._result=Q)}if(P._status===1)return P._result.default;throw P._result}var ee=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Ae(){}return Me.Children={map:j,forEach:function(P,Q,K){j(P,function(){Q.apply(this,arguments)},K)},count:function(P){var Q=0;return j(P,function(){Q++}),Q},toArray:function(P){return j(P,function(Q){return Q})||[]},only:function(P){if(!G(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Me.Component=w,Me.Fragment=i,Me.Profiler=s,Me.PureComponent=L,Me.StrictMode=a,Me.Suspense=h,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Me.__COMPILER_RUNTIME={__proto__:null,c:function(P){return _.H.useMemoCache(P)}},Me.cache=function(P){return function(){return P.apply(null,arguments)}},Me.cloneElement=function(P,Q,K){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var J=S({},P.props),le=P.key,ke=void 0;if(Q!=null)for(ge in Q.ref!==void 0&&(ke=void 0),Q.key!==void 0&&(le=""+Q.key),Q)!B.call(Q,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&Q.ref===void 0||(J[ge]=Q[ge]);var ge=arguments.length-2;if(ge===1)J.children=K;else if(1<ge){for(var Le=Array(ge),Ge=0;Ge<ge;Ge++)Le[Ge]=arguments[Ge+2];J.children=Le}return I(P.type,le,void 0,void 0,ke,J)},Me.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Me.createElement=function(P,Q,K){var J,le={},ke=null;if(Q!=null)for(J in Q.key!==void 0&&(ke=""+Q.key),Q)B.call(Q,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(le[J]=Q[J]);var ge=arguments.length-2;if(ge===1)le.children=K;else if(1<ge){for(var Le=Array(ge),Ge=0;Ge<ge;Ge++)Le[Ge]=arguments[Ge+2];le.children=Le}if(P&&P.defaultProps)for(J in ge=P.defaultProps,ge)le[J]===void 0&&(le[J]=ge[J]);return I(P,ke,void 0,void 0,null,le)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(P){return{$$typeof:d,render:P}},Me.isValidElement=G,Me.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:re}},Me.memo=function(P,Q){return{$$typeof:f,type:P,compare:Q===void 0?null:Q}},Me.startTransition=function(P){var Q=_.T,K={};_.T=K;try{var J=P(),le=_.S;le!==null&&le(K,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Ae,ee)}catch(ke){ee(ke)}finally{_.T=Q}},Me.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Me.use=function(P){return _.H.use(P)},Me.useActionState=function(P,Q,K){return _.H.useActionState(P,Q,K)},Me.useCallback=function(P,Q){return _.H.useCallback(P,Q)},Me.useContext=function(P){return _.H.useContext(P)},Me.useDebugValue=function(){},Me.useDeferredValue=function(P,Q){return _.H.useDeferredValue(P,Q)},Me.useEffect=function(P,Q,K){var J=_.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(P,Q)},Me.useId=function(){return _.H.useId()},Me.useImperativeHandle=function(P,Q,K){return _.H.useImperativeHandle(P,Q,K)},Me.useInsertionEffect=function(P,Q){return _.H.useInsertionEffect(P,Q)},Me.useLayoutEffect=function(P,Q){return _.H.useLayoutEffect(P,Q)},Me.useMemo=function(P,Q){return _.H.useMemo(P,Q)},Me.useOptimistic=function(P,Q){return _.H.useOptimistic(P,Q)},Me.useReducer=function(P,Q,K){return _.H.useReducer(P,Q,K)},Me.useRef=function(P){return _.H.useRef(P)},Me.useState=function(P){return _.H.useState(P)},Me.useSyncExternalStore=function(P,Q,K){return _.H.useSyncExternalStore(P,Q,K)},Me.useTransition=function(){return _.H.useTransition()},Me.version="19.1.0",Me}var Zy;function xm(){return Zy||(Zy=1,Ff.exports=F1()),Ff.exports}var x=xm();const fe=Zb(x),Wb=j1({__proto__:null,default:fe},[x]);var Vf={exports:{}},Mo={},qf={exports:{}},Hf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function V1(){return Wy||(Wy=1,function(t){function e(j,re){var ee=j.length;j.push(re);e:for(;0<ee;){var Ae=ee-1>>>1,P=j[Ae];if(0<s(P,re))j[Ae]=re,j[ee]=P,ee=Ae;else break e}}function i(j){return j.length===0?null:j[0]}function a(j){if(j.length===0)return null;var re=j[0],ee=j.pop();if(ee!==re){j[0]=ee;e:for(var Ae=0,P=j.length,Q=P>>>1;Ae<Q;){var K=2*(Ae+1)-1,J=j[K],le=K+1,ke=j[le];if(0>s(J,ee))le<P&&0>s(ke,J)?(j[Ae]=ke,j[le]=ee,Ae=le):(j[Ae]=J,j[K]=ee,Ae=K);else if(le<P&&0>s(ke,ee))j[Ae]=ke,j[le]=ee,Ae=le;else break e}}return re}function s(j,re){var ee=j.sortIndex-re.sortIndex;return ee!==0?ee:j.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],f=[],p=1,v=null,y=3,k=!1,S=!1,T=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function A(j){for(var re=i(f);re!==null;){if(re.callback===null)a(f);else if(re.startTime<=j)a(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=i(f)}}function _(j){if(T=!1,A(j),!S)if(i(h)!==null)S=!0,B||(B=!0,ve());else{var re=i(f);re!==null&&Re(_,re.startTime-j)}}var B=!1,I=-1,F=5,G=-1;function $(){return w?!0:!(t.unstable_now()-G<F)}function ae(){if(w=!1,B){var j=t.unstable_now();G=j;var re=!0;try{e:{S=!1,T&&(T=!1,L(I),I=-1),k=!0;var ee=y;try{t:{for(A(j),v=i(h);v!==null&&!(v.expirationTime>j&&$());){var Ae=v.callback;if(typeof Ae=="function"){v.callback=null,y=v.priorityLevel;var P=Ae(v.expirationTime<=j);if(j=t.unstable_now(),typeof P=="function"){v.callback=P,A(j),re=!0;break t}v===i(h)&&a(h),A(j)}else a(h);v=i(h)}if(v!==null)re=!0;else{var Q=i(f);Q!==null&&Re(_,Q.startTime-j),re=!1}}break e}finally{v=null,y=ee,k=!1}re=void 0}}finally{re?ve():B=!1}}}var ve;if(typeof N=="function")ve=function(){N(ae)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Xe=Fe.port2;Fe.port1.onmessage=ae,ve=function(){Xe.postMessage(null)}}else ve=function(){R(ae,0)};function Re(j,re){I=R(function(){j(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(j){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var ee=y;y=re;try{return j()}finally{y=ee}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(j,re){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ee=y;y=j;try{return re()}finally{y=ee}},t.unstable_scheduleCallback=function(j,re,ee){var Ae=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Ae+ee:Ae):ee=Ae,j){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ee+P,j={id:p++,callback:re,priorityLevel:j,startTime:ee,expirationTime:P,sortIndex:-1},ee>Ae?(j.sortIndex=ee,e(f,j),i(h)===null&&j===i(f)&&(T?(L(I),I=-1):T=!0,Re(_,ee-Ae))):(j.sortIndex=P,e(h,j),S||k||(S=!0,B||(B=!0,ve()))),j},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(j){var re=y;return function(){var ee=y;y=re;try{return j.apply(this,arguments)}finally{y=ee}}}}(Hf)),Hf}var $y;function q1(){return $y||($y=1,qf.exports=V1()),qf.exports}var Gf={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function H1(){if(e0)return on;e0=1;var t=xm();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(h,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:f,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,on.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(h,f,null,p)},on.flushSync=function(h){var f=c.T,p=a.p;try{if(c.T=null,a.p=2,h)return h()}finally{c.T=f,a.p=p,a.d.f()}},on.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(h,f))},on.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},on.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,v=d(p,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,k=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?a.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:k}):p==="script"&&a.d.X(h,{crossOrigin:v,integrity:y,fetchPriority:k,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},on.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=d(f.as,f.crossOrigin);a.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(h)},on.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=d(p,f.crossOrigin);a.d.L(h,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},on.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=d(f.as,f.crossOrigin);a.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(h)},on.requestFormReset=function(h){a.d.r(h)},on.unstable_batchedUpdates=function(h,f){return h(f)},on.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.1.0",on}var t0;function $b(){if(t0)return Gf.exports;t0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gf.exports=H1(),Gf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function G1(){if(n0)return Mo;n0=1;var t=q1(),e=xm(),i=$b();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(a(188))}function h(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(a(188));return r!==n?null:n}for(var o=n,u=r;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return d(m),n;if(g===u)return d(m),r;g=g.sibling}throw Error(a(188))}if(o.return!==u.return)o=m,u=g;else{for(var b=!1,C=m.child;C;){if(C===o){b=!0,o=m,u=g;break}if(C===u){b=!0,u=m,o=g;break}C=C.sibling}if(!b){for(C=g.child;C;){if(C===o){b=!0,o=g,u=m;break}if(C===u){b=!0,u=g,o=m;break}C=C.sibling}if(!b)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:r}function f(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=f(n),r!==null)return r;n=n.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),N=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function ve(n){return n===null||typeof n!="object"?null:(n=ae&&n[ae]||n["@@iterator"],typeof n=="function"?n:null)}var Fe=Symbol.for("react.client.reference");function Xe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Fe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case w:return"Profiler";case T:return"StrictMode";case _:return"Suspense";case B:return"SuspenseList";case G:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case N:return(n.displayName||"Context")+".Provider";case L:return(n._context.displayName||"Context")+".Consumer";case A:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return r=n.displayName||null,r!==null?r:Xe(n.type)||"Memo";case F:r=n._payload,n=n._init;try{return Xe(n(r))}catch{}}return null}var Re=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},Ae=[],P=-1;function Q(n){return{current:n}}function K(n){0>P||(n.current=Ae[P],Ae[P]=null,P--)}function J(n,r){P++,Ae[P]=n.current,n.current=r}var le=Q(null),ke=Q(null),ge=Q(null),Le=Q(null);function Ge(n,r){switch(J(ge,r),J(ke,n),J(le,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?ky(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=ky(r),n=Cy(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(le),J(le,n)}function ft(){K(le),K(ke),K(ge)}function an(n){n.memoizedState!==null&&J(Le,n);var r=le.current,o=Cy(r,n.type);r!==o&&(J(ke,n),J(le,o))}function wn(n){ke.current===n&&(K(le),K(ke)),Le.current===n&&(K(Le),Ao._currentValue=ee)}var hn=Object.prototype.hasOwnProperty,Fa=t.unstable_scheduleCallback,_i=t.unstable_cancelCallback,Ls=t.unstable_shouldYield,yr=t.unstable_requestPaint,It=t.unstable_now,br=t.unstable_getCurrentPriorityLevel,mn=t.unstable_ImmediatePriority,Sr=t.unstable_UserBlockingPriority,Oi=t.unstable_NormalPriority,qt=t.unstable_LowPriority,In=t.unstable_IdlePriority,se=t.log,ue=t.unstable_setDisableYieldValue,pe=null,de=null;function Ce(n){if(typeof se=="function"&&ue(n),de&&typeof de.setStrictMode=="function")try{de.setStrictMode(pe,n)}catch{}}var xe=Math.clz32?Math.clz32:Zt,Ue=Math.log,bt=Math.LN2;function Zt(n){return n>>>=0,n===0?32:31-(Ue(n)/bt|0)|0}var rn=256,ht=4194304;function St(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function un(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,g=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?m=St(u):(b&=C,b!==0?m=St(b):o||(o=C&~n,o!==0&&(m=St(o))))):(C=u&~g,C!==0?m=St(C):b!==0?m=St(b):o||(o=u&~n,o!==0&&(m=St(o)))),m===0?0:r!==0&&r!==m&&(r&g)===0&&(g=m&-m,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:m}function ui(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Us(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qn(){var n=rn;return rn<<=1,(rn&4194048)===0&&(rn=256),n}function cl(){var n=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),n}function Is(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function ra(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ul(n,r,o,u,m,g){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var C=n.entanglements,O=n.expirationTimes,V=n.hiddenUpdates;for(o=b&~o;0<o;){var Z=31-xe(o),te=1<<Z;C[Z]=0,O[Z]=-1;var q=V[Z];if(q!==null)for(V[Z]=null,Z=0;Z<q.length;Z++){var H=q[Z];H!==null&&(H.lane&=-536870913)}o&=~te}u!==0&&De(n,u,0),g!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=g&~(b&~r))}function De(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-xe(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function wt(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-xe(o),m=1<<u;m&r|n[u]&r&&(n[u]|=r),o&=~m}}function Dt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Wt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Va(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:Vy(n.type))}function jt(n,r){var o=re.p;try{return re.p=n,r()}finally{re.p=o}}var Rt=Math.random().toString(36).slice(2),At="__reactFiber$"+Rt,ct="__reactProps$"+Rt,Ht="__reactContainer$"+Rt,Tr="__reactEvents$"+Rt,Ni="__reactListeners$"+Rt,cp="__reactHandles$"+Rt,up="__reactResources$"+Rt,js="__reactMarker$"+Rt;function Du(n){delete n[At],delete n[ct],delete n[Tr],delete n[Ni],delete n[cp]}function kr(n){var r=n[At];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Ht]||o[At]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=Ry(n);n!==null;){if(o=n[At])return o;n=Ry(n)}return r}n=o,o=n.parentNode}return null}function Cr(n){if(n=n[At]||n[Ht]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Bs(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function Er(n){var r=n[up];return r||(r=n[up]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Gt(n){n[js]=!0}var dp=new Set,fp={};function qa(n,r){xr(n,r),xr(n+"Capture",r)}function xr(n,r){for(fp[n]=r,n=0;n<r.length;n++)dp.add(r[n])}var AC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hp={},mp={};function _C(n){return hn.call(mp,n)?!0:hn.call(hp,n)?!1:AC.test(n)?mp[n]=!0:(hp[n]=!0,!1)}function dl(n,r,o){if(_C(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function fl(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Di(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}var Pu,pp;function wr(n){if(Pu===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Pu=r&&r[1]||"",pp=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pu+n+pp}var Mu=!1;function Lu(n,r){if(!n||Mu)return"";Mu=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(H){var q=H}Reflect.construct(n,[],te)}else{try{te.call()}catch(H){q=H}n.call(te.prototype)}}else{try{throw Error()}catch(H){q=H}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),b=g[0],C=g[1];if(b&&C){var O=b.split(`
`),V=C.split(`
`);for(m=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;m<V.length&&!V[m].includes("DetermineComponentFrameRoot");)m++;if(u===O.length||m===V.length)for(u=O.length-1,m=V.length-1;1<=u&&0<=m&&O[u]!==V[m];)m--;for(;1<=u&&0<=m;u--,m--)if(O[u]!==V[m]){if(u!==1||m!==1)do if(u--,m--,0>m||O[u]!==V[m]){var Z=`
`+O[u].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=u&&0<=m);break}}}finally{Mu=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?wr(o):""}function OC(n){switch(n.tag){case 26:case 27:case 5:return wr(n.type);case 16:return wr("Lazy");case 13:return wr("Suspense");case 19:return wr("SuspenseList");case 0:case 15:return Lu(n.type,!1);case 11:return Lu(n.type.render,!1);case 1:return Lu(n.type,!0);case 31:return wr("Activity");default:return""}}function gp(n){try{var r="";do r+=OC(n),n=n.return;while(n);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function jn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vp(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function NC(n){var r=vp(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),u=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,g=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return m.call(this)},set:function(b){u=""+b,g.call(this,b)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function hl(n){n._valueTracker||(n._valueTracker=NC(n))}function yp(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=vp(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function ml(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var DC=/[\n"\\]/g;function Bn(n){return n.replace(DC,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Uu(n,r,o,u,m,g,b,C){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),r!=null?b==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+jn(r)):n.value!==""+jn(r)&&(n.value=""+jn(r)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),r!=null?Iu(n,b,jn(r)):o!=null?Iu(n,b,jn(o)):u!=null&&n.removeAttribute("value"),m==null&&g!=null&&(n.defaultChecked=!!g),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+jn(C):n.removeAttribute("name")}function bp(n,r,o,u,m,g,b,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;o=o!=null?""+jn(o):"",r=r!=null?""+jn(r):o,C||r===n.value||(n.value=r),n.defaultValue=r}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=C?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b)}function Iu(n,r,o){r==="number"&&ml(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Rr(n,r,o,u){if(n=n.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=r.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+jn(o),r=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}r!==null||n[m].disabled||(r=n[m])}r!==null&&(r.selected=!0)}}function Sp(n,r,o){if(r!=null&&(r=""+jn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+jn(o):""}function Tp(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(a(92));if(Re(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=jn(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Ar(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var PC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kp(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||PC.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Cp(n,r,o){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in r)u=r[m],r.hasOwnProperty(m)&&o[m]!==u&&kp(n,m,u)}else for(var g in r)r.hasOwnProperty(g)&&kp(n,g,r[g])}function ju(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pl(n){return LC.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Bu=null;function zu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _r=null,Or=null;function Ep(n){var r=Cr(n);if(r&&(n=r.stateNode)){var o=n[ct]||null;e:switch(n=r.stateNode,r.type){case"input":if(Uu(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var m=u[ct]||null;if(!m)throw Error(a(90));Uu(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&yp(u)}break e;case"textarea":Sp(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Rr(n,!!o.multiple,r,!1)}}}var Fu=!1;function xp(n,r,o){if(Fu)return n(r,o);Fu=!0;try{var u=n(r);return u}finally{if(Fu=!1,(_r!==null||Or!==null)&&(ec(),_r&&(r=_r,n=Or,Or=_r=null,Ep(r),n)))for(r=0;r<n.length;r++)Ep(n[r])}}function zs(n,r){var o=n.stateNode;if(o===null)return null;var u=o[ct]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,r,typeof o));return o}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vu=!1;if(Pi)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Vu=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Vu=!1}var sa=null,qu=null,gl=null;function wp(){if(gl)return gl;var n,r=qu,o=r.length,u,m="value"in sa?sa.value:sa.textContent,g=m.length;for(n=0;n<o&&r[n]===m[n];n++);var b=o-n;for(u=1;u<=b&&r[o-u]===m[g-u];u++);return gl=m.slice(n,1<u?1-u:void 0)}function vl(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function yl(){return!0}function Rp(){return!1}function pn(n){function r(o,u,m,g,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(o=n[C],this[C]=o?o(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?yl:Rp,this.isPropagationStopped=Rp,this}return p(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),r}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=pn(Ha),Vs=p({},Ha,{view:0,detail:0}),UC=pn(Vs),Hu,Gu,qs,Sl=p({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qs&&(qs&&n.type==="mousemove"?(Hu=n.screenX-qs.screenX,Gu=n.screenY-qs.screenY):Gu=Hu=0,qs=n),Hu)},movementY:function(n){return"movementY"in n?n.movementY:Gu}}),Ap=pn(Sl),IC=p({},Sl,{dataTransfer:0}),jC=pn(IC),BC=p({},Vs,{relatedTarget:0}),Ku=pn(BC),zC=p({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),FC=pn(zC),VC=p({},Ha,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qC=pn(VC),HC=p({},Ha,{data:0}),_p=pn(HC),GC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QC(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=YC[n])?!!r[n]:!1}function Yu(){return QC}var XC=p({},Vs,{key:function(n){if(n.key){var r=GC[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=vl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?KC[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(n){return n.type==="keypress"?vl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),JC=pn(XC),ZC=p({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Op=pn(ZC),WC=p({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),$C=pn(WC),eE=p({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),tE=pn(eE),nE=p({},Sl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),iE=pn(nE),aE=p({},Ha,{newState:0,oldState:0}),rE=pn(aE),sE=[9,13,27,32],Qu=Pi&&"CompositionEvent"in window,Hs=null;Pi&&"documentMode"in document&&(Hs=document.documentMode);var oE=Pi&&"TextEvent"in window&&!Hs,Np=Pi&&(!Qu||Hs&&8<Hs&&11>=Hs),Dp=" ",Pp=!1;function Mp(n,r){switch(n){case"keyup":return sE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Nr=!1;function lE(n,r){switch(n){case"compositionend":return Lp(r);case"keypress":return r.which!==32?null:(Pp=!0,Dp);case"textInput":return n=r.data,n===Dp&&Pp?null:n;default:return null}}function cE(n,r){if(Nr)return n==="compositionend"||!Qu&&Mp(n,r)?(n=wp(),gl=qu=sa=null,Nr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Np&&r.locale!=="ko"?null:r.data;default:return null}}var uE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Up(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!uE[n.type]:r==="textarea"}function Ip(n,r,o,u){_r?Or?Or.push(u):Or=[u]:_r=u,r=sc(r,"onChange"),0<r.length&&(o=new bl("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var Gs=null,Ks=null;function dE(n){vy(n,0)}function Tl(n){var r=Bs(n);if(yp(r))return n}function jp(n,r){if(n==="change")return r}var Bp=!1;if(Pi){var Xu;if(Pi){var Ju="oninput"in document;if(!Ju){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),Ju=typeof zp.oninput=="function"}Xu=Ju}else Xu=!1;Bp=Xu&&(!document.documentMode||9<document.documentMode)}function Fp(){Gs&&(Gs.detachEvent("onpropertychange",Vp),Ks=Gs=null)}function Vp(n){if(n.propertyName==="value"&&Tl(Ks)){var r=[];Ip(r,Ks,n,zu(n)),xp(dE,r)}}function fE(n,r,o){n==="focusin"?(Fp(),Gs=r,Ks=o,Gs.attachEvent("onpropertychange",Vp)):n==="focusout"&&Fp()}function hE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tl(Ks)}function mE(n,r){if(n==="click")return Tl(r)}function pE(n,r){if(n==="input"||n==="change")return Tl(r)}function gE(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Rn=typeof Object.is=="function"?Object.is:gE;function Ys(n,r){if(Rn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!hn.call(r,m)||!Rn(n[m],r[m]))return!1}return!0}function qp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hp(n,r){var o=qp(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qp(o)}}function Gp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Gp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Kp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ml(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=ml(n.document)}return r}function Zu(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var vE=Pi&&"documentMode"in document&&11>=document.documentMode,Dr=null,Wu=null,Qs=null,$u=!1;function Yp(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$u||Dr==null||Dr!==ml(u)||(u=Dr,"selectionStart"in u&&Zu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Qs&&Ys(Qs,u)||(Qs=u,u=sc(Wu,"onSelect"),0<u.length&&(r=new bl("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Dr)))}function Ga(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Pr={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},ed={},Qp={};Pi&&(Qp=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Ka(n){if(ed[n])return ed[n];if(!Pr[n])return n;var r=Pr[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Qp)return ed[n]=r[o];return n}var Xp=Ka("animationend"),Jp=Ka("animationiteration"),Zp=Ka("animationstart"),yE=Ka("transitionrun"),bE=Ka("transitionstart"),SE=Ka("transitioncancel"),Wp=Ka("transitionend"),$p=new Map,td="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");td.push("scrollEnd");function Xn(n,r){$p.set(n,r),qa(r,[n])}var eg=new WeakMap;function zn(n,r){if(typeof n=="object"&&n!==null){var o=eg.get(n);return o!==void 0?o:(r={value:n,source:r,stack:gp(r)},eg.set(n,r),r)}return{value:n,source:r,stack:gp(r)}}var Fn=[],Mr=0,nd=0;function kl(){for(var n=Mr,r=nd=Mr=0;r<n;){var o=Fn[r];Fn[r++]=null;var u=Fn[r];Fn[r++]=null;var m=Fn[r];Fn[r++]=null;var g=Fn[r];if(Fn[r++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}g!==0&&tg(o,m,g)}}function Cl(n,r,o,u){Fn[Mr++]=n,Fn[Mr++]=r,Fn[Mr++]=o,Fn[Mr++]=u,nd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function id(n,r,o,u){return Cl(n,r,o,u),El(n)}function Lr(n,r){return Cl(n,null,null,r),El(n)}function tg(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(m=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,m&&r!==null&&(m=31-xe(o),n=g.hiddenUpdates,u=n[m],u===null?n[m]=[r]:u.push(r),r.lane=o|536870912),g):null}function El(n){if(50<So)throw So=0,uf=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ur={};function TE(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,r,o,u){return new TE(n,r,o,u)}function ad(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Mi(n,r){var o=n.alternate;return o===null?(o=An(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ng(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function xl(n,r,o,u,m,g){var b=0;if(u=n,typeof n=="function")ad(n)&&(b=1);else if(typeof n=="string")b=C1(n,o,le.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case G:return n=An(31,o,r,m),n.elementType=G,n.lanes=g,n;case S:return Ya(o.children,m,g,r);case T:b=8,m|=24;break;case w:return n=An(12,o,r,m|2),n.elementType=w,n.lanes=g,n;case _:return n=An(13,o,r,m),n.elementType=_,n.lanes=g,n;case B:return n=An(19,o,r,m),n.elementType=B,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:case N:b=10;break e;case L:b=9;break e;case A:b=11;break e;case I:b=14;break e;case F:b=16,u=null;break e}b=29,o=Error(a(130,n===null?"null":typeof n,"")),u=null}return r=An(b,o,r,m),r.elementType=n,r.type=u,r.lanes=g,r}function Ya(n,r,o,u){return n=An(7,n,u,r),n.lanes=o,n}function rd(n,r,o){return n=An(6,n,null,r),n.lanes=o,n}function sd(n,r,o){return r=An(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Ir=[],jr=0,wl=null,Rl=0,Vn=[],qn=0,Qa=null,Li=1,Ui="";function Xa(n,r){Ir[jr++]=Rl,Ir[jr++]=wl,wl=n,Rl=r}function ig(n,r,o){Vn[qn++]=Li,Vn[qn++]=Ui,Vn[qn++]=Qa,Qa=n;var u=Li;n=Ui;var m=32-xe(u)-1;u&=~(1<<m),o+=1;var g=32-xe(r)+m;if(30<g){var b=m-m%5;g=(u&(1<<b)-1).toString(32),u>>=b,m-=b,Li=1<<32-xe(r)+m|o<<m|u,Ui=g+n}else Li=1<<g|o<<m|u,Ui=n}function od(n){n.return!==null&&(Xa(n,1),ig(n,1,0))}function ld(n){for(;n===wl;)wl=Ir[--jr],Ir[jr]=null,Rl=Ir[--jr],Ir[jr]=null;for(;n===Qa;)Qa=Vn[--qn],Vn[qn]=null,Ui=Vn[--qn],Vn[qn]=null,Li=Vn[--qn],Vn[qn]=null}var dn=null,Tt=null,Ze=!1,Ja=null,di=!1,cd=Error(a(519));function Za(n){var r=Error(a(418,""));throw Zs(zn(r,n)),cd}function ag(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[At]=n,r[ct]=u,o){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(o=0;o<ko.length;o++)qe(ko[o],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":qe("invalid",r),bp(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),hl(r);break;case"select":qe("invalid",r);break;case"textarea":qe("invalid",r),Tp(r,u.value,u.defaultValue,u.children),hl(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||Ty(r.textContent,o)?(u.popover!=null&&(qe("beforetoggle",r),qe("toggle",r)),u.onScroll!=null&&qe("scroll",r),u.onScrollEnd!=null&&qe("scrollend",r),u.onClick!=null&&(r.onclick=oc),r=!0):r=!1,r||Za(n)}function rg(n){for(dn=n.return;dn;)switch(dn.tag){case 5:case 13:di=!1;return;case 27:case 3:di=!0;return;default:dn=dn.return}}function Xs(n){if(n!==dn)return!1;if(!Ze)return rg(n),Ze=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||wf(n.type,n.memoizedProps)),o=!o),o&&Tt&&Za(n),rg(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(r===0){Tt=Zn(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;n=n.nextSibling}Tt=null}}else r===27?(r=Tt,ka(n.type)?(n=Of,Of=null,Tt=n):Tt=r):Tt=dn?Zn(n.stateNode.nextSibling):null;return!0}function Js(){Tt=dn=null,Ze=!1}function sg(){var n=Ja;return n!==null&&(yn===null?yn=n:yn.push.apply(yn,n),Ja=null),n}function Zs(n){Ja===null?Ja=[n]:Ja.push(n)}var ud=Q(null),Wa=null,Ii=null;function oa(n,r,o){J(ud,r._currentValue),r._currentValue=o}function ji(n){n._currentValue=ud.current,K(ud)}function dd(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function fd(n,r,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var g=m.dependencies;if(g!==null){var b=m.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=m;for(var O=0;O<r.length;O++)if(C.context===r[O]){g.lanes|=o,C=g.alternate,C!==null&&(C.lanes|=o),dd(g.return,o,n),u||(b=null);break e}g=C.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(a(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),dd(b,o,n),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===n){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function Ws(n,r,o,u){n=null;for(var m=r,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var C=m.type;Rn(m.pendingProps.value,b.value)||(n!==null?n.push(C):n=[C])}}else if(m===Le.current){if(b=m.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Ao):n=[Ao])}m=m.return}n!==null&&fd(r,n,o,u),r.flags|=262144}function Al(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $a(n){Wa=n,Ii=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function sn(n){return og(Wa,n)}function _l(n,r){return Wa===null&&$a(n),og(n,r)}function og(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Ii===null){if(n===null)throw Error(a(308));Ii=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ii=Ii.next=r;return o}var kE=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},CE=t.unstable_scheduleCallback,EE=t.unstable_NormalPriority,Bt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hd(){return{controller:new kE,data:new Map,refCount:0}}function $s(n){n.refCount--,n.refCount===0&&CE(EE,function(){n.controller.abort()})}var eo=null,md=0,Br=0,zr=null;function xE(n,r){if(eo===null){var o=eo=[];md=0,Br=vf(),zr={status:"pending",value:void 0,then:function(u){o.push(u)}}}return md++,r.then(lg,lg),r}function lg(){if(--md===0&&eo!==null){zr!==null&&(zr.status="fulfilled");var n=eo;eo=null,Br=0,zr=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function wE(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var m=0;m<o.length;m++)(0,o[m])(r)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var cg=j.S;j.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&xE(n,r),cg!==null&&cg(n,r)};var er=Q(null);function pd(){var n=er.current;return n!==null?n:ut.pooledCache}function Ol(n,r){r===null?J(er,er.current):J(er,r.pool)}function ug(){var n=pd();return n===null?null:{parent:Bt._currentValue,pool:n}}var to=Error(a(460)),dg=Error(a(474)),Nl=Error(a(542)),gd={then:function(){}};function fg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Dl(){}function hg(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Dl,Dl),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,pg(n),n;default:if(typeof r.status=="string")r.then(Dl,Dl);else{if(n=ut,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=u}},function(u){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,pg(n),n}throw no=r,to}}var no=null;function mg(){if(no===null)throw Error(a(459));var n=no;return no=null,n}function pg(n){if(n===to||n===Nl)throw Error(a(483))}var la=!1;function vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ca(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ua(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var m=u.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),u.pending=r,r=El(n),tg(n,null,o),r}return Cl(n,u,r,o),El(n)}function io(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,wt(n,o)}}function bd(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?m=g=r:g=g.next=r}else m=g=r;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var Sd=!1;function ao(){if(Sd){var n=zr;if(n!==null)throw n}}function ro(n,r,o,u){Sd=!1;var m=n.updateQueue;la=!1;var g=m.firstBaseUpdate,b=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var O=C,V=O.next;O.next=null,b===null?g=V:b.next=V,b=O;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==b&&(C===null?Z.firstBaseUpdate=V:C.next=V,Z.lastBaseUpdate=O))}if(g!==null){var te=m.baseState;b=0,Z=V=O=null,C=g;do{var q=C.lane&-536870913,H=q!==C.lane;if(H?(Ye&q)===q:(u&q)===q){q!==0&&q===Br&&(Sd=!0),Z!==null&&(Z=Z.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Oe=n,we=C;q=r;var it=o;switch(we.tag){case 1:if(Oe=we.payload,typeof Oe=="function"){te=Oe.call(it,te,q);break e}te=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=we.payload,q=typeof Oe=="function"?Oe.call(it,te,q):Oe,q==null)break e;te=p({},te,q);break e;case 2:la=!0}}q=C.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=m.callbacks,H===null?m.callbacks=[q]:H.push(q))}else H={lane:q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?(V=Z=H,O=te):Z=Z.next=H,b|=q;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;H=C,C=H.next,H.next=null,m.lastBaseUpdate=H,m.shared.pending=null}}while(!0);Z===null&&(O=te),m.baseState=O,m.firstBaseUpdate=V,m.lastBaseUpdate=Z,g===null&&(m.shared.lanes=0),ya|=b,n.lanes=b,n.memoizedState=te}}function gg(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function vg(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)gg(o[n],r)}var Fr=Q(null),Pl=Q(0);function yg(n,r){n=Gi,J(Pl,n),J(Fr,r),Gi=n|r.baseLanes}function Td(){J(Pl,Gi),J(Fr,Fr.current)}function kd(){Gi=Pl.current,K(Fr),K(Pl)}var da=0,Ie=null,tt=null,Pt=null,Ml=!1,Vr=!1,tr=!1,Ll=0,so=0,qr=null,RE=0;function _t(){throw Error(a(321))}function Cd(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Rn(n[o],r[o]))return!1;return!0}function Ed(n,r,o,u,m,g){return da=g,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=n===null||n.memoizedState===null?tv:nv,tr=!1,g=o(u,m),tr=!1,Vr&&(g=Sg(r,o,u,m)),bg(n),g}function bg(n){j.H=Fl;var r=tt!==null&&tt.next!==null;if(da=0,Pt=tt=Ie=null,Ml=!1,so=0,qr=null,r)throw Error(a(300));n===null||Kt||(n=n.dependencies,n!==null&&Al(n)&&(Kt=!0))}function Sg(n,r,o,u){Ie=n;var m=0;do{if(Vr&&(qr=null),so=0,Vr=!1,25<=m)throw Error(a(301));if(m+=1,Pt=tt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}j.H=ME,g=r(o,u)}while(Vr);return g}function AE(){var n=j.H,r=n.useState()[0];return r=typeof r.then=="function"?oo(r):r,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Ie.flags|=1024),r}function xd(){var n=Ll!==0;return Ll=0,n}function wd(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function Rd(n){if(Ml){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Ml=!1}da=0,Pt=tt=Ie=null,Vr=!1,so=Ll=0,qr=null}function gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ie.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Mt(){if(tt===null){var n=Ie.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var r=Pt===null?Ie.memoizedState:Pt.next;if(r!==null)Pt=r,tt=n;else{if(n===null)throw Ie.alternate===null?Error(a(467)):Error(a(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Pt===null?Ie.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function Ad(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oo(n){var r=so;return so+=1,qr===null&&(qr=[]),n=hg(qr,n,r),r=Ie,(Pt===null?r.memoizedState:Pt.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?tv:nv),n}function Ul(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return oo(n);if(n.$$typeof===N)return sn(n)}throw Error(a(438,String(n)))}function _d(n){var r=null,o=Ie.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ie.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Ad(),Ie.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=$;return r.index++,o}function Bi(n,r){return typeof r=="function"?r(n):r}function Il(n){var r=Mt();return Od(r,tt,n)}function Od(n,r,o){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var m=n.baseQueue,g=u.pending;if(g!==null){if(m!==null){var b=m.next;m.next=g.next,g.next=b}r.baseQueue=m=g,u.pending=null}if(g=n.baseState,m===null)n.memoizedState=g;else{r=m.next;var C=b=null,O=null,V=r,Z=!1;do{var te=V.lane&-536870913;if(te!==V.lane?(Ye&te)===te:(da&te)===te){var q=V.revertLane;if(q===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),te===Br&&(Z=!0);else if((da&q)===q){V=V.next,q===Br&&(Z=!0);continue}else te={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},O===null?(C=O=te,b=g):O=O.next=te,Ie.lanes|=q,ya|=q;te=V.action,tr&&o(g,te),g=V.hasEagerState?V.eagerState:o(g,te)}else q={lane:te,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},O===null?(C=O=q,b=g):O=O.next=q,Ie.lanes|=te,ya|=te;V=V.next}while(V!==null&&V!==r);if(O===null?b=g:O.next=C,!Rn(g,n.memoizedState)&&(Kt=!0,Z&&(o=zr,o!==null)))throw o;n.memoizedState=g,n.baseState=b,n.baseQueue=O,u.lastRenderedState=g}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Nd(n){var r=Mt(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,g=r.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do g=n(g,b.action),b=b.next;while(b!==m);Rn(g,r.memoizedState)||(Kt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,u]}function Tg(n,r,o){var u=Ie,m=Mt(),g=Ze;if(g){if(o===void 0)throw Error(a(407));o=o()}else o=r();var b=!Rn((tt||m).memoizedState,o);b&&(m.memoizedState=o,Kt=!0),m=m.queue;var C=Eg.bind(null,u,m,n);if(lo(2048,8,C,[n]),m.getSnapshot!==r||b||Pt!==null&&Pt.memoizedState.tag&1){if(u.flags|=2048,Hr(9,jl(),Cg.bind(null,u,m,o,r),null),ut===null)throw Error(a(349));g||(da&124)!==0||kg(u,r,o)}return o}function kg(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Ie.updateQueue,r===null?(r=Ad(),Ie.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Cg(n,r,o,u){r.value=o,r.getSnapshot=u,xg(r)&&wg(n)}function Eg(n,r,o){return o(function(){xg(r)&&wg(n)})}function xg(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Rn(n,o)}catch{return!0}}function wg(n){var r=Lr(n,2);r!==null&&Pn(r,n,2)}function Dd(n){var r=gn();if(typeof n=="function"){var o=n;if(n=o(),tr){Ce(!0);try{o()}finally{Ce(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:n},r}function Rg(n,r,o,u){return n.baseState=o,Od(n,tt,typeof u=="function"?u:Bi)}function _E(n,r,o,u,m){if(zl(n))throw Error(a(485));if(n=r.action,n!==null){var g={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};j.T!==null?o(!0):g.isTransition=!1,u(g),o=r.pending,o===null?(g.next=r.pending=g,Ag(r,g)):(g.next=o.next,r.pending=o.next=g)}}function Ag(n,r){var o=r.action,u=r.payload,m=n.state;if(r.isTransition){var g=j.T,b={};j.T=b;try{var C=o(m,u),O=j.S;O!==null&&O(b,C),_g(n,r,C)}catch(V){Pd(n,r,V)}finally{j.T=g}}else try{g=o(m,u),_g(n,r,g)}catch(V){Pd(n,r,V)}}function _g(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Og(n,r,u)},function(u){return Pd(n,r,u)}):Og(n,r,o)}function Og(n,r,o){r.status="fulfilled",r.value=o,Ng(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,Ag(n,o)))}function Pd(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Ng(r),r=r.next;while(r!==u)}n.action=null}function Ng(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Dg(n,r){return r}function Pg(n,r){if(Ze){var o=ut.formState;if(o!==null){e:{var u=Ie;if(Ze){if(Tt){t:{for(var m=Tt,g=di;m.nodeType!==8;){if(!g){m=null;break t}if(m=Zn(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Tt=Zn(m.nextSibling),u=m.data==="F!";break e}}Za(u)}u=!1}u&&(r=o[0])}}return o=gn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:r},o.queue=u,o=Wg.bind(null,Ie,u),u.dispatch=o,u=Dd(!1),g=jd.bind(null,Ie,!1,u.queue),u=gn(),m={state:r,dispatch:null,action:n,pending:null},u.queue=m,o=_E.bind(null,Ie,m,g,o),m.dispatch=o,u.memoizedState=n,[r,o,!1]}function Mg(n){var r=Mt();return Lg(r,tt,n)}function Lg(n,r,o){if(r=Od(n,r,Dg)[0],n=Il(Bi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=oo(r)}catch(b){throw b===to?Nl:b}else u=r;r=Mt();var m=r.queue,g=m.dispatch;return o!==r.memoizedState&&(Ie.flags|=2048,Hr(9,jl(),OE.bind(null,m,o),null)),[u,g,n]}function OE(n,r){n.action=r}function Ug(n){var r=Mt(),o=tt;if(o!==null)return Lg(r,o,n);Mt(),r=r.memoizedState,o=Mt();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function Hr(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=Ad(),Ie.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function jl(){return{destroy:void 0,resource:void 0}}function Ig(){return Mt().memoizedState}function Bl(n,r,o,u){var m=gn();u=u===void 0?null:u,Ie.flags|=n,m.memoizedState=Hr(1|r,jl(),o,u)}function lo(n,r,o,u){var m=Mt();u=u===void 0?null:u;var g=m.memoizedState.inst;tt!==null&&u!==null&&Cd(u,tt.memoizedState.deps)?m.memoizedState=Hr(r,g,o,u):(Ie.flags|=n,m.memoizedState=Hr(1|r,g,o,u))}function jg(n,r){Bl(8390656,8,n,r)}function Bg(n,r){lo(2048,8,n,r)}function zg(n,r){return lo(4,2,n,r)}function Fg(n,r){return lo(4,4,n,r)}function Vg(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function qg(n,r,o){o=o!=null?o.concat([n]):null,lo(4,4,Vg.bind(null,r,n),o)}function Md(){}function Hg(n,r){var o=Mt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Cd(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function Gg(n,r){var o=Mt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Cd(r,u[1]))return u[0];if(u=n(),tr){Ce(!0);try{n()}finally{Ce(!1)}}return o.memoizedState=[u,r],u}function Ld(n,r,o){return o===void 0||(da&1073741824)!==0?n.memoizedState=r:(n.memoizedState=o,n=Qv(),Ie.lanes|=n,ya|=n,o)}function Kg(n,r,o,u){return Rn(o,r)?o:Fr.current!==null?(n=Ld(n,o,u),Rn(n,r)||(Kt=!0),n):(da&42)===0?(Kt=!0,n.memoizedState=o):(n=Qv(),Ie.lanes|=n,ya|=n,r)}function Yg(n,r,o,u,m){var g=re.p;re.p=g!==0&&8>g?g:8;var b=j.T,C={};j.T=C,jd(n,!1,r,o);try{var O=m(),V=j.S;if(V!==null&&V(C,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=wE(O,u);co(n,r,Z,Dn(n))}else co(n,r,u,Dn(n))}catch(te){co(n,r,{then:function(){},status:"rejected",reason:te},Dn())}finally{re.p=g,j.T=b}}function NE(){}function Ud(n,r,o,u){if(n.tag!==5)throw Error(a(476));var m=Qg(n).queue;Yg(n,m,r,ee,o===null?NE:function(){return Xg(n),o(u)})}function Qg(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:ee},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Xg(n){var r=Qg(n).next.queue;co(n,r,{},Dn())}function Id(){return sn(Ao)}function Jg(){return Mt().memoizedState}function Zg(){return Mt().memoizedState}function DE(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Dn();n=ca(o);var u=ua(r,n,o);u!==null&&(Pn(u,r,o),io(u,r,o)),r={cache:hd()},n.payload=r;return}r=r.return}}function PE(n,r,o){var u=Dn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},zl(n)?$g(r,o):(o=id(n,r,o,u),o!==null&&(Pn(o,n,u),ev(o,r,u)))}function Wg(n,r,o){var u=Dn();co(n,r,o,u)}function co(n,r,o,u){var m={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(zl(n))$g(r,m);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var b=r.lastRenderedState,C=g(b,o);if(m.hasEagerState=!0,m.eagerState=C,Rn(C,b))return Cl(n,r,m,0),ut===null&&kl(),!1}catch{}finally{}if(o=id(n,r,m,u),o!==null)return Pn(o,n,u),ev(o,r,u),!0}return!1}function jd(n,r,o,u){if(u={lane:2,revertLane:vf(),action:u,hasEagerState:!1,eagerState:null,next:null},zl(n)){if(r)throw Error(a(479))}else r=id(n,o,u,2),r!==null&&Pn(r,n,2)}function zl(n){var r=n.alternate;return n===Ie||r!==null&&r===Ie}function $g(n,r){Vr=Ml=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function ev(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,wt(n,o)}}var Fl={readContext:sn,use:Ul,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},tv={readContext:sn,use:Ul,useCallback:function(n,r){return gn().memoizedState=[n,r===void 0?null:r],n},useContext:sn,useEffect:jg,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Bl(4194308,4,Vg.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Bl(4194308,4,n,r)},useInsertionEffect:function(n,r){Bl(4,2,n,r)},useMemo:function(n,r){var o=gn();r=r===void 0?null:r;var u=n();if(tr){Ce(!0);try{n()}finally{Ce(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=gn();if(o!==void 0){var m=o(r);if(tr){Ce(!0);try{o(r)}finally{Ce(!1)}}}else m=r;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=PE.bind(null,Ie,n),[u.memoizedState,n]},useRef:function(n){var r=gn();return n={current:n},r.memoizedState=n},useState:function(n){n=Dd(n);var r=n.queue,o=Wg.bind(null,Ie,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Md,useDeferredValue:function(n,r){var o=gn();return Ld(o,n,r)},useTransition:function(){var n=Dd(!1);return n=Yg.bind(null,Ie,n.queue,!0,!1),gn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=Ie,m=gn();if(Ze){if(o===void 0)throw Error(a(407));o=o()}else{if(o=r(),ut===null)throw Error(a(349));(Ye&124)!==0||kg(u,r,o)}m.memoizedState=o;var g={value:o,getSnapshot:r};return m.queue=g,jg(Eg.bind(null,u,g,n),[n]),u.flags|=2048,Hr(9,jl(),Cg.bind(null,u,g,o,r),null),o},useId:function(){var n=gn(),r=ut.identifierPrefix;if(Ze){var o=Ui,u=Li;o=(u&~(1<<32-xe(u)-1)).toString(32)+o,r="«"+r+"R"+o,o=Ll++,0<o&&(r+="H"+o.toString(32)),r+="»"}else o=RE++,r="«"+r+"r"+o.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:Id,useFormState:Pg,useActionState:Pg,useOptimistic:function(n){var r=gn();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=jd.bind(null,Ie,!0,o),o.dispatch=r,[n,r]},useMemoCache:_d,useCacheRefresh:function(){return gn().memoizedState=DE.bind(null,Ie)}},nv={readContext:sn,use:Ul,useCallback:Hg,useContext:sn,useEffect:Bg,useImperativeHandle:qg,useInsertionEffect:zg,useLayoutEffect:Fg,useMemo:Gg,useReducer:Il,useRef:Ig,useState:function(){return Il(Bi)},useDebugValue:Md,useDeferredValue:function(n,r){var o=Mt();return Kg(o,tt.memoizedState,n,r)},useTransition:function(){var n=Il(Bi)[0],r=Mt().memoizedState;return[typeof n=="boolean"?n:oo(n),r]},useSyncExternalStore:Tg,useId:Jg,useHostTransitionStatus:Id,useFormState:Mg,useActionState:Mg,useOptimistic:function(n,r){var o=Mt();return Rg(o,tt,n,r)},useMemoCache:_d,useCacheRefresh:Zg},ME={readContext:sn,use:Ul,useCallback:Hg,useContext:sn,useEffect:Bg,useImperativeHandle:qg,useInsertionEffect:zg,useLayoutEffect:Fg,useMemo:Gg,useReducer:Nd,useRef:Ig,useState:function(){return Nd(Bi)},useDebugValue:Md,useDeferredValue:function(n,r){var o=Mt();return tt===null?Ld(o,n,r):Kg(o,tt.memoizedState,n,r)},useTransition:function(){var n=Nd(Bi)[0],r=Mt().memoizedState;return[typeof n=="boolean"?n:oo(n),r]},useSyncExternalStore:Tg,useId:Jg,useHostTransitionStatus:Id,useFormState:Ug,useActionState:Ug,useOptimistic:function(n,r){var o=Mt();return tt!==null?Rg(o,tt,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:_d,useCacheRefresh:Zg},Gr=null,uo=0;function Vl(n){var r=uo;return uo+=1,Gr===null&&(Gr=[]),hg(Gr,n,r)}function fo(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function ql(n,r){throw r.$$typeof===v?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function iv(n){var r=n._init;return r(n._payload)}function av(n){function r(U,M){if(n){var z=U.deletions;z===null?(U.deletions=[M],U.flags|=16):z.push(M)}}function o(U,M){if(!n)return null;for(;M!==null;)r(U,M),M=M.sibling;return null}function u(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function m(U,M){return U=Mi(U,M),U.index=0,U.sibling=null,U}function g(U,M,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<M?(U.flags|=67108866,M):z):(U.flags|=67108866,M)):(U.flags|=1048576,M)}function b(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function C(U,M,z,W){return M===null||M.tag!==6?(M=rd(z,U.mode,W),M.return=U,M):(M=m(M,z),M.return=U,M)}function O(U,M,z,W){var ye=z.type;return ye===S?Z(U,M,z.props.children,W,z.key):M!==null&&(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===F&&iv(ye)===M.type)?(M=m(M,z.props),fo(M,z),M.return=U,M):(M=xl(z.type,z.key,z.props,null,U.mode,W),fo(M,z),M.return=U,M)}function V(U,M,z,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=sd(z,U.mode,W),M.return=U,M):(M=m(M,z.children||[]),M.return=U,M)}function Z(U,M,z,W,ye){return M===null||M.tag!==7?(M=Ya(z,U.mode,W,ye),M.return=U,M):(M=m(M,z),M.return=U,M)}function te(U,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=rd(""+M,U.mode,z),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case y:return z=xl(M.type,M.key,M.props,null,U.mode,z),fo(z,M),z.return=U,z;case k:return M=sd(M,U.mode,z),M.return=U,M;case F:var W=M._init;return M=W(M._payload),te(U,M,z)}if(Re(M)||ve(M))return M=Ya(M,U.mode,z,null),M.return=U,M;if(typeof M.then=="function")return te(U,Vl(M),z);if(M.$$typeof===N)return te(U,_l(U,M),z);ql(U,M)}return null}function q(U,M,z,W){var ye=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ye!==null?null:C(U,M,""+z,W);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case y:return z.key===ye?O(U,M,z,W):null;case k:return z.key===ye?V(U,M,z,W):null;case F:return ye=z._init,z=ye(z._payload),q(U,M,z,W)}if(Re(z)||ve(z))return ye!==null?null:Z(U,M,z,W,null);if(typeof z.then=="function")return q(U,M,Vl(z),W);if(z.$$typeof===N)return q(U,M,_l(U,z),W);ql(U,z)}return null}function H(U,M,z,W,ye){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return U=U.get(z)||null,C(M,U,""+W,ye);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case y:return U=U.get(W.key===null?z:W.key)||null,O(M,U,W,ye);case k:return U=U.get(W.key===null?z:W.key)||null,V(M,U,W,ye);case F:var ze=W._init;return W=ze(W._payload),H(U,M,z,W,ye)}if(Re(W)||ve(W))return U=U.get(z)||null,Z(M,U,W,ye,null);if(typeof W.then=="function")return H(U,M,z,Vl(W),ye);if(W.$$typeof===N)return H(U,M,z,_l(M,W),ye);ql(M,W)}return null}function Oe(U,M,z,W){for(var ye=null,ze=null,Te=M,_e=M=0,Qt=null;Te!==null&&_e<z.length;_e++){Te.index>_e?(Qt=Te,Te=null):Qt=Te.sibling;var Je=q(U,Te,z[_e],W);if(Je===null){Te===null&&(Te=Qt);break}n&&Te&&Je.alternate===null&&r(U,Te),M=g(Je,M,_e),ze===null?ye=Je:ze.sibling=Je,ze=Je,Te=Qt}if(_e===z.length)return o(U,Te),Ze&&Xa(U,_e),ye;if(Te===null){for(;_e<z.length;_e++)Te=te(U,z[_e],W),Te!==null&&(M=g(Te,M,_e),ze===null?ye=Te:ze.sibling=Te,ze=Te);return Ze&&Xa(U,_e),ye}for(Te=u(Te);_e<z.length;_e++)Qt=H(Te,U,_e,z[_e],W),Qt!==null&&(n&&Qt.alternate!==null&&Te.delete(Qt.key===null?_e:Qt.key),M=g(Qt,M,_e),ze===null?ye=Qt:ze.sibling=Qt,ze=Qt);return n&&Te.forEach(function(Ra){return r(U,Ra)}),Ze&&Xa(U,_e),ye}function we(U,M,z,W){if(z==null)throw Error(a(151));for(var ye=null,ze=null,Te=M,_e=M=0,Qt=null,Je=z.next();Te!==null&&!Je.done;_e++,Je=z.next()){Te.index>_e?(Qt=Te,Te=null):Qt=Te.sibling;var Ra=q(U,Te,Je.value,W);if(Ra===null){Te===null&&(Te=Qt);break}n&&Te&&Ra.alternate===null&&r(U,Te),M=g(Ra,M,_e),ze===null?ye=Ra:ze.sibling=Ra,ze=Ra,Te=Qt}if(Je.done)return o(U,Te),Ze&&Xa(U,_e),ye;if(Te===null){for(;!Je.done;_e++,Je=z.next())Je=te(U,Je.value,W),Je!==null&&(M=g(Je,M,_e),ze===null?ye=Je:ze.sibling=Je,ze=Je);return Ze&&Xa(U,_e),ye}for(Te=u(Te);!Je.done;_e++,Je=z.next())Je=H(Te,U,_e,Je.value,W),Je!==null&&(n&&Je.alternate!==null&&Te.delete(Je.key===null?_e:Je.key),M=g(Je,M,_e),ze===null?ye=Je:ze.sibling=Je,ze=Je);return n&&Te.forEach(function(L1){return r(U,L1)}),Ze&&Xa(U,_e),ye}function it(U,M,z,W){if(typeof z=="object"&&z!==null&&z.type===S&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case y:e:{for(var ye=z.key;M!==null;){if(M.key===ye){if(ye=z.type,ye===S){if(M.tag===7){o(U,M.sibling),W=m(M,z.props.children),W.return=U,U=W;break e}}else if(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===F&&iv(ye)===M.type){o(U,M.sibling),W=m(M,z.props),fo(W,z),W.return=U,U=W;break e}o(U,M);break}else r(U,M);M=M.sibling}z.type===S?(W=Ya(z.props.children,U.mode,W,z.key),W.return=U,U=W):(W=xl(z.type,z.key,z.props,null,U.mode,W),fo(W,z),W.return=U,U=W)}return b(U);case k:e:{for(ye=z.key;M!==null;){if(M.key===ye)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){o(U,M.sibling),W=m(M,z.children||[]),W.return=U,U=W;break e}else{o(U,M);break}else r(U,M);M=M.sibling}W=sd(z,U.mode,W),W.return=U,U=W}return b(U);case F:return ye=z._init,z=ye(z._payload),it(U,M,z,W)}if(Re(z))return Oe(U,M,z,W);if(ve(z)){if(ye=ve(z),typeof ye!="function")throw Error(a(150));return z=ye.call(z),we(U,M,z,W)}if(typeof z.then=="function")return it(U,M,Vl(z),W);if(z.$$typeof===N)return it(U,M,_l(U,z),W);ql(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(o(U,M.sibling),W=m(M,z),W.return=U,U=W):(o(U,M),W=rd(z,U.mode,W),W.return=U,U=W),b(U)):o(U,M)}return function(U,M,z,W){try{uo=0;var ye=it(U,M,z,W);return Gr=null,ye}catch(Te){if(Te===to||Te===Nl)throw Te;var ze=An(29,Te,null,U.mode);return ze.lanes=W,ze.return=U,ze}finally{}}}var Kr=av(!0),rv=av(!1),Hn=Q(null),fi=null;function fa(n){var r=n.alternate;J(zt,zt.current&1),J(Hn,n),fi===null&&(r===null||Fr.current!==null||r.memoizedState!==null)&&(fi=n)}function sv(n){if(n.tag===22){if(J(zt,zt.current),J(Hn,n),fi===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(fi=n)}}else ha()}function ha(){J(zt,zt.current),J(Hn,Hn.current)}function zi(n){K(Hn),fi===n&&(fi=null),K(zt)}var zt=Q(0);function Hl(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||_f(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Bd(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:p({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var zd={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=Dn(),m=ca(u);m.payload=r,o!=null&&(m.callback=o),r=ua(n,m,u),r!==null&&(Pn(r,n,u),io(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=Dn(),m=ca(u);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=ua(n,m,u),r!==null&&(Pn(r,n,u),io(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Dn(),u=ca(o);u.tag=2,r!=null&&(u.callback=r),r=ua(n,u,o),r!==null&&(Pn(r,n,o),io(r,n,o))}};function ov(n,r,o,u,m,g,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,b):r.prototype&&r.prototype.isPureReactComponent?!Ys(o,u)||!Ys(m,g):!0}function lv(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&zd.enqueueReplaceState(r,r.state,null)}function nr(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=p({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}var Gl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function cv(n){Gl(n)}function uv(n){console.error(n)}function dv(n){Gl(n)}function Kl(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function fv(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Fd(n,r,o){return o=ca(o),o.tag=3,o.payload={element:null},o.callback=function(){Kl(n,r)},o}function hv(n){return n=ca(n),n.tag=3,n}function mv(n,r,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;n.payload=function(){return m(g)},n.callback=function(){fv(r,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){fv(r,o,u),typeof m!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function LE(n,r,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Ws(r,o,m,!0),o=Hn.current,o!==null){switch(o.tag){case 13:return fi===null?ff():o.alternate===null&&kt===0&&(kt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===gd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),mf(n,u,m)),!1;case 22:return o.flags|=65536,u===gd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),mf(n,u,m)),!1}throw Error(a(435,o.tag))}return mf(n,u,m),ff(),!1}if(Ze)return r=Hn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,u!==cd&&(n=Error(a(422),{cause:u}),Zs(zn(n,o)))):(u!==cd&&(r=Error(a(423),{cause:u}),Zs(zn(r,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=zn(u,o),m=Fd(n.stateNode,u,m),bd(n,m),kt!==4&&(kt=2)),!1;var g=Error(a(520),{cause:u});if(g=zn(g,o),bo===null?bo=[g]:bo.push(g),kt!==4&&(kt=2),r===null)return!0;u=zn(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=Fd(o.stateNode,u,n),bd(o,n),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ba===null||!ba.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=hv(m),mv(m,n,o,u),bd(o,m),!1}o=o.return}while(o!==null);return!1}var pv=Error(a(461)),Kt=!1;function $t(n,r,o,u){r.child=n===null?rv(r,null,o,u):Kr(r,n.child,o,u)}function gv(n,r,o,u,m){o=o.render;var g=r.ref;if("ref"in u){var b={};for(var C in u)C!=="ref"&&(b[C]=u[C])}else b=u;return $a(r),u=Ed(n,r,o,b,g,m),C=xd(),n!==null&&!Kt?(wd(n,r,m),Fi(n,r,m)):(Ze&&C&&od(r),r.flags|=1,$t(n,r,u,m),r.child)}function vv(n,r,o,u,m){if(n===null){var g=o.type;return typeof g=="function"&&!ad(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,yv(n,r,g,u,m)):(n=xl(o.type,null,u,r,r.mode,m),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!Xd(n,m)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ys,o(b,u)&&n.ref===r.ref)return Fi(n,r,m)}return r.flags|=1,n=Mi(g,u),n.ref=r.ref,n.return=r,r.child=n}function yv(n,r,o,u,m){if(n!==null){var g=n.memoizedProps;if(Ys(g,u)&&n.ref===r.ref)if(Kt=!1,r.pendingProps=u=g,Xd(n,m))(n.flags&131072)!==0&&(Kt=!0);else return r.lanes=n.lanes,Fi(n,r,m)}return Vd(n,r,o,u,m)}function bv(n,r,o){var u=r.pendingProps,m=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(m=r.child=n.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;r.childLanes=g&~u}else r.childLanes=0,r.child=null;return Sv(n,r,u,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ol(r,g!==null?g.cachePool:null),g!==null?yg(r,g):Td(),sv(r);else return r.lanes=r.childLanes=536870912,Sv(n,r,g!==null?g.baseLanes|o:o,o)}else g!==null?(Ol(r,g.cachePool),yg(r,g),ha(),r.memoizedState=null):(n!==null&&Ol(r,null),Td(),ha());return $t(n,r,m,o),r.child}function Sv(n,r,o,u){var m=pd();return m=m===null?null:{parent:Bt._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&Ol(r,null),Td(),sv(r),n!==null&&Ws(n,r,u,!0),null}function Yl(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Vd(n,r,o,u,m){return $a(r),o=Ed(n,r,o,u,void 0,m),u=xd(),n!==null&&!Kt?(wd(n,r,m),Fi(n,r,m)):(Ze&&u&&od(r),r.flags|=1,$t(n,r,o,m),r.child)}function Tv(n,r,o,u,m,g){return $a(r),r.updateQueue=null,o=Sg(r,u,o,m),bg(n),u=xd(),n!==null&&!Kt?(wd(n,r,g),Fi(n,r,g)):(Ze&&u&&od(r),r.flags|=1,$t(n,r,o,g),r.child)}function kv(n,r,o,u,m){if($a(r),r.stateNode===null){var g=Ur,b=o.contextType;typeof b=="object"&&b!==null&&(g=sn(b)),g=new o(u,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=zd,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=u,g.state=r.memoizedState,g.refs={},vd(r),b=o.contextType,g.context=typeof b=="object"&&b!==null?sn(b):Ur,g.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Bd(r,o,b,u),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&zd.enqueueReplaceState(g,g.state,null),ro(r,u,g,m),ao(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){g=r.stateNode;var C=r.memoizedProps,O=nr(o,C);g.props=O;var V=g.context,Z=o.contextType;b=Ur,typeof Z=="object"&&Z!==null&&(b=sn(Z));var te=o.getDerivedStateFromProps;Z=typeof te=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||V!==b)&&lv(r,g,u,b),la=!1;var q=r.memoizedState;g.state=q,ro(r,u,g,m),ao(),V=r.memoizedState,C||q!==V||la?(typeof te=="function"&&(Bd(r,o,te,u),V=r.memoizedState),(O=la||ov(r,o,O,u,q,V,b))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=V),g.props=u,g.state=V,g.context=b,u=O):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{g=r.stateNode,yd(n,r),b=r.memoizedProps,Z=nr(o,b),g.props=Z,te=r.pendingProps,q=g.context,V=o.contextType,O=Ur,typeof V=="object"&&V!==null&&(O=sn(V)),C=o.getDerivedStateFromProps,(V=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==te||q!==O)&&lv(r,g,u,O),la=!1,q=r.memoizedState,g.state=q,ro(r,u,g,m),ao();var H=r.memoizedState;b!==te||q!==H||la||n!==null&&n.dependencies!==null&&Al(n.dependencies)?(typeof C=="function"&&(Bd(r,o,C,u),H=r.memoizedState),(Z=la||ov(r,o,Z,u,q,H,O)||n!==null&&n.dependencies!==null&&Al(n.dependencies))?(V||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,H,O),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,H,O)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=H),g.props=u,g.state=H,g.context=O,u=Z):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),u=!1)}return g=u,Yl(n,r),u=(r.flags&128)!==0,g||u?(g=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&u?(r.child=Kr(r,n.child,null,m),r.child=Kr(r,null,o,m)):$t(n,r,o,m),r.memoizedState=g.state,n=r.child):n=Fi(n,r,m),n}function Cv(n,r,o,u){return Js(),r.flags|=256,$t(n,r,o,u),r.child}var qd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hd(n){return{baseLanes:n,cachePool:ug()}}function Gd(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Gn),n}function Ev(n,r,o){var u=r.pendingProps,m=!1,g=(r.flags&128)!==0,b;if((b=g)||(b=n!==null&&n.memoizedState===null?!1:(zt.current&2)!==0),b&&(m=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ze){if(m?fa(r):ha(),Ze){var C=Tt,O;if(O=C){e:{for(O=C,C=di;O.nodeType!==8;){if(!C){C=null;break e}if(O=Zn(O.nextSibling),O===null){C=null;break e}}C=O}C!==null?(r.memoizedState={dehydrated:C,treeContext:Qa!==null?{id:Li,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},O=An(18,null,null,0),O.stateNode=C,O.return=r,r.child=O,dn=r,Tt=null,O=!0):O=!1}O||Za(r)}if(C=r.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return _f(C)?r.lanes=32:r.lanes=536870912,null;zi(r)}return C=u.children,u=u.fallback,m?(ha(),m=r.mode,C=Ql({mode:"hidden",children:C},m),u=Ya(u,m,o,null),C.return=r,u.return=r,C.sibling=u,r.child=C,m=r.child,m.memoizedState=Hd(o),m.childLanes=Gd(n,b,o),r.memoizedState=qd,u):(fa(r),Kd(r,C))}if(O=n.memoizedState,O!==null&&(C=O.dehydrated,C!==null)){if(g)r.flags&256?(fa(r),r.flags&=-257,r=Yd(n,r,o)):r.memoizedState!==null?(ha(),r.child=n.child,r.flags|=128,r=null):(ha(),m=u.fallback,C=r.mode,u=Ql({mode:"visible",children:u.children},C),m=Ya(m,C,o,null),m.flags|=2,u.return=r,m.return=r,u.sibling=m,r.child=u,Kr(r,n.child,null,o),u=r.child,u.memoizedState=Hd(o),u.childLanes=Gd(n,b,o),r.memoizedState=qd,r=m);else if(fa(r),_f(C)){if(b=C.nextSibling&&C.nextSibling.dataset,b)var V=b.dgst;b=V,u=Error(a(419)),u.stack="",u.digest=b,Zs({value:u,source:null,stack:null}),r=Yd(n,r,o)}else if(Kt||Ws(n,r,o,!1),b=(o&n.childLanes)!==0,Kt||b){if(b=ut,b!==null&&(u=o&-o,u=(u&42)!==0?1:Dt(u),u=(u&(b.suspendedLanes|o))!==0?0:u,u!==0&&u!==O.retryLane))throw O.retryLane=u,Lr(n,u),Pn(b,n,u),pv;C.data==="$?"||ff(),r=Yd(n,r,o)}else C.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=O.treeContext,Tt=Zn(C.nextSibling),dn=r,Ze=!0,Ja=null,di=!1,n!==null&&(Vn[qn++]=Li,Vn[qn++]=Ui,Vn[qn++]=Qa,Li=n.id,Ui=n.overflow,Qa=r),r=Kd(r,u.children),r.flags|=4096);return r}return m?(ha(),m=u.fallback,C=r.mode,O=n.child,V=O.sibling,u=Mi(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,V!==null?m=Mi(V,m):(m=Ya(m,C,o,null),m.flags|=2),m.return=r,u.return=r,u.sibling=m,r.child=u,u=m,m=r.child,C=n.child.memoizedState,C===null?C=Hd(o):(O=C.cachePool,O!==null?(V=Bt._currentValue,O=O.parent!==V?{parent:V,pool:V}:O):O=ug(),C={baseLanes:C.baseLanes|o,cachePool:O}),m.memoizedState=C,m.childLanes=Gd(n,b,o),r.memoizedState=qd,u):(fa(r),o=n.child,n=o.sibling,o=Mi(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(b=r.deletions,b===null?(r.deletions=[n],r.flags|=16):b.push(n)),r.child=o,r.memoizedState=null,o)}function Kd(n,r){return r=Ql({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Ql(n,r){return n=An(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Yd(n,r,o){return Kr(r,n.child,null,o),n=Kd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function xv(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),dd(n.return,r,o)}function Qd(n,r,o,u,m){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=m)}function wv(n,r,o){var u=r.pendingProps,m=u.revealOrder,g=u.tail;if($t(n,r,u.children,o),u=zt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&xv(n,o,r);else if(n.tag===19)xv(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(J(zt,u),m){case"forwards":for(o=r.child,m=null;o!==null;)n=o.alternate,n!==null&&Hl(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),Qd(r,!1,m,o,g);break;case"backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(n=m.alternate,n!==null&&Hl(n)===null){r.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Qd(r,!0,o,null,g);break;case"together":Qd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Fi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),ya|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(Ws(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,o=Mi(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Mi(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Xd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Al(n)))}function UE(n,r,o){switch(r.tag){case 3:Ge(r,r.stateNode.containerInfo),oa(r,Bt,n.memoizedState.cache),Js();break;case 27:case 5:an(r);break;case 4:Ge(r,r.stateNode.containerInfo);break;case 10:oa(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(fa(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Ev(n,r,o):(fa(r),n=Fi(n,r,o),n!==null?n.sibling:null);fa(r);break;case 19:var m=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Ws(n,r,o,!1),u=(o&r.childLanes)!==0),m){if(u)return wv(n,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),J(zt,zt.current),u)break;return null;case 22:case 23:return r.lanes=0,bv(n,r,o);case 24:oa(r,Bt,n.memoizedState.cache)}return Fi(n,r,o)}function Rv(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)Kt=!0;else{if(!Xd(n,o)&&(r.flags&128)===0)return Kt=!1,UE(n,r,o);Kt=(n.flags&131072)!==0}else Kt=!1,Ze&&(r.flags&1048576)!==0&&ig(r,Rl,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var u=r.elementType,m=u._init;if(u=m(u._payload),r.type=u,typeof u=="function")ad(u)?(n=nr(u,n),r.tag=1,r=kv(null,r,u,n,o)):(r.tag=0,r=Vd(null,r,u,n,o));else{if(u!=null){if(m=u.$$typeof,m===A){r.tag=11,r=gv(null,r,u,n,o);break e}else if(m===I){r.tag=14,r=vv(null,r,u,n,o);break e}}throw r=Xe(u)||u,Error(a(306,r,""))}}return r;case 0:return Vd(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,m=nr(u,r.pendingProps),kv(n,r,u,m,o);case 3:e:{if(Ge(r,r.stateNode.containerInfo),n===null)throw Error(a(387));u=r.pendingProps;var g=r.memoizedState;m=g.element,yd(n,r),ro(r,u,null,o);var b=r.memoizedState;if(u=b.cache,oa(r,Bt,u),u!==g.cache&&fd(r,[Bt],o,!0),ao(),u=b.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=Cv(n,r,u,o);break e}else if(u!==m){m=zn(Error(a(424)),r),Zs(m),r=Cv(n,r,u,o);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Tt=Zn(n.firstChild),dn=r,Ze=!0,Ja=null,di=!0,o=rv(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Js(),u===m){r=Fi(n,r,o);break e}$t(n,r,u,o)}r=r.child}return r;case 26:return Yl(n,r),n===null?(o=Ny(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ze||(o=r.type,n=r.pendingProps,u=lc(ge.current).createElement(o),u[At]=r,u[ct]=n,tn(u,o,n),Gt(u),r.stateNode=u):r.memoizedState=Ny(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return an(r),n===null&&Ze&&(u=r.stateNode=Ay(r.type,r.pendingProps,ge.current),dn=r,di=!0,m=Tt,ka(r.type)?(Of=m,Tt=Zn(u.firstChild)):Tt=m),$t(n,r,r.pendingProps.children,o),Yl(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Ze&&((m=u=Tt)&&(u=u1(u,r.type,r.pendingProps,di),u!==null?(r.stateNode=u,dn=r,Tt=Zn(u.firstChild),di=!1,m=!0):m=!1),m||Za(r)),an(r),m=r.type,g=r.pendingProps,b=n!==null?n.memoizedProps:null,u=g.children,wf(m,g)?u=null:b!==null&&wf(m,b)&&(r.flags|=32),r.memoizedState!==null&&(m=Ed(n,r,AE,null,null,o),Ao._currentValue=m),Yl(n,r),$t(n,r,u,o),r.child;case 6:return n===null&&Ze&&((n=o=Tt)&&(o=d1(o,r.pendingProps,di),o!==null?(r.stateNode=o,dn=r,Tt=null,n=!0):n=!1),n||Za(r)),null;case 13:return Ev(n,r,o);case 4:return Ge(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=Kr(r,null,u,o):$t(n,r,u,o),r.child;case 11:return gv(n,r,r.type,r.pendingProps,o);case 7:return $t(n,r,r.pendingProps,o),r.child;case 8:return $t(n,r,r.pendingProps.children,o),r.child;case 12:return $t(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,oa(r,r.type,u.value),$t(n,r,u.children,o),r.child;case 9:return m=r.type._context,u=r.pendingProps.children,$a(r),m=sn(m),u=u(m),r.flags|=1,$t(n,r,u,o),r.child;case 14:return vv(n,r,r.type,r.pendingProps,o);case 15:return yv(n,r,r.type,r.pendingProps,o);case 19:return wv(n,r,o);case 31:return u=r.pendingProps,o=r.mode,u={mode:u.mode,children:u.children},n===null?(o=Ql(u,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=Mi(n.child,u),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return bv(n,r,o);case 24:return $a(r),u=sn(Bt),n===null?(m=pd(),m===null&&(m=ut,g=hd(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),r.memoizedState={parent:u,cache:m},vd(r),oa(r,Bt,m)):((n.lanes&o)!==0&&(yd(n,r),ro(r,null,null,o),ao()),m=n.memoizedState,g=r.memoizedState,m.parent!==u?(m={parent:u,cache:u},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),oa(r,Bt,u)):(u=g.cache,oa(r,Bt,u),u!==m.cache&&fd(r,[Bt],o,!0))),$t(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function Vi(n){n.flags|=4}function Av(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Uy(r)){if(r=Hn.current,r!==null&&((Ye&4194048)===Ye?fi!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||r!==fi))throw no=gd,dg;n.flags|=8192}}function Xl(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?cl():536870912,n.lanes|=r,Jr|=r)}function ho(n,r){if(!Ze)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function vt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function IE(n,r,o){var u=r.pendingProps;switch(ld(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(r),null;case 1:return vt(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),ji(Bt),ft(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Xs(r)?Vi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,sg())),vt(r),null;case 26:return o=r.memoizedState,n===null?(Vi(r),o!==null?(vt(r),Av(r,o)):(vt(r),r.flags&=-16777217)):o?o!==n.memoizedState?(Vi(r),vt(r),Av(r,o)):(vt(r),r.flags&=-16777217):(n.memoizedProps!==u&&Vi(r),vt(r),r.flags&=-16777217),null;case 27:wn(r),o=ge.current;var m=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Vi(r);else{if(!u){if(r.stateNode===null)throw Error(a(166));return vt(r),null}n=le.current,Xs(r)?ag(r):(n=Ay(m,u,o),r.stateNode=n,Vi(r))}return vt(r),null;case 5:if(wn(r),o=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Vi(r);else{if(!u){if(r.stateNode===null)throw Error(a(166));return vt(r),null}if(n=le.current,Xs(r))ag(r);else{switch(m=lc(ge.current),n){case 1:n=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=m.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?m.createElement(o,{is:u.is}):m.createElement(o)}}n[At]=r,n[ct]=u;e:for(m=r.child;m!==null;){if(m.tag===5||m.tag===6)n.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===r)break e;for(;m.sibling===null;){if(m.return===null||m.return===r)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}r.stateNode=n;e:switch(tn(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Vi(r)}}return vt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Vi(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(a(166));if(n=ge.current,Xs(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,m=dn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[At]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Ty(n.nodeValue,o)),n||Za(r)}else n=lc(n).createTextNode(u),n[At]=r,r.stateNode=n}return vt(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Xs(r),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(a(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));m[At]=r}else Js(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),m=!1}else m=sg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(zi(r),r):(zi(r),null)}if(zi(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=r.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)}return o!==n&&o&&(r.child.flags|=8192),Xl(r,r.updateQueue),vt(r),null;case 4:return ft(),n===null&&Tf(r.stateNode.containerInfo),vt(r),null;case 10:return ji(r.type),vt(r),null;case 19:if(K(zt),m=r.memoizedState,m===null)return vt(r),null;if(u=(r.flags&128)!==0,g=m.rendering,g===null)if(u)ho(m,!1);else{if(kt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(g=Hl(n),g!==null){for(r.flags|=128,ho(m,!1),n=g.updateQueue,r.updateQueue=n,Xl(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)ng(o,n),o=o.sibling;return J(zt,zt.current&1|2),r.child}n=n.sibling}m.tail!==null&&It()>Wl&&(r.flags|=128,u=!0,ho(m,!1),r.lanes=4194304)}else{if(!u)if(n=Hl(g),n!==null){if(r.flags|=128,u=!0,n=n.updateQueue,r.updateQueue=n,Xl(r,n),ho(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!Ze)return vt(r),null}else 2*It()-m.renderingStartTime>Wl&&o!==536870912&&(r.flags|=128,u=!0,ho(m,!1),r.lanes=4194304);m.isBackwards?(g.sibling=r.child,r.child=g):(n=m.last,n!==null?n.sibling=g:r.child=g,m.last=g)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=It(),r.sibling=null,n=zt.current,J(zt,u?n&1|2:n&1),r):(vt(r),null);case 22:case 23:return zi(r),kd(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(vt(r),r.subtreeFlags&6&&(r.flags|=8192)):vt(r),o=r.updateQueue,o!==null&&Xl(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&K(er),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ji(Bt),vt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function jE(n,r){switch(ld(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ji(Bt),ft(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return wn(r),null;case 13:if(zi(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Js()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return K(zt),null;case 4:return ft(),null;case 10:return ji(r.type),null;case 22:case 23:return zi(r),kd(),n!==null&&K(er),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return ji(Bt),null;case 25:return null;default:return null}}function _v(n,r){switch(ld(r),r.tag){case 3:ji(Bt),ft();break;case 26:case 27:case 5:wn(r);break;case 4:ft();break;case 13:zi(r);break;case 19:K(zt);break;case 10:ji(r.type);break;case 22:case 23:zi(r),kd(),n!==null&&K(er);break;case 24:ji(Bt)}}function mo(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var g=o.create,b=o.inst;u=g(),b.destroy=u}o=o.next}while(o!==m)}}catch(C){st(r,r.return,C)}}function ma(n,r,o){try{var u=r.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&n)===n){var b=u.inst,C=b.destroy;if(C!==void 0){b.destroy=void 0,m=r;var O=o,V=C;try{V()}catch(Z){st(m,O,Z)}}}u=u.next}while(u!==g)}}catch(Z){st(r,r.return,Z)}}function Ov(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{vg(r,o)}catch(u){st(n,n.return,u)}}}function Nv(n,r,o){o.props=nr(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){st(n,r,u)}}function po(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){st(n,r,m)}}function hi(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){st(n,r,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){st(n,r,m)}else o.current=null}function Dv(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){st(n,n.return,m)}}function Jd(n,r,o){try{var u=n.stateNode;r1(u,n.type,o,r),u[ct]=r}catch(m){st(n,n.return,m)}}function Pv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ka(n.type)||n.tag===4}function Zd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Pv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ka(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wd(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=oc));else if(u!==4&&(u===27&&ka(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Wd(n,r,o),n=n.sibling;n!==null;)Wd(n,r,o),n=n.sibling}function Jl(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&ka(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Jl(n,r,o),n=n.sibling;n!==null;)Jl(n,r,o),n=n.sibling}function Mv(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);tn(r,u,o),r[At]=n,r[ct]=o}catch(g){st(n,n.return,g)}}var qi=!1,Ot=!1,$d=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function BE(n,r){if(n=n.containerInfo,Ef=mc,n=Kp(n),Zu(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,C=-1,O=-1,V=0,Z=0,te=n,q=null;t:for(;;){for(var H;te!==o||m!==0&&te.nodeType!==3||(C=b+m),te!==g||u!==0&&te.nodeType!==3||(O=b+u),te.nodeType===3&&(b+=te.nodeValue.length),(H=te.firstChild)!==null;)q=te,te=H;for(;;){if(te===n)break t;if(q===o&&++V===m&&(C=b),q===g&&++Z===u&&(O=b),(H=te.nextSibling)!==null)break;te=q,q=te.parentNode}te=H}o=C===-1||O===-1?null:{start:C,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(xf={focusedElem:n,selectionRange:o},mc=!1,Yt=r;Yt!==null;)if(r=Yt,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Yt=n;else for(;Yt!==null;){switch(r=Yt,g=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=r,m=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Oe=nr(o.type,m,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Oe,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(we){st(o,o.return,we)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)Af(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Af(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,Yt=n;break}Yt=r.return}}function Uv(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:pa(n,o),u&4&&mo(5,o);break;case 1:if(pa(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(b){st(o,o.return,b)}else{var m=nr(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(m,r,n.__reactInternalSnapshotBeforeUpdate)}catch(b){st(o,o.return,b)}}u&64&&Ov(o),u&512&&po(o,o.return);break;case 3:if(pa(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{vg(n,r)}catch(b){st(o,o.return,b)}}break;case 27:r===null&&u&4&&Mv(o);case 26:case 5:pa(n,o),r===null&&u&4&&Dv(o),u&512&&po(o,o.return);break;case 12:pa(n,o);break;case 13:pa(n,o),u&4&&Bv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=QE.bind(null,o),f1(n,o))));break;case 22:if(u=o.memoizedState!==null||qi,!u){r=r!==null&&r.memoizedState!==null||Ot,m=qi;var g=Ot;qi=u,(Ot=r)&&!g?ga(n,o,(o.subtreeFlags&8772)!==0):pa(n,o),qi=m,Ot=g}break;case 30:break;default:pa(n,o)}}function Iv(n){var r=n.alternate;r!==null&&(n.alternate=null,Iv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Du(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var mt=null,vn=!1;function Hi(n,r,o){for(o=o.child;o!==null;)jv(n,r,o),o=o.sibling}function jv(n,r,o){if(de&&typeof de.onCommitFiberUnmount=="function")try{de.onCommitFiberUnmount(pe,o)}catch{}switch(o.tag){case 26:Ot||hi(o,r),Hi(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ot||hi(o,r);var u=mt,m=vn;ka(o.type)&&(mt=o.stateNode,vn=!1),Hi(n,r,o),Eo(o.stateNode),mt=u,vn=m;break;case 5:Ot||hi(o,r);case 6:if(u=mt,m=vn,mt=null,Hi(n,r,o),mt=u,vn=m,mt!==null)if(vn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(o.stateNode)}catch(g){st(o,r,g)}else try{mt.removeChild(o.stateNode)}catch(g){st(o,r,g)}break;case 18:mt!==null&&(vn?(n=mt,wy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Do(n)):wy(mt,o.stateNode));break;case 4:u=mt,m=vn,mt=o.stateNode.containerInfo,vn=!0,Hi(n,r,o),mt=u,vn=m;break;case 0:case 11:case 14:case 15:Ot||ma(2,o,r),Ot||ma(4,o,r),Hi(n,r,o);break;case 1:Ot||(hi(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Nv(o,r,u)),Hi(n,r,o);break;case 21:Hi(n,r,o);break;case 22:Ot=(u=Ot)||o.memoizedState!==null,Hi(n,r,o),Ot=u;break;default:Hi(n,r,o)}}function Bv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Do(n)}catch(o){st(r,r.return,o)}}function zE(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Lv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Lv),r;default:throw Error(a(435,n.tag))}}function ef(n,r){var o=zE(n);r.forEach(function(u){var m=XE.bind(null,n,u);o.has(u)||(o.add(u),u.then(m,m))})}function _n(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],g=n,b=r,C=b;e:for(;C!==null;){switch(C.tag){case 27:if(ka(C.type)){mt=C.stateNode,vn=!1;break e}break;case 5:mt=C.stateNode,vn=!1;break e;case 3:case 4:mt=C.stateNode.containerInfo,vn=!0;break e}C=C.return}if(mt===null)throw Error(a(160));jv(g,b,m),mt=null,vn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)zv(r,n),r=r.sibling}var Jn=null;function zv(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:_n(r,n),On(n),u&4&&(ma(3,n,n.return),mo(3,n),ma(5,n,n.return));break;case 1:_n(r,n),On(n),u&512&&(Ot||o===null||hi(o,o.return)),u&64&&qi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Jn;if(_n(r,n),On(n),u&512&&(Ot||o===null||hi(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[js]||g[At]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),tn(g,u,o),g[At]=n,Gt(g),u=g;break e;case"link":var b=My("link","href",m).get(u+(o.href||""));if(b){for(var C=0;C<b.length;C++)if(g=b[C],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(C,1);break t}}g=m.createElement(u),tn(g,u,o),m.head.appendChild(g);break;case"meta":if(b=My("meta","content",m).get(u+(o.content||""))){for(C=0;C<b.length;C++)if(g=b[C],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(C,1);break t}}g=m.createElement(u),tn(g,u,o),m.head.appendChild(g);break;default:throw Error(a(468,u))}g[At]=n,Gt(g),u=g}n.stateNode=u}else Ly(m,n.type,n.stateNode);else n.stateNode=Py(m,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?Ly(m,n.type,n.stateNode):Py(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Jd(n,n.memoizedProps,o.memoizedProps)}break;case 27:_n(r,n),On(n),u&512&&(Ot||o===null||hi(o,o.return)),o!==null&&u&4&&Jd(n,n.memoizedProps,o.memoizedProps);break;case 5:if(_n(r,n),On(n),u&512&&(Ot||o===null||hi(o,o.return)),n.flags&32){m=n.stateNode;try{Ar(m,"")}catch(H){st(n,n.return,H)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,Jd(n,m,o!==null?o.memoizedProps:m)),u&1024&&($d=!0);break;case 6:if(_n(r,n),On(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(H){st(n,n.return,H)}}break;case 3:if(dc=null,m=Jn,Jn=cc(r.containerInfo),_n(r,n),Jn=m,On(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Do(r.containerInfo)}catch(H){st(n,n.return,H)}$d&&($d=!1,Fv(n));break;case 4:u=Jn,Jn=cc(n.stateNode.containerInfo),_n(r,n),On(n),Jn=u;break;case 12:_n(r,n),On(n);break;case 13:_n(r,n),On(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(of=It()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ef(n,u)));break;case 22:m=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,V=qi,Z=Ot;if(qi=V||m,Ot=Z||O,_n(r,n),Ot=Z,qi=V,On(n),u&8192)e:for(r=n.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(o===null||O||qi||Ot||ir(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){O=o=r;try{if(g=O.stateNode,m)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{C=O.stateNode;var te=O.memoizedProps.style,q=te!=null&&te.hasOwnProperty("display")?te.display:null;C.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){st(O,O.return,H)}}}else if(r.tag===6){if(o===null){O=r;try{O.stateNode.nodeValue=m?"":O.memoizedProps}catch(H){st(O,O.return,H)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,ef(n,o))));break;case 19:_n(r,n),On(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ef(n,u)));break;case 30:break;case 21:break;default:_n(r,n),On(n)}}function On(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(Pv(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var m=o.stateNode,g=Zd(n);Jl(n,g,m);break;case 5:var b=o.stateNode;o.flags&32&&(Ar(b,""),o.flags&=-33);var C=Zd(n);Jl(n,C,b);break;case 3:case 4:var O=o.stateNode.containerInfo,V=Zd(n);Wd(n,V,O);break;default:throw Error(a(161))}}catch(Z){st(n,n.return,Z)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Fv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Fv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function pa(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Uv(n,r.alternate,r),r=r.sibling}function ir(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ma(4,r,r.return),ir(r);break;case 1:hi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Nv(r,r.return,o),ir(r);break;case 27:Eo(r.stateNode);case 26:case 5:hi(r,r.return),ir(r);break;case 22:r.memoizedState===null&&ir(r);break;case 30:ir(r);break;default:ir(r)}n=n.sibling}}function ga(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,m=n,g=r,b=g.flags;switch(g.tag){case 0:case 11:case 15:ga(m,g,o),mo(4,g);break;case 1:if(ga(m,g,o),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(V){st(u,u.return,V)}if(u=g,m=u.updateQueue,m!==null){var C=u.stateNode;try{var O=m.shared.hiddenCallbacks;if(O!==null)for(m.shared.hiddenCallbacks=null,m=0;m<O.length;m++)gg(O[m],C)}catch(V){st(u,u.return,V)}}o&&b&64&&Ov(g),po(g,g.return);break;case 27:Mv(g);case 26:case 5:ga(m,g,o),o&&u===null&&b&4&&Dv(g),po(g,g.return);break;case 12:ga(m,g,o);break;case 13:ga(m,g,o),o&&b&4&&Bv(m,g);break;case 22:g.memoizedState===null&&ga(m,g,o),po(g,g.return);break;case 30:break;default:ga(m,g,o)}r=r.sibling}}function tf(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&$s(o))}function nf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&$s(n))}function mi(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Vv(n,r,o,u),r=r.sibling}function Vv(n,r,o,u){var m=r.flags;switch(r.tag){case 0:case 11:case 15:mi(n,r,o,u),m&2048&&mo(9,r);break;case 1:mi(n,r,o,u);break;case 3:mi(n,r,o,u),m&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&$s(n)));break;case 12:if(m&2048){mi(n,r,o,u),n=r.stateNode;try{var g=r.memoizedProps,b=g.id,C=g.onPostCommit;typeof C=="function"&&C(b,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){st(r,r.return,O)}}else mi(n,r,o,u);break;case 13:mi(n,r,o,u);break;case 23:break;case 22:g=r.stateNode,b=r.alternate,r.memoizedState!==null?g._visibility&2?mi(n,r,o,u):go(n,r):g._visibility&2?mi(n,r,o,u):(g._visibility|=2,Yr(n,r,o,u,(r.subtreeFlags&10256)!==0)),m&2048&&tf(b,r);break;case 24:mi(n,r,o,u),m&2048&&nf(r.alternate,r);break;default:mi(n,r,o,u)}}function Yr(n,r,o,u,m){for(m=m&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=n,b=r,C=o,O=u,V=b.flags;switch(b.tag){case 0:case 11:case 15:Yr(g,b,C,O,m),mo(8,b);break;case 23:break;case 22:var Z=b.stateNode;b.memoizedState!==null?Z._visibility&2?Yr(g,b,C,O,m):go(g,b):(Z._visibility|=2,Yr(g,b,C,O,m)),m&&V&2048&&tf(b.alternate,b);break;case 24:Yr(g,b,C,O,m),m&&V&2048&&nf(b.alternate,b);break;default:Yr(g,b,C,O,m)}r=r.sibling}}function go(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,m=u.flags;switch(u.tag){case 22:go(o,u),m&2048&&tf(u.alternate,u);break;case 24:go(o,u),m&2048&&nf(u.alternate,u);break;default:go(o,u)}r=r.sibling}}var vo=8192;function Qr(n){if(n.subtreeFlags&vo)for(n=n.child;n!==null;)qv(n),n=n.sibling}function qv(n){switch(n.tag){case 26:Qr(n),n.flags&vo&&n.memoizedState!==null&&x1(Jn,n.memoizedState,n.memoizedProps);break;case 5:Qr(n);break;case 3:case 4:var r=Jn;Jn=cc(n.stateNode.containerInfo),Qr(n),Jn=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=vo,vo=16777216,Qr(n),vo=r):Qr(n));break;default:Qr(n)}}function Hv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function yo(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Yt=u,Kv(u,n)}Hv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gv(n),n=n.sibling}function Gv(n){switch(n.tag){case 0:case 11:case 15:yo(n),n.flags&2048&&ma(9,n,n.return);break;case 3:yo(n);break;case 12:yo(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Zl(n)):yo(n);break;default:yo(n)}}function Zl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Yt=u,Kv(u,n)}Hv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ma(8,r,r.return),Zl(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Zl(r));break;default:Zl(r)}n=n.sibling}}function Kv(n,r){for(;Yt!==null;){var o=Yt;switch(o.tag){case 0:case 11:case 15:ma(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:$s(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Yt=u;else e:for(o=n;Yt!==null;){u=Yt;var m=u.sibling,g=u.return;if(Iv(u),u===o){Yt=null;break e}if(m!==null){m.return=g,Yt=m;break e}Yt=g}}}var FE={getCacheForType:function(n){var r=sn(Bt),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o}},VE=typeof WeakMap=="function"?WeakMap:Map,$e=0,ut=null,Ve=null,Ye=0,et=0,Nn=null,va=!1,Xr=!1,af=!1,Gi=0,kt=0,ya=0,ar=0,rf=0,Gn=0,Jr=0,bo=null,yn=null,sf=!1,of=0,Wl=1/0,$l=null,ba=null,en=0,Sa=null,Zr=null,Wr=0,lf=0,cf=null,Yv=null,So=0,uf=null;function Dn(){if(($e&2)!==0&&Ye!==0)return Ye&-Ye;if(j.T!==null){var n=Br;return n!==0?n:vf()}return Va()}function Qv(){Gn===0&&(Gn=(Ye&536870912)===0||Ze?Qn():536870912);var n=Hn.current;return n!==null&&(n.flags|=32),Gn}function Pn(n,r,o){(n===ut&&(et===2||et===9)||n.cancelPendingCommit!==null)&&($r(n,0),Ta(n,Ye,Gn,!1)),ra(n,o),(($e&2)===0||n!==ut)&&(n===ut&&(($e&2)===0&&(ar|=o),kt===4&&Ta(n,Ye,Gn,!1)),pi(n))}function Xv(n,r,o){if(($e&6)!==0)throw Error(a(327));var u=!o&&(r&124)===0&&(r&n.expiredLanes)===0||ui(n,r),m=u?GE(n,r):hf(n,r,!0),g=u;do{if(m===0){Xr&&!u&&Ta(n,r,0,!1);break}else{if(o=n.current.alternate,g&&!qE(o)){m=hf(n,r,!1),g=!1;continue}if(m===2){if(g=r,n.errorRecoveryDisabledLanes&g)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var C=n;m=bo;var O=C.current.memoizedState.isDehydrated;if(O&&($r(C,b).flags|=256),b=hf(C,b,!1),b!==2){if(af&&!O){C.errorRecoveryDisabledLanes|=g,ar|=g,m=4;break e}g=yn,yn=m,g!==null&&(yn===null?yn=g:yn.push.apply(yn,g))}m=b}if(g=!1,m!==2)continue}}if(m===1){$r(n,0),Ta(n,r,0,!0);break}e:{switch(u=n,g=m,g){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:Ta(u,r,Gn,!va);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(m=of+300-It(),10<m)){if(Ta(u,r,Gn,!va),un(u,0,!0)!==0)break e;u.timeoutHandle=Ey(Jv.bind(null,u,o,yn,$l,sf,r,Gn,ar,Jr,va,g,2,-0,0),m);break e}Jv(u,o,yn,$l,sf,r,Gn,ar,Jr,va,g,0,-0,0)}}break}while(!0);pi(n)}function Jv(n,r,o,u,m,g,b,C,O,V,Z,te,q,H){if(n.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Ro={stylesheets:null,count:0,unsuspend:E1},qv(r),te=w1(),te!==null)){n.cancelPendingCommit=te(iy.bind(null,n,r,g,o,u,m,b,C,O,Z,1,q,H)),Ta(n,g,b,!V);return}iy(n,r,g,o,u,m,b,C,O)}function qE(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],g=m.getSnapshot;m=m.value;try{if(!Rn(g(),m))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ta(n,r,o,u){r&=~rf,r&=~ar,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var m=r;0<m;){var g=31-xe(m),b=1<<g;u[g]=-1,m&=~b}o!==0&&De(n,o,r)}function ec(){return($e&6)===0?(To(0),!1):!0}function df(){if(Ve!==null){if(et===0)var n=Ve.return;else n=Ve,Ii=Wa=null,Rd(n),Gr=null,uo=0,n=Ve;for(;n!==null;)_v(n.alternate,n),n=n.return;Ve=null}}function $r(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,o1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),df(),ut=n,Ve=o=Mi(n.current,null),Ye=r,et=0,Nn=null,va=!1,Xr=ui(n,r),af=!1,Jr=Gn=rf=ar=ya=kt=0,yn=bo=null,sf=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var m=31-xe(u),g=1<<m;r|=n[m],u&=~g}return Gi=r,kl(),o}function Zv(n,r){Ie=null,j.H=Fl,r===to||r===Nl?(r=mg(),et=3):r===dg?(r=mg(),et=4):et=r===pv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Nn=r,Ve===null&&(kt=1,Kl(n,zn(r,n.current)))}function Wv(){var n=j.H;return j.H=Fl,n===null?Fl:n}function $v(){var n=j.A;return j.A=FE,n}function ff(){kt=4,va||(Ye&4194048)!==Ye&&Hn.current!==null||(Xr=!0),(ya&134217727)===0&&(ar&134217727)===0||ut===null||Ta(ut,Ye,Gn,!1)}function hf(n,r,o){var u=$e;$e|=2;var m=Wv(),g=$v();(ut!==n||Ye!==r)&&($l=null,$r(n,r)),r=!1;var b=kt;e:do try{if(et!==0&&Ve!==null){var C=Ve,O=Nn;switch(et){case 8:df(),b=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(r=!0);var V=et;if(et=0,Nn=null,es(n,C,O,V),o&&Xr){b=0;break e}break;default:V=et,et=0,Nn=null,es(n,C,O,V)}}HE(),b=kt;break}catch(Z){Zv(n,Z)}while(!0);return r&&n.shellSuspendCounter++,Ii=Wa=null,$e=u,j.H=m,j.A=g,Ve===null&&(ut=null,Ye=0,kl()),b}function HE(){for(;Ve!==null;)ey(Ve)}function GE(n,r){var o=$e;$e|=2;var u=Wv(),m=$v();ut!==n||Ye!==r?($l=null,Wl=It()+500,$r(n,r)):Xr=ui(n,r);e:do try{if(et!==0&&Ve!==null){r=Ve;var g=Nn;t:switch(et){case 1:et=0,Nn=null,es(n,r,g,1);break;case 2:case 9:if(fg(g)){et=0,Nn=null,ty(r);break}r=function(){et!==2&&et!==9||ut!==n||(et=7),pi(n)},g.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:fg(g)?(et=0,Nn=null,ty(r)):(et=0,Nn=null,es(n,r,g,7));break;case 5:var b=null;switch(Ve.tag){case 26:b=Ve.memoizedState;case 5:case 27:var C=Ve;if(!b||Uy(b)){et=0,Nn=null;var O=C.sibling;if(O!==null)Ve=O;else{var V=C.return;V!==null?(Ve=V,tc(V)):Ve=null}break t}}et=0,Nn=null,es(n,r,g,5);break;case 6:et=0,Nn=null,es(n,r,g,6);break;case 8:df(),kt=6;break e;default:throw Error(a(462))}}KE();break}catch(Z){Zv(n,Z)}while(!0);return Ii=Wa=null,j.H=u,j.A=m,$e=o,Ve!==null?0:(ut=null,Ye=0,kl(),kt)}function KE(){for(;Ve!==null&&!Ls();)ey(Ve)}function ey(n){var r=Rv(n.alternate,n,Gi);n.memoizedProps=n.pendingProps,r===null?tc(n):Ve=r}function ty(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=Tv(o,r,r.pendingProps,r.type,void 0,Ye);break;case 11:r=Tv(o,r,r.pendingProps,r.type.render,r.ref,Ye);break;case 5:Rd(r);default:_v(o,r),r=Ve=ng(r,Gi),r=Rv(o,r,Gi)}n.memoizedProps=n.pendingProps,r===null?tc(n):Ve=r}function es(n,r,o,u){Ii=Wa=null,Rd(r),Gr=null,uo=0;var m=r.return;try{if(LE(n,m,r,o,Ye)){kt=1,Kl(n,zn(o,n.current)),Ve=null;return}}catch(g){if(m!==null)throw Ve=m,g;kt=1,Kl(n,zn(o,n.current)),Ve=null;return}r.flags&32768?(Ze||u===1?n=!0:Xr||(Ye&536870912)!==0?n=!1:(va=n=!0,(u===2||u===9||u===3||u===6)&&(u=Hn.current,u!==null&&u.tag===13&&(u.flags|=16384))),ny(r,n)):tc(r)}function tc(n){var r=n;do{if((r.flags&32768)!==0){ny(r,va);return}n=r.return;var o=IE(r.alternate,r,Gi);if(o!==null){Ve=o;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=n}while(r!==null);kt===0&&(kt=5)}function ny(n,r){do{var o=jE(n.alternate,n);if(o!==null){o.flags&=32767,Ve=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Ve=n;return}Ve=n=o}while(n!==null);kt=6,Ve=null}function iy(n,r,o,u,m,g,b,C,O){n.cancelPendingCommit=null;do nc();while(en!==0);if(($e&6)!==0)throw Error(a(327));if(r!==null){if(r===n.current)throw Error(a(177));if(g=r.lanes|r.childLanes,g|=nd,ul(n,o,g,b,C,O),n===ut&&(Ve=ut=null,Ye=0),Zr=r,Sa=n,Wr=o,lf=g,cf=m,Yv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,JE(Oi,function(){return ly(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,m=re.p,re.p=2,b=$e,$e|=4;try{BE(n,r,o)}finally{$e=b,re.p=m,j.T=u}}en=1,ay(),ry(),sy()}}function ay(){if(en===1){en=0;var n=Sa,r=Zr,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=j.T,j.T=null;var u=re.p;re.p=2;var m=$e;$e|=4;try{zv(r,n);var g=xf,b=Kp(n.containerInfo),C=g.focusedElem,O=g.selectionRange;if(b!==C&&C&&C.ownerDocument&&Gp(C.ownerDocument.documentElement,C)){if(O!==null&&Zu(C)){var V=O.start,Z=O.end;if(Z===void 0&&(Z=V),"selectionStart"in C)C.selectionStart=V,C.selectionEnd=Math.min(Z,C.value.length);else{var te=C.ownerDocument||document,q=te&&te.defaultView||window;if(q.getSelection){var H=q.getSelection(),Oe=C.textContent.length,we=Math.min(O.start,Oe),it=O.end===void 0?we:Math.min(O.end,Oe);!H.extend&&we>it&&(b=it,it=we,we=b);var U=Hp(C,we),M=Hp(C,it);if(U&&M&&(H.rangeCount!==1||H.anchorNode!==U.node||H.anchorOffset!==U.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var z=te.createRange();z.setStart(U.node,U.offset),H.removeAllRanges(),we>it?(H.addRange(z),H.extend(M.node,M.offset)):(z.setEnd(M.node,M.offset),H.addRange(z))}}}}for(te=[],H=C;H=H.parentNode;)H.nodeType===1&&te.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<te.length;C++){var W=te[C];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}mc=!!Ef,xf=Ef=null}finally{$e=m,re.p=u,j.T=o}}n.current=r,en=2}}function ry(){if(en===2){en=0;var n=Sa,r=Zr,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=j.T,j.T=null;var u=re.p;re.p=2;var m=$e;$e|=4;try{Uv(n,r.alternate,r)}finally{$e=m,re.p=u,j.T=o}}en=3}}function sy(){if(en===4||en===3){en=0,yr();var n=Sa,r=Zr,o=Wr,u=Yv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?en=5:(en=0,Zr=Sa=null,oy(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(ba=null),Wt(o),r=r.stateNode,de&&typeof de.onCommitFiberRoot=="function")try{de.onCommitFiberRoot(pe,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=j.T,m=re.p,re.p=2,j.T=null;try{for(var g=n.onRecoverableError,b=0;b<u.length;b++){var C=u[b];g(C.value,{componentStack:C.stack})}}finally{j.T=r,re.p=m}}(Wr&3)!==0&&nc(),pi(n),m=n.pendingLanes,(o&4194090)!==0&&(m&42)!==0?n===uf?So++:(So=0,uf=n):So=0,To(0)}}function oy(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,$s(r)))}function nc(n){return ay(),ry(),sy(),ly()}function ly(){if(en!==5)return!1;var n=Sa,r=lf;lf=0;var o=Wt(Wr),u=j.T,m=re.p;try{re.p=32>o?32:o,j.T=null,o=cf,cf=null;var g=Sa,b=Wr;if(en=0,Zr=Sa=null,Wr=0,($e&6)!==0)throw Error(a(331));var C=$e;if($e|=4,Gv(g.current),Vv(g,g.current,b,o),$e=C,To(0,!1),de&&typeof de.onPostCommitFiberRoot=="function")try{de.onPostCommitFiberRoot(pe,g)}catch{}return!0}finally{re.p=m,j.T=u,oy(n,r)}}function cy(n,r,o){r=zn(o,r),r=Fd(n.stateNode,r,2),n=ua(n,r,2),n!==null&&(ra(n,2),pi(n))}function st(n,r,o){if(n.tag===3)cy(n,n,o);else for(;r!==null;){if(r.tag===3){cy(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ba===null||!ba.has(u))){n=zn(o,n),o=hv(2),u=ua(r,o,2),u!==null&&(mv(o,u,r,n),ra(u,2),pi(u));break}}r=r.return}}function mf(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new VE;var m=new Set;u.set(r,m)}else m=u.get(r),m===void 0&&(m=new Set,u.set(r,m));m.has(o)||(af=!0,m.add(o),n=YE.bind(null,n,r,o),r.then(n,n))}function YE(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ut===n&&(Ye&o)===o&&(kt===4||kt===3&&(Ye&62914560)===Ye&&300>It()-of?($e&2)===0&&$r(n,0):rf|=o,Jr===Ye&&(Jr=0)),pi(n)}function uy(n,r){r===0&&(r=cl()),n=Lr(n,r),n!==null&&(ra(n,r),pi(n))}function QE(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),uy(n,o)}function XE(n,r){var o=0;switch(n.tag){case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(r),uy(n,o)}function JE(n,r){return Fa(n,r)}var ic=null,ts=null,pf=!1,ac=!1,gf=!1,rr=0;function pi(n){n!==ts&&n.next===null&&(ts===null?ic=ts=n:ts=ts.next=n),ac=!0,pf||(pf=!0,WE())}function To(n,r){if(!gf&&ac){gf=!0;do for(var o=!1,u=ic;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var b=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-xe(42|n)+1)-1,g&=m&~(b&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,my(u,g))}else g=Ye,g=un(u,u===ut?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||ui(u,g)||(o=!0,my(u,g));u=u.next}while(o);gf=!1}}function ZE(){dy()}function dy(){ac=pf=!1;var n=0;rr!==0&&(s1()&&(n=rr),rr=0);for(var r=It(),o=null,u=ic;u!==null;){var m=u.next,g=fy(u,r);g===0?(u.next=null,o===null?ic=m:o.next=m,m===null&&(ts=o)):(o=u,(n!==0||(g&3)!==0)&&(ac=!0)),u=m}To(n)}function fy(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var b=31-xe(g),C=1<<b,O=m[b];O===-1?((C&o)===0||(C&u)!==0)&&(m[b]=Us(C,r)):O<=r&&(n.expiredLanes|=C),g&=~C}if(r=ut,o=Ye,o=un(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(et===2||et===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&_i(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ui(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&_i(u),Wt(o)){case 2:case 8:o=Sr;break;case 32:o=Oi;break;case 268435456:o=In;break;default:o=Oi}return u=hy.bind(null,n),o=Fa(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&_i(u),n.callbackPriority=2,n.callbackNode=null,2}function hy(n,r){if(en!==0&&en!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(nc()&&n.callbackNode!==o)return null;var u=Ye;return u=un(n,n===ut?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Xv(n,u,r),fy(n,It()),n.callbackNode!=null&&n.callbackNode===o?hy.bind(null,n):null)}function my(n,r){if(nc())return null;Xv(n,r,!0)}function WE(){l1(function(){($e&6)!==0?Fa(mn,ZE):dy()})}function vf(){return rr===0&&(rr=Qn()),rr}function py(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:pl(""+n)}function gy(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function $E(n,r,o,u,m){if(r==="submit"&&o&&o.stateNode===m){var g=py((m[ct]||null).action),b=u.submitter;b&&(r=(r=b[ct]||null)?py(r.formAction):b.getAttribute("formAction"),r!==null&&(g=r,b=null));var C=new bl("action","action",null,u,m);n.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(rr!==0){var O=b?gy(m,b):new FormData(m);Ud(o,{pending:!0,data:O,method:m.method,action:g},null,O)}}else typeof g=="function"&&(C.preventDefault(),O=b?gy(m,b):new FormData(m),Ud(o,{pending:!0,data:O,method:m.method,action:g},g,O))},currentTarget:m}]})}}for(var yf=0;yf<td.length;yf++){var bf=td[yf],e1=bf.toLowerCase(),t1=bf[0].toUpperCase()+bf.slice(1);Xn(e1,"on"+t1)}Xn(Xp,"onAnimationEnd"),Xn(Jp,"onAnimationIteration"),Xn(Zp,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(yE,"onTransitionRun"),Xn(bE,"onTransitionStart"),Xn(SE,"onTransitionCancel"),Xn(Wp,"onTransitionEnd"),xr("onMouseEnter",["mouseout","mouseover"]),xr("onMouseLeave",["mouseout","mouseover"]),xr("onPointerEnter",["pointerout","pointerover"]),xr("onPointerLeave",["pointerout","pointerover"]),qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ko));function vy(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var g=void 0;if(r)for(var b=u.length-1;0<=b;b--){var C=u[b],O=C.instance,V=C.currentTarget;if(C=C.listener,O!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=V;try{g(m)}catch(Z){Gl(Z)}m.currentTarget=null,g=O}else for(b=0;b<u.length;b++){if(C=u[b],O=C.instance,V=C.currentTarget,C=C.listener,O!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=V;try{g(m)}catch(Z){Gl(Z)}m.currentTarget=null,g=O}}}}function qe(n,r){var o=r[Tr];o===void 0&&(o=r[Tr]=new Set);var u=n+"__bubble";o.has(u)||(yy(r,n,2,!1),o.add(u))}function Sf(n,r,o){var u=0;r&&(u|=4),yy(o,n,u,r)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Tf(n){if(!n[rc]){n[rc]=!0,dp.forEach(function(o){o!=="selectionchange"&&(n1.has(o)||Sf(o,!1,n),Sf(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[rc]||(r[rc]=!0,Sf("selectionchange",!1,r))}}function yy(n,r,o,u){switch(Vy(r)){case 2:var m=_1;break;case 8:m=O1;break;default:m=Lf}o=m.bind(null,r,o,n),m=void 0,!Vu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(r,o,{capture:!0,passive:m}):n.addEventListener(r,o,!0):m!==void 0?n.addEventListener(r,o,{passive:m}):n.addEventListener(r,o,!1)}function kf(n,r,o,u,m){var g=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var C=u.stateNode.containerInfo;if(C===m)break;if(b===4)for(b=u.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;C!==null;){if(b=kr(C),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){u=g=b;continue e}C=C.parentNode}}u=u.return}xp(function(){var V=g,Z=zu(o),te=[];e:{var q=$p.get(n);if(q!==void 0){var H=bl,Oe=n;switch(n){case"keypress":if(vl(o)===0)break e;case"keydown":case"keyup":H=JC;break;case"focusin":Oe="focus",H=Ku;break;case"focusout":Oe="blur",H=Ku;break;case"beforeblur":case"afterblur":H=Ku;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Ap;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=jC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=$C;break;case Xp:case Jp:case Zp:H=FC;break;case Wp:H=tE;break;case"scroll":case"scrollend":H=UC;break;case"wheel":H=iE;break;case"copy":case"cut":case"paste":H=qC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Op;break;case"toggle":case"beforetoggle":H=rE}var we=(r&4)!==0,it=!we&&(n==="scroll"||n==="scrollend"),U=we?q!==null?q+"Capture":null:q;we=[];for(var M=V,z;M!==null;){var W=M;if(z=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||z===null||U===null||(W=zs(M,U),W!=null&&we.push(Co(M,W,z))),it)break;M=M.return}0<we.length&&(q=new H(q,Oe,null,o,Z),te.push({event:q,listeners:we}))}}if((r&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&o!==Bu&&(Oe=o.relatedTarget||o.fromElement)&&(kr(Oe)||Oe[Ht]))break e;if((H||q)&&(q=Z.window===Z?Z:(q=Z.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Oe=o.relatedTarget||o.toElement,H=V,Oe=Oe?kr(Oe):null,Oe!==null&&(it=l(Oe),we=Oe.tag,Oe!==it||we!==5&&we!==27&&we!==6)&&(Oe=null)):(H=null,Oe=V),H!==Oe)){if(we=Ap,W="onMouseLeave",U="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(we=Op,W="onPointerLeave",U="onPointerEnter",M="pointer"),it=H==null?q:Bs(H),z=Oe==null?q:Bs(Oe),q=new we(W,M+"leave",H,o,Z),q.target=it,q.relatedTarget=z,W=null,kr(Z)===V&&(we=new we(U,M+"enter",Oe,o,Z),we.target=z,we.relatedTarget=it,W=we),it=W,H&&Oe)t:{for(we=H,U=Oe,M=0,z=we;z;z=ns(z))M++;for(z=0,W=U;W;W=ns(W))z++;for(;0<M-z;)we=ns(we),M--;for(;0<z-M;)U=ns(U),z--;for(;M--;){if(we===U||U!==null&&we===U.alternate)break t;we=ns(we),U=ns(U)}we=null}else we=null;H!==null&&by(te,q,H,we,!1),Oe!==null&&it!==null&&by(te,it,Oe,we,!0)}}e:{if(q=V?Bs(V):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var ye=jp;else if(Up(q))if(Bp)ye=pE;else{ye=hE;var ze=fE}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?V&&ju(V.elementType)&&(ye=jp):ye=mE;if(ye&&(ye=ye(n,V))){Ip(te,ye,o,Z);break e}ze&&ze(n,q,V),n==="focusout"&&V&&q.type==="number"&&V.memoizedProps.value!=null&&Iu(q,"number",q.value)}switch(ze=V?Bs(V):window,n){case"focusin":(Up(ze)||ze.contentEditable==="true")&&(Dr=ze,Wu=V,Qs=null);break;case"focusout":Qs=Wu=Dr=null;break;case"mousedown":$u=!0;break;case"contextmenu":case"mouseup":case"dragend":$u=!1,Yp(te,o,Z);break;case"selectionchange":if(vE)break;case"keydown":case"keyup":Yp(te,o,Z)}var Te;if(Qu)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Nr?Mp(n,o)&&(_e="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(_e="onCompositionStart");_e&&(Np&&o.locale!=="ko"&&(Nr||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Nr&&(Te=wp()):(sa=Z,qu="value"in sa?sa.value:sa.textContent,Nr=!0)),ze=sc(V,_e),0<ze.length&&(_e=new _p(_e,n,null,o,Z),te.push({event:_e,listeners:ze}),Te?_e.data=Te:(Te=Lp(o),Te!==null&&(_e.data=Te)))),(Te=oE?lE(n,o):cE(n,o))&&(_e=sc(V,"onBeforeInput"),0<_e.length&&(ze=new _p("onBeforeInput","beforeinput",null,o,Z),te.push({event:ze,listeners:_e}),ze.data=Te)),$E(te,n,V,o,Z)}vy(te,r)})}function Co(n,r,o){return{instance:n,listener:r,currentTarget:o}}function sc(n,r){for(var o=r+"Capture",u=[];n!==null;){var m=n,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=zs(n,o),m!=null&&u.unshift(Co(n,m,g)),m=zs(n,r),m!=null&&u.push(Co(n,m,g))),n.tag===3)return u;n=n.return}return[]}function ns(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function by(n,r,o,u,m){for(var g=r._reactName,b=[];o!==null&&o!==u;){var C=o,O=C.alternate,V=C.stateNode;if(C=C.tag,O!==null&&O===u)break;C!==5&&C!==26&&C!==27||V===null||(O=V,m?(V=zs(o,g),V!=null&&b.unshift(Co(o,V,O))):m||(V=zs(o,g),V!=null&&b.push(Co(o,V,O)))),o=o.return}b.length!==0&&n.push({event:r,listeners:b})}var i1=/\r\n?/g,a1=/\u0000|\uFFFD/g;function Sy(n){return(typeof n=="string"?n:""+n).replace(i1,`
`).replace(a1,"")}function Ty(n,r){return r=Sy(r),Sy(n)===r}function oc(){}function nt(n,r,o,u,m,g){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Ar(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Ar(n,""+u);break;case"className":fl(n,"class",u);break;case"tabIndex":fl(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fl(n,o,u);break;case"style":Cp(n,u,g);break;case"data":if(r!=="object"){fl(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=pl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&nt(n,r,"name",m.name,m,null),nt(n,r,"formEncType",m.formEncType,m,null),nt(n,r,"formMethod",m.formMethod,m,null),nt(n,r,"formTarget",m.formTarget,m,null)):(nt(n,r,"encType",m.encType,m,null),nt(n,r,"method",m.method,m,null),nt(n,r,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=pl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=oc);break;case"onScroll":u!=null&&qe("scroll",n);break;case"onScrollEnd":u!=null&&qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=pl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":qe("beforetoggle",n),qe("toggle",n),dl(n,"popover",u);break;case"xlinkActuate":Di(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Di(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Di(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Di(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Di(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Di(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Di(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Di(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Di(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":dl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=MC.get(o)||o,dl(n,o,u))}}function Cf(n,r,o,u,m,g){switch(o){case"style":Cp(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Ar(n,u):(typeof u=="number"||typeof u=="bigint")&&Ar(n,""+u);break;case"onScroll":u!=null&&qe("scroll",n);break;case"onScrollEnd":u!=null&&qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=oc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fp.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),r=o.slice(2,m?o.length-7:void 0),g=n[ct]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(r,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):dl(n,o,u)}}}function tn(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",n),qe("load",n);var u=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:nt(n,r,g,b,o,null)}}m&&nt(n,r,"srcSet",o.srcSet,o,null),u&&nt(n,r,"src",o.src,o,null);return;case"input":qe("invalid",n);var C=g=b=m=null,O=null,V=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":m=Z;break;case"type":b=Z;break;case"checked":O=Z;break;case"defaultChecked":V=Z;break;case"value":g=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,r));break;default:nt(n,r,u,Z,o,null)}}bp(n,g,C,O,V,b,m,!1),hl(n);return;case"select":qe("invalid",n),u=b=g=null;for(m in o)if(o.hasOwnProperty(m)&&(C=o[m],C!=null))switch(m){case"value":g=C;break;case"defaultValue":b=C;break;case"multiple":u=C;default:nt(n,r,m,C,o,null)}r=g,o=b,n.multiple=!!u,r!=null?Rr(n,!!u,r,!1):o!=null&&Rr(n,!!u,o,!0);return;case"textarea":qe("invalid",n),g=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(C=o[b],C!=null))switch(b){case"value":u=C;break;case"defaultValue":m=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:nt(n,r,b,C,o,null)}Tp(n,u,m,g),hl(n);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(n,r,O,u,o,null)}return;case"dialog":qe("beforetoggle",n),qe("toggle",n),qe("cancel",n),qe("close",n);break;case"iframe":case"object":qe("load",n);break;case"video":case"audio":for(u=0;u<ko.length;u++)qe(ko[u],n);break;case"image":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"embed":case"source":case"link":qe("error",n),qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in o)if(o.hasOwnProperty(V)&&(u=o[V],u!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:nt(n,r,V,u,o,null)}return;default:if(ju(r)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&Cf(n,r,Z,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&nt(n,r,C,u,o,null))}function r1(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,b=null,C=null,O=null,V=null,Z=null;for(H in o){var te=o[H];if(o.hasOwnProperty(H)&&te!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":O=te;default:u.hasOwnProperty(H)||nt(n,r,H,null,u,te)}}for(var q in u){var H=u[q];if(te=o[q],u.hasOwnProperty(q)&&(H!=null||te!=null))switch(q){case"type":g=H;break;case"name":m=H;break;case"checked":V=H;break;case"defaultChecked":Z=H;break;case"value":b=H;break;case"defaultValue":C=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,r));break;default:H!==te&&nt(n,r,q,H,u,te)}}Uu(n,b,C,O,V,Z,g,m);return;case"select":H=b=C=q=null;for(g in o)if(O=o[g],o.hasOwnProperty(g)&&O!=null)switch(g){case"value":break;case"multiple":H=O;default:u.hasOwnProperty(g)||nt(n,r,g,null,u,O)}for(m in u)if(g=u[m],O=o[m],u.hasOwnProperty(m)&&(g!=null||O!=null))switch(m){case"value":q=g;break;case"defaultValue":C=g;break;case"multiple":b=g;default:g!==O&&nt(n,r,m,g,u,O)}r=C,o=b,u=H,q!=null?Rr(n,!!o,q,!1):!!u!=!!o&&(r!=null?Rr(n,!!o,r,!0):Rr(n,!!o,o?[]:"",!1));return;case"textarea":H=q=null;for(C in o)if(m=o[C],o.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:nt(n,r,C,null,u,m)}for(b in u)if(m=u[b],g=o[b],u.hasOwnProperty(b)&&(m!=null||g!=null))switch(b){case"value":q=m;break;case"defaultValue":H=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:m!==g&&nt(n,r,b,m,u,g)}Sp(n,q,H);return;case"option":for(var Oe in o)if(q=o[Oe],o.hasOwnProperty(Oe)&&q!=null&&!u.hasOwnProperty(Oe))switch(Oe){case"selected":n.selected=!1;break;default:nt(n,r,Oe,null,u,q)}for(O in u)if(q=u[O],H=o[O],u.hasOwnProperty(O)&&q!==H&&(q!=null||H!=null))switch(O){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:nt(n,r,O,q,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)q=o[we],o.hasOwnProperty(we)&&q!=null&&!u.hasOwnProperty(we)&&nt(n,r,we,null,u,q);for(V in u)if(q=u[V],H=o[V],u.hasOwnProperty(V)&&q!==H&&(q!=null||H!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(a(137,r));break;default:nt(n,r,V,q,u,H)}return;default:if(ju(r)){for(var it in o)q=o[it],o.hasOwnProperty(it)&&q!==void 0&&!u.hasOwnProperty(it)&&Cf(n,r,it,void 0,u,q);for(Z in u)q=u[Z],H=o[Z],!u.hasOwnProperty(Z)||q===H||q===void 0&&H===void 0||Cf(n,r,Z,q,u,H);return}}for(var U in o)q=o[U],o.hasOwnProperty(U)&&q!=null&&!u.hasOwnProperty(U)&&nt(n,r,U,null,u,q);for(te in u)q=u[te],H=o[te],!u.hasOwnProperty(te)||q===H||q==null&&H==null||nt(n,r,te,q,u,H)}var Ef=null,xf=null;function lc(n){return n.nodeType===9?n:n.ownerDocument}function ky(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cy(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function wf(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Rf=null;function s1(){var n=window.event;return n&&n.type==="popstate"?n===Rf?!1:(Rf=n,!0):(Rf=null,!1)}var Ey=typeof setTimeout=="function"?setTimeout:void 0,o1=typeof clearTimeout=="function"?clearTimeout:void 0,xy=typeof Promise=="function"?Promise:void 0,l1=typeof queueMicrotask=="function"?queueMicrotask:typeof xy<"u"?function(n){return xy.resolve(null).then(n).catch(c1)}:Ey;function c1(n){setTimeout(function(){throw n})}function ka(n){return n==="head"}function wy(n,r){var o=r,u=0,m=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var b=n.ownerDocument;if(o&1&&Eo(b.documentElement),o&2&&Eo(b.body),o&4)for(o=b.head,Eo(o),b=o.firstChild;b;){var C=b.nextSibling,O=b.nodeName;b[js]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&b.rel.toLowerCase()==="stylesheet"||o.removeChild(b),b=C}}if(m===0){n.removeChild(g),Do(r);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Do(r)}function Af(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Af(o),Du(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function u1(n,r,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[js])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Zn(n.nextSibling),n===null)break}return null}function d1(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Zn(n.nextSibling),n===null))return null;return n}function _f(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function f1(n,r){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Zn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var Of=null;function Ry(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}function Ay(n,r,o){switch(r=lc(o),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Eo(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Du(n)}var Kn=new Map,_y=new Set;function cc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ki=re.d;re.d={f:h1,r:m1,D:p1,C:g1,L:v1,m:y1,X:S1,S:b1,M:T1};function h1(){var n=Ki.f(),r=ec();return n||r}function m1(n){var r=Cr(n);r!==null&&r.tag===5&&r.type==="form"?Xg(r):Ki.r(n)}var is=typeof document>"u"?null:document;function Oy(n,r,o){var u=is;if(u&&typeof r=="string"&&r){var m=Bn(r);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),_y.has(m)||(_y.add(m),n={rel:n,crossOrigin:o,href:r},u.querySelector(m)===null&&(r=u.createElement("link"),tn(r,"link",n),Gt(r),u.head.appendChild(r)))}}function p1(n){Ki.D(n),Oy("dns-prefetch",n,null)}function g1(n,r){Ki.C(n,r),Oy("preconnect",n,r)}function v1(n,r,o){Ki.L(n,r,o);var u=is;if(u&&n&&r){var m='link[rel="preload"][as="'+Bn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Bn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Bn(o.imageSizes)+'"]')):m+='[href="'+Bn(n)+'"]';var g=m;switch(r){case"style":g=as(n);break;case"script":g=rs(n)}Kn.has(g)||(n=p({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Kn.set(g,n),u.querySelector(m)!==null||r==="style"&&u.querySelector(xo(g))||r==="script"&&u.querySelector(wo(g))||(r=u.createElement("link"),tn(r,"link",n),Gt(r),u.head.appendChild(r)))}}function y1(n,r){Ki.m(n,r);var o=is;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Bn(u)+'"][href="'+Bn(n)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=rs(n)}if(!Kn.has(g)&&(n=p({rel:"modulepreload",href:n},r),Kn.set(g,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(wo(g)))return}u=o.createElement("link"),tn(u,"link",n),Gt(u),o.head.appendChild(u)}}}function b1(n,r,o){Ki.S(n,r,o);var u=is;if(u&&n){var m=Er(u).hoistableStyles,g=as(n);r=r||"default";var b=m.get(g);if(!b){var C={loading:0,preload:null};if(b=u.querySelector(xo(g)))C.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Kn.get(g))&&Nf(n,o);var O=b=u.createElement("link");Gt(O),tn(O,"link",n),O._p=new Promise(function(V,Z){O.onload=V,O.onerror=Z}),O.addEventListener("load",function(){C.loading|=1}),O.addEventListener("error",function(){C.loading|=2}),C.loading|=4,uc(b,r,u)}b={type:"stylesheet",instance:b,count:1,state:C},m.set(g,b)}}}function S1(n,r){Ki.X(n,r);var o=is;if(o&&n){var u=Er(o).hoistableScripts,m=rs(n),g=u.get(m);g||(g=o.querySelector(wo(m)),g||(n=p({src:n,async:!0},r),(r=Kn.get(m))&&Df(n,r),g=o.createElement("script"),Gt(g),tn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function T1(n,r){Ki.M(n,r);var o=is;if(o&&n){var u=Er(o).hoistableScripts,m=rs(n),g=u.get(m);g||(g=o.querySelector(wo(m)),g||(n=p({src:n,async:!0,type:"module"},r),(r=Kn.get(m))&&Df(n,r),g=o.createElement("script"),Gt(g),tn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function Ny(n,r,o,u){var m=(m=ge.current)?cc(m):null;if(!m)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=as(o.href),o=Er(m).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=as(o.href);var g=Er(m).hoistableStyles,b=g.get(n);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,b),(g=m.querySelector(xo(n)))&&!g._p&&(b.instance=g,b.state.loading=5),Kn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Kn.set(n,o),g||k1(m,n,o,b.state))),r&&u===null)throw Error(a(528,""));return b}if(r&&u!==null)throw Error(a(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=rs(o),o=Er(m).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function as(n){return'href="'+Bn(n)+'"'}function xo(n){return'link[rel="stylesheet"]['+n+"]"}function Dy(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function k1(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),tn(r,"link",o),Gt(r),n.head.appendChild(r))}function rs(n){return'[src="'+Bn(n)+'"]'}function wo(n){return"script[async]"+n}function Py(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+Bn(o.href)+'"]');if(u)return r.instance=u,Gt(u),u;var m=p({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Gt(u),tn(u,"style",m),uc(u,o.precedence,n),r.instance=u;case"stylesheet":m=as(o.href);var g=n.querySelector(xo(m));if(g)return r.state.loading|=4,r.instance=g,Gt(g),g;u=Dy(o),(m=Kn.get(m))&&Nf(u,m),g=(n.ownerDocument||n).createElement("link"),Gt(g);var b=g;return b._p=new Promise(function(C,O){b.onload=C,b.onerror=O}),tn(g,"link",u),r.state.loading|=4,uc(g,o.precedence,n),r.instance=g;case"script":return g=rs(o.src),(m=n.querySelector(wo(g)))?(r.instance=m,Gt(m),m):(u=o,(m=Kn.get(g))&&(u=p({},o),Df(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),Gt(m),tn(m,"link",u),n.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,uc(u,o.precedence,n));return r.instance}function uc(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,b=0;b<u.length;b++){var C=u[b];if(C.dataset.precedence===r)g=C;else if(g!==m)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Nf(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Df(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var dc=null;function My(n,r,o){if(dc===null){var u=new Map,m=dc=new Map;m.set(o,u)}else m=dc,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var g=o[m];if(!(g[js]||g[At]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(r)||"";b=n+b;var C=u.get(b);C?C.push(g):u.set(b,[g])}}return u}function Ly(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function C1(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Uy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ro=null;function E1(){}function x1(n,r,o){if(Ro===null)throw Error(a(475));var u=Ro;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=as(o.href),g=n.querySelector(xo(m));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=fc.bind(u),n.then(u,u)),r.state.loading|=4,r.instance=g,Gt(g);return}g=n.ownerDocument||n,o=Dy(o),(m=Kn.get(m))&&Nf(o,m),g=g.createElement("link"),Gt(g);var b=g;b._p=new Promise(function(C,O){b.onload=C,b.onerror=O}),tn(g,"link",o),r.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=fc.bind(u),n.addEventListener("load",r),n.addEventListener("error",r))}}function w1(){if(Ro===null)throw Error(a(475));var n=Ro;return n.stylesheets&&n.count===0&&Pf(n,n.stylesheets),0<n.count?function(r){var o=setTimeout(function(){if(n.stylesheets&&Pf(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(o)}}:null}function fc(){if(this.count--,this.count===0){if(this.stylesheets)Pf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var hc=null;function Pf(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,hc=new Map,r.forEach(R1,n),hc=null,fc.call(n))}function R1(n,r){if(!(r.state.loading&4)){var o=hc.get(n);if(o)var u=o.get(null);else{o=new Map,hc.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var b=m[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=r.instance,b=m.getAttribute("data-precedence"),g=o.get(b)||u,g===u&&o.set(null,m),o.set(b,m),this.count++,u=fc.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),r.state.loading|=4}}var Ao={$$typeof:N,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function A1(n,r,o,u,m,g,b,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Is(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Is(0),this.hiddenUpdates=Is(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Iy(n,r,o,u,m,g,b,C,O,V,Z,te){return n=new A1(n,r,o,b,C,O,V,te),r=1,g===!0&&(r|=24),g=An(3,null,null,r),n.current=g,g.stateNode=n,r=hd(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:r},vd(g),n}function jy(n){return n?(n=Ur,n):Ur}function By(n,r,o,u,m,g){m=jy(m),u.context===null?u.context=m:u.pendingContext=m,u=ca(r),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=ua(n,u,r),o!==null&&(Pn(o,n,r),io(o,n,r))}function zy(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Mf(n,r){zy(n,r),(n=n.alternate)&&zy(n,r)}function Fy(n){if(n.tag===13){var r=Lr(n,67108864);r!==null&&Pn(r,n,67108864),Mf(n,67108864)}}var mc=!0;function _1(n,r,o,u){var m=j.T;j.T=null;var g=re.p;try{re.p=2,Lf(n,r,o,u)}finally{re.p=g,j.T=m}}function O1(n,r,o,u){var m=j.T;j.T=null;var g=re.p;try{re.p=8,Lf(n,r,o,u)}finally{re.p=g,j.T=m}}function Lf(n,r,o,u){if(mc){var m=Uf(u);if(m===null)kf(n,r,u,pc,o),qy(n,u);else if(D1(m,n,r,o,u))u.stopPropagation();else if(qy(n,u),r&4&&-1<N1.indexOf(n)){for(;m!==null;){var g=Cr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=St(g.pendingLanes);if(b!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;b;){var O=1<<31-xe(b);C.entanglements[1]|=O,b&=~O}pi(g),($e&6)===0&&(Wl=It()+500,To(0))}}break;case 13:C=Lr(g,2),C!==null&&Pn(C,g,2),ec(),Mf(g,2)}if(g=Uf(u),g===null&&kf(n,r,u,pc,o),g===m)break;m=g}m!==null&&u.stopPropagation()}else kf(n,r,u,null,o)}}function Uf(n){return n=zu(n),If(n)}var pc=null;function If(n){if(pc=null,n=kr(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return pc=n,null}function Vy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(br()){case mn:return 2;case Sr:return 8;case Oi:case qt:return 32;case In:return 268435456;default:return 32}default:return 32}}var jf=!1,Ca=null,Ea=null,xa=null,_o=new Map,Oo=new Map,wa=[],N1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qy(n,r){switch(n){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":_o.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(r.pointerId)}}function No(n,r,o,u,m,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},r!==null&&(r=Cr(r),r!==null&&Fy(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),n)}function D1(n,r,o,u,m){switch(r){case"focusin":return Ca=No(Ca,n,r,o,u,m),!0;case"dragenter":return Ea=No(Ea,n,r,o,u,m),!0;case"mouseover":return xa=No(xa,n,r,o,u,m),!0;case"pointerover":var g=m.pointerId;return _o.set(g,No(_o.get(g)||null,n,r,o,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Oo.set(g,No(Oo.get(g)||null,n,r,o,u,m)),!0}return!1}function Hy(n){var r=kr(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,jt(n.priority,function(){if(o.tag===13){var u=Dn();u=Dt(u);var m=Lr(o,u);m!==null&&Pn(m,o,u),Mf(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gc(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Uf(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Bu=u,o.target.dispatchEvent(u),Bu=null}else return r=Cr(o),r!==null&&Fy(r),n.blockedOn=o,!1;r.shift()}return!0}function Gy(n,r,o){gc(n)&&o.delete(r)}function P1(){jf=!1,Ca!==null&&gc(Ca)&&(Ca=null),Ea!==null&&gc(Ea)&&(Ea=null),xa!==null&&gc(xa)&&(xa=null),_o.forEach(Gy),Oo.forEach(Gy)}function vc(n,r){n.blockedOn===r&&(n.blockedOn=null,jf||(jf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,P1)))}var yc=null;function Ky(n){yc!==n&&(yc=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yc===n&&(yc=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],m=n[r+2];if(typeof u!="function"){if(If(u||o)===null)continue;break}var g=Cr(o);g!==null&&(n.splice(r,3),r-=3,Ud(g,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Do(n){function r(O){return vc(O,n)}Ca!==null&&vc(Ca,n),Ea!==null&&vc(Ea,n),xa!==null&&vc(xa,n),_o.forEach(r),Oo.forEach(r);for(var o=0;o<wa.length;o++){var u=wa[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<wa.length&&(o=wa[0],o.blockedOn===null);)Hy(o),o.blockedOn===null&&wa.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],g=o[u+1],b=m[ct]||null;if(typeof g=="function")b||Ky(o);else if(b){var C=null;if(g&&g.hasAttribute("formAction")){if(m=g,b=g[ct]||null)C=b.formAction;else if(If(m)!==null)continue}else C=b.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),Ky(o)}}}function Bf(n){this._internalRoot=n}bc.prototype.render=Bf.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var o=r.current,u=Dn();By(o,u,n,r,null,null)},bc.prototype.unmount=Bf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;By(n.current,2,null,n,null,null),ec(),r[Ht]=null}};function bc(n){this._internalRoot=n}bc.prototype.unstable_scheduleHydration=function(n){if(n){var r=Va();n={blockedOn:null,target:n,priority:r};for(var o=0;o<wa.length&&r!==0&&r<wa[o].priority;o++);wa.splice(o,0,n),o===0&&Hy(n)}};var Yy=e.version;if(Yy!=="19.1.0")throw Error(a(527,Yy,"19.1.0"));re.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=h(r),n=n!==null?f(n):null,n=n===null?null:n.stateNode,n};var M1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{pe=Sc.inject(M1),de=Sc}catch{}}return Mo.createRoot=function(n,r){if(!s(n))throw Error(a(299));var o=!1,u="",m=cv,g=uv,b=dv,C=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(C=r.unstable_transitionCallbacks)),r=Iy(n,1,!1,null,null,o,u,m,g,b,C,null),n[Ht]=r.current,Tf(n),new Bf(r)},Mo.hydrateRoot=function(n,r,o){if(!s(n))throw Error(a(299));var u=!1,m="",g=cv,b=uv,C=dv,O=null,V=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(O=o.unstable_transitionCallbacks),o.formState!==void 0&&(V=o.formState)),r=Iy(n,1,!0,r,o??null,u,m,g,b,C,O,V),r.context=jy(null),o=r.current,u=Dn(),u=Dt(u),m=ca(u),m.callback=null,ua(o,m,u),o=u,r.current.lanes=o,ra(r,o),pi(r),n[Ht]=r.current,Tf(n),new bc(r)},Mo.version="19.1.0",Mo}var i0;function K1(){if(i0)return Vf.exports;i0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vf.exports=G1(),Vf.exports}var Y1=K1(),Lo={},a0;function Q1(){if(a0)return Lo;a0=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.parse=c,Lo.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function c(y,k){const S=new l,T=y.length;if(T<2)return S;const w=(k==null?void 0:k.decode)||p;let R=0;do{const L=y.indexOf("=",R);if(L===-1)break;const N=y.indexOf(";",R),A=N===-1?T:N;if(L>A){R=y.lastIndexOf(";",L-1)+1;continue}const _=d(y,R,L),B=h(y,L,_),I=y.slice(_,B);if(S[I]===void 0){let F=d(y,L+1,A),G=h(y,A,F);const $=w(y.slice(F,G));S[I]=$}R=A+1}while(R<T);return S}function d(y,k,S){do{const T=y.charCodeAt(k);if(T!==32&&T!==9)return k}while(++k<S);return S}function h(y,k,S){for(;k>S;){const T=y.charCodeAt(--k);if(T!==32&&T!==9)return k+1}return S}function f(y,k,S){const T=(S==null?void 0:S.encode)||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const w=T(k);if(!e.test(w))throw new TypeError(`argument val is invalid: ${k}`);let R=y+"="+w;if(!S)return R;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);R+="; Max-Age="+S.maxAge}if(S.domain){if(!i.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);R+="; Domain="+S.domain}if(S.path){if(!a.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);R+="; Path="+S.path}if(S.expires){if(!v(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);R+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(R+="; HttpOnly"),S.secure&&(R+="; Secure"),S.partitioned&&(R+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return R}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function v(y){return s.call(y)==="[object Date]"}return Lo}Q1();var r0="popstate";function X1(t={}){function e(a,s){let{pathname:l,search:c,hash:d}=a.location;return Rh("",{pathname:l,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(a,s){return typeof s=="string"?s:Jo(s)}return Z1(e,i,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ai(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J1(){return Math.random().toString(36).substring(2,10)}function s0(t,e){return{usr:t.state,key:t.key,idx:e}}function Rh(t,e,i=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?As(e):e,state:i,key:e&&e.key||a||J1()}}function Jo({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function As(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function Z1(t,e,i,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",h=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function v(){d="POP";let w=p(),R=w==null?null:w-f;f=w,h&&h({action:d,location:T.location,delta:R})}function y(w,R){d="PUSH";let L=Rh(T.location,w,R);f=p()+1;let N=s0(L,f),A=T.createHref(L);try{c.pushState(N,"",A)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(A)}l&&h&&h({action:d,location:T.location,delta:1})}function k(w,R){d="REPLACE";let L=Rh(T.location,w,R);f=p();let N=s0(L,f),A=T.createHref(L);c.replaceState(N,"",A),l&&h&&h({action:d,location:T.location,delta:0})}function S(w){return W1(w)}let T={get action(){return d},get location(){return t(s,c)},listen(w){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(r0,v),h=w,()=>{s.removeEventListener(r0,v),h=null}},createHref(w){return e(s,w)},createURL:S,encodeLocation(w){let R=S(w);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:y,replace:k,go(w){return c.go(w)}};return T}function W1(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),gt(i,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Jo(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function eS(t,e,i="/"){return $1(t,e,i,!1)}function $1(t,e,i,a){let s=typeof e=="string"?As(e):e,l=na(s.pathname||"/",i);if(l==null)return null;let c=tS(t);ex(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=dx(l);d=cx(c[h],f,a)}return d}function tS(t,e=[],i=[],a=""){let s=(l,c,d)=>{let h={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(gt(h.relativePath.startsWith(a),`Absolute route path "${h.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(a.length));let f=ta([a,h.relativePath]),p=i.concat(h);l.children&&l.children.length>0&&(gt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),tS(l.children,e,p,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:ox(f,l.index),routesMeta:p})};return t.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))s(l,c);else for(let h of nS(l.path))s(l,c,h)}),e}function nS(t){let e=t.split("/");if(e.length===0)return[];let[i,...a]=e,s=i.endsWith("?"),l=i.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=nS(a.join("/")),d=[];return d.push(...c.map(h=>h===""?l:[l,h].join("/"))),s&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function ex(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:lx(e.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var tx=/^:[\w-]+$/,nx=3,ix=2,ax=1,rx=10,sx=-2,o0=t=>t==="*";function ox(t,e){let i=t.split("/"),a=i.length;return i.some(o0)&&(a+=sx),e&&(a+=ix),i.filter(s=>!o0(s)).reduce((s,l)=>s+(tx.test(l)?nx:l===""?ax:rx),a)}function lx(t,e){return t.length===e.length&&t.slice(0,-1).every((a,s)=>a===e[s])?t[t.length-1]-e[e.length-1]:0}function cx(t,e,i=!1){let{routesMeta:a}=t,s={},l="/",c=[];for(let d=0;d<a.length;++d){let h=a[d],f=d===a.length-1,p=l==="/"?e:e.slice(l.length)||"/",v=eu({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),y=h.route;if(!v&&f&&i&&!a[a.length-1].route.index&&(v=eu({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:ta([l,v.pathname]),pathnameBase:px(ta([l,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(l=ta([l,v.pathnameBase]))}return c}function eu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,a]=ux(t.path,t.caseSensitive,t.end),s=e.match(i);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((f,{paramName:p,isOptional:v},y)=>{if(p==="*"){let S=d[y]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const k=d[y];return v&&!k?f[p]=void 0:f[p]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:t}}function ux(t,e=!1,i=!0){ai(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(a.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function dx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ai(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function na(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,a=t.charAt(i);return a&&a!=="/"?null:t.slice(i)||"/"}function fx(t,e="/"){let{pathname:i,search:a="",hash:s=""}=typeof t=="string"?As(t):t;return{pathname:i?i.startsWith("/")?i:hx(i,e):e,search:gx(a),hash:vx(s)}}function hx(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function Kf(t,e,i,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mx(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function wm(t){let e=mx(t);return e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase)}function Rm(t,e,i,a=!1){let s;typeof t=="string"?s=As(t):(s={...t},gt(!s.pathname||!s.pathname.includes("?"),Kf("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),Kf("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),Kf("#","search","hash",s)));let l=t===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=i;else{let v=e.length-1;if(!a&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}d=v>=0?e[v]:"/"}let h=fx(s,d),f=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var ta=t=>t.join("/").replace(/\/\/+/g,"/"),px=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var iS=["POST","PUT","PATCH","DELETE"];new Set(iS);var bx=["GET",...iS];new Set(bx);var _s=x.createContext(null);_s.displayName="DataRouter";var du=x.createContext(null);du.displayName="DataRouterState";var aS=x.createContext({isTransitioning:!1});aS.displayName="ViewTransition";var Sx=x.createContext(new Map);Sx.displayName="Fetchers";var Tx=x.createContext(null);Tx.displayName="Await";var si=x.createContext(null);si.displayName="Navigation";var al=x.createContext(null);al.displayName="Location";var wi=x.createContext({outlet:null,matches:[],isDataRoute:!1});wi.displayName="Route";var Am=x.createContext(null);Am.displayName="RouteError";function kx(t,{relative:e}={}){gt(Os(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=x.useContext(si),{hash:s,pathname:l,search:c}=rl(t,{relative:e}),d=l;return i!=="/"&&(d=l==="/"?i:ta([i,l])),a.createHref({pathname:d,search:c,hash:s})}function Os(){return x.useContext(al)!=null}function Ri(){return gt(Os(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(al).location}var rS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sS(t){x.useContext(si).static||x.useLayoutEffect(t)}function oi(){let{isDataRoute:t}=x.useContext(wi);return t?Lx():Cx()}function Cx(){gt(Os(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(_s),{basename:e,navigator:i}=x.useContext(si),{matches:a}=x.useContext(wi),{pathname:s}=Ri(),l=JSON.stringify(wm(a)),c=x.useRef(!1);return sS(()=>{c.current=!0}),x.useCallback((h,f={})=>{if(ai(c.current,rS),!c.current)return;if(typeof h=="number"){i.go(h);return}let p=Rm(h,JSON.parse(l),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ta([e,p.pathname])),(f.replace?i.replace:i.push)(p,f.state,f)},[e,i,l,s,t])}x.createContext(null);function rl(t,{relative:e}={}){let{matches:i}=x.useContext(wi),{pathname:a}=Ri(),s=JSON.stringify(wm(i));return x.useMemo(()=>Rm(t,JSON.parse(s),a,e==="path"),[t,s,a,e])}function Ex(t,e){return oS(t,e)}function oS(t,e,i,a){var R;gt(Os(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(si),{matches:l}=x.useContext(wi),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let L=p&&p.path||"";lS(h,!p||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let v=Ri(),y;if(e){let L=typeof e=="string"?As(e):e;gt(f==="/"||((R=L.pathname)==null?void 0:R.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${L.pathname}" was given in the \`location\` prop.`),y=L}else y=v;let k=y.pathname||"/",S=k;if(f!=="/"){let L=f.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(L.length).join("/")}let T=eS(t,{pathname:S});ai(p||T!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),ai(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=_x(T&&T.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:ta([f,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:ta([f,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,i,a);return e&&w?x.createElement(al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},w):w}function xx(){let t=Mx(),e=yx(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=x.createElement(x.Fragment,null,x.createElement("p",null,"💿 Hey developer 👋"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:l},"ErrorBoundary")," or"," ",x.createElement("code",{style:l},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),i?x.createElement("pre",{style:s},i):null,c)}var wx=x.createElement(xx,null),Rx=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?x.createElement(wi.Provider,{value:this.props.routeContext},x.createElement(Am.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ax({routeContext:t,match:e,children:i}){let a=x.useContext(_s);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(wi.Provider,{value:t},i)}function _x(t,e=[],i=null,a=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let s=t,l=i==null?void 0:i.errors;if(l!=null){let h=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);gt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let c=!1,d=-1;if(i)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:v}=i,y=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,f,p)=>{let v,y=!1,k=null,S=null;i&&(v=l&&f.route.id?l[f.route.id]:void 0,k=f.route.errorElement||wx,c&&(d<0&&p===0?(lS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):d===p&&(y=!0,S=f.route.hydrateFallbackElement||null)));let T=e.concat(s.slice(0,p+1)),w=()=>{let R;return v?R=k:y?R=S:f.route.Component?R=x.createElement(f.route.Component,null):f.route.element?R=f.route.element:R=h,x.createElement(Ax,{match:f,routeContext:{outlet:h,matches:T,isDataRoute:i!=null},children:R})};return i&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?x.createElement(Rx,{location:i.location,revalidation:i.revalidation,component:k,error:v,children:w(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):w()},null)}function _m(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ox(t){let e=x.useContext(_s);return gt(e,_m(t)),e}function Nx(t){let e=x.useContext(du);return gt(e,_m(t)),e}function Dx(t){let e=x.useContext(wi);return gt(e,_m(t)),e}function Om(t){let e=Dx(t),i=e.matches[e.matches.length-1];return gt(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function Px(){return Om("useRouteId")}function Mx(){var a;let t=x.useContext(Am),e=Nx("useRouteError"),i=Om("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[i]}function Lx(){let{router:t}=Ox("useNavigate"),e=Om("useNavigate"),i=x.useRef(!1);return sS(()=>{i.current=!0}),x.useCallback(async(s,l={})=>{ai(i.current,rS),i.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...l}))},[t,e])}var l0={};function lS(t,e,i){!e&&!l0[t]&&(l0[t]=!0,ai(!1,i))}x.memo(Ux);function Ux({routes:t,future:e,state:i}){return oS(t,void 0,i,e)}function Ix({to:t,replace:e,state:i,relative:a}){gt(Os(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=x.useContext(si);ai(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=x.useContext(wi),{pathname:c}=Ri(),d=oi(),h=Rm(t,wm(l),c,a==="path"),f=JSON.stringify(h);return x.useEffect(()=>{d(JSON.parse(f),{replace:e,state:i,relative:a})},[d,f,a,e,i]),null}function Qi(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jx({basename:t="/",children:e=null,location:i,navigationType:a="POP",navigator:s,static:l=!1}){gt(!Os(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:s,static:l,future:{}}),[c,s,l]);typeof i=="string"&&(i=As(i));let{pathname:h="/",search:f="",hash:p="",state:v=null,key:y="default"}=i,k=x.useMemo(()=>{let S=na(h,c);return S==null?null:{location:{pathname:S,search:f,hash:p,state:v,key:y},navigationType:a}},[c,h,f,p,v,y,a]);return ai(k!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:x.createElement(si.Provider,{value:d},x.createElement(al.Provider,{children:e,value:k}))}function Bx({children:t,location:e}){return Ex(Ah(t),e)}function Ah(t,e=[]){let i=[];return x.Children.forEach(t,(a,s)=>{if(!x.isValidElement(a))return;let l=[...e,s];if(a.type===x.Fragment){i.push.apply(i,Ah(a.props.children,l));return}gt(a.type===Qi,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let c={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(c.children=Ah(a.props.children,l)),i.push(c)}),i}var Pc="get",Mc="application/x-www-form-urlencoded";function fu(t){return t!=null&&typeof t.tagName=="string"}function zx(t){return fu(t)&&t.tagName.toLowerCase()==="button"}function Fx(t){return fu(t)&&t.tagName.toLowerCase()==="form"}function Vx(t){return fu(t)&&t.tagName.toLowerCase()==="input"}function qx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Hx(t,e){return t.button===0&&(!e||e==="_self")&&!qx(t)}var Tc=null;function Gx(){if(Tc===null)try{new FormData(document.createElement("form"),0),Tc=!1}catch{Tc=!0}return Tc}var Kx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yf(t){return t!=null&&!Kx.has(t)?(ai(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mc}"`),null):t}function Yx(t,e){let i,a,s,l,c;if(Fx(t)){let d=t.getAttribute("action");a=d?na(d,e):null,i=t.getAttribute("method")||Pc,s=Yf(t.getAttribute("enctype"))||Mc,l=new FormData(t)}else if(zx(t)||Vx(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(a=h?na(h,e):null,i=t.getAttribute("formmethod")||d.getAttribute("method")||Pc,s=Yf(t.getAttribute("formenctype"))||Yf(d.getAttribute("enctype"))||Mc,l=new FormData(d,t),!Gx()){let{name:f,type:p,value:v}=t;if(p==="image"){let y=f?`${f}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else f&&l.append(f,v)}}else{if(fu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Pc,a=null,s=Mc,c=t}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:i.toLowerCase(),encType:s,formData:l,body:c}}function Nm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Qx(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xx(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Jx(t,e,i){let a=await Promise.all(t.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await Qx(l,i);return c.links?c.links():[]}return[]}));return ew(a.flat(1).filter(Xx).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function c0(t,e,i,a,s,l){let c=(h,f)=>i[f]?h.route.id!==i[f].route.id:!0,d=(h,f)=>{var p;return i[f].pathname!==h.pathname||((p=i[f].route.path)==null?void 0:p.endsWith("*"))&&i[f].params["*"]!==h.params["*"]};return l==="assets"?e.filter((h,f)=>c(h,f)||d(h,f)):l==="data"?e.filter((h,f)=>{var v;let p=a.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=i[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Zx(t,e,{includeHydrateFallback:i}={}){return Wx(t.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),i&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function Wx(t){return[...new Set(t)]}function $x(t){let e={},i=Object.keys(t).sort();for(let a of i)e[a]=t[a];return e}function ew(t,e){let i=new Set;return new Set(e),t.reduce((a,s)=>{let l=JSON.stringify($x(s));return i.has(l)||(i.add(l),a.push({key:l,link:s})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tw=new Set([100,101,204,205]);function nw(t,e){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":e&&na(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function cS(){let t=x.useContext(_s);return Nm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function iw(){let t=x.useContext(du);return Nm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Dm=x.createContext(void 0);Dm.displayName="FrameworkContext";function uS(){let t=x.useContext(Dm);return Nm(t,"You must render this element inside a <HydratedRouter> element"),t}function aw(t,e){let i=x.useContext(Dm),[a,s]=x.useState(!1),[l,c]=x.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:v}=e,y=x.useRef(null);x.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let T=R=>{R.forEach(L=>{c(L.isIntersecting)})},w=new IntersectionObserver(T,{threshold:.5});return y.current&&w.observe(y.current),()=>{w.disconnect()}}},[t]),x.useEffect(()=>{if(a){let T=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(T)}}},[a]);let k=()=>{s(!0)},S=()=>{s(!1),c(!1)};return i?t!=="intent"?[l,y,{}]:[l,y,{onFocus:Uo(d,k),onBlur:Uo(h,S),onMouseEnter:Uo(f,k),onMouseLeave:Uo(p,S),onTouchStart:Uo(v,k)}]:[!1,y,{}]}function Uo(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function rw({page:t,...e}){let{router:i}=cS(),a=x.useMemo(()=>eS(i.routes,t,i.basename),[i.routes,t,i.basename]);return a?x.createElement(ow,{page:t,matches:a,...e}):null}function sw(t){let{manifest:e,routeModules:i}=uS(),[a,s]=x.useState([]);return x.useEffect(()=>{let l=!1;return Jx(t,e,i).then(c=>{l||s(c)}),()=>{l=!0}},[t,e,i]),a}function ow({page:t,matches:e,...i}){let a=Ri(),{manifest:s,routeModules:l}=uS(),{basename:c}=cS(),{loaderData:d,matches:h}=iw(),f=x.useMemo(()=>c0(t,e,h,s,a,"data"),[t,e,h,s,a]),p=x.useMemo(()=>c0(t,e,h,s,a,"assets"),[t,e,h,s,a]),v=x.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let S=new Set,T=!1;if(e.forEach(R=>{var N;let L=s.routes[R.route.id];!L||!L.hasLoader||(!f.some(A=>A.route.id===R.route.id)&&R.route.id in d&&((N=l[R.route.id])!=null&&N.shouldRevalidate)||L.hasClientLoader?T=!0:S.add(R.route.id))}),S.size===0)return[];let w=nw(t,c);return T&&S.size>0&&w.searchParams.set("_routes",e.filter(R=>S.has(R.route.id)).map(R=>R.route.id).join(",")),[w.pathname+w.search]},[c,d,a,s,f,e,t,l]),y=x.useMemo(()=>Zx(p,s),[p,s]),k=sw(p);return x.createElement(x.Fragment,null,v.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...i})),y.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...i})),k.map(({key:S,link:T})=>x.createElement("link",{key:S,...T})))}function lw(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var dS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dS&&(window.__reactRouterVersion="7.6.2")}catch{}function cw({basename:t,children:e,window:i}){let a=x.useRef();a.current==null&&(a.current=X1({window:i,v5Compat:!0}));let s=a.current,[l,c]=x.useState({action:s.action,location:s.location}),d=x.useCallback(h=>{x.startTransition(()=>c(h))},[c]);return x.useLayoutEffect(()=>s.listen(d),[s,d]),x.createElement(jx,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:s})}var fS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pm=x.forwardRef(function({onClick:e,discover:i="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:h,to:f,preventScrollReset:p,viewTransition:v,...y},k){let{basename:S}=x.useContext(si),T=typeof f=="string"&&fS.test(f),w,R=!1;if(typeof f=="string"&&T&&(w=f,dS))try{let G=new URL(window.location.href),$=f.startsWith("//")?new URL(G.protocol+f):new URL(f),ae=na($.pathname,S);$.origin===G.origin&&ae!=null?f=ae+$.search+$.hash:R=!0}catch{ai(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=kx(f,{relative:s}),[N,A,_]=aw(a,y),B=hw(f,{replace:c,state:d,target:h,preventScrollReset:p,relative:s,viewTransition:v});function I(G){e&&e(G),G.defaultPrevented||B(G)}let F=x.createElement("a",{...y,..._,href:w||L,onClick:R||l?e:I,ref:lw(k,A),target:h,"data-discover":!T&&i==="render"?"true":void 0});return N&&!T?x.createElement(x.Fragment,null,F,x.createElement(rw,{page:L})):F});Pm.displayName="Link";var uw=x.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:h,...f},p){let v=rl(c,{relative:f.relative}),y=Ri(),k=x.useContext(du),{navigator:S,basename:T}=x.useContext(si),w=k!=null&&yw(v)&&d===!0,R=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,L=y.pathname,N=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;i||(L=L.toLowerCase(),N=N?N.toLowerCase():null,R=R.toLowerCase()),N&&T&&(N=na(N,T)||N);const A=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let _=L===R||!s&&L.startsWith(R)&&L.charAt(A)==="/",B=N!=null&&(N===R||!s&&N.startsWith(R)&&N.charAt(R.length)==="/"),I={isActive:_,isPending:B,isTransitioning:w},F=_?e:void 0,G;typeof a=="function"?G=a(I):G=[a,_?"active":null,B?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let $=typeof l=="function"?l(I):l;return x.createElement(Pm,{...f,"aria-current":F,className:G,ref:p,style:$,to:c,viewTransition:d},typeof h=="function"?h(I):h)});uw.displayName="NavLink";var dw=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:a,replace:s,state:l,method:c=Pc,action:d,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:v,...y},k)=>{let S=gw(),T=vw(d,{relative:f}),w=c.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&fS.test(d),L=N=>{if(h&&h(N),N.defaultPrevented)return;N.preventDefault();let A=N.nativeEvent.submitter,_=(A==null?void 0:A.getAttribute("formmethod"))||c;S(A||N.currentTarget,{fetcherKey:e,method:_,navigate:i,replace:s,state:l,relative:f,preventScrollReset:p,viewTransition:v})};return x.createElement("form",{ref:k,method:w,action:T,onSubmit:a?h:L,...y,"data-discover":!R&&t==="render"?"true":void 0})});dw.displayName="Form";function fw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hS(t){let e=x.useContext(_s);return gt(e,fw(t)),e}function hw(t,{target:e,replace:i,state:a,preventScrollReset:s,relative:l,viewTransition:c}={}){let d=oi(),h=Ri(),f=rl(t,{relative:l});return x.useCallback(p=>{if(Hx(p,e)){p.preventDefault();let v=i!==void 0?i:Jo(h)===Jo(f);d(t,{replace:v,state:a,preventScrollReset:s,relative:l,viewTransition:c})}},[h,d,f,i,a,e,t,s,l,c])}var mw=0,pw=()=>`__${String(++mw)}__`;function gw(){let{router:t}=hS("useSubmit"),{basename:e}=x.useContext(si),i=Px();return x.useCallback(async(a,s={})=>{let{action:l,method:c,encType:d,formData:h,body:f}=Yx(a,e);if(s.navigate===!1){let p=s.fetcherKey||pw();await t.fetch(p,i,s.action||l,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await t.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,i])}function vw(t,{relative:e}={}){let{basename:i}=x.useContext(si),a=x.useContext(wi);gt(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...rl(t||".",{relative:e})},c=Ri();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(v=>v).forEach(v=>d.append("index",v));let p=d.toString();l.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:ta([i,l.pathname])),Jo(l)}function yw(t,e={}){let i=x.useContext(aS);gt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=hS("useViewTransitionState"),s=rl(t,{relative:e.relative});if(!i.isTransitioning)return!1;let l=na(i.currentLocation.pathname,a)||i.currentLocation.pathname,c=na(i.nextLocation.pathname,a)||i.nextLocation.pathname;return eu(s.pathname,c)!=null||eu(s.pathname,l)!=null}[...tw];var mS=$b();const pS=Zb(mS);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sw=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,a)=>a?a.toUpperCase():i.toLowerCase()),u0=t=>{const e=Sw(t);return e.charAt(0).toUpperCase()+e.slice(1)},gS=(...t)=>t.filter((e,i,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===i).join(" ").trim(),Tw=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},h)=>x.createElement("svg",{ref:h,...kw,width:e,height:e,stroke:t,strokeWidth:a?Number(i)*24/Number(e):i,className:gS("lucide",s),...!l&&!Tw(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,p])=>x.createElement(f,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=(t,e)=>{const i=x.forwardRef(({className:a,...s},l)=>x.createElement(Cw,{ref:l,iconNode:e,className:gS(`lucide-${bw(u0(t))}`,`lucide-${t}`,a),...s}));return i.displayName=u0(t),i};/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xw=Ut("arrow-left",Ew);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Rw=Ut("bell",ww);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_w=Ut("chevron-down",Aw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Qf=Ut("chevron-right",Ow);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dw=Ut("circle-check-big",Nw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Mw=Ut("ellipsis",Pw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vS=Ut("eye-off",Lw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yS=Ut("eye",Uw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],jw=Ut("globe",Iw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],zw=Ut("house",Bw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],bS=Ut("lock",Fw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],qw=Ut("log-out",Vw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],SS=Ut("mail",Hw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Kw=Ut("menu",Gw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Qw=Ut("message-circle",Yw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Jw=Ut("phone",Xw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ww=Ut("settings",Zw);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],TS=Ut("user",$w);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],tR=Ut("video",eR);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],iR=Ut("x",nR);function kS(t,e){return function(){return t.apply(e,arguments)}}const{toString:aR}=Object.prototype,{getPrototypeOf:Mm}=Object,{iterator:hu,toStringTag:CS}=Symbol,mu=(t=>e=>{const i=aR.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),li=t=>(t=t.toLowerCase(),e=>mu(e)===t),pu=t=>e=>typeof e===t,{isArray:Ns}=Array,Zo=pu("undefined");function rR(t){return t!==null&&!Zo(t)&&t.constructor!==null&&!Zo(t.constructor)&&Cn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ES=li("ArrayBuffer");function sR(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ES(t.buffer),e}const oR=pu("string"),Cn=pu("function"),xS=pu("number"),gu=t=>t!==null&&typeof t=="object",lR=t=>t===!0||t===!1,Lc=t=>{if(mu(t)!=="object")return!1;const e=Mm(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(CS in t)&&!(hu in t)},cR=li("Date"),uR=li("File"),dR=li("Blob"),fR=li("FileList"),hR=t=>gu(t)&&Cn(t.pipe),mR=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Cn(t.append)&&((e=mu(t))==="formdata"||e==="object"&&Cn(t.toString)&&t.toString()==="[object FormData]"))},pR=li("URLSearchParams"),[gR,vR,yR,bR]=["ReadableStream","Request","Response","Headers"].map(li),SR=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sl(t,e,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let a,s;if(typeof t!="object"&&(t=[t]),Ns(t))for(a=0,s=t.length;a<s;a++)e.call(null,t[a],a,t);else{const l=i?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let d;for(a=0;a<c;a++)d=l[a],e.call(null,t[d],d,t)}}function wS(t,e){e=e.toLowerCase();const i=Object.keys(t);let a=i.length,s;for(;a-- >0;)if(s=i[a],e===s.toLowerCase())return s;return null}const lr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,RS=t=>!Zo(t)&&t!==lr;function _h(){const{caseless:t}=RS(this)&&this||{},e={},i=(a,s)=>{const l=t&&wS(e,s)||s;Lc(e[l])&&Lc(a)?e[l]=_h(e[l],a):Lc(a)?e[l]=_h({},a):Ns(a)?e[l]=a.slice():e[l]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&sl(arguments[a],i);return e}const TR=(t,e,i,{allOwnKeys:a}={})=>(sl(e,(s,l)=>{i&&Cn(s)?t[l]=kS(s,i):t[l]=s},{allOwnKeys:a}),t),kR=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),CR=(t,e,i,a)=>{t.prototype=Object.create(e.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},ER=(t,e,i,a)=>{let s,l,c;const d={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),l=s.length;l-- >0;)c=s[l],(!a||a(c,t,e))&&!d[c]&&(e[c]=t[c],d[c]=!0);t=i!==!1&&Mm(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},xR=(t,e,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;const a=t.indexOf(e,i);return a!==-1&&a===i},wR=t=>{if(!t)return null;if(Ns(t))return t;let e=t.length;if(!xS(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},RR=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Mm(Uint8Array)),AR=(t,e)=>{const a=(t&&t[hu]).call(t);let s;for(;(s=a.next())&&!s.done;){const l=s.value;e.call(t,l[0],l[1])}},_R=(t,e)=>{let i;const a=[];for(;(i=t.exec(e))!==null;)a.push(i);return a},OR=li("HTMLFormElement"),NR=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,a,s){return a.toUpperCase()+s}),d0=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),DR=li("RegExp"),AS=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),a={};sl(i,(s,l)=>{let c;(c=e(s,l,t))!==!1&&(a[l]=c||s)}),Object.defineProperties(t,a)},PR=t=>{AS(t,(e,i)=>{if(Cn(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=t[i];if(Cn(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},MR=(t,e)=>{const i={},a=s=>{s.forEach(l=>{i[l]=!0})};return Ns(t)?a(t):a(String(t).split(e)),i},LR=()=>{},UR=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function IR(t){return!!(t&&Cn(t.append)&&t[CS]==="FormData"&&t[hu])}const jR=t=>{const e=new Array(10),i=(a,s)=>{if(gu(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[s]=a;const l=Ns(a)?[]:{};return sl(a,(c,d)=>{const h=i(c,s+1);!Zo(h)&&(l[d]=h)}),e[s]=void 0,l}}return a};return i(t,0)},BR=li("AsyncFunction"),zR=t=>t&&(gu(t)||Cn(t))&&Cn(t.then)&&Cn(t.catch),_S=((t,e)=>t?setImmediate:e?((i,a)=>(lr.addEventListener("message",({source:s,data:l})=>{s===lr&&l===i&&a.length&&a.shift()()},!1),s=>{a.push(s),lr.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Cn(lr.postMessage)),FR=typeof queueMicrotask<"u"?queueMicrotask.bind(lr):typeof process<"u"&&process.nextTick||_S,VR=t=>t!=null&&Cn(t[hu]),X={isArray:Ns,isArrayBuffer:ES,isBuffer:rR,isFormData:mR,isArrayBufferView:sR,isString:oR,isNumber:xS,isBoolean:lR,isObject:gu,isPlainObject:Lc,isReadableStream:gR,isRequest:vR,isResponse:yR,isHeaders:bR,isUndefined:Zo,isDate:cR,isFile:uR,isBlob:dR,isRegExp:DR,isFunction:Cn,isStream:hR,isURLSearchParams:pR,isTypedArray:RR,isFileList:fR,forEach:sl,merge:_h,extend:TR,trim:SR,stripBOM:kR,inherits:CR,toFlatObject:ER,kindOf:mu,kindOfTest:li,endsWith:xR,toArray:wR,forEachEntry:AR,matchAll:_R,isHTMLForm:OR,hasOwnProperty:d0,hasOwnProp:d0,reduceDescriptors:AS,freezeMethods:PR,toObjectSet:MR,toCamelCase:NR,noop:LR,toFiniteNumber:UR,findKey:wS,global:lr,isContextDefined:RS,isSpecCompliantForm:IR,toJSONObject:jR,isAsyncFn:BR,isThenable:zR,setImmediate:_S,asap:FR,isIterable:VR};function Pe(t,e,i,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}X.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const OS=Pe.prototype,NS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{NS[t]={value:t}});Object.defineProperties(Pe,NS);Object.defineProperty(OS,"isAxiosError",{value:!0});Pe.from=(t,e,i,a,s,l)=>{const c=Object.create(OS);return X.toFlatObject(t,c,function(h){return h!==Error.prototype},d=>d!=="isAxiosError"),Pe.call(c,t.message,e,i,a,s),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const qR=null;function Oh(t){return X.isPlainObject(t)||X.isArray(t)}function DS(t){return X.endsWith(t,"[]")?t.slice(0,-2):t}function f0(t,e,i){return t?t.concat(e).map(function(s,l){return s=DS(s),!i&&l?"["+s+"]":s}).join(i?".":""):e}function HR(t){return X.isArray(t)&&!t.some(Oh)}const GR=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function vu(t,e,i){if(!X.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,i=X.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,w){return!X.isUndefined(w[T])});const a=i.metaTokens,s=i.visitor||p,l=i.dots,c=i.indexes,h=(i.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(s))throw new TypeError("visitor must be a function");function f(S){if(S===null)return"";if(X.isDate(S))return S.toISOString();if(X.isBoolean(S))return S.toString();if(!h&&X.isBlob(S))throw new Pe("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(S)||X.isTypedArray(S)?h&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function p(S,T,w){let R=S;if(S&&!w&&typeof S=="object"){if(X.endsWith(T,"{}"))T=a?T:T.slice(0,-2),S=JSON.stringify(S);else if(X.isArray(S)&&HR(S)||(X.isFileList(S)||X.endsWith(T,"[]"))&&(R=X.toArray(S)))return T=DS(T),R.forEach(function(N,A){!(X.isUndefined(N)||N===null)&&e.append(c===!0?f0([T],A,l):c===null?T:T+"[]",f(N))}),!1}return Oh(S)?!0:(e.append(f0(w,T,l),f(S)),!1)}const v=[],y=Object.assign(GR,{defaultVisitor:p,convertValue:f,isVisitable:Oh});function k(S,T){if(!X.isUndefined(S)){if(v.indexOf(S)!==-1)throw Error("Circular reference detected in "+T.join("."));v.push(S),X.forEach(S,function(R,L){(!(X.isUndefined(R)||R===null)&&s.call(e,R,X.isString(L)?L.trim():L,T,y))===!0&&k(R,T?T.concat(L):[L])}),v.pop()}}if(!X.isObject(t))throw new TypeError("data must be an object");return k(t),e}function h0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function Lm(t,e){this._pairs=[],t&&vu(t,this,e)}const PS=Lm.prototype;PS.append=function(e,i){this._pairs.push([e,i])};PS.toString=function(e){const i=e?function(a){return e.call(this,a,h0)}:h0;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function KR(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function MS(t,e,i){if(!e)return t;const a=i&&i.encode||KR;X.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let l;if(s?l=s(e,i):l=X.isURLSearchParams(e)?e.toString():new Lm(e,i).toString(a),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class m0{constructor(){this.handlers=[]}use(e,i,a){return this.handlers.push({fulfilled:e,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(a){a!==null&&e(a)})}}const LS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},YR=typeof URLSearchParams<"u"?URLSearchParams:Lm,QR=typeof FormData<"u"?FormData:null,XR=typeof Blob<"u"?Blob:null,JR={isBrowser:!0,classes:{URLSearchParams:YR,FormData:QR,Blob:XR},protocols:["http","https","file","blob","url","data"]},Um=typeof window<"u"&&typeof document<"u",Nh=typeof navigator=="object"&&navigator||void 0,ZR=Um&&(!Nh||["ReactNative","NativeScript","NS"].indexOf(Nh.product)<0),WR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$R=Um&&window.location.href||"http://localhost",eA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Um,hasStandardBrowserEnv:ZR,hasStandardBrowserWebWorkerEnv:WR,navigator:Nh,origin:$R},Symbol.toStringTag,{value:"Module"})),cn={...eA,...JR};function tA(t,e){return vu(t,new cn.classes.URLSearchParams,Object.assign({visitor:function(i,a,s,l){return cn.isNode&&X.isBuffer(i)?(this.append(a,i.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function nA(t){return X.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function iA(t){const e={},i=Object.keys(t);let a;const s=i.length;let l;for(a=0;a<s;a++)l=i[a],e[l]=t[l];return e}function US(t){function e(i,a,s,l){let c=i[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),h=l>=i.length;return c=!c&&X.isArray(s)?s.length:c,h?(X.hasOwnProp(s,c)?s[c]=[s[c],a]:s[c]=a,!d):((!s[c]||!X.isObject(s[c]))&&(s[c]=[]),e(i,a,s[c],l)&&X.isArray(s[c])&&(s[c]=iA(s[c])),!d)}if(X.isFormData(t)&&X.isFunction(t.entries)){const i={};return X.forEachEntry(t,(a,s)=>{e(nA(a),s,i,0)}),i}return null}function aA(t,e,i){if(X.isString(t))try{return(e||JSON.parse)(t),X.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(t)}const ol={transitional:LS,adapter:["xhr","http","fetch"],transformRequest:[function(e,i){const a=i.getContentType()||"",s=a.indexOf("application/json")>-1,l=X.isObject(e);if(l&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return s?JSON.stringify(US(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e)||X.isReadableStream(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return tA(e,this.formSerializer).toString();if((d=X.isFileList(e))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return vu(d?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||s?(i.setContentType("application/json",!1),aA(e)):e}],transformResponse:[function(e){const i=this.transitional||ol.transitional,a=i&&i.forcedJSONParsing,s=this.responseType==="json";if(X.isResponse(e)||X.isReadableStream(e))return e;if(e&&X.isString(e)&&(a&&!this.responseType||s)){const c=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?Pe.from(d,Pe.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cn.classes.FormData,Blob:cn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],t=>{ol.headers[t]={}});const rA=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sA=t=>{const e={};let i,a,s;return t&&t.split(`
`).forEach(function(c){s=c.indexOf(":"),i=c.substring(0,s).trim().toLowerCase(),a=c.substring(s+1).trim(),!(!i||e[i]&&rA[i])&&(i==="set-cookie"?e[i]?e[i].push(a):e[i]=[a]:e[i]=e[i]?e[i]+", "+a:a)}),e},p0=Symbol("internals");function Io(t){return t&&String(t).trim().toLowerCase()}function Uc(t){return t===!1||t==null?t:X.isArray(t)?t.map(Uc):String(t)}function oA(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=i.exec(t);)e[a[1]]=a[2];return e}const lA=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Xf(t,e,i,a,s){if(X.isFunction(a))return a.call(this,e,i);if(s&&(e=i),!!X.isString(e)){if(X.isString(a))return e.indexOf(a)!==-1;if(X.isRegExp(a))return a.test(e)}}function cA(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,a)=>i.toUpperCase()+a)}function uA(t,e){const i=X.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+i,{value:function(s,l,c){return this[a].call(this,e,s,l,c)},configurable:!0})})}let En=class{constructor(e){e&&this.set(e)}set(e,i,a){const s=this;function l(d,h,f){const p=Io(h);if(!p)throw new Error("header name must be a non-empty string");const v=X.findKey(s,p);(!v||s[v]===void 0||f===!0||f===void 0&&s[v]!==!1)&&(s[v||h]=Uc(d))}const c=(d,h)=>X.forEach(d,(f,p)=>l(f,p,h));if(X.isPlainObject(e)||e instanceof this.constructor)c(e,i);else if(X.isString(e)&&(e=e.trim())&&!lA(e))c(sA(e),i);else if(X.isObject(e)&&X.isIterable(e)){let d={},h,f;for(const p of e){if(!X.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[f=p[0]]=(h=d[f])?X.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(d,i)}else e!=null&&l(i,e,a);return this}get(e,i){if(e=Io(e),e){const a=X.findKey(this,e);if(a){const s=this[a];if(!i)return s;if(i===!0)return oA(s);if(X.isFunction(i))return i.call(this,s,a);if(X.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=Io(e),e){const a=X.findKey(this,e);return!!(a&&this[a]!==void 0&&(!i||Xf(this,this[a],a,i)))}return!1}delete(e,i){const a=this;let s=!1;function l(c){if(c=Io(c),c){const d=X.findKey(a,c);d&&(!i||Xf(a,a[d],d,i))&&(delete a[d],s=!0)}}return X.isArray(e)?e.forEach(l):l(e),s}clear(e){const i=Object.keys(this);let a=i.length,s=!1;for(;a--;){const l=i[a];(!e||Xf(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const i=this,a={};return X.forEach(this,(s,l)=>{const c=X.findKey(a,l);if(c){i[c]=Uc(s),delete i[l];return}const d=e?cA(l):String(l).trim();d!==l&&delete i[l],i[d]=Uc(s),a[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return X.forEach(this,(a,s)=>{a!=null&&a!==!1&&(i[s]=e&&X.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const a=new this(e);return i.forEach(s=>a.set(s)),a}static accessor(e){const a=(this[p0]=this[p0]={accessors:{}}).accessors,s=this.prototype;function l(c){const d=Io(c);a[d]||(uA(s,c),a[d]=!0)}return X.isArray(e)?e.forEach(l):l(e),this}};En.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(En.prototype,({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(a){this[i]=a}}});X.freezeMethods(En);function Jf(t,e){const i=this||ol,a=e||i,s=En.from(a.headers);let l=a.data;return X.forEach(t,function(d){l=d.call(i,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function IS(t){return!!(t&&t.__CANCEL__)}function Ds(t,e,i){Pe.call(this,t??"canceled",Pe.ERR_CANCELED,e,i),this.name="CanceledError"}X.inherits(Ds,Pe,{__CANCEL__:!0});function jS(t,e,i){const a=i.config.validateStatus;!i.status||!a||a(i.status)?t(i):e(new Pe("Request failed with status code "+i.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function dA(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function fA(t,e){t=t||10;const i=new Array(t),a=new Array(t);let s=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),p=a[l];c||(c=f),i[s]=h,a[s]=f;let v=l,y=0;for(;v!==s;)y+=i[v++],v=v%t;if(s=(s+1)%t,s===l&&(l=(l+1)%t),f-c<e)return;const k=p&&f-p;return k?Math.round(y*1e3/k):void 0}}function hA(t,e){let i=0,a=1e3/e,s,l;const c=(f,p=Date.now())=>{i=p,s=null,l&&(clearTimeout(l),l=null),t.apply(null,f)};return[(...f)=>{const p=Date.now(),v=p-i;v>=a?c(f,p):(s=f,l||(l=setTimeout(()=>{l=null,c(s)},a-v)))},()=>s&&c(s)]}const tu=(t,e,i=3)=>{let a=0;const s=fA(50,250);return hA(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,h=c-a,f=s(h),p=c<=d;a=c;const v={loaded:c,total:d,progress:d?c/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&p?(d-c)/f:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(v)},i)},g0=(t,e)=>{const i=t!=null;return[a=>e[0]({lengthComputable:i,total:t,loaded:a}),e[1]]},v0=t=>(...e)=>X.asap(()=>t(...e)),mA=cn.hasStandardBrowserEnv?((t,e)=>i=>(i=new URL(i,cn.origin),t.protocol===i.protocol&&t.host===i.host&&(e||t.port===i.port)))(new URL(cn.origin),cn.navigator&&/(msie|trident)/i.test(cn.navigator.userAgent)):()=>!0,pA=cn.hasStandardBrowserEnv?{write(t,e,i,a,s,l){const c=[t+"="+encodeURIComponent(e)];X.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),X.isString(a)&&c.push("path="+a),X.isString(s)&&c.push("domain="+s),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gA(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vA(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function BS(t,e,i){let a=!gA(e);return t&&(a||i==!1)?vA(t,e):e}const y0=t=>t instanceof En?{...t}:t;function dr(t,e){e=e||{};const i={};function a(f,p,v,y){return X.isPlainObject(f)&&X.isPlainObject(p)?X.merge.call({caseless:y},f,p):X.isPlainObject(p)?X.merge({},p):X.isArray(p)?p.slice():p}function s(f,p,v,y){if(X.isUndefined(p)){if(!X.isUndefined(f))return a(void 0,f,v,y)}else return a(f,p,v,y)}function l(f,p){if(!X.isUndefined(p))return a(void 0,p)}function c(f,p){if(X.isUndefined(p)){if(!X.isUndefined(f))return a(void 0,f)}else return a(void 0,p)}function d(f,p,v){if(v in e)return a(f,p);if(v in t)return a(void 0,f)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,p,v)=>s(y0(f),y0(p),v,!0)};return X.forEach(Object.keys(Object.assign({},t,e)),function(p){const v=h[p]||s,y=v(t[p],e[p],p);X.isUndefined(y)&&v!==d||(i[p]=y)}),i}const zS=t=>{const e=dr({},t);let{data:i,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:l,headers:c,auth:d}=e;e.headers=c=En.from(c),e.url=MS(BS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let h;if(X.isFormData(i)){if(cn.hasStandardBrowserEnv||cn.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((h=c.getContentType())!==!1){const[f,...p]=h?h.split(";").map(v=>v.trim()).filter(Boolean):[];c.setContentType([f||"multipart/form-data",...p].join("; "))}}if(cn.hasStandardBrowserEnv&&(a&&X.isFunction(a)&&(a=a(e)),a||a!==!1&&mA(e.url))){const f=s&&l&&pA.read(l);f&&c.set(s,f)}return e},yA=typeof XMLHttpRequest<"u",bA=yA&&function(t){return new Promise(function(i,a){const s=zS(t);let l=s.data;const c=En.from(s.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=s,p,v,y,k,S;function T(){k&&k(),S&&S(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function R(){if(!w)return;const N=En.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),_={data:!d||d==="text"||d==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:N,config:t,request:w};jS(function(I){i(I),T()},function(I){a(I),T()},_),w=null}"onloadend"in w?w.onloadend=R:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(R)},w.onabort=function(){w&&(a(new Pe("Request aborted",Pe.ECONNABORTED,t,w)),w=null)},w.onerror=function(){a(new Pe("Network Error",Pe.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let A=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const _=s.transitional||LS;s.timeoutErrorMessage&&(A=s.timeoutErrorMessage),a(new Pe(A,_.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,w)),w=null},l===void 0&&c.setContentType(null),"setRequestHeader"in w&&X.forEach(c.toJSON(),function(A,_){w.setRequestHeader(_,A)}),X.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),d&&d!=="json"&&(w.responseType=s.responseType),f&&([y,S]=tu(f,!0),w.addEventListener("progress",y)),h&&w.upload&&([v,k]=tu(h),w.upload.addEventListener("progress",v),w.upload.addEventListener("loadend",k)),(s.cancelToken||s.signal)&&(p=N=>{w&&(a(!N||N.type?new Ds(null,t,w):N),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const L=dA(s.url);if(L&&cn.protocols.indexOf(L)===-1){a(new Pe("Unsupported protocol "+L+":",Pe.ERR_BAD_REQUEST,t));return}w.send(l||null)})},SA=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let a=new AbortController,s;const l=function(f){if(!s){s=!0,d();const p=f instanceof Error?f:this.reason;a.abort(p instanceof Pe?p:new Ds(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new Pe(`timeout ${e} of ms exceeded`,Pe.ETIMEDOUT))},e);const d=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),t=null)};t.forEach(f=>f.addEventListener("abort",l));const{signal:h}=a;return h.unsubscribe=()=>X.asap(d),h}},TA=function*(t,e){let i=t.byteLength;if(i<e){yield t;return}let a=0,s;for(;a<i;)s=a+e,yield t.slice(a,s),a=s},kA=async function*(t,e){for await(const i of CA(t))yield*TA(i,e)},CA=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:i,value:a}=await e.read();if(i)break;yield a}}finally{await e.cancel()}},b0=(t,e,i,a)=>{const s=kA(t,e);let l=0,c,d=h=>{c||(c=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await s.next();if(f){d(),h.close();return}let v=p.byteLength;if(i){let y=l+=v;i(y)}h.enqueue(new Uint8Array(p))}catch(f){throw d(f),f}},cancel(h){return d(h),s.return()}},{highWaterMark:2})},yu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",FS=yu&&typeof ReadableStream=="function",EA=yu&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),VS=(t,...e)=>{try{return!!t(...e)}catch{return!1}},xA=FS&&VS(()=>{let t=!1;const e=new Request(cn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),S0=64*1024,Dh=FS&&VS(()=>X.isReadableStream(new Response("").body)),nu={stream:Dh&&(t=>t.body)};yu&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!nu[e]&&(nu[e]=X.isFunction(t[e])?i=>i[e]():(i,a)=>{throw new Pe(`Response type '${e}' is not supported`,Pe.ERR_NOT_SUPPORT,a)})})})(new Response);const wA=async t=>{if(t==null)return 0;if(X.isBlob(t))return t.size;if(X.isSpecCompliantForm(t))return(await new Request(cn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(X.isArrayBufferView(t)||X.isArrayBuffer(t))return t.byteLength;if(X.isURLSearchParams(t)&&(t=t+""),X.isString(t))return(await EA(t)).byteLength},RA=async(t,e)=>{const i=X.toFiniteNumber(t.getContentLength());return i??wA(e)},AA=yu&&(async t=>{let{url:e,method:i,data:a,signal:s,cancelToken:l,timeout:c,onDownloadProgress:d,onUploadProgress:h,responseType:f,headers:p,withCredentials:v="same-origin",fetchOptions:y}=zS(t);f=f?(f+"").toLowerCase():"text";let k=SA([s,l&&l.toAbortSignal()],c),S;const T=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let w;try{if(h&&xA&&i!=="get"&&i!=="head"&&(w=await RA(p,a))!==0){let _=new Request(e,{method:"POST",body:a,duplex:"half"}),B;if(X.isFormData(a)&&(B=_.headers.get("content-type"))&&p.setContentType(B),_.body){const[I,F]=g0(w,tu(v0(h)));a=b0(_.body,S0,I,F)}}X.isString(v)||(v=v?"include":"omit");const R="credentials"in Request.prototype;S=new Request(e,{...y,signal:k,method:i.toUpperCase(),headers:p.normalize().toJSON(),body:a,duplex:"half",credentials:R?v:void 0});let L=await fetch(S,y);const N=Dh&&(f==="stream"||f==="response");if(Dh&&(d||N&&T)){const _={};["status","statusText","headers"].forEach(G=>{_[G]=L[G]});const B=X.toFiniteNumber(L.headers.get("content-length")),[I,F]=d&&g0(B,tu(v0(d),!0))||[];L=new Response(b0(L.body,S0,I,()=>{F&&F(),T&&T()}),_)}f=f||"text";let A=await nu[X.findKey(nu,f)||"text"](L,t);return!N&&T&&T(),await new Promise((_,B)=>{jS(_,B,{data:A,headers:En.from(L.headers),status:L.status,statusText:L.statusText,config:t,request:S})})}catch(R){throw T&&T(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,t,S),{cause:R.cause||R}):Pe.from(R,R&&R.code,t,S)}}),Ph={http:qR,xhr:bA,fetch:AA};X.forEach(Ph,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const T0=t=>`- ${t}`,_A=t=>X.isFunction(t)||t===null||t===!1,qS={getAdapter:t=>{t=X.isArray(t)?t:[t];const{length:e}=t;let i,a;const s={};for(let l=0;l<e;l++){i=t[l];let c;if(a=i,!_A(i)&&(a=Ph[(c=String(i)).toLowerCase()],a===void 0))throw new Pe(`Unknown adapter '${c}'`);if(a)break;s[c||"#"+l]=a}if(!a){const l=Object.entries(s).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(T0).join(`
`):" "+T0(l[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:Ph};function Zf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ds(null,t)}function k0(t){return Zf(t),t.headers=En.from(t.headers),t.data=Jf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qS.getAdapter(t.adapter||ol.adapter)(t).then(function(a){return Zf(t),a.data=Jf.call(t,t.transformResponse,a),a.headers=En.from(a.headers),a},function(a){return IS(a)||(Zf(t),a&&a.response&&(a.response.data=Jf.call(t,t.transformResponse,a.response),a.response.headers=En.from(a.response.headers))),Promise.reject(a)})}const HS="1.10.0",bu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{bu[t]=function(a){return typeof a===t||"a"+(e<1?"n ":" ")+t}});const C0={};bu.transitional=function(e,i,a){function s(l,c){return"[Axios v"+HS+"] Transitional option '"+l+"'"+c+(a?". "+a:"")}return(l,c,d)=>{if(e===!1)throw new Pe(s(c," has been removed"+(i?" in "+i:"")),Pe.ERR_DEPRECATED);return i&&!C0[c]&&(C0[c]=!0,console.warn(s(c," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(l,c,d):!0}};bu.spelling=function(e){return(i,a)=>(console.warn(`${a} is likely a misspelling of ${e}`),!0)};function OA(t,e,i){if(typeof t!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let s=a.length;for(;s-- >0;){const l=a[s],c=e[l];if(c){const d=t[l],h=d===void 0||c(d,l,t);if(h!==!0)throw new Pe("option "+l+" must be "+h,Pe.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Pe("Unknown option "+l,Pe.ERR_BAD_OPTION)}}const Ic={assertOptions:OA,validators:bu},gi=Ic.validators;let cr=class{constructor(e){this.defaults=e||{},this.interceptors={request:new m0,response:new m0}}async request(e,i){try{return await this._request(e,i)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=dr(this.defaults,i);const{transitional:a,paramsSerializer:s,headers:l}=i;a!==void 0&&Ic.assertOptions(a,{silentJSONParsing:gi.transitional(gi.boolean),forcedJSONParsing:gi.transitional(gi.boolean),clarifyTimeoutError:gi.transitional(gi.boolean)},!1),s!=null&&(X.isFunction(s)?i.paramsSerializer={serialize:s}:Ic.assertOptions(s,{encode:gi.function,serialize:gi.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Ic.assertOptions(i,{baseUrl:gi.spelling("baseURL"),withXsrfToken:gi.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let c=l&&X.merge(l.common,l[i.method]);l&&X.forEach(["delete","get","head","post","put","patch","common"],S=>{delete l[S]}),i.headers=En.concat(c,l);const d=[];let h=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(i)===!1||(h=h&&T.synchronous,d.unshift(T.fulfilled,T.rejected))});const f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});let p,v=0,y;if(!h){const S=[k0.bind(this),void 0];for(S.unshift.apply(S,d),S.push.apply(S,f),y=S.length,p=Promise.resolve(i);v<y;)p=p.then(S[v++],S[v++]);return p}y=d.length;let k=i;for(v=0;v<y;){const S=d[v++],T=d[v++];try{k=S(k)}catch(w){T.call(this,w);break}}try{p=k0.call(this,k)}catch(S){return Promise.reject(S)}for(v=0,y=f.length;v<y;)p=p.then(f[v++],f[v++]);return p}getUri(e){e=dr(this.defaults,e);const i=BS(e.baseURL,e.url,e.allowAbsoluteUrls);return MS(i,e.params,e.paramsSerializer)}};X.forEach(["delete","get","head","options"],function(e){cr.prototype[e]=function(i,a){return this.request(dr(a||{},{method:e,url:i,data:(a||{}).data}))}});X.forEach(["post","put","patch"],function(e){function i(a){return function(l,c,d){return this.request(dr(d||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}cr.prototype[e]=i(),cr.prototype[e+"Form"]=i(!0)});let NA=class GS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(l){i=l});const a=this;this.promise.then(s=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](s);a._listeners=null}),this.promise.then=s=>{let l;const c=new Promise(d=>{a.subscribe(d),l=d}).then(s);return c.cancel=function(){a.unsubscribe(l)},c},e(function(l,c,d){a.reason||(a.reason=new Ds(l,c,d),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const e=new AbortController,i=a=>{e.abort(a)};return this.subscribe(i),e.signal.unsubscribe=()=>this.unsubscribe(i),e.signal}static source(){let e;return{token:new GS(function(s){e=s}),cancel:e}}};function DA(t){return function(i){return t.apply(null,i)}}function PA(t){return X.isObject(t)&&t.isAxiosError===!0}const Mh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mh).forEach(([t,e])=>{Mh[e]=t});function KS(t){const e=new cr(t),i=kS(cr.prototype.request,e);return X.extend(i,cr.prototype,e,{allOwnKeys:!0}),X.extend(i,e,null,{allOwnKeys:!0}),i.create=function(s){return KS(dr(t,s))},i}const yt=KS(ol);yt.Axios=cr;yt.CanceledError=Ds;yt.CancelToken=NA;yt.isCancel=IS;yt.VERSION=HS;yt.toFormData=vu;yt.AxiosError=Pe;yt.Cancel=yt.CanceledError;yt.all=function(e){return Promise.all(e)};yt.spread=DA;yt.isAxiosError=PA;yt.mergeConfig=dr;yt.AxiosHeaders=En;yt.formToJSON=t=>US(X.isHTMLForm(t)?new FormData(t):t);yt.getAdapter=qS.getAdapter;yt.HttpStatusCode=Mh;yt.default=yt;const{Axios:hU,AxiosError:mU,CanceledError:pU,isCancel:gU,CancelToken:vU,VERSION:yU,all:bU,Cancel:SU,isAxiosError:TU,spread:kU,toFormData:CU,AxiosHeaders:EU,HttpStatusCode:xU,formToJSON:wU,getAdapter:RU,mergeConfig:AU}=yt,MA="/assets/signin_image-DTuPaCJR.svg";function YS(t){var e,i,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=YS(t[e]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}function QS(){for(var t,e,i=0,a="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=YS(t))&&(a&&(a+=" "),a+=e);return a}function LA(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}LA(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Im=t=>typeof t=="number"&&!isNaN(t),Wo=t=>typeof t=="string",XS=t=>typeof t=="function",UA=t=>Wo(t)||Im(t),IA=t=>x.isValidElement(t)||Wo(t)||XS(t)||Im(t),jA=1,JS=()=>`${jA++}`,ki=new Map,Lh=[],E0=new Set,ZS=()=>ki.size>0,BA=(t,{containerId:e})=>{var i;return(i=ki.get(e||1))==null?void 0:i.toasts.get(t)};function zA(t,e){var i;if(e)return!!((i=ki.get(e))!=null&&i.isToastActive(t));let a=!1;return ki.forEach(s=>{s.isToastActive(t)&&(a=!0)}),a}function FA(t){if(!ZS()){Lh=Lh.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||UA(t))ki.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=ki.get(t.containerId);e?e.removeToast(t.id):ki.forEach(i=>{i.removeToast(t.id)})}}var VA=(t={})=>{ki.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function qA(t,e){IA(t)&&(ZS()||Lh.push({content:t,options:e}),ki.forEach(i=>{i.buildToast(t,e)}))}function WS(t,e){ki.forEach(i=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===i.id)&&i.toggle(t,e==null?void 0:e.id)})}function HA(t){return E0.add(t),()=>{E0.delete(t)}}function GA(t){return t&&(Wo(t.toastId)||Im(t.toastId))?t.toastId:JS()}function ll(t,e){return qA(t,e),e.toastId}function Su(t,e){return{...e,type:e&&e.type||t,toastId:GA(e)}}function Tu(t){return(e,i)=>ll(e,Su(t,i))}function rt(t,e){return ll(t,Su("default",e))}rt.loading=(t,e)=>ll(t,Su("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function KA(t,{pending:e,error:i,success:a},s){let l;e&&(l=Wo(e)?rt.loading(e,s):rt.loading(e.render,{...s,...e}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(f,p,v)=>{if(p==null){rt.dismiss(l);return}let y={type:f,...c,...s,data:v},k=Wo(p)?{render:p}:p;return l?rt.update(l,{...y,...k}):rt(k.render,{...y,...k}),v},h=XS(t)?t():t;return h.then(f=>d("success",a,f)).catch(f=>d("error",i,f)),h}rt.promise=KA;rt.success=Tu("success");rt.info=Tu("info");rt.error=Tu("error");rt.warning=Tu("warning");rt.warn=rt.warning;rt.dark=(t,e)=>ll(t,Su("default",{theme:"dark",...e}));function YA(t){FA(t)}rt.dismiss=YA;rt.clearWaitingQueue=VA;rt.isActive=zA;rt.update=(t,e={})=>{let i=BA(t,e);if(i){let{props:a,content:s}=i,l={delay:100,...a,...e,toastId:e.toastId||t,updateId:JS()};l.toastId!==t&&(l.staleId=t);let c=l.render||s;delete l.render,ll(c,l)}};rt.done=t=>{rt.update(t,{progress:1})};rt.onChange=HA;rt.play=t=>WS(!0,t);rt.pause=t=>WS(!1,t);const Ee=class Ee{static getLanguageCode(e){if(Object.values(Ee.languageMap).includes(e))return e;if(Ee.languageMap[e])return Ee.languageMap[e];const i=Ee.supportedLanguages.find(a=>a.code===e||a.name===e);return i?i.code:e}};ot(Ee,"localhost","http://localhost:3000"),ot(Ee,"server","http://16.171.52.166"),ot(Ee,"ngroakUrl","http://192.168.18.38:3000"),ot(Ee,"basePath",window.location.origin==="http://localhost:5173"?Ee.ngroakUrl:Ee.server),ot(Ee,"baseUrl",`${Ee.server}`),ot(Ee,"apiUrl",`${Ee.baseUrl}/api/v1/`),ot(Ee,"localStorageTokenKey","token"),ot(Ee,"localStorageUserKey","userData"),ot(Ee,"defaultLanguage","en-US"),ot(Ee,"authHeaders"),ot(Ee,"supportedLanguages",[{code:"en-US",name:"English"},{code:"zh",name:"Chinese (简体中文)"},{code:"es",name:"Spanish (Español)"},{code:"hi",name:"Hindi (हिन्दी)"},{code:"ar",name:"Arabic (العربية)"},{code:"it",name:"Italian (Italiano)"},{code:"tr",name:"Turkish (Türkçe)"},{code:"nl",name:"Dutch (Nederlands)"},{code:"id",name:"Indonesian (Bahasa Indonesia)"},{code:"pl",name:"Polish (Polski)"},{code:"vi",name:"Vietnamese (Tiếng Việt)"},{code:"th",name:"Thai (ไทย)"},{code:"ur",name:"Urdu (اردو)"}]),ot(Ee,"languageMap",{English:"en-US","Chinese (简体中文)":"zh","Spanish (Español)":"es","Hindi (हिन्दी)":"hi","Arabic (العربية)":"ar","Italian (Italiano)":"it","Turkish (Türkçe)":"tr","Dutch (Nederlands)":"nl","Indonesian (Bahasa Indonesia)":"id","Polish (Polski)":"pl","Vietnamese (Tiếng Việt)":"vi","Thai (ไทย)":"th","Urdu (اردو)":"ur"}),ot(Ee,"toast",(e,i)=>{const a={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"};switch(e){case"info":rt.info(i,a);break;case"success":rt.success(i,a);break;case"warning":rt.warning(i,a);break;case"error":rt.error(i,a);break;default:rt(i,a);break}}),ot(Ee,"parseJson",e=>JSON.parse(e)),ot(Ee,"stringifyJson",e=>JSON.stringify(e)),ot(Ee,"saveLocalStorage",(e,i,a=!1)=>{const s=a?Ee.stringifyJson(i):i;localStorage.setItem(e,s)}),ot(Ee,"removeItemLocalStorage",e=>{localStorage.removeItem(e)}),ot(Ee,"getItemLocalStorage",(e,i=!1)=>{const a=localStorage.getItem(e);return a?i?Ee.parseJson(a):a:null}),ot(Ee,"getToken",()=>Ee.getItemLocalStorage(Ee.localStorageTokenKey)),ot(Ee,"token",Ee.getToken()),ot(Ee,"saveUserLocal",e=>{const{token:i,user:a}=e;Ee.saveLocalStorage(Ee.localStorageTokenKey,i),Ee.saveLocalStorage(Ee.localStorageUserKey,a,!0)}),ot(Ee,"userLogout",()=>{Ee.removeItemLocalStorage(Ee.localStorageTokenKey),Ee.removeItemLocalStorage(Ee.localStorageUserKey)}),ot(Ee,"isAuthenticated",()=>!!Ee.getToken()),ot(Ee,"getUserData",()=>{const e=Ee.getItemLocalStorage(Ee.localStorageUserKey,!0);return e&&typeof e=="object"?e:null}),ot(Ee,"getUserLanguage",()=>{try{const e=Ee.getUserData();if(e!=null&&e.language)return e.language;const i=localStorage.getItem("listenerLanguage");return i||Ee.defaultLanguage}catch(e){return console.error("Error getting user language:",e),Ee.defaultLanguage}}),ot(Ee,"blobToBase64",e=>new Promise((i,a)=>{const s=new FileReader;s.onloadend=()=>{var c;const l=(c=s.result)==null?void 0:c.toString().split(",")[1];l?i(l):a("Failed to convert blob to base64.")},s.onerror=a,s.readAsDataURL(e)}));let Ne=Ee;function QA(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}const XA=t=>{switch(t){case"success":return WA;case"info":return e_;case"warning":return $A;case"error":return t_;default:return null}},JA=Array(12).fill(0),ZA=({visible:t,className:e})=>fe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},fe.createElement("div",{className:"sonner-spinner"},JA.map((i,a)=>fe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),WA=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$A=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),e_=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),t_=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),n_=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},fe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),fe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),i_=()=>{const[t,e]=fe.useState(document.hidden);return fe.useEffect(()=>{const i=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),t};let Uh=1;class a_{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const i=this.subscribers.indexOf(e);this.subscribers.splice(i,1)}),this.publish=e=>{this.subscribers.forEach(i=>i(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var i;const{message:a,...s}=e,l=typeof(e==null?void 0:e.id)=="number"||((i=e.id)==null?void 0:i.length)>0?e.id:Uh++,c=this.toasts.find(h=>h.id===l),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(h=>h.id===l?(this.publish({...h,...e,id:l,title:a}),{...h,...e,id:l,dismissible:d,title:a}):h):this.addToast({title:a,...s,dismissible:d,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:e,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(a=>a({id:i.id,dismiss:!0}))}),e),this.message=(e,i)=>this.create({...i,message:e}),this.error=(e,i)=>this.create({...i,message:e,type:"error"}),this.success=(e,i)=>this.create({...i,type:"success",message:e}),this.info=(e,i)=>this.create({...i,type:"info",message:e}),this.warning=(e,i)=>this.create({...i,type:"warning",message:e}),this.loading=(e,i)=>this.create({...i,type:"loading",message:e}),this.promise=(e,i)=>{if(!i)return;let a;i.loading!==void 0&&(a=this.create({...i,promise:e,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let l=a!==void 0,c;const d=s.then(async f=>{if(c=["resolve",f],fe.isValidElement(f))l=!1,this.create({id:a,type:"default",message:f});else if(s_(f)&&!f.ok){l=!1;const v=typeof i.error=="function"?await i.error(`HTTP error! status: ${f.status}`):i.error,y=typeof i.description=="function"?await i.description(`HTTP error! status: ${f.status}`):i.description,S=typeof v=="object"&&!fe.isValidElement(v)?v:{message:v};this.create({id:a,type:"error",description:y,...S})}else if(f instanceof Error){l=!1;const v=typeof i.error=="function"?await i.error(f):i.error,y=typeof i.description=="function"?await i.description(f):i.description,S=typeof v=="object"&&!fe.isValidElement(v)?v:{message:v};this.create({id:a,type:"error",description:y,...S})}else if(i.success!==void 0){l=!1;const v=typeof i.success=="function"?await i.success(f):i.success,y=typeof i.description=="function"?await i.description(f):i.description,S=typeof v=="object"&&!fe.isValidElement(v)?v:{message:v};this.create({id:a,type:"success",description:y,...S})}}).catch(async f=>{if(c=["reject",f],i.error!==void 0){l=!1;const p=typeof i.error=="function"?await i.error(f):i.error,v=typeof i.description=="function"?await i.description(f):i.description,k=typeof p=="object"&&!fe.isValidElement(p)?p:{message:p};this.create({id:a,type:"error",description:v,...k})}}).finally(()=>{l&&(this.dismiss(a),a=void 0),i.finally==null||i.finally.call(i)}),h=()=>new Promise((f,p)=>d.then(()=>c[0]==="reject"?p(c[1]):f(c[1])).catch(p));return typeof a!="string"&&typeof a!="number"?{unwrap:h}:Object.assign(a,{unwrap:h})},this.custom=(e,i)=>{const a=(i==null?void 0:i.id)||Uh++;return this.create({jsx:e(a),id:a,...i}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Sn=new a_,r_=(t,e)=>{const i=(e==null?void 0:e.id)||Uh++;return Sn.addToast({title:t,...e,id:i}),i},s_=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",o_=r_,l_=()=>Sn.toasts,c_=()=>Sn.getActiveToasts(),ln=Object.assign(o_,{success:Sn.success,info:Sn.info,warning:Sn.warning,error:Sn.error,custom:Sn.custom,message:Sn.message,promise:Sn.promise,dismiss:Sn.dismiss,loading:Sn.loading},{getHistory:l_,getToasts:c_});QA("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function kc(t){return t.label!==void 0}const u_=3,d_="24px",f_="16px",x0=4e3,h_=356,m_=14,p_=45,g_=200;function vi(...t){return t.filter(Boolean).join(" ")}function v_(t){const[e,i]=t.split("-"),a=[];return e&&a.push(e),i&&a.push(i),a}const y_=t=>{var e,i,a,s,l,c,d,h,f;const{invert:p,toast:v,unstyled:y,interacting:k,setHeights:S,visibleToasts:T,heights:w,index:R,toasts:L,expanded:N,removeToast:A,defaultRichColors:_,closeButton:B,style:I,cancelButtonStyle:F,actionButtonStyle:G,className:$="",descriptionClassName:ae="",duration:ve,position:Fe,gap:Xe,expandByDefault:Re,classNames:j,icons:re,closeButtonAriaLabel:ee="Close toast"}=t,[Ae,P]=fe.useState(null),[Q,K]=fe.useState(null),[J,le]=fe.useState(!1),[ke,ge]=fe.useState(!1),[Le,Ge]=fe.useState(!1),[ft,an]=fe.useState(!1),[wn,hn]=fe.useState(!1),[Fa,_i]=fe.useState(0),[Ls,yr]=fe.useState(0),It=fe.useRef(v.duration||ve||x0),br=fe.useRef(null),mn=fe.useRef(null),Sr=R===0,Oi=R+1<=T,qt=v.type,In=v.dismissible!==!1,se=v.className||"",ue=v.descriptionClassName||"",pe=fe.useMemo(()=>w.findIndex(De=>De.toastId===v.id)||0,[w,v.id]),de=fe.useMemo(()=>{var De;return(De=v.closeButton)!=null?De:B},[v.closeButton,B]),Ce=fe.useMemo(()=>v.duration||ve||x0,[v.duration,ve]),xe=fe.useRef(0),Ue=fe.useRef(0),bt=fe.useRef(0),Zt=fe.useRef(null),[rn,ht]=Fe.split("-"),St=fe.useMemo(()=>w.reduce((De,wt,Dt)=>Dt>=pe?De:De+wt.height,0),[w,pe]),un=i_(),ui=v.invert||p,Us=qt==="loading";Ue.current=fe.useMemo(()=>pe*Xe+St,[pe,St]),fe.useEffect(()=>{It.current=Ce},[Ce]),fe.useEffect(()=>{le(!0)},[]),fe.useEffect(()=>{const De=mn.current;if(De){const wt=De.getBoundingClientRect().height;return yr(wt),S(Dt=>[{toastId:v.id,height:wt,position:v.position},...Dt]),()=>S(Dt=>Dt.filter(Wt=>Wt.toastId!==v.id))}},[S,v.id]),fe.useLayoutEffect(()=>{if(!J)return;const De=mn.current,wt=De.style.height;De.style.height="auto";const Dt=De.getBoundingClientRect().height;De.style.height=wt,yr(Dt),S(Wt=>Wt.find(jt=>jt.toastId===v.id)?Wt.map(jt=>jt.toastId===v.id?{...jt,height:Dt}:jt):[{toastId:v.id,height:Dt,position:v.position},...Wt])},[J,v.title,v.description,S,v.id,v.jsx,v.action,v.cancel]);const Qn=fe.useCallback(()=>{ge(!0),_i(Ue.current),S(De=>De.filter(wt=>wt.toastId!==v.id)),setTimeout(()=>{A(v)},g_)},[v,A,S,Ue]);fe.useEffect(()=>{if(v.promise&&qt==="loading"||v.duration===1/0||v.type==="loading")return;let De;return N||k||un?(()=>{if(bt.current<xe.current){const Wt=new Date().getTime()-xe.current;It.current=It.current-Wt}bt.current=new Date().getTime()})():(()=>{It.current!==1/0&&(xe.current=new Date().getTime(),De=setTimeout(()=>{v.onAutoClose==null||v.onAutoClose.call(v,v),Qn()},It.current))})(),()=>clearTimeout(De)},[N,k,v,qt,un,Qn]),fe.useEffect(()=>{v.delete&&(Qn(),v.onDismiss==null||v.onDismiss.call(v,v))},[Qn,v.delete]);function cl(){var De;if(re!=null&&re.loading){var wt;return fe.createElement("div",{className:vi(j==null?void 0:j.loader,v==null||(wt=v.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":qt==="loading"},re.loading)}return fe.createElement(ZA,{className:vi(j==null?void 0:j.loader,v==null||(De=v.classNames)==null?void 0:De.loader),visible:qt==="loading"})}const Is=v.icon||(re==null?void 0:re[qt])||XA(qt);var ra,ul;return fe.createElement("li",{tabIndex:0,ref:mn,className:vi($,se,j==null?void 0:j.toast,v==null||(e=v.classNames)==null?void 0:e.toast,j==null?void 0:j.default,j==null?void 0:j[qt],v==null||(i=v.classNames)==null?void 0:i[qt]),"data-sonner-toast":"","data-rich-colors":(ra=v.richColors)!=null?ra:_,"data-styled":!(v.jsx||v.unstyled||y),"data-mounted":J,"data-promise":!!v.promise,"data-swiped":wn,"data-removed":ke,"data-visible":Oi,"data-y-position":rn,"data-x-position":ht,"data-index":R,"data-front":Sr,"data-swiping":Le,"data-dismissible":In,"data-type":qt,"data-invert":ui,"data-swipe-out":ft,"data-swipe-direction":Q,"data-expanded":!!(N||Re&&J),style:{"--index":R,"--toasts-before":R,"--z-index":L.length-R,"--offset":`${ke?Fa:Ue.current}px`,"--initial-height":Re?"auto":`${Ls}px`,...I,...v.style},onDragEnd:()=>{Ge(!1),P(null),Zt.current=null},onPointerDown:De=>{Us||!In||(br.current=new Date,_i(Ue.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Ge(!0),Zt.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,wt,Dt;if(ft||!In)return;Zt.current=null;const Wt=Number(((De=mn.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Va=Number(((wt=mn.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),jt=new Date().getTime()-((Dt=br.current)==null?void 0:Dt.getTime()),Rt=Ae==="x"?Wt:Va,At=Math.abs(Rt)/jt;if(Math.abs(Rt)>=p_||At>.11){_i(Ue.current),v.onDismiss==null||v.onDismiss.call(v,v),K(Ae==="x"?Wt>0?"right":"left":Va>0?"down":"up"),Qn(),an(!0);return}else{var ct,Ht;(ct=mn.current)==null||ct.style.setProperty("--swipe-amount-x","0px"),(Ht=mn.current)==null||Ht.style.setProperty("--swipe-amount-y","0px")}hn(!1),Ge(!1),P(null)},onPointerMove:De=>{var wt,Dt,Wt;if(!Zt.current||!In||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;const jt=De.clientY-Zt.current.y,Rt=De.clientX-Zt.current.x;var At;const ct=(At=t.swipeDirections)!=null?At:v_(Fe);!Ae&&(Math.abs(Rt)>1||Math.abs(jt)>1)&&P(Math.abs(Rt)>Math.abs(jt)?"x":"y");let Ht={x:0,y:0};const Tr=Ni=>1/(1.5+Math.abs(Ni)/20);if(Ae==="y"){if(ct.includes("top")||ct.includes("bottom"))if(ct.includes("top")&&jt<0||ct.includes("bottom")&&jt>0)Ht.y=jt;else{const Ni=jt*Tr(jt);Ht.y=Math.abs(Ni)<Math.abs(jt)?Ni:jt}}else if(Ae==="x"&&(ct.includes("left")||ct.includes("right")))if(ct.includes("left")&&Rt<0||ct.includes("right")&&Rt>0)Ht.x=Rt;else{const Ni=Rt*Tr(Rt);Ht.x=Math.abs(Ni)<Math.abs(Rt)?Ni:Rt}(Math.abs(Ht.x)>0||Math.abs(Ht.y)>0)&&hn(!0),(Dt=mn.current)==null||Dt.style.setProperty("--swipe-amount-x",`${Ht.x}px`),(Wt=mn.current)==null||Wt.style.setProperty("--swipe-amount-y",`${Ht.y}px`)}},de&&!v.jsx&&qt!=="loading"?fe.createElement("button",{"aria-label":ee,"data-disabled":Us,"data-close-button":!0,onClick:Us||!In?()=>{}:()=>{Qn(),v.onDismiss==null||v.onDismiss.call(v,v)},className:vi(j==null?void 0:j.closeButton,v==null||(a=v.classNames)==null?void 0:a.closeButton)},(ul=re==null?void 0:re.close)!=null?ul:n_):null,(qt||v.icon||v.promise)&&v.icon!==null&&((re==null?void 0:re[qt])!==null||v.icon)?fe.createElement("div",{"data-icon":"",className:vi(j==null?void 0:j.icon,v==null||(s=v.classNames)==null?void 0:s.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||cl():null,v.type!=="loading"?Is:null):null,fe.createElement("div",{"data-content":"",className:vi(j==null?void 0:j.content,v==null||(l=v.classNames)==null?void 0:l.content)},fe.createElement("div",{"data-title":"",className:vi(j==null?void 0:j.title,v==null||(c=v.classNames)==null?void 0:c.title)},v.jsx?v.jsx:typeof v.title=="function"?v.title():v.title),v.description?fe.createElement("div",{"data-description":"",className:vi(ae,ue,j==null?void 0:j.description,v==null||(d=v.classNames)==null?void 0:d.description)},typeof v.description=="function"?v.description():v.description):null),fe.isValidElement(v.cancel)?v.cancel:v.cancel&&kc(v.cancel)?fe.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||F,onClick:De=>{kc(v.cancel)&&In&&(v.cancel.onClick==null||v.cancel.onClick.call(v.cancel,De),Qn())},className:vi(j==null?void 0:j.cancelButton,v==null||(h=v.classNames)==null?void 0:h.cancelButton)},v.cancel.label):null,fe.isValidElement(v.action)?v.action:v.action&&kc(v.action)?fe.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||G,onClick:De=>{kc(v.action)&&(v.action.onClick==null||v.action.onClick.call(v.action,De),!De.defaultPrevented&&Qn())},className:vi(j==null?void 0:j.actionButton,v==null||(f=v.classNames)==null?void 0:f.actionButton)},v.action.label):null)};function w0(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function b_(t,e){const i={};return[t,e].forEach((a,s)=>{const l=s===1,c=l?"--mobile-offset":"--offset",d=l?f_:d_;function h(f){["top","right","bottom","left"].forEach(p=>{i[`${c}-${p}`]=typeof f=="number"?`${f}px`:f})}typeof a=="number"||typeof a=="string"?h(a):typeof a=="object"?["top","right","bottom","left"].forEach(f=>{a[f]===void 0?i[`${c}-${f}`]=d:i[`${c}-${f}`]=typeof a[f]=="number"?`${a[f]}px`:a[f]}):h(d)}),i}const S_=fe.forwardRef(function(e,i){const{invert:a,position:s="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:d,className:h,offset:f,mobileOffset:p,theme:v="light",richColors:y,duration:k,style:S,visibleToasts:T=u_,toastOptions:w,dir:R=w0(),gap:L=m_,icons:N,containerAriaLabel:A="Notifications"}=e,[_,B]=fe.useState([]),I=fe.useMemo(()=>Array.from(new Set([s].concat(_.filter(Q=>Q.position).map(Q=>Q.position)))),[_,s]),[F,G]=fe.useState([]),[$,ae]=fe.useState(!1),[ve,Fe]=fe.useState(!1),[Xe,Re]=fe.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),j=fe.useRef(null),re=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=fe.useRef(null),Ae=fe.useRef(!1),P=fe.useCallback(Q=>{B(K=>{var J;return(J=K.find(le=>le.id===Q.id))!=null&&J.delete||Sn.dismiss(Q.id),K.filter(({id:le})=>le!==Q.id)})},[]);return fe.useEffect(()=>Sn.subscribe(Q=>{if(Q.dismiss){requestAnimationFrame(()=>{B(K=>K.map(J=>J.id===Q.id?{...J,delete:!0}:J))});return}setTimeout(()=>{pS.flushSync(()=>{B(K=>{const J=K.findIndex(le=>le.id===Q.id);return J!==-1?[...K.slice(0,J),{...K[J],...Q},...K.slice(J+1)]:[Q,...K]})})})}),[_]),fe.useEffect(()=>{if(v!=="system"){Re(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Re("dark"):Re("light")),typeof window>"u")return;const Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:K})=>{Re(K?"dark":"light")})}catch{Q.addListener(({matches:J})=>{try{Re(J?"dark":"light")}catch(le){console.error(le)}})}},[v]),fe.useEffect(()=>{_.length<=1&&ae(!1)},[_]),fe.useEffect(()=>{const Q=K=>{var J;if(l.every(ge=>K[ge]||K.code===ge)){var ke;ae(!0),(ke=j.current)==null||ke.focus()}K.code==="Escape"&&(document.activeElement===j.current||(J=j.current)!=null&&J.contains(document.activeElement))&&ae(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[l]),fe.useEffect(()=>{if(j.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,Ae.current=!1)}},[j.current]),fe.createElement("section",{ref:i,"aria-label":`${A} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((Q,K)=>{var J;const[le,ke]=Q.split("-");return _.length?fe.createElement("ol",{key:Q,dir:R==="auto"?w0():R,tabIndex:-1,ref:j,className:h,"data-sonner-toaster":!0,"data-sonner-theme":Xe,"data-y-position":le,"data-x-position":ke,style:{"--front-toast-height":`${((J=F[0])==null?void 0:J.height)||0}px`,"--width":`${h_}px`,"--gap":`${L}px`,...S,...b_(f,p)},onBlur:ge=>{Ae.current&&!ge.currentTarget.contains(ge.relatedTarget)&&(Ae.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||Ae.current||(Ae.current=!0,ee.current=ge.relatedTarget)},onMouseEnter:()=>ae(!0),onMouseMove:()=>ae(!0),onMouseLeave:()=>{ve||ae(!1)},onDragEnd:()=>ae(!1),onPointerDown:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||Fe(!0)},onPointerUp:()=>Fe(!1)},_.filter(ge=>!ge.position&&K===0||ge.position===Q).map((ge,Le)=>{var Ge,ft;return fe.createElement(y_,{key:ge.id,icons:N,index:Le,toast:ge,defaultRichColors:y,duration:(Ge=w==null?void 0:w.duration)!=null?Ge:k,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:a,visibleToasts:T,closeButton:(ft=w==null?void 0:w.closeButton)!=null?ft:d,interacting:ve,position:Q,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,closeButtonAriaLabel:w==null?void 0:w.closeButtonAriaLabel,removeToast:P,toasts:_.filter(an=>an.position==ge.position),heights:F.filter(an=>an.position==ge.position),setHeights:G,expandByDefault:c,gap:L,expanded:$,swipeDirections:e.swipeDirections})})):null}))});function T_({onLogin:t}){const[e,i]=x.useState(""),[a,s]=x.useState(""),[l,c]=x.useState(!1),[d,h]=x.useState(!1),[f,p]=x.useState(!1),v=oi();x.useEffect(()=>{localStorage.getItem("token")&&v("/")},[]);const y=async()=>{var k,S,T,w;p(!0);try{const R=await yt.post(`${Ne.apiUrl}auth/login`,{email:e,password:a},Ne.authHeaders);if(console.log("response.data",R.data),!R.data.success){if(console.log("response.data.redirectUrl",R.data.redirectUrl),R.data.redirectUrl){window.location.href=R.data.redirectUrl;return}Ne.toast("error",R.data.message||"Login failed"),p(!1);return}const{token:L,user:N}=R.data,A={...N,language:N.language||Ne.defaultLanguage};Ne.saveUserLocal({token:L,user:A}),ln("success  User Logged In Successfully"),localStorage.setItem("isAuthenticated",status?"true":"false"),await fetch(`${Ne.apiUrl}auth/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify({status:"online"})});const _={...A,status:"online"};Ne.saveUserLocal({token:L,user:_}),t()}catch(R){console.log("response.data.redirectUrl",(S=(k=R.response)==null?void 0:k.data)==null?void 0:S.redirectUrl),Ne.toast("error",((w=(T=R==null?void 0:R.response)==null?void 0:T.data)==null?void 0:w.message)||"Login failed")}finally{p(!1)}};return E.jsxs("div",{className:"min-h-screen flex",children:[E.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center",children:E.jsx("img",{src:MA,alt:"Sign In Illustration",className:"max-w-md"})}),E.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-white",children:E.jsxs("div",{className:"max-w-md w-full space-y-8",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome back"}),E.jsx("p",{className:"text-gray-600",children:"Sign in to access your account"})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"email",value:e,onChange:k=>i(k.target.value),placeholder:"Enter your email",className:"w-full px-4 py-3 pl-12 pr-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",required:!0}),E.jsx(SS,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:l?"text":"password",value:a,onChange:k=>s(k.target.value),placeholder:"Password",className:"w-full px-4 py-3 pl-12 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 placeholder-gray-500",required:!0}),E.jsx(bS,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),E.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?E.jsx(vS,{className:"w-5 h-5"}):E.jsx(yS,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("label",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",checked:d,onChange:k=>h(k.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded"}),E.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),E.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-800",children:"Forget password ?"})]}),E.jsx("button",{type:"button",onClick:y,disabled:f,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 transition font-medium",children:f?"Signing in...":"Sign In"}),E.jsxs("p",{className:"text-center text-sm text-gray-600",children:["New Member?"," ",E.jsx(Pm,{to:"/signup",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Register now"})]})]})]})})]})}const Ih="/assets/image-BXUMsukk.png",k_=()=>{const t=oi(),e=Ne.getUserData(),i=(e==null?void 0:e.fullName)||(e==null?void 0:e.name)||"User",a=(e==null?void 0:e.email)||"user@email.com",[s,l]=x.useState((e==null?void 0:e.status)||"offline"),[c]=x.useState((e==null?void 0:e.language)||"English (US)"),[d,h]=x.useState(""),f=x.useRef(null),p=Ne.supportedLanguages,v=[{icon:TS,label:"Set Status",value:s,hasDropdown:!0,showStatusIndicator:!0},{icon:Rw,label:"Notification",hasArrow:!0},{icon:tR,label:"Sessions",hasArrow:!0,onClick:()=>t("/")},{icon:jw,label:"Language",value:c,hasArrow:!0},{icon:Qw,label:"Chats",hasArrow:!0}],y=async N=>{var I;const A=(I=N.target.files)==null?void 0:I[0];if(!A)return;const _=new FormData;_.append("image",A);const B=localStorage.getItem("token");try{const G=await(await fetch(`${Ne.baseUrl}/api/v1/user/upload-image`,{method:"POST",headers:B?{Authorization:`Bearer ${B}`}:{},body:_})).json();if(G.success&&G.imageUrl){h(Ne.baseUrl+G.imageUrl);const $=Ne.getUserData();$&&($.imageUrl=G.imageUrl,Ne.saveUserLocal({token:B||"",user:$}),h(Ne.baseUrl+G.imageUrl))}}catch(F){console.error("Image upload failed",F)}},k=async()=>{const N=localStorage.getItem("token");if(N)try{await fetch(`${Ne.apiUrl}auth/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N}`},body:JSON.stringify({status:"offline"})});const A=Ne.getUserData();A&&(A.status="offline",Ne.saveUserLocal({token:N,user:A}))}catch(A){console.error("Failed to update user status to offline",A)}Ne.userLogout(),t("/login")},[S,T]=x.useState(!1),[w,R]=x.useState((e==null?void 0:e.language)||Ne.defaultLanguage),L=async N=>{R(N),T(!1);const A=localStorage.getItem("token");try{const B=await(await fetch(`${Ne.apiUrl}auth/update-profile`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({language:N})})).json();B.user&&Ne.saveUserLocal({token:A||"",user:B.user})}catch(_){console.error("Failed to update language",_)}};return x.useEffect(()=>{const N=()=>{const A=Ne.getUserData();l((A==null?void 0:A.status)||"offline")};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]),x.useEffect(()=>{const N=Ne.getUserData();h(N!=null&&N.imageUrl?Ne.baseUrl+N.imageUrl:Ih)},[]),E.jsx("div",{className:"min-h-screen bg-gray-50",children:E.jsxs("div",{className:"mx-auto bg-white min-h-screen",children:[E.jsxs("div",{className:"px-6 py-6 border-b border-gray-100",children:[E.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-1",children:"Settings"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Settings"})]}),E.jsx("div",{className:"px-6 py-6 border-b ml-2 mr-6 border-gray-100",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("div",{className:"relative",children:[E.jsxs("div",{className:"w-14 h-14 bg-blue-500 rounded-full flex items-center justify-center overflow-hidden",children:[E.jsx("img",{src:d||Ih,alt:"Profile",className:"w-full h-full object-cover cursor-pointer",onClick:()=>{var N;return(N=f.current)==null?void 0:N.click()}}),E.jsx("input",{type:"file",accept:"image/*",ref:f,style:{display:"none"},onChange:y})]}),E.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:E.jsx(Dw,{className:"w-4 h-4 text-white"})})]}),E.jsxs("div",{children:[E.jsx("h2",{className:"font-semibold text-gray-900 text-lg",children:i}),E.jsx("p",{className:"text-gray-500 text-sm",children:a})]})]}),E.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:E.jsx(Mw,{className:"w-5 h-5"})})]})}),E.jsx("div",{className:"py-4 pl-6 pr-6",children:v.map((N,A)=>{var B;const _=N.icon;return N.label==="Language"?E.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors duration-150 relative",children:[E.jsxs("div",{className:"flex items-center justify-between",onClick:()=>T(I=>!I),children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:"w-6 h-6 text-gray-600",children:E.jsx(_,{className:"w-6 h-6"})}),E.jsx("span",{className:"text-gray-900 font-medium",children:N.label})]}),E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("span",{className:"text-gray-500 text-sm",children:((B=p.find(I=>I.code===w))==null?void 0:B.name)||"English (US)"}),E.jsx(Qf,{className:"w-5 h-5 text-gray-400"})]})]}),S&&E.jsx("div",{className:"absolute z-10 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg w-56",children:p.map(I=>E.jsx("div",{className:`px-4 py-2 hover:bg-blue-50 cursor-pointer ${w===I.code?"bg-blue-100 font-semibold":""}`,onClick:()=>L(I.code),children:I.name},I.code))})]},A):E.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:N.onClick,children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:"w-6 h-6 text-gray-600",children:E.jsx(_,{className:"w-6 h-6"})}),E.jsx("span",{className:"text-gray-900 font-medium",children:N.label})]}),E.jsxs("div",{className:"flex items-center space-x-3",children:[N.showStatusIndicator&&E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),E.jsx("span",{className:"text-gray-700 text-sm",children:N.value})]}),N.value&&!N.showStatusIndicator&&E.jsx("span",{className:"text-gray-500 text-sm",children:N.value}),N.hasArrow&&E.jsx(Qf,{className:"w-5 h-5 text-gray-400"}),N.hasDropdown&&E.jsx(Qf,{className:"w-5 h-5 text-gray-400 transform rotate-90"})]})]})},A)})}),E.jsx("div",{className:"pl-6 pr-6 mt-8 border-t border-gray-100",children:E.jsxs("div",{onClick:k,className:"flex items-center space-x-4 text-red-600 cursor-pointer hover:bg-red-50 -mx-2 px-2 py-2 rounded-lg transition-colors duration-150",children:[E.jsx(qw,{className:"w-6 h-6"}),E.jsx("span",{className:"font-medium",children:"Log Out"})]})})]})})};function C_(){const t=oi(),[e,i]=x.useState({fullName:"",email:"",language:"English",phoneNumber:"",password:""}),[a,s]=x.useState(!1),[l,c]=x.useState(!1),[d,h]=x.useState(!1),[f,p]=x.useState({text:"",type:null}),v=["English","Spanish","French","German","Italian","Portuguese"],y=(S,T)=>{i(w=>({...w,[S]:T}))},k=async()=>{if(!l){p({text:"Please agree to the Terms and Conditions",type:"error"});return}try{p({text:"Processing your request...",type:null});const S={name:e.fullName,email:e.email,password:e.password,phoneNo:e.phoneNumber,language:e.language},T=await fetch(`${Ne.baseUrl}/api/v1/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),w=await T.json();console.log("resopnas",w),T.ok?(p({text:w.message,type:"success"}),t(`/verify-email?email=${e.email}`,{state:{email:e.email}})):p({text:w.message,type:"error"})}catch(S){console.error("Error during signup:",S),p({text:"Signup failed. Please try again.",type:"error"})}};return E.jsxs("div",{className:"min-h-screen flex",children:[E.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center bg-gray-100",children:E.jsx("div",{className:"max-w-md w-full",children:E.jsx("div",{className:"relative mb-8",children:E.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full h-64",children:[E.jsx("path",{d:"M50 60 L60 55 L70 60 M80 50 L90 45 L100 50 M120 55 L130 50 L140 55",stroke:"#64748b",strokeWidth:"2",fill:"none"}),E.jsx("path",{d:"M100 180 L140 120 L180 180 Z",fill:"#3b82f6"}),E.jsx("path",{d:"M160 180 L200 100 L240 180 Z",fill:"#1e40af"}),E.jsx("circle",{cx:"80",cy:"180",r:"25",fill:"#e5e7eb"}),E.jsx("rect",{x:"75",y:"180",width:"10",height:"40",fill:"#374151"}),E.jsx("path",{d:"M50 220 Q150 200 250 180 Q300 170 350 160",stroke:"#374151",strokeWidth:"3",fill:"none"}),E.jsx("ellipse",{cx:"180",cy:"190",rx:"15",ry:"8",fill:"#374151"}),E.jsx("path",{d:"M170 190 L190 190 L185 180 Z",fill:"#374151"}),E.jsx("circle",{cx:"120",cy:"250",r:"8",fill:"#3b82f6"})]})})})}),E.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-white",children:E.jsxs("div",{className:"max-w-md w-full space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Get Started"}),E.jsx("p",{className:"text-gray-600",children:"By creating a free account."})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"text",value:e.fullName,onChange:S=>y("fullName",S.target.value),placeholder:"Full name",className:"w-full px-4 py-3 pl-12 pr-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 text-gray-900 placeholder-gray-500",required:!0}),E.jsx(TS,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"email",value:e.email,onChange:S=>y("email",S.target.value),placeholder:"Valid email",className:"w-full px-4 py-3 pl-12 pr-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 text-gray-900 placeholder-gray-500",required:!0}),E.jsx(SS,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]}),E.jsxs("div",{className:"relative",children:[E.jsxs("button",{type:"button",onClick:()=>h(!d),className:"w-full px-4 py-3 pl-4 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 text-gray-900 text-left flex items-center justify-between",children:[E.jsx("span",{children:e.language}),E.jsx(_w,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${d?"rotate-180":""}`})]}),d&&E.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-40 overflow-y-auto",children:v.map(S=>E.jsx("button",{type:"button",onClick:()=>{y("language",S),h(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 focus:bg-gray-50 transition duration-200 text-gray-900 first:rounded-t-lg last:rounded-b-lg",children:S},S))})]}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"tel",value:e.phoneNumber,onChange:S=>y("phoneNumber",S.target.value),placeholder:"Phone number",className:"w-full px-4 py-3 pl-12 pr-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 text-gray-900 placeholder-gray-500",required:!0}),E.jsx(Jw,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:a?"text":"password",value:e.password,onChange:S=>y("password",S.target.value),placeholder:"Strong Password",className:"w-full px-4 py-3 pl-12 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 text-gray-900 placeholder-gray-500",required:!0}),E.jsx(bS,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),E.jsx("button",{type:"button",onClick:()=>s(!a),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition duration-200",children:a?E.jsx(vS,{className:"w-5 h-5"}):E.jsx(yS,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"flex items-start space-x-3 pt-2",children:[E.jsx("input",{type:"checkbox",id:"agreeToTerms",checked:l,onChange:S=>c(S.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-1"}),E.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm text-gray-600 leading-relaxed",children:["By checking the box you agree to our"," ",E.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800 transition duration-200",children:"Terms"})," ","and"," ",E.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800 transition duration-200",children:"Conditions"}),"."]})]}),E.jsx("button",{onClick:k,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 transition duration-200 font-medium mt-6",children:"Sign Up"}),f.text&&E.jsx("div",{className:`text-sm mt-2 ${f.type==="success"?"text-green-600":"text-red-600"}`,children:f.text}),E.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Already a member?"," ",E.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Log In"})]})]})]})})]})}function R0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $S(...t){return e=>{let i=!1;const a=t.map(s=>{const l=R0(s,e);return!i&&typeof l=="function"&&(i=!0),l});if(i)return()=>{for(let s=0;s<a.length;s++){const l=a[s];typeof l=="function"?l():R0(t[s],null)}}}}function pr(...t){return x.useCallback($S(...t),t)}function jm(t){const e=x_(t),i=x.forwardRef((a,s)=>{const{children:l,...c}=a,d=x.Children.toArray(l),h=d.find(R_);if(h){const f=h.props.children,p=d.map(v=>v===h?x.Children.count(f)>1?x.Children.only(null):x.isValidElement(f)?f.props.children:null:v);return E.jsx(e,{...c,ref:s,children:x.isValidElement(f)?x.cloneElement(f,void 0,p):null})}return E.jsx(e,{...c,ref:s,children:l})});return i.displayName=`${t}.Slot`,i}var E_=jm("Slot");function x_(t){const e=x.forwardRef((i,a)=>{const{children:s,...l}=i;if(x.isValidElement(s)){const c=__(s),d=A_(l,s.props);return s.type!==x.Fragment&&(d.ref=a?$S(a,c):c),x.cloneElement(s,d)}return x.Children.count(s)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var w_=Symbol("radix.slottable");function R_(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===w_}function A_(t,e){const i={...e};for(const a in e){const s=t[a],l=e[a];/^on[A-Z]/.test(a)?s&&l?i[a]=(...d)=>{const h=l(...d);return s(...d),h}:s&&(i[a]=s):a==="style"?i[a]={...s,...l}:a==="className"&&(i[a]=[s,l].filter(Boolean).join(" "))}return{...t,...i}}function __(t){var a,s;let e=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,i=e&&"isReactWarning"in e&&e.isReactWarning;return i?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,i=e&&"isReactWarning"in e&&e.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}const A0=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,_0=QS,O_=(t,e)=>i=>{var a;if((e==null?void 0:e.variants)==null)return _0(t,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:s,defaultVariants:l}=e,c=Object.keys(s).map(f=>{const p=i==null?void 0:i[f],v=l==null?void 0:l[f];if(p===null)return null;const y=A0(p)||A0(v);return s[f][y]}),d=i&&Object.entries(i).reduce((f,p)=>{let[v,y]=p;return y===void 0||(f[v]=y),f},{}),h=e==null||(a=e.compoundVariants)===null||a===void 0?void 0:a.reduce((f,p)=>{let{class:v,className:y,...k}=p;return Object.entries(k).every(S=>{let[T,w]=S;return Array.isArray(w)?w.includes({...l,...d}[T]):{...l,...d}[T]===w})?[...f,v,y]:f},[]);return _0(t,c,h,i==null?void 0:i.class,i==null?void 0:i.className)},Bm="-",N_=t=>{const e=P_(t),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:c=>{const d=c.split(Bm);return d[0]===""&&d.length!==1&&d.shift(),eT(d,e)||D_(c)},getConflictingClassGroupIds:(c,d)=>{const h=i[c]||[];return d&&a[c]?[...h,...a[c]]:h}}},eT=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const i=t[0],a=e.nextPart.get(i),s=a?eT(t.slice(1),a):void 0;if(s)return s;if(e.validators.length===0)return;const l=t.join(Bm);return(c=e.validators.find(({validator:d})=>d(l)))==null?void 0:c.classGroupId},O0=/^\[(.+)\]$/,D_=t=>{if(O0.test(t)){const e=O0.exec(t)[1],i=e==null?void 0:e.substring(0,e.indexOf(":"));if(i)return"arbitrary.."+i}},P_=t=>{const{theme:e,classGroups:i}=t,a={nextPart:new Map,validators:[]};for(const s in i)jh(i[s],a,s,e);return a},jh=(t,e,i,a)=>{t.forEach(s=>{if(typeof s=="string"){const l=s===""?e:N0(e,s);l.classGroupId=i;return}if(typeof s=="function"){if(M_(s)){jh(s(a),e,i,a);return}e.validators.push({validator:s,classGroupId:i});return}Object.entries(s).forEach(([l,c])=>{jh(c,N0(e,l),i,a)})})},N0=(t,e)=>{let i=t;return e.split(Bm).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},M_=t=>t.isThemeGetter,L_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,i=new Map,a=new Map;const s=(l,c)=>{i.set(l,c),e++,e>t&&(e=0,a=i,i=new Map)};return{get(l){let c=i.get(l);if(c!==void 0)return c;if((c=a.get(l))!==void 0)return s(l,c),c},set(l,c){i.has(l)?i.set(l,c):s(l,c)}}},Bh="!",zh=":",U_=zh.length,I_=t=>{const{prefix:e,experimentalParseClassName:i}=t;let a=s=>{const l=[];let c=0,d=0,h=0,f;for(let S=0;S<s.length;S++){let T=s[S];if(c===0&&d===0){if(T===zh){l.push(s.slice(h,S)),h=S+U_;continue}if(T==="/"){f=S;continue}}T==="["?c++:T==="]"?c--:T==="("?d++:T===")"&&d--}const p=l.length===0?s:s.substring(h),v=j_(p),y=v!==p,k=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:k}};if(e){const s=e+zh,l=a;a=c=>c.startsWith(s)?l(c.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(i){const s=a;a=l=>i({className:l,parseClassName:s})}return a},j_=t=>t.endsWith(Bh)?t.substring(0,t.length-1):t.startsWith(Bh)?t.substring(1):t,B_=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const s=[];let l=[];return a.forEach(c=>{c[0]==="["||e[c]?(s.push(...l.sort(),c),l=[]):l.push(c)}),s.push(...l.sort()),s}},z_=t=>({cache:L_(t.cacheSize),parseClassName:I_(t),sortModifiers:B_(t),...N_(t)}),F_=/\s+/,V_=(t,e)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:l}=e,c=[],d=t.trim().split(F_);let h="";for(let f=d.length-1;f>=0;f-=1){const p=d[f],{isExternal:v,modifiers:y,hasImportantModifier:k,baseClassName:S,maybePostfixModifierPosition:T}=i(p);if(v){h=p+(h.length>0?" "+h:h);continue}let w=!!T,R=a(w?S.substring(0,T):S);if(!R){if(!w){h=p+(h.length>0?" "+h:h);continue}if(R=a(S),!R){h=p+(h.length>0?" "+h:h);continue}w=!1}const L=l(y).join(":"),N=k?L+Bh:L,A=N+R;if(c.includes(A))continue;c.push(A);const _=s(R,w);for(let B=0;B<_.length;++B){const I=_[B];c.push(N+I)}h=p+(h.length>0?" "+h:h)}return h};function q_(){let t=0,e,i,a="";for(;t<arguments.length;)(e=arguments[t++])&&(i=tT(e))&&(a&&(a+=" "),a+=i);return a}const tT=t=>{if(typeof t=="string")return t;let e,i="";for(let a=0;a<t.length;a++)t[a]&&(e=tT(t[a]))&&(i&&(i+=" "),i+=e);return i};function H_(t,...e){let i,a,s,l=c;function c(h){const f=e.reduce((p,v)=>v(p),t());return i=z_(f),a=i.cache.get,s=i.cache.set,l=d,d(h)}function d(h){const f=a(h);if(f)return f;const p=V_(h,i);return s(h,p),p}return function(){return l(q_.apply(null,arguments))}}const Ft=t=>{const e=i=>i[t]||[];return e.isThemeGetter=!0,e},nT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,iT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,G_=/^\d+\/\d+$/,K_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Y_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,X_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,J_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ss=t=>G_.test(t),je=t=>!!t&&!Number.isNaN(Number(t)),Aa=t=>!!t&&Number.isInteger(Number(t)),Wf=t=>t.endsWith("%")&&je(t.slice(0,-1)),Yi=t=>K_.test(t),Z_=()=>!0,W_=t=>Y_.test(t)&&!Q_.test(t),aT=()=>!1,$_=t=>X_.test(t),eO=t=>J_.test(t),tO=t=>!be(t)&&!Se(t),nO=t=>Ps(t,oT,aT),be=t=>nT.test(t),sr=t=>Ps(t,lT,W_),$f=t=>Ps(t,oO,je),D0=t=>Ps(t,rT,aT),iO=t=>Ps(t,sT,eO),Cc=t=>Ps(t,cT,$_),Se=t=>iT.test(t),jo=t=>Ms(t,lT),aO=t=>Ms(t,lO),P0=t=>Ms(t,rT),rO=t=>Ms(t,oT),sO=t=>Ms(t,sT),Ec=t=>Ms(t,cT,!0),Ps=(t,e,i)=>{const a=nT.exec(t);return a?a[1]?e(a[1]):i(a[2]):!1},Ms=(t,e,i=!1)=>{const a=iT.exec(t);return a?a[1]?e(a[1]):i:!1},rT=t=>t==="position"||t==="percentage",sT=t=>t==="image"||t==="url",oT=t=>t==="length"||t==="size"||t==="bg-size",lT=t=>t==="length",oO=t=>t==="number",lO=t=>t==="family-name",cT=t=>t==="shadow",cO=()=>{const t=Ft("color"),e=Ft("font"),i=Ft("text"),a=Ft("font-weight"),s=Ft("tracking"),l=Ft("leading"),c=Ft("breakpoint"),d=Ft("container"),h=Ft("spacing"),f=Ft("radius"),p=Ft("shadow"),v=Ft("inset-shadow"),y=Ft("text-shadow"),k=Ft("drop-shadow"),S=Ft("blur"),T=Ft("perspective"),w=Ft("aspect"),R=Ft("ease"),L=Ft("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],_=()=>[...A(),Se,be],B=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],F=()=>[Se,be,h],G=()=>[ss,"full","auto",...F()],$=()=>[Aa,"none","subgrid",Se,be],ae=()=>["auto",{span:["full",Aa,Se,be]},Aa,Se,be],ve=()=>[Aa,"auto",Se,be],Fe=()=>["auto","min","max","fr",Se,be],Xe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Re=()=>["start","end","center","stretch","center-safe","end-safe"],j=()=>["auto",...F()],re=()=>[ss,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],ee=()=>[t,Se,be],Ae=()=>[...A(),P0,D0,{position:[Se,be]}],P=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",rO,nO,{size:[Se,be]}],K=()=>[Wf,jo,sr],J=()=>["","none","full",f,Se,be],le=()=>["",je,jo,sr],ke=()=>["solid","dashed","dotted","double"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Le=()=>[je,Wf,P0,D0],Ge=()=>["","none",S,Se,be],ft=()=>["none",je,Se,be],an=()=>["none",je,Se,be],wn=()=>[je,Se,be],hn=()=>[ss,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yi],breakpoint:[Yi],color:[Z_],container:[Yi],"drop-shadow":[Yi],ease:["in","out","in-out"],font:[tO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yi],shadow:[Yi],spacing:["px",je],text:[Yi],"text-shadow":[Yi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ss,be,Se,w]}],container:["container"],columns:[{columns:[je,be,Se,d]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[Aa,"auto",Se,be]}],basis:[{basis:[ss,"full","auto",d,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,ss,"auto","initial","none",be]}],grow:[{grow:["",je,Se,be]}],shrink:[{shrink:["",je,Se,be]}],order:[{order:[Aa,"first","last","none",Se,be]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:ae()}],"col-start":[{"col-start":ve()}],"col-end":[{"col-end":ve()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:ae()}],"row-start":[{"row-start":ve()}],"row-end":[{"row-end":ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Fe()}],"auto-rows":[{"auto-rows":Fe()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...Xe(),"normal"]}],"justify-items":[{"justify-items":[...Re(),"normal"]}],"justify-self":[{"justify-self":["auto",...Re()]}],"align-content":[{content:["normal",...Xe()]}],"align-items":[{items:[...Re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Re(),{baseline:["","last"]}]}],"place-content":[{"place-content":Xe()}],"place-items":[{"place-items":[...Re(),"baseline"]}],"place-self":[{"place-self":["auto",...Re()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:j()}],mx:[{mx:j()}],my:[{my:j()}],ms:[{ms:j()}],me:[{me:j()}],mt:[{mt:j()}],mr:[{mr:j()}],mb:[{mb:j()}],ml:[{ml:j()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[d,"screen",...re()]}],"min-w":[{"min-w":[d,"screen","none",...re()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",i,jo,sr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Se,$f]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Wf,be]}],"font-family":[{font:[aO,be,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Se,be]}],"line-clamp":[{"line-clamp":[je,"none",Se,$f]}],leading:[{leading:[l,...F()]}],"list-image":[{"list-image":["none",Se,be]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Se,be]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",Se,sr]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[je,"auto",Se,be]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se,be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se,be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ae()}],"bg-repeat":[{bg:P()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Aa,Se,be],radial:["",Se,be],conic:[Aa,Se,be]},sO,iO]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:J()}],"rounded-s":[{"rounded-s":J()}],"rounded-e":[{"rounded-e":J()}],"rounded-t":[{"rounded-t":J()}],"rounded-r":[{"rounded-r":J()}],"rounded-b":[{"rounded-b":J()}],"rounded-l":[{"rounded-l":J()}],"rounded-ss":[{"rounded-ss":J()}],"rounded-se":[{"rounded-se":J()}],"rounded-ee":[{"rounded-ee":J()}],"rounded-es":[{"rounded-es":J()}],"rounded-tl":[{"rounded-tl":J()}],"rounded-tr":[{"rounded-tr":J()}],"rounded-br":[{"rounded-br":J()}],"rounded-bl":[{"rounded-bl":J()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ke(),"hidden","none"]}],"divide-style":[{divide:[...ke(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[...ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,Se,be]}],"outline-w":[{outline:["",je,jo,sr]}],"outline-color":[{outline:ee()}],shadow:[{shadow:["","none",p,Ec,Cc]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",v,Ec,Cc]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[je,sr]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":ee()}],"text-shadow":[{"text-shadow":["none",y,Ec,Cc]}],"text-shadow-color":[{"text-shadow":ee()}],opacity:[{opacity:[je,Se,be]}],"mix-blend":[{"mix-blend":[...ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":Le()}],"mask-image-linear-to-pos":[{"mask-linear-to":Le()}],"mask-image-linear-from-color":[{"mask-linear-from":ee()}],"mask-image-linear-to-color":[{"mask-linear-to":ee()}],"mask-image-t-from-pos":[{"mask-t-from":Le()}],"mask-image-t-to-pos":[{"mask-t-to":Le()}],"mask-image-t-from-color":[{"mask-t-from":ee()}],"mask-image-t-to-color":[{"mask-t-to":ee()}],"mask-image-r-from-pos":[{"mask-r-from":Le()}],"mask-image-r-to-pos":[{"mask-r-to":Le()}],"mask-image-r-from-color":[{"mask-r-from":ee()}],"mask-image-r-to-color":[{"mask-r-to":ee()}],"mask-image-b-from-pos":[{"mask-b-from":Le()}],"mask-image-b-to-pos":[{"mask-b-to":Le()}],"mask-image-b-from-color":[{"mask-b-from":ee()}],"mask-image-b-to-color":[{"mask-b-to":ee()}],"mask-image-l-from-pos":[{"mask-l-from":Le()}],"mask-image-l-to-pos":[{"mask-l-to":Le()}],"mask-image-l-from-color":[{"mask-l-from":ee()}],"mask-image-l-to-color":[{"mask-l-to":ee()}],"mask-image-x-from-pos":[{"mask-x-from":Le()}],"mask-image-x-to-pos":[{"mask-x-to":Le()}],"mask-image-x-from-color":[{"mask-x-from":ee()}],"mask-image-x-to-color":[{"mask-x-to":ee()}],"mask-image-y-from-pos":[{"mask-y-from":Le()}],"mask-image-y-to-pos":[{"mask-y-to":Le()}],"mask-image-y-from-color":[{"mask-y-from":ee()}],"mask-image-y-to-color":[{"mask-y-to":ee()}],"mask-image-radial":[{"mask-radial":[Se,be]}],"mask-image-radial-from-pos":[{"mask-radial-from":Le()}],"mask-image-radial-to-pos":[{"mask-radial-to":Le()}],"mask-image-radial-from-color":[{"mask-radial-from":ee()}],"mask-image-radial-to-color":[{"mask-radial-to":ee()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":Le()}],"mask-image-conic-to-pos":[{"mask-conic-to":Le()}],"mask-image-conic-from-color":[{"mask-conic-from":ee()}],"mask-image-conic-to-color":[{"mask-conic-to":ee()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ae()}],"mask-repeat":[{mask:P()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Se,be]}],filter:[{filter:["","none",Se,be]}],blur:[{blur:Ge()}],brightness:[{brightness:[je,Se,be]}],contrast:[{contrast:[je,Se,be]}],"drop-shadow":[{"drop-shadow":["","none",k,Ec,Cc]}],"drop-shadow-color":[{"drop-shadow":ee()}],grayscale:[{grayscale:["",je,Se,be]}],"hue-rotate":[{"hue-rotate":[je,Se,be]}],invert:[{invert:["",je,Se,be]}],saturate:[{saturate:[je,Se,be]}],sepia:[{sepia:["",je,Se,be]}],"backdrop-filter":[{"backdrop-filter":["","none",Se,be]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[je,Se,be]}],"backdrop-contrast":[{"backdrop-contrast":[je,Se,be]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,Se,be]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,Se,be]}],"backdrop-invert":[{"backdrop-invert":["",je,Se,be]}],"backdrop-opacity":[{"backdrop-opacity":[je,Se,be]}],"backdrop-saturate":[{"backdrop-saturate":[je,Se,be]}],"backdrop-sepia":[{"backdrop-sepia":["",je,Se,be]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Se,be]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",Se,be]}],ease:[{ease:["linear","initial",R,Se,be]}],delay:[{delay:[je,Se,be]}],animate:[{animate:["none",L,Se,be]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[T,Se,be]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:ft()}],"rotate-x":[{"rotate-x":ft()}],"rotate-y":[{"rotate-y":ft()}],"rotate-z":[{"rotate-z":ft()}],scale:[{scale:an()}],"scale-x":[{"scale-x":an()}],"scale-y":[{"scale-y":an()}],"scale-z":[{"scale-z":an()}],"scale-3d":["scale-3d"],skew:[{skew:wn()}],"skew-x":[{"skew-x":wn()}],"skew-y":[{"skew-y":wn()}],transform:[{transform:[Se,be,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:hn()}],"translate-x":[{"translate-x":hn()}],"translate-y":[{"translate-y":hn()}],"translate-z":[{"translate-z":hn()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se,be]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se,be]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[je,jo,sr,$f]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},uO=H_(cO);function Ln(...t){return uO(QS(t))}const dO=O_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function eh({className:t,variant:e,size:i,asChild:a=!1,...s}){const l=a?E_:"button";return E.jsx(l,{"data-slot":"button",className:Ln(dO({variant:e,size:i,className:t})),...s})}function M0({className:t,type:e,...i}){return E.jsx("input",{type:e,"data-slot":"input",className:Ln("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}function La(t,e,{checkForDefaultPrevented:i=!0}={}){return function(s){if(t==null||t(s),i===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function fO(t,e){const i=x.createContext(e),a=l=>{const{children:c,...d}=l,h=x.useMemo(()=>d,Object.values(d));return E.jsx(i.Provider,{value:h,children:c})};a.displayName=t+"Provider";function s(l){const c=x.useContext(i);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${t}\``)}return[a,s]}function hO(t,e=[]){let i=[];function a(l,c){const d=x.createContext(c),h=i.length;i=[...i,c];const f=v=>{var R;const{scope:y,children:k,...S}=v,T=((R=y==null?void 0:y[t])==null?void 0:R[h])||d,w=x.useMemo(()=>S,Object.values(S));return E.jsx(T.Provider,{value:w,children:k})};f.displayName=l+"Provider";function p(v,y){var T;const k=((T=y==null?void 0:y[t])==null?void 0:T[h])||d,S=x.useContext(k);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${l}\``)}return[f,p]}const s=()=>{const l=i.map(c=>x.createContext(c));return function(d){const h=(d==null?void 0:d[t])||l;return x.useMemo(()=>({[`__scope${t}`]:{...d,[t]:h}}),[d,h])}};return s.scopeName=t,[a,mO(s,...e)]}function mO(...t){const e=t[0];if(t.length===1)return e;const i=()=>{const a=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=a.reduce((d,{useScope:h,scopeName:f})=>{const v=h(l)[`__scope${f}`];return{...d,...v}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return i.scopeName=e.scopeName,i}var $o=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},pO=Wb[" useId ".trim().toString()]||(()=>{}),gO=0;function th(t){const[e,i]=x.useState(pO());return $o(()=>{i(a=>a??String(gO++))},[t]),t||(e?`radix-${e}`:"")}var vO=Wb[" useInsertionEffect ".trim().toString()]||$o;function yO({prop:t,defaultProp:e,onChange:i=()=>{},caller:a}){const[s,l,c]=bO({defaultProp:e,onChange:i}),d=t!==void 0,h=d?t:s;{const p=x.useRef(t!==void 0);x.useEffect(()=>{const v=p.current;v!==d&&console.warn(`${a} is changing from ${v?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=d},[d,a])}const f=x.useCallback(p=>{var v;if(d){const y=SO(p)?p(t):p;y!==t&&((v=c.current)==null||v.call(c,y))}else l(p)},[d,t,l,c]);return[h,f]}function bO({defaultProp:t,onChange:e}){const[i,a]=x.useState(t),s=x.useRef(i),l=x.useRef(e);return vO(()=>{l.current=e},[e]),x.useEffect(()=>{var c;s.current!==i&&((c=l.current)==null||c.call(l,i),s.current=i)},[i,s]),[i,a,l]}function SO(t){return typeof t=="function"}var TO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],aa=TO.reduce((t,e)=>{const i=jm(`Primitive.${e}`),a=x.forwardRef((s,l)=>{const{asChild:c,...d}=s,h=c?i:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(h,{...d,ref:l})});return a.displayName=`Primitive.${e}`,{...t,[e]:a}},{});function kO(t,e){t&&mS.flushSync(()=>t.dispatchEvent(e))}function el(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...i)=>{var a;return(a=e.current)==null?void 0:a.call(e,...i)},[])}function CO(t,e=globalThis==null?void 0:globalThis.document){const i=el(t);x.useEffect(()=>{const a=s=>{s.key==="Escape"&&i(s)};return e.addEventListener("keydown",a,{capture:!0}),()=>e.removeEventListener("keydown",a,{capture:!0})},[i,e])}var EO="DismissableLayer",Fh="dismissableLayer.update",xO="dismissableLayer.pointerDownOutside",wO="dismissableLayer.focusOutside",L0,uT=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dT=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:c,onDismiss:d,...h}=t,f=x.useContext(uT),[p,v]=x.useState(null),y=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,k]=x.useState({}),S=pr(e,I=>v(I)),T=Array.from(f.layers),[w]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),R=T.indexOf(w),L=p?T.indexOf(p):-1,N=f.layersWithOutsidePointerEventsDisabled.size>0,A=L>=R,_=_O(I=>{const F=I.target,G=[...f.branches].some($=>$.contains(F));!A||G||(s==null||s(I),c==null||c(I),I.defaultPrevented||d==null||d())},y),B=OO(I=>{const F=I.target;[...f.branches].some($=>$.contains(F))||(l==null||l(I),c==null||c(I),I.defaultPrevented||d==null||d())},y);return CO(I=>{L===f.layers.size-1&&(a==null||a(I),!I.defaultPrevented&&d&&(I.preventDefault(),d()))},y),x.useEffect(()=>{if(p)return i&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(L0=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),U0(),()=>{i&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=L0)}},[p,y,i,f]),x.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),U0())},[p,f]),x.useEffect(()=>{const I=()=>k({});return document.addEventListener(Fh,I),()=>document.removeEventListener(Fh,I)},[]),E.jsx(aa.div,{...h,ref:S,style:{pointerEvents:N?A?"auto":"none":void 0,...t.style},onFocusCapture:La(t.onFocusCapture,B.onFocusCapture),onBlurCapture:La(t.onBlurCapture,B.onBlurCapture),onPointerDownCapture:La(t.onPointerDownCapture,_.onPointerDownCapture)})});dT.displayName=EO;var RO="DismissableLayerBranch",AO=x.forwardRef((t,e)=>{const i=x.useContext(uT),a=x.useRef(null),s=pr(e,a);return x.useEffect(()=>{const l=a.current;if(l)return i.branches.add(l),()=>{i.branches.delete(l)}},[i.branches]),E.jsx(aa.div,{...t,ref:s})});AO.displayName=RO;function _O(t,e=globalThis==null?void 0:globalThis.document){const i=el(t),a=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const l=d=>{if(d.target&&!a.current){let h=function(){fT(xO,i,f,{discrete:!0})};const f={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);a.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",s.current)}},[e,i]),{onPointerDownCapture:()=>a.current=!0}}function OO(t,e=globalThis==null?void 0:globalThis.document){const i=el(t),a=x.useRef(!1);return x.useEffect(()=>{const s=l=>{l.target&&!a.current&&fT(wO,i,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function U0(){const t=new CustomEvent(Fh);document.dispatchEvent(t)}function fT(t,e,i,{discrete:a}){const s=i.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i});e&&s.addEventListener(t,e,{once:!0}),a?kO(s,l):s.dispatchEvent(l)}var nh="focusScope.autoFocusOnMount",ih="focusScope.autoFocusOnUnmount",I0={bubbles:!1,cancelable:!0},NO="FocusScope",hT=x.forwardRef((t,e)=>{const{loop:i=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:l,...c}=t,[d,h]=x.useState(null),f=el(s),p=el(l),v=x.useRef(null),y=pr(e,T=>h(T)),k=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(a){let T=function(N){if(k.paused||!d)return;const A=N.target;d.contains(A)?v.current=A:Na(v.current,{select:!0})},w=function(N){if(k.paused||!d)return;const A=N.relatedTarget;A!==null&&(d.contains(A)||Na(v.current,{select:!0}))},R=function(N){if(document.activeElement===document.body)for(const _ of N)_.removedNodes.length>0&&Na(d)};document.addEventListener("focusin",T),document.addEventListener("focusout",w);const L=new MutationObserver(R);return d&&L.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",T),document.removeEventListener("focusout",w),L.disconnect()}}},[a,d,k.paused]),x.useEffect(()=>{if(d){B0.add(k);const T=document.activeElement;if(!d.contains(T)){const R=new CustomEvent(nh,I0);d.addEventListener(nh,f),d.dispatchEvent(R),R.defaultPrevented||(DO(IO(mT(d)),{select:!0}),document.activeElement===T&&Na(d))}return()=>{d.removeEventListener(nh,f),setTimeout(()=>{const R=new CustomEvent(ih,I0);d.addEventListener(ih,p),d.dispatchEvent(R),R.defaultPrevented||Na(T??document.body,{select:!0}),d.removeEventListener(ih,p),B0.remove(k)},0)}}},[d,f,p,k]);const S=x.useCallback(T=>{if(!i&&!a||k.paused)return;const w=T.key==="Tab"&&!T.altKey&&!T.ctrlKey&&!T.metaKey,R=document.activeElement;if(w&&R){const L=T.currentTarget,[N,A]=PO(L);N&&A?!T.shiftKey&&R===A?(T.preventDefault(),i&&Na(N,{select:!0})):T.shiftKey&&R===N&&(T.preventDefault(),i&&Na(A,{select:!0})):R===L&&T.preventDefault()}},[i,a,k.paused]);return E.jsx(aa.div,{tabIndex:-1,...c,ref:y,onKeyDown:S})});hT.displayName=NO;function DO(t,{select:e=!1}={}){const i=document.activeElement;for(const a of t)if(Na(a,{select:e}),document.activeElement!==i)return}function PO(t){const e=mT(t),i=j0(e,t),a=j0(e.reverse(),t);return[i,a]}function mT(t){const e=[],i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)e.push(i.currentNode);return e}function j0(t,e){for(const i of t)if(!MO(i,{upTo:e}))return i}function MO(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function LO(t){return t instanceof HTMLInputElement&&"select"in t}function Na(t,{select:e=!1}={}){if(t&&t.focus){const i=document.activeElement;t.focus({preventScroll:!0}),t!==i&&LO(t)&&e&&t.select()}}var B0=UO();function UO(){let t=[];return{add(e){const i=t[0];e!==i&&(i==null||i.pause()),t=z0(t,e),t.unshift(e)},remove(e){var i;t=z0(t,e),(i=t[0])==null||i.resume()}}}function z0(t,e){const i=[...t],a=i.indexOf(e);return a!==-1&&i.splice(a,1),i}function IO(t){return t.filter(e=>e.tagName!=="A")}var jO="Portal",pT=x.forwardRef((t,e)=>{var d;const{container:i,...a}=t,[s,l]=x.useState(!1);$o(()=>l(!0),[]);const c=i||s&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?pS.createPortal(E.jsx(aa.div,{...a,ref:e}),c):null});pT.displayName=jO;function BO(t,e){return x.useReducer((i,a)=>e[i][a]??i,t)}var ku=t=>{const{present:e,children:i}=t,a=zO(e),s=typeof i=="function"?i({present:a.isPresent}):x.Children.only(i),l=pr(a.ref,FO(s));return typeof i=="function"||a.isPresent?x.cloneElement(s,{ref:l}):null};ku.displayName="Presence";function zO(t){const[e,i]=x.useState(),a=x.useRef(null),s=x.useRef(t),l=x.useRef("none"),c=t?"mounted":"unmounted",[d,h]=BO(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const f=xc(a.current);l.current=d==="mounted"?f:"none"},[d]),$o(()=>{const f=a.current,p=s.current;if(p!==t){const y=l.current,k=xc(f);t?h("MOUNT"):k==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(p&&y!==k?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),$o(()=>{if(e){let f;const p=e.ownerDocument.defaultView??window,v=k=>{const T=xc(a.current).includes(k.animationName);if(k.target===e&&T&&(h("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",f=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},y=k=>{k.target===e&&(l.current=xc(a.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{p.clearTimeout(f),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:x.useCallback(f=>{a.current=f?getComputedStyle(f):null,i(f)},[])}}function xc(t){return(t==null?void 0:t.animationName)||"none"}function FO(t){var a,s;let e=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,i=e&&"isReactWarning"in e&&e.isReactWarning;return i?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,i=e&&"isReactWarning"in e&&e.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}var ah=0;function VO(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??F0()),document.body.insertAdjacentElement("beforeend",t[1]??F0()),ah++,()=>{ah===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ah--}},[])}function F0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Si=function(){return Si=Object.assign||function(e){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Si.apply(this,arguments)};function gT(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)e.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(i[a[s]]=t[a[s]]);return i}function qO(t,e,i){if(i||arguments.length===2)for(var a=0,s=e.length,l;a<s;a++)(l||!(a in e))&&(l||(l=Array.prototype.slice.call(e,0,a)),l[a]=e[a]);return t.concat(l||Array.prototype.slice.call(e))}var jc="right-scroll-bar-position",Bc="width-before-scroll-bar",HO="with-scroll-bars-hidden",GO="--removed-body-scroll-bar-size";function rh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function KO(t,e){var i=x.useState(function(){return{value:t,callback:e,facade:{get current(){return i.value},set current(a){var s=i.value;s!==a&&(i.value=a,i.callback(a,s))}}}})[0];return i.callback=e,i.facade}var YO=typeof window<"u"?x.useLayoutEffect:x.useEffect,V0=new WeakMap;function QO(t,e){var i=KO(null,function(a){return t.forEach(function(s){return rh(s,a)})});return YO(function(){var a=V0.get(i);if(a){var s=new Set(a),l=new Set(t),c=i.current;s.forEach(function(d){l.has(d)||rh(d,null)}),l.forEach(function(d){s.has(d)||rh(d,c)})}V0.set(i,t)},[t]),i}function XO(t){return t}function JO(t,e){e===void 0&&(e=XO);var i=[],a=!1,s={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:t},useMedium:function(l){var c=e(l,a);return i.push(c),function(){i=i.filter(function(d){return d!==c})}},assignSyncMedium:function(l){for(a=!0;i.length;){var c=i;i=[],c.forEach(l)}i={push:function(d){return l(d)},filter:function(){return i}}},assignMedium:function(l){a=!0;var c=[];if(i.length){var d=i;i=[],d.forEach(l),c=i}var h=function(){var p=c;c=[],p.forEach(l)},f=function(){return Promise.resolve().then(h)};f(),i={push:function(p){c.push(p),f()},filter:function(p){return c=c.filter(p),i}}}};return s}function ZO(t){t===void 0&&(t={});var e=JO(null);return e.options=Si({async:!0,ssr:!1},t),e}var vT=function(t){var e=t.sideCar,i=gT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=e.read();if(!a)throw new Error("Sidecar medium not found");return x.createElement(a,Si({},i))};vT.isSideCarExport=!0;function WO(t,e){return t.useMedium(e),vT}var yT=ZO(),sh=function(){},Cu=x.forwardRef(function(t,e){var i=x.useRef(null),a=x.useState({onScrollCapture:sh,onWheelCapture:sh,onTouchMoveCapture:sh}),s=a[0],l=a[1],c=t.forwardProps,d=t.children,h=t.className,f=t.removeScrollBar,p=t.enabled,v=t.shards,y=t.sideCar,k=t.noRelative,S=t.noIsolation,T=t.inert,w=t.allowPinchZoom,R=t.as,L=R===void 0?"div":R,N=t.gapMode,A=gT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=y,B=QO([i,e]),I=Si(Si({},A),s);return x.createElement(x.Fragment,null,p&&x.createElement(_,{sideCar:yT,removeScrollBar:f,shards:v,noRelative:k,noIsolation:S,inert:T,setCallbacks:l,allowPinchZoom:!!w,lockRef:i,gapMode:N}),c?x.cloneElement(x.Children.only(d),Si(Si({},I),{ref:B})):x.createElement(L,Si({},I,{className:h,ref:B}),d))});Cu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cu.classNames={fullWidth:Bc,zeroRight:jc};var $O=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eN(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$O();return e&&t.setAttribute("nonce",e),t}function tN(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function nN(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var iN=function(){var t=0,e=null;return{add:function(i){t==0&&(e=eN())&&(tN(e,i),nN(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},aN=function(){var t=iN();return function(e,i){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&i])}},bT=function(){var t=aN(),e=function(i){var a=i.styles,s=i.dynamic;return t(a,s),null};return e},rN={left:0,top:0,right:0,gap:0},oh=function(t){return parseInt(t||"",10)||0},sN=function(t){var e=window.getComputedStyle(document.body),i=e[t==="padding"?"paddingLeft":"marginLeft"],a=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[oh(i),oh(a),oh(s)]},oN=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return rN;var e=sN(t),i=document.documentElement.clientWidth,a=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,a-i+e[2]-e[0])}},lN=bT(),gs="data-scroll-locked",cN=function(t,e,i,a){var s=t.left,l=t.top,c=t.right,d=t.gap;return i===void 0&&(i="margin"),`
  .`.concat(HO,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(d,"px ").concat(a,`;
  }
  body[`).concat(gs,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(a,";"),i==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(a,`;
    `),i==="padding"&&"padding-right: ".concat(d,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jc,` {
    right: `).concat(d,"px ").concat(a,`;
  }
  
  .`).concat(Bc,` {
    margin-right: `).concat(d,"px ").concat(a,`;
  }
  
  .`).concat(jc," .").concat(jc,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Bc," .").concat(Bc,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(gs,`] {
    `).concat(GO,": ").concat(d,`px;
  }
`)},q0=function(){var t=parseInt(document.body.getAttribute(gs)||"0",10);return isFinite(t)?t:0},uN=function(){x.useEffect(function(){return document.body.setAttribute(gs,(q0()+1).toString()),function(){var t=q0()-1;t<=0?document.body.removeAttribute(gs):document.body.setAttribute(gs,t.toString())}},[])},dN=function(t){var e=t.noRelative,i=t.noImportant,a=t.gapMode,s=a===void 0?"margin":a;uN();var l=x.useMemo(function(){return oN(s)},[s]);return x.createElement(lN,{styles:cN(l,!e,s,i?"":"!important")})},Vh=!1;if(typeof window<"u")try{var wc=Object.defineProperty({},"passive",{get:function(){return Vh=!0,!0}});window.addEventListener("test",wc,wc),window.removeEventListener("test",wc,wc)}catch{Vh=!1}var os=Vh?{passive:!1}:!1,fN=function(t){return t.tagName==="TEXTAREA"},ST=function(t,e){if(!(t instanceof Element))return!1;var i=window.getComputedStyle(t);return i[e]!=="hidden"&&!(i.overflowY===i.overflowX&&!fN(t)&&i[e]==="visible")},hN=function(t){return ST(t,"overflowY")},mN=function(t){return ST(t,"overflowX")},H0=function(t,e){var i=e.ownerDocument,a=e;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var s=TT(t,a);if(s){var l=kT(t,a),c=l[1],d=l[2];if(c>d)return!0}a=a.parentNode}while(a&&a!==i.body);return!1},pN=function(t){var e=t.scrollTop,i=t.scrollHeight,a=t.clientHeight;return[e,i,a]},gN=function(t){var e=t.scrollLeft,i=t.scrollWidth,a=t.clientWidth;return[e,i,a]},TT=function(t,e){return t==="v"?hN(e):mN(e)},kT=function(t,e){return t==="v"?pN(e):gN(e)},vN=function(t,e){return t==="h"&&e==="rtl"?-1:1},yN=function(t,e,i,a,s){var l=vN(t,window.getComputedStyle(e).direction),c=l*a,d=i.target,h=e.contains(d),f=!1,p=c>0,v=0,y=0;do{if(!d)break;var k=kT(t,d),S=k[0],T=k[1],w=k[2],R=T-w-l*S;(S||R)&&TT(t,d)&&(v+=R,y+=S);var L=d.parentNode;d=L&&L.nodeType===Node.DOCUMENT_FRAGMENT_NODE?L.host:L}while(!h&&d!==document.body||h&&(e.contains(d)||e===d));return(p&&Math.abs(v)<1||!p&&Math.abs(y)<1)&&(f=!0),f},Rc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},G0=function(t){return[t.deltaX,t.deltaY]},K0=function(t){return t&&"current"in t?t.current:t},bN=function(t,e){return t[0]===e[0]&&t[1]===e[1]},SN=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},TN=0,ls=[];function kN(t){var e=x.useRef([]),i=x.useRef([0,0]),a=x.useRef(),s=x.useState(TN++)[0],l=x.useState(bT)[0],c=x.useRef(t);x.useEffect(function(){c.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var T=qO([t.lockRef.current],(t.shards||[]).map(K0),!0).filter(Boolean);return T.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),T.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var d=x.useCallback(function(T,w){if("touches"in T&&T.touches.length===2||T.type==="wheel"&&T.ctrlKey)return!c.current.allowPinchZoom;var R=Rc(T),L=i.current,N="deltaX"in T?T.deltaX:L[0]-R[0],A="deltaY"in T?T.deltaY:L[1]-R[1],_,B=T.target,I=Math.abs(N)>Math.abs(A)?"h":"v";if("touches"in T&&I==="h"&&B.type==="range")return!1;var F=H0(I,B);if(!F)return!0;if(F?_=I:(_=I==="v"?"h":"v",F=H0(I,B)),!F)return!1;if(!a.current&&"changedTouches"in T&&(N||A)&&(a.current=_),!_)return!0;var G=a.current||_;return yN(G,w,T,G==="h"?N:A)},[]),h=x.useCallback(function(T){var w=T;if(!(!ls.length||ls[ls.length-1]!==l)){var R="deltaY"in w?G0(w):Rc(w),L=e.current.filter(function(_){return _.name===w.type&&(_.target===w.target||w.target===_.shadowParent)&&bN(_.delta,R)})[0];if(L&&L.should){w.cancelable&&w.preventDefault();return}if(!L){var N=(c.current.shards||[]).map(K0).filter(Boolean).filter(function(_){return _.contains(w.target)}),A=N.length>0?d(w,N[0]):!c.current.noIsolation;A&&w.cancelable&&w.preventDefault()}}},[]),f=x.useCallback(function(T,w,R,L){var N={name:T,delta:w,target:R,should:L,shadowParent:CN(R)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(A){return A!==N})},1)},[]),p=x.useCallback(function(T){i.current=Rc(T),a.current=void 0},[]),v=x.useCallback(function(T){f(T.type,G0(T),T.target,d(T,t.lockRef.current))},[]),y=x.useCallback(function(T){f(T.type,Rc(T),T.target,d(T,t.lockRef.current))},[]);x.useEffect(function(){return ls.push(l),t.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,os),document.addEventListener("touchmove",h,os),document.addEventListener("touchstart",p,os),function(){ls=ls.filter(function(T){return T!==l}),document.removeEventListener("wheel",h,os),document.removeEventListener("touchmove",h,os),document.removeEventListener("touchstart",p,os)}},[]);var k=t.removeScrollBar,S=t.inert;return x.createElement(x.Fragment,null,S?x.createElement(l,{styles:SN(s)}):null,k?x.createElement(dN,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function CN(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const EN=WO(yT,kN);var CT=x.forwardRef(function(t,e){return x.createElement(Cu,Si({},t,{ref:e,sideCar:EN}))});CT.classNames=Cu.classNames;var xN=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},cs=new WeakMap,Ac=new WeakMap,_c={},lh=0,ET=function(t){return t&&(t.host||ET(t.parentNode))},wN=function(t,e){return e.map(function(i){if(t.contains(i))return i;var a=ET(i);return a&&t.contains(a)?a:(console.error("aria-hidden",i,"in not contained inside",t,". Doing nothing"),null)}).filter(function(i){return!!i})},RN=function(t,e,i,a){var s=wN(e,Array.isArray(t)?t:[t]);_c[i]||(_c[i]=new WeakMap);var l=_c[i],c=[],d=new Set,h=new Set(s),f=function(v){!v||d.has(v)||(d.add(v),f(v.parentNode))};s.forEach(f);var p=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(y){if(d.has(y))p(y);else try{var k=y.getAttribute(a),S=k!==null&&k!=="false",T=(cs.get(y)||0)+1,w=(l.get(y)||0)+1;cs.set(y,T),l.set(y,w),c.push(y),T===1&&S&&Ac.set(y,!0),w===1&&y.setAttribute(i,"true"),S||y.setAttribute(a,"true")}catch(R){console.error("aria-hidden: cannot operate on ",y,R)}})};return p(e),d.clear(),lh++,function(){c.forEach(function(v){var y=cs.get(v)-1,k=l.get(v)-1;cs.set(v,y),l.set(v,k),y||(Ac.has(v)||v.removeAttribute(a),Ac.delete(v)),k||v.removeAttribute(i)}),lh--,lh||(cs=new WeakMap,cs=new WeakMap,Ac=new WeakMap,_c={})}},AN=function(t,e,i){i===void 0&&(i="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),s=xN(t);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live], script"))),RN(a,s,i,"aria-hidden")):function(){return null}},Eu="Dialog",[xT,_U]=hO(Eu),[_N,ci]=xT(Eu),wT=t=>{const{__scopeDialog:e,children:i,open:a,defaultOpen:s,onOpenChange:l,modal:c=!0}=t,d=x.useRef(null),h=x.useRef(null),[f,p]=yO({prop:a,defaultProp:s??!1,onChange:l,caller:Eu});return E.jsx(_N,{scope:e,triggerRef:d,contentRef:h,contentId:th(),titleId:th(),descriptionId:th(),open:f,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(v=>!v),[p]),modal:c,children:i})};wT.displayName=Eu;var RT="DialogTrigger",ON=x.forwardRef((t,e)=>{const{__scopeDialog:i,...a}=t,s=ci(RT,i),l=pr(e,s.triggerRef);return E.jsx(aa.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Vm(s.open),...a,ref:l,onClick:La(t.onClick,s.onOpenToggle)})});ON.displayName=RT;var zm="DialogPortal",[NN,AT]=xT(zm,{forceMount:void 0}),_T=t=>{const{__scopeDialog:e,forceMount:i,children:a,container:s}=t,l=ci(zm,e);return E.jsx(NN,{scope:e,forceMount:i,children:x.Children.map(a,c=>E.jsx(ku,{present:i||l.open,children:E.jsx(pT,{asChild:!0,container:s,children:c})}))})};_T.displayName=zm;var iu="DialogOverlay",OT=x.forwardRef((t,e)=>{const i=AT(iu,t.__scopeDialog),{forceMount:a=i.forceMount,...s}=t,l=ci(iu,t.__scopeDialog);return l.modal?E.jsx(ku,{present:a||l.open,children:E.jsx(PN,{...s,ref:e})}):null});OT.displayName=iu;var DN=jm("DialogOverlay.RemoveScroll"),PN=x.forwardRef((t,e)=>{const{__scopeDialog:i,...a}=t,s=ci(iu,i);return E.jsx(CT,{as:DN,allowPinchZoom:!0,shards:[s.contentRef],children:E.jsx(aa.div,{"data-state":Vm(s.open),...a,ref:e,style:{pointerEvents:"auto",...a.style}})})}),fr="DialogContent",NT=x.forwardRef((t,e)=>{const i=AT(fr,t.__scopeDialog),{forceMount:a=i.forceMount,...s}=t,l=ci(fr,t.__scopeDialog);return E.jsx(ku,{present:a||l.open,children:l.modal?E.jsx(MN,{...s,ref:e}):E.jsx(LN,{...s,ref:e})})});NT.displayName=fr;var MN=x.forwardRef((t,e)=>{const i=ci(fr,t.__scopeDialog),a=x.useRef(null),s=pr(e,i.contentRef,a);return x.useEffect(()=>{const l=a.current;if(l)return AN(l)},[]),E.jsx(DT,{...t,ref:s,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:La(t.onCloseAutoFocus,l=>{var c;l.preventDefault(),(c=i.triggerRef.current)==null||c.focus()}),onPointerDownOutside:La(t.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&l.preventDefault()}),onFocusOutside:La(t.onFocusOutside,l=>l.preventDefault())})}),LN=x.forwardRef((t,e)=>{const i=ci(fr,t.__scopeDialog),a=x.useRef(!1),s=x.useRef(!1);return E.jsx(DT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var c,d;(c=t.onCloseAutoFocus)==null||c.call(t,l),l.defaultPrevented||(a.current||(d=i.triggerRef.current)==null||d.focus(),l.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:l=>{var h,f;(h=t.onInteractOutside)==null||h.call(t,l),l.defaultPrevented||(a.current=!0,l.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=l.target;((f=i.triggerRef.current)==null?void 0:f.contains(c))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&s.current&&l.preventDefault()}})}),DT=x.forwardRef((t,e)=>{const{__scopeDialog:i,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:l,...c}=t,d=ci(fr,i),h=x.useRef(null),f=pr(e,h);return VO(),E.jsxs(E.Fragment,{children:[E.jsx(hT,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:l,children:E.jsx(dT,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Vm(d.open),...c,ref:f,onDismiss:()=>d.onOpenChange(!1)})}),E.jsxs(E.Fragment,{children:[E.jsx(IN,{titleId:d.titleId}),E.jsx(BN,{contentRef:h,descriptionId:d.descriptionId})]})]})}),Fm="DialogTitle",PT=x.forwardRef((t,e)=>{const{__scopeDialog:i,...a}=t,s=ci(Fm,i);return E.jsx(aa.h2,{id:s.titleId,...a,ref:e})});PT.displayName=Fm;var MT="DialogDescription",UN=x.forwardRef((t,e)=>{const{__scopeDialog:i,...a}=t,s=ci(MT,i);return E.jsx(aa.p,{id:s.descriptionId,...a,ref:e})});UN.displayName=MT;var LT="DialogClose",UT=x.forwardRef((t,e)=>{const{__scopeDialog:i,...a}=t,s=ci(LT,i);return E.jsx(aa.button,{type:"button",...a,ref:e,onClick:La(t.onClick,()=>s.onOpenChange(!1))})});UT.displayName=LT;function Vm(t){return t?"open":"closed"}var IT="DialogTitleWarning",[OU,jT]=fO(IT,{contentName:fr,titleName:Fm,docsSlug:"dialog"}),IN=({titleId:t})=>{const e=jT(IT),i=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(i))},[i,t]),null},jN="DialogDescriptionWarning",BN=({contentRef:t,descriptionId:e})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jT(jN).contentName}}.`;return x.useEffect(()=>{var l;const s=(l=t.current)==null?void 0:l.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(a))},[a,t,e]),null},zN=wT,FN=_T,VN=OT,qN=NT,HN=PT,GN=UT;function KN({...t}){return E.jsx(zN,{"data-slot":"dialog",...t})}function YN({...t}){return E.jsx(FN,{"data-slot":"dialog-portal",...t})}function QN({className:t,...e}){return E.jsx(VN,{"data-slot":"dialog-overlay",className:Ln("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function XN({className:t,children:e,showCloseButton:i=!0,...a}){return E.jsxs(YN,{"data-slot":"dialog-portal",children:[E.jsx(QN,{}),E.jsxs(qN,{"data-slot":"dialog-content",className:Ln("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a,children:[e,i&&E.jsxs(GN,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[E.jsx(iR,{}),E.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function JN({className:t,...e}){return E.jsx("div",{"data-slot":"dialog-header",className:Ln("flex flex-col gap-2 text-center sm:text-left",t),...e})}function ZN({className:t,...e}){return E.jsx("div",{"data-slot":"dialog-footer",className:Ln("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function WN({className:t,...e}){return E.jsx(HN,{"data-slot":"dialog-title",className:Ln("text-lg leading-none font-semibold",t),...e})}const $N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAABHCAYAAABVsFofAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIfSURBVHgB7drhUeJAGAbglw0FpASuA867AqQBnVRwsYK7q0CswLGDtQIc9b/8VzQdSAk2kMRvMajDsB9IdoRl3uePTtgN5N3sfjsEgIiIiIiIiIiIiPZfZ1WDfj5K5U+KLSlsNkVgck395tyF1k4N5yC/PpcGObYYTmNcA5eP9siiBQmllyC5k397zaFpiXLgGwBvOE0w/7Bb1IvRuLulCWZxoMcTezRY1sd4TpTuYDCOG/nnXye3f77SybWXfk9YPgMOff2M53gfu6yu7O98dLhO04P85tS1xwYMIlUjGTXFwuttaaiH2FAX8UoNjJv6w8UXXGgGybyYbCzaO8fpoPN38ZirSF1079oG40Qdjkg/rz3zUl2jDrJmxh4OKiTvQSzsYVqLPhxZmmeLcrPr7SGgPQjnXfBd/D6FExzDUTAcBcNRMBwFw1EwHAXDUTAcBcNRMBwFw1H4wnlBfKYIbG/CaR7XjBGQUd4ouoDkmdaJfL9TIBDvmiNfNV4iMm5QJ/b4JwJ9duN/obpCpCSgXB7JnKElbzgPNhvLCFwgUg/2eNg2ILWUl6iGIefwd3MByVVk2HD9VMOROfwiAWW7HFAHlfrZJja7MigHsoZO8UUrN4HzRS7EHA6vLtzFr2p1b7OiQuULyPr6rb1DdreolMof9axczn4vs7VS797bDZbc1YN1+7hBrmbt3yrZxznK/yAiIiIiIiIiIiKiZV4BU2W1DKHq96YAAAAASUVORK5CYII=",qm=x.createContext({roomId:"",setRoomId:()=>{},role:"",setrole:()=>{}}),eD=({children:t})=>{const[e,i]=x.useState(""),[a,s]=x.useState("");return E.jsx(qm.Provider,{value:{roomId:e,setRoomId:i,role:a,setrole:s},children:t})},tD=()=>{const[t,e]=x.useState([]),[i,a]=x.useState(!0),[s,l]=x.useState(!1),[c,d]=x.useState(""),[h,f]=x.useState(""),p=oi(),{setRoomId:v,setrole:y}=x.useContext(qm),k=Ne.getUserData(),S=k==null?void 0:k.id,T=(k==null?void 0:k.fullName)||(k==null?void 0:k.name)||"User",w=k!=null&&k.imageUrl?k!=null&&k.imageUrl.startsWith("http")?k.imageUrl:Ne.baseUrl+k.imageUrl:Ih,R=()=>{const I=new Date().getHours();return I<12?"Good Morning":I<18?"Good Afternoon":"Good Evening"},L=async()=>{var I;try{const F=await yt.get(`${Ne.apiUrl}room`,{headers:{Authorization:`Bearer ${Ne.token}`}});e(((I=F.data)==null?void 0:I.rooms)||[])}catch(F){e([]),Ne.toast("error","Failed to fetch sessions."),console.error("Error fetching sessions:",F)}finally{a(!1)}};x.useEffect(()=>{L()},[]);const N=()=>l(!0),A=()=>{l(!1),d("")},_=async()=>{if(c.trim())try{await yt.post(`${Ne.apiUrl}room`,{roomName:c},{headers:{Authorization:`Bearer ${Ne.token}`}}),A(),L()}catch{Ne.toast("error","Failed to create session.")}},B=t.filter(I=>{var F;return(F=I.name)==null?void 0:F.toLowerCase().includes(h.toLowerCase())});return E.jsxs("div",{className:"min-h-screen bg-white p-4 md:p-8 flex flex-col gap-6",children:[E.jsx(KN,{open:s,onOpenChange:l,children:E.jsxs(XN,{className:"max-w-md w-full",children:[E.jsx(JN,{children:E.jsx(WN,{children:"Start New Session"})}),E.jsx(M0,{value:c,onChange:I=>d(I.target.value),placeholder:"Enter session name",className:"mb-4"}),E.jsxs(ZN,{className:"flex flex-row gap-2 justify-between",children:[E.jsx(eh,{variant:"outline",onClick:A,className:"w-1/2",children:"Cancel"}),E.jsx(eh,{onClick:_,className:"w-1/2 bg-blue-700 text-white hover:bg-blue-800",children:"create"})]})]})}),E.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 relative",children:[E.jsxs("div",{className:"flex items-center gap-3 md:static fixed right-4 top-4 md:right-auto md:top-auto z-10 md:order-none order-2 w-max bg-white md:bg-transparent p-2 md:p-0 rounded-full md:rounded-none shadow md:shadow-none",style:{maxWidth:"90vw"},children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-tr from-blue-400 to-blue-700 flex items-center justify-center text-white font-bold text-xl border-2 border-white shadow-md",children:E.jsx("img",{src:w,alt:"Profile",className:"w-full h-full rounded-full object-cover"})}),E.jsxs("div",{className:"truncate",children:[E.jsxs("div",{className:"text-gray-500 text-sm flex items-center gap-1",children:[R()," ",E.jsx("span",{className:"text-lg",children:"👋"})]}),E.jsx("div",{className:"font-semibold text-gray-800 leading-tight truncate",children:T})]})]}),E.jsxs("div",{className:"flex-1 flex items-center gap-3 max-w-md ml-auto md:order-none order-1 mt-20 md:mt-0",children:[E.jsx(M0,{className:"bg-gray-100 border-none focus:ring-2 focus:ring-blue-400 text-gray-700 placeholder:text-gray-400",placeholder:"Search room name",type:"text",value:h,onChange:I=>f(I.target.value)}),E.jsx("button",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200",children:E.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:E.jsx("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11c0-3.07-1.64-5.64-5-5.958V4a1 1 0 1 0-2 0v1.042C6.64 5.36 5 7.929 5 11v3.159c0 .538-.214 1.055-.595 1.436L3 17h5m7 0a3 3 0 0 1-6 0m6 0H9"})})})]})]}),E.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-blue-500 to-blue-800 p-6 flex items-center justify-center gap-4 shadow-md cursor-pointer",onClick:N,children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("span",{className:"bg-white bg-opacity-20 p-4 flex items-center justify-center rounded-2xl",children:E.jsx("img",{src:$N,alt:"Zoom",className:"w-8 h-8"})}),E.jsx("span",{className:"text-white text-lg font-semibold",children:"Start New Session"})]})}),E.jsxs("div",{className:"bg-white rounded-xl p-0 md:p-4 shadow-sm flex-1 flex flex-col relative",children:[E.jsxs("div",{className:"flex items-center justify-between px-4 pt-4 md:px-0 md:pt-0",children:[E.jsx("div",{className:"font-semibold text-lg text-gray-800",children:"Sessions"}),E.jsx("button",{className:"text-blue-700 font-medium hover:underline text-sm",children:"See All"})]}),E.jsx("div",{className:"divide-y divide-gray-100 mt-2",children:i?E.jsx("div",{className:"p-4 text-gray-500",children:"Loading sessions..."}):t.length>0?B.map((I,F)=>{const G=I.user_id===S;return E.jsxs("div",{className:"flex items-center justify-between px-2 md:px-6 py-6 group border-b border-gray-100 last:border-b-0 bg-white hover:bg-gray-50 transition-colors",children:[E.jsx("div",{className:"text-left w-16 md:w-20 text-gray-400 text-base font-medium flex-shrink-0"}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("div",{className:"text-xs text-gray-400 font-medium mb-1",children:I.date}),E.jsx("div",{className:"text-lg md:text-xl font-semibold text-gray-900 leading-tight mb-1",children:I.name}),E.jsxs("div",{className:"text-xs text-gray-400",children:["Meeting ID: ",I.meetingId||I.sid]}),E.jsx("div",{className:"text-xs text-blue-700 font-semibold mt-1",children:G?"Creator":"Listener"})]}),E.jsx("div",{className:"flex items-center ml-4",children:E.jsx(eh,{variant:"outline",className:"border-blue-700 text-blue-700 hover:bg-blue-50 px-8 py-1.5 rounded-lg text-base font-medium transition-all shadow-none group-hover:border-blue-800 group-hover:text-blue-800",onClick:()=>{v(I.sid||I.roomId||I.meetingId),y(G?"creator":"listener"),p(G?"/joinpage":"/languageselector")},children:"Join"})})]},F)}):E.jsx("div",{className:"p-4 text-gray-400",children:"No sessions found."})}),E.jsx("button",{className:"fixed  bottom-8 right-8 md:bottom-6 md:right-6 bg-blue-700 text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:bg-blue-800 transition-all text-3xl z-20",onClick:N,children:E.jsx("span",{className:"pb-1",children:"+"})})]})]})},nD=({email:t="demo@gmail.com",onVerify:e,onResend:i,onGoBack:a,countdownDuration:s=30})=>{const l=Ri(),d=new URLSearchParams(l.search).get("email");console.log("email",d);const[h,f]=x.useState(["","","","","",""]),[p,v]=x.useState(s),[y,k]=x.useState(!1),S=x.useRef([]),[T,w]=x.useState({text:"",type:null}),R=oi();x.useEffect(()=>{if(p>0){const G=setTimeout(()=>v(p-1),1e3);return()=>clearTimeout(G)}else k(!0)},[p]);const L=(G,$)=>{var ve;if($.length>1)return;const ae=[...h];ae[G]=$,f(ae),$&&G<5&&((ve=S.current[G+1])==null||ve.focus())},N=(G,$)=>{var ae;$.key==="Backspace"&&!h[G]&&G>0&&((ae=S.current[G-1])==null||ae.focus())},A=G=>{var Xe;G.preventDefault();const $=G.clipboardData.getData("text").slice(0,6),ae=[...h];for(let Re=0;Re<$.length&&Re<6;Re++)/^\d$/.test($[Re])&&(ae[Re]=$[Re]);f(ae);const ve=ae.findIndex(Re=>Re===""),Fe=ve===-1?5:ve;(Xe=S.current[Fe])==null||Xe.focus()},_=async()=>{const G=h.join("");if(G.length===6)try{const $=await fetch(`${Ne.baseUrl}/api/v1/auth/verify-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:G,email:d})}),ae=await $.json();$.ok?(w({text:"Email verified successfully",type:"success"}),localStorage.setItem("user",JSON.stringify(ae.user||ae.token||ae)),R("/")):w({text:ae.message,type:"error"})}catch($){console.error("Error during OTP verification:",$),w({text:"Failed to verify. Please try again.",type:"error"})}else alert("Please enter all 6 digits")},B=async()=>{if(y){v(s),k(!1),f(["","","","","",""]);try{const G=await fetch(`${Ne.baseUrl}/api/v1/auth/resend-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d})}),$=await G.json();G.ok?w({text:"Verification code resent to your email.",type:"success"}):w({text:$.message||"Failed to resend code.",type:"error"})}catch{w({text:"Failed to resend code. Please try again.",type:"error"})}i==null||i()}},I=()=>{console.log("Going back"),a==null||a()},F=G=>{const $=Math.floor(G/60),ae=G%60;return`${$.toString().padStart(2,"0")}:${ae.toString().padStart(2,"0")}`};return E.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[E.jsx("button",{onClick:I,className:"mb-6 p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors duration-200",type:"button",children:E.jsx(xw,{className:"w-5 h-5 text-gray-600"})}),E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Almost there"}),E.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:["Please enter the 6-digit code sent to your email"," ",E.jsx("span",{className:"text-blue-600 font-medium",children:d})," for verification."]})]}),E.jsx("div",{className:"flex justify-center gap-3 mb-8",children:h.map((G,$)=>E.jsx("input",{ref:ae=>{S.current[$]=ae},type:"text",value:G,onChange:ae=>L($,ae.target.value),onKeyDown:ae=>N($,ae),onPaste:A,className:"w-12 h-12 text-center text-lg font-semibold border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50",maxLength:1,inputMode:"numeric",pattern:"[0-9]",autoComplete:"one-time-code"},$))}),E.jsx("button",{onClick:_,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 transition duration-200 font-medium mb-6",type:"button",children:"Verify"}),E.jsxs("div",{className:"text-center",children:[E.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:["Didn't receive any code?"," ",E.jsx("button",{onClick:B,className:`font-medium transition duration-200 ${y?"text-blue-600 hover:text-blue-800 cursor-pointer":"text-gray-400 cursor-not-allowed"}`,disabled:!y,type:"button",children:"Resend Again"})]}),!y&&E.jsxs("p",{className:"text-gray-500 text-sm",children:["Request new code in ",F(p)]})]})]})})},qh="/assets/logo-Bur3acJ7.png";function iD(){const t=oi(),e=Ri(),[i,a]=x.useState(!1),s=d=>e.pathname===d,l=()=>a(!1),c=()=>a(!0);return E.jsxs(E.Fragment,{children:[!i&&E.jsx("button",{className:"fixed top-4 left-4 z-50 md:hidden bg-white rounded-full p-2 shadow border border-gray-200",onClick:c,"aria-label":"Open sidebar",style:{zIndex:60},children:E.jsx(Kw,{className:"w-6 h-6 text-gray-700"})}),E.jsx("div",{className:"h- md:hidden"}),E.jsxs("aside",{className:Ln("fixed top-0 left-0 h-full w-64 bg-white border-r border-slate-200 rounded-tl-2xl flex flex-col items-start shadow-md z-50 transition-transform duration-300",i?"translate-x-0":"-translate-x-full md:translate-x-0"),children:[E.jsx("section",{className:"w-full flex justify-center items-center pt-2 pb-4 select-none",children:E.jsx("img",{src:qh,alt:"TagoBit Logo",className:"h-35 max-w-[200px] object-contain"})}),E.jsxs("nav",{className:"flex flex-col w-full mt-2",children:[E.jsxs("button",{className:Ln("flex items-center gap-3 px-6 py-3 rounded-lg font-medium text-base transition-all w-[90%] mx-auto mb-8",s("/")?"bg-gradient-to-r from-blue-500 to-blue-700 text-white shadow":"text-gray-400 hover:bg-gray-50"),onClick:()=>{t("/"),a(!1)},children:[E.jsx(zw,{className:Ln("w-5 h-5",s("/")?"text-white":"text-gray-400")}),"Home"]}),E.jsxs("button",{className:Ln("flex items-center gap-3 px-6 py-3 rounded-lg font-medium text-base w-[90%] mx-auto",s("/settings")?"bg-gradient-to-r from-blue-500 to-blue-700 text-white shadow":"text-gray-400 hover:bg-gray-50"),onClick:()=>{t("/settings"),a(!1)},children:[E.jsx(Ww,{className:Ln("w-5 h-5",s("/settings")?"text-white":"text-gray-400")}),"Settings"]})]})]}),i&&E.jsx("div",{className:"fixed inset-0 transition-opacity duration-300 md:hidden z-40",onClick:l})]})}const BT=x.createContext(void 0);function aD({children:t}){const[e,i]=x.useState(window.innerWidth>=768);x.useEffect(()=>{const s=()=>{window.innerWidth>=768?i(!0):i(!1)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const a=()=>{i(!e)};return E.jsx(BT.Provider,{value:{isOpen:e,toggle:a},children:t})}function rD(){const t=x.useContext(BT);if(t===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return t}function sD({children:t}){const{isOpen:e}=rD();return E.jsxs("div",{className:"relative min-h-screen bg-slate-50",children:[E.jsx(iD,{}),E.jsx("main",{className:Ln("transition-all duration-300 ease-in-out","md:pt-0",e?"md:pl-64 ":"pl-0"),children:E.jsx("div",{className:"w-full h-full",children:t})})]})}function Y0({children:t}){return E.jsx(aD,{children:E.jsx(sD,{children:t})})}const oD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAADCCAYAAAAhHWAHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKqSURBVHgB7ZzRcdNAFEWvqCAdoBJcgjogHeASUoI6gA4MFQQqcDoIHWw6SDp4SKAMy/NKWhLi+5TcM+PJKD8+o905u9Z6DAghhBBCCCGEoGJml4jEIJSG1wWiYL/pEYVJ6H54tYiA/eGICNjfdGDjhBLY2Ck9mAwCn53QPTUD45tPEjkHMBkErgpD14HJIHDrhLgZGO9I4S5dgckgcB1tgrd2OsE/gcnYocLQtWAxZSBtYYJ3YDLeFSeUIkxwTw8mVl7nWrCw8jp3DSYWdJ07OqFbMLGg69yXwgQPt5ELuc51YGIbWef2YFLIQMiNXA8mpo1cndSlBczA0Qkl9gTfFe5SDya2kY2cHliUpI4WLAPayNUIbeaBxQ4sbEMPLLgnT6YHFnVSfSEDLVhYeZ2jT/B9Yeg6MClNcDCZyUAPJqaTpzopnTzVCG3j5AlMrLyR696BRNM0d8Of7+7fO5rQxJ27vmALvXfXD2yhzl3/AAs7fZTza7Fl3qGP7voGLKy8taV+TNqXhosp5NeyPVhY+YlbCxbDmx+cDH2lT5GGq9ienHN3KHx7OrBQe1Zk1J41oRRpuFbbk3OODn1w1zdgofZUCIVqT6v2rAilSMP1T+3JeakOqT1LQmrPkozasyaUIg3Xk9uT8z87pPYsCak9SzJqz5pQijRcvj3PPtF5bod8e76BhdpTIeTbwzuiVHsqhJK95vbkPKVDas+SULj2HE3tmRc6mNozL9PZC7Ynp7ZD/pxL7cmF1J4lGbVnTSjZW2xPzlKH1J4lIbVnSUbtWRNKFrk9duavqPsOnbSnaZoHMFB7ZsiHzA/XV7BQeyqEktozwzip47RnxCK1pyBE/7VBv3Tw2vNImPY8EqY9E/mQ8YdrZLo73F9cypkq3SIKoWSEEEII8Qb4CfgO13PCpv1tAAAAAElFTkSuQmCC",lD="/assets/hometagoBit-DZwbWBPy.png",cD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAAB7CAYAAACo0tS1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMISURBVHgB7d3RbdRQFIThY8Q76QB3ACWEDqACUkI6IB2EVAAl0EHoAKggmwqyqWCwFQcc5y4iibR4hv+Truy18nY0zt6R7K3CXkk61H2HBT/D4M4Xgzwv+CGVQUhlCFIZhFSGGAbXk8oQw+A+LwZ5UfCzI5VHBT+kMgSpDEIqQ0ypvCKVAYbBnSxTOayDgpdxaI1UnhT8NFJ5RSoNkcogpDIEqQxCKkOQyiCkMgSpDEIqQ5DKIKQyBKkMQipDkMogpDIEqQxCKkNMqbxYDPP4WcFK13Xb4XC2uPyKQXr6vvjcM8gQDNLT+8XnHwUvaj9e8LbgZRja0WKIPFrgqLH1OCp4aaRxLAP6gpdGGj8VvKj9FpC+4GVMH2k0J97+kaGRxm8FL+L9AhlEAZBBFAD+Gmlky+Fo/FIjthzeRAGQQRQA/kQBkKGRRrYcbsSrzDKIAiCDKAD8iQIggygA/IkCIIMoAPyJAiCDKAD8TWm8EFsOb6IAyNBI43HBiygAMuj+zw6y5XAjCoAMjS3Hl4IXUQBkEAWAP1EAZBAFQAZRAPgTBUAGUQD4G4b2mjQGaGw5zgteRAGQQRQA/tR+4/FRwYsoADI00nhS8CIKgAyiAPAnCoAMogDwJ947nkEUABlEAeBPFAAZGmk8LXgRBUAGUQD427Hl6AteRAHgTxQAGUQBkEEUAP5EAZBB/PCYv/ELjdhy+BMFgD9RAGQQBYA/8cNjGYahnYothz9RAPgbhvaBNBrTzcM4p43/javYcnSFmrYNB9Oan7+c/uT17PrcZlhvuq7b1D8WN8gxObV7KK3rB/V44xC/1gqsfpD6vcnup3V7/qLuD6Wv/dgO691ahjja+yD/4jbW192Brck4wLNhfRyGuK0VedIg/3Abm9/KltfXaDM7juu6boZ25/oa/hfucmeQs8H0tZ7b2ENtZ2szHa8Xn3+dry1Zj9XN9kF9rdNyKOO6rPbAYgbzUOMgVfu1mR1vzy9b19d8K1ub5/V0m/rPbmNrtBxk63bFbcyBbh6R7gvWfgKo60oBZ64K8wAAAABJRU5ErkJggg==",uD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHkAAABiCAYAAAB063wRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASWSURBVHgB7d2NUdswGAbgL52AbmBP0LJB2AAmKEwAnaDNBC0T1JmgdAKyQdmgZoMwAdUXpJzt+Ef/lsX73KUxSXrk7uO1LFmWV+TZ6+vrmXj6Kx4Fgaub1WpVkaMP5N8locC+fCMPQhTZyxeDg0LsGa/Jkdciyy9UEPjkHBrfSf5C4JtzmlfkifgihXj6RxBCLQ7ASrLkM8loi8PhNN+RJS9JRoqj2ItHKRK9J0O+kowUh8fjD1Zp9pVkTnFBEJpVmp2TjG5TVFZpdk4yUhydcZqdkowUz8I4zU5JFkV+FE9rgtiM0mydZNltWhPMwSjNLrtrdJvmdStP606yKrJM8TXBnLTTbJvkW4IUaKXZtsiXBCnQSrNxkdFtSs5kmm2SjAOutEym2aifLP5ieDf9myA1o/1m0yTjgCtNo2nWTjLOGSdvMM0mSUZbnLbBNGslGSlejN406yYZbfEycJpP9ri6ScY542XhNNfqh8kkY/BjkVppnkwyUrxYxzSPJlkUeE0o8FId0zyaZMz8WLxDmgeTjJkfWTikeTDJosi/CBMDcvCxt8gY/MjK1dDuGpeg5qMYKvI1QS7OToqMwY/sPJ20yRj8yE7ZSjIGP7JT9fWTcc44L1v+57i7RrcpO08ixee80UwyUpyXe7VxSDJSnJ3WakEqybgiIi+b5g8qyeg25YPnd523ZobICfMFQS4emgVmvLteE+Rk032Bi/yJIBdVN8WMi2y8whska9v3Ihf5mSAH3G3a9b3BRX4gyMFm6A10ofIwulSyGgy5IViyzdibhyLLffk9wVLtxt48nqAQhb6b+jAkqbfb1NSaGSJPVPA9nbQWAYMklFNFbk0akB++IliKyRSzk4l8sn3eECzBVudDY1dQ4DqotGnfYWbsqkbuVtUEqdLe205d1bgWT48EqTG6T9To9clon5NlNKahu2YI2ue0lDpH1Yru6j9on9NRmRSYmazItya0zykoTYusvSIf2uck/DEtMDO+mwza51ldDE0MGGNT5ILedtsFQUzWt9c1XtRc7i5w/jk+66bSOMmKvJ/vD4IY5rlJtvilPwnnn2NxmtBhnWQmb3DB558LgpBKm6NqxemGnHJdZbTPYVUuBWZOSVbQPgdVJlFkhv5zEDtR4Aty5LPIaJ/9sxr86PJWZIbxba+cuk1NTgdeXfKv7iuBD97OE3hNsoL22Zm3FDOvSW7gab01gS2tWZi6giSZiTR/prcDMTDn3G1qCpVkbp+fCO2zjcpngVmwJCsi0XyXViwhpa/0XeRgSW7A/DB9O98FZsGLLMe3cX2VniDTq2IkGe2zntrH6FafKEVm8vwz1icZFmySZPADryaMbw/yOvjRFS3JDO3zoKBTnaMWmaF9PsFrYVYUUPQiM7TPRzx8GXxmTdQ2uemdt8878diGTrAyW5GZHN/mM1Y5LURT09t6pXu5/dLYZkEGPMbMWmSW+PywPbULxs8vnZ+P2/LAMjmzF5mJQn+nODc66RaMH8/UU8zYaQspiSIzOXWIb+dbGPy3uvGstp/7Xs+paKaSKbIii81tdSFfWtSuMUX/AUjmiyVaEKKGAAAAAElFTkSuQmCC",dD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABLCAYAAADEW1EgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH/SURBVHgB7ZvhbcIwEIVfWKDdoB6BEdigHYER6ATQCWADRugItBO0G8AGhAmuvvhCjUkoP4qCdO+TIkwiJO50+XwBG7gSEQlyToA3YtDrIgkbeKOnGl7gjY5q2MIjGniRiCm8oUGzGtBZDWt4Q4UonDKbRGxYDWygEsIGqrcapvBGDHopnDLZQDUIG6iEsIFiA3VE2ED1TpljeEPYQLGBOhKDngunTDZQDR1TpiblEc4YxaOcGT6qqqrhDE1EKM59wiGjjnPubgtFE/FdnHuGR1SMHT3EDB6R82cMZQJvWGe55zSKJhmTjqrw97yhxMBX9IVBXxj0RQZ9kUFfZNAXxgVfBHiDvsjo8cUcHqEvDPPFlr4AfXFCDHxBXxj0hUFfZNAXGfRFBn1h0BcZ9EVGjy+W8Ah9YUj612xbJGJPX9AXMqMvDPrCoC8y6IsM+iKjxxcut1TTFy09vviCR+iLjBj4O30B+uKEGPT43nxRYSAkrbUo/bCqquoV/4iklT7tEbKxHk/teLBEKOqL+FL6YRGT8XbhM11B6fgB/QH/ydCJ0C+pt0QoLu2QlkbXdq29HnAjBk2EImkDnT5/DLpYbfBEKJYMvU0CbsMOqbpqGx+ycXP9LhKh2PS5QNodcKk6apwGpa8HnAfbjK/dhHM3iciR9ANOsLc7/Aa1w434AV+U3zuVZ8HNAAAAAElFTkSuQmCC",fD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAAB2CAYAAAB1eCdsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXhSURBVHgB7d2Bdds2FIXhp06QDapOUG1QZoJ4g3gEbxBtkGzgdAK3E1iZwM4E8gbOBjdgCEUSCNsiRYoA+H/n8CiMj2RbBkE8XoAyAzqQ9K7eDJgT3/Art31y273bnrVX//u2/roBpfGN/8ptn33jP9VtCWeLhWG2XANeuofKbX+77cptS+vv0W3vF4vFDwNS5xr/ym03viffqp/nV7722YDUaD/erxv/3RuN+DVbNQfPtZozye71K8UPqMoyxTCpEGrG7Cu3ffCP9dZnHF8Pd775x/9eG/b47/lgx8OrjXvOewMuxff8dW9dF7sP6qc+W9y77Yvv6TsfPP55oWvLEGeGTGhf7P7jH5fWXd3Lb2zf8z8OUfDWB5T/mQ6/z18U0xiEjovdc8f79eusbCT1gRr5GdcGdKXjYvde5zX+eshzVOxe6HdYR36epWWEYdIE1IzNK2uGPCs7HmJ0sXHbd/+4mXJYIoppnMIPI3bF7lb97IrdugfuVeyOTU16HaoM8+Ub/xDh1p1GHu8PTe1pHNsUD1yMRCOGW7lRU/iH1oby6PWZnF3U2cCu2C2q5/S/16HnnA9weDqeyTlZuJUT/56FncStIS/aF7u3Gma8X3zjj/G/e6iyhM3+0qqa4rSy/TTmPg33yQ4uc7rLiY+GWDLNpdZUqIBwKyeKz1u6sUQVfWZQO9zqO5NzY4mEW7lxf4Ov7uHjwX8xb+kSdBxunVvsJhtu5UTxeUssAhqaZhxu5UTxeUu81+cQ4VaW1NRq2+DvcG84jQi3iqJ4MX1leJk/CD71bPyzCrdyI+YtnU5NDbDV6WYfbuXE/31Da8OxEw+E3V3cKHYzpXYxzbylkG/kscZPuFUQxectUUzvKH76/MKwp0y+cwtVhuhZYWsomiLFtOHXG7MN3phrQ9EUv9S6tjlTe93ss2EWFF8ENN+hcWSIxCKQmRCLgPYUL5wrw2wow0VAo1D7qgJF1AypPcN4fpdaI29Csgs/MB5ltghocC8MkZaGWVIzrebQfIpptQtnUsgZ05wXAYlsAQEVcPPiziJjRLIFzHMRkMgW8ALFi+nKSiSyBbxBc1kEJLIFvEFzWQQUOerJFtCi0m9eLLIFnEjxeUt3VgqRLaADlTxvSWQL6CgyrH6w3IlsAT2oxHlLIltAT66tfA07UuV6qVVkCziD4sV0nvOWRLaAMyk+b6my3IhsAQNQ7vOWRLaAgSheTF9bLkS2gAFFRhn5FNMiW8CAFF8EtLbUiWwBI1COi4BEtoARKLdFQCJbwIjUvhNjuu1LZAsYmXJZBCSyBYzMtalV5OywtpSIbAEXotQXAYlsARei1G9eLLIFXJBSXQSkSLYgPo4KI1O7Rp1+NCKyBUxAqS0CEtkCJqSUFgGJbAETUko3L46M29YGXJDi85ZWdkkiW0AClMK8JZEtIBGKF9NXdikiW0BCNNW8JZEtIDGa6ubFIltAgtQupsedt6SmYAlVBkxM8XlL49WyIltAwiLtc7zOWmQLSFykjQ7fYYtsARlQ/FLr2oak9sIKsgUkSfFFQMNd8RTZAjKhMRcBiWwBmdFYi4BEtoAMuXb6oCGH9iJbQKY09CIgkS0gY6693gXtt/9tT0W2gIwpvgiosq5EtoACqL1E9OYP6y4cX20Wi8WTAXl5Cvbf9TkYPgT7/xqQnz+D/R/WhcgWUAi1A+Oqy/PJFlAEtW9n3+1qqMgWUAi1L61269RFtoACKH419NetZLoU0B+DfQpn5KgK9p/c1dBHO5XIFlAItecmXXd5PusWUATFP+ln2eU1WLeAIujcG90pPsuPbAHZObtTF9kCCiCyBaAhsgXg9A/ReStnCLOF/w3ITxXs19nCxk4lsgUUQmQLANkC8JvIFoCGyBYAsgXgt7M7dZEtoAA6MVs4FMsZyBZQgirYJ1vAPGmAbGEdvADZArIzSKcusgUUQGQLQENkC8Bw2cL5dyUGJiayBaBftnBolzOQLaAEVbDfLVuoRYZISwMyozOzhZ8k9gXLjWd5hgAAAABJRU5ErkJggg==",hD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAABgCAYAAACg98bqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATZSURBVHgB7d3bVdtAEIDhIScFUIJSQUwFERVAKohTgaECmwogFZgOkg5wB3EHcQfQgbMbr4KPuciS9jK7+r9zhEnCQx52mBnNriQCdLDdbk/tJcCYuIVfm2turgdzPW6f2e+X9t8FKI1b/JfmunWL/1jLErLFiWC0zAKuzEdtrs/mujRXJf2tzXV+cnLyJJkiGEbELP6JPC9++1mJX3cmGK4lUwRDoVzZMnHXF9kt/hiljM0OK8kQwVCIvcV/Ic9BkKKOX5lgOJcMEQyZcovf1vlNyTMRPb6bgLiXzBAMmdhrdpuSpxK9bBP9Kbdm+qNApYNm12aAnG5d2v/rlbkWkhEygwIHzW5T85cw5bXZYSOZIBgScIu/ll3J02SAEmXVTBMMEXgebuUmm1utBEMAbvHv3+mpZLw25jrLoZkmGDxwm9ViD7dycmOCYSHKEQwd7TW7zcIvpdkNyWaFM+3NNMHQ4qDZtZ+ahls5uTfB8F0UIxgOZDbcyo3qZnr0wZD5cCs3qm+1jioYCh5u5eTaBMSdKFR0MLwy3GLxp6d231JRwXAw3LKfNLs6qTwElHUwMNzKmr3VuhZFsgoGhltFUddMqw0Ghluj8NUExC9RQl0wuCCYyW4/PIu/bBtRtG/pgyjieoDfsjsUQiCUr5LdLz0V1GQGFwgPQhM8Nmr2LWnKDHMhEMbIVgBLUUBFZnBZ4Y9gzJLvW9KSGeaCsUueHbQEQy0Yu8pUCAtJKHmZZJ/6bD5+CpB435KGzHAhwI5tpm8lkaSZgcYZb0jSTKfODLUALyW5oZI6GGYCvGRfnRV9Mp2sTKJEQovozXTKzMBsAe+xzXTUNZIyM9isUAnwvmgPL06SGdwhnUqAdtEm06nKpG8CHKeO9a7p6GUSjTN62EiEQ0ApMkMtQDeVRDgElCIz2AM8tQDdBD8EFDUz7D3XCOgq+L6l2GUSswUMcRmymY5aJjFbgAdrUyqdSQDRMgOzBXgyCbVvKWaZ1MwW1D1wFtmZu+dreRUlGFzjPHV/5HlIGCrIvqVYmaEWwK8r3810rGBg+wVC8JodggcDswUEZPctTcWTGJmB2QJCuvXVTMcIhlqAcGwgeLnVGnTo5hqcBwHCG3wIKHRmoHFGLIMPAQXLDJxbQAKDnrcUMjPUAsS1HNJMhwwGSiTEVsmAZjpImUSJhIR6HwIKlRmYLSCV3vuWQmUGzi0gtc7NtPfMwLkFKNE5O4Qok2icoUHnhxd7LZNonKFMp4cX+84MtQB6dGqmfWcGnokEjeyt1nXbD3kLBkokKLYywXDe9kM+yyRmC9Cqdm+VfZfPzMBsAZptpOXhxV4yA7MFZKCSln1LvsokZgvIwcz1tq8aXCa5LbOPAuThzWbaR2ZobUwARd58E5CPYKBEQm5ePSI6KBh4JhIyVZm1uzj8y6GZIfpb3AFPZodHRIcGw4UAeXrxJqDewcBsAQWY7jfTQzIDjTNK8H8bUa85A7MFFObazB7u+mYGZgsoyb/s0DcYKJFQklPbO3QOBmYLKNSkT2ZgtoASnfYJBmYLKNFTp2BgtoCCrbtmBhpnlGhjn753dDC42cJUgPKs7JcumYHZAkr1w37pEgyUSCjRpnmm0lHBwGwBBbtpvjk2MzBbQKlWzTfHBgOzBZRotf+Gn78QxtyDe0NwfwAAAABJRU5ErkJggg==",mD=[{code:"en-US",name:"English"},{code:"zh",name:"Chinese (简体中文)"},{code:"es",name:"Spanish (Español)"},{code:"hi",name:"Hindi (हिन्दी)"},{code:"ar",name:"Arabic (العربية)"},{code:"it",name:"Italian (Italiano)"},{code:"tr",name:"Turkish (Türkçe)"},{code:"nl",name:"Dutch (Nederlands)"},{code:"id",name:"Indonesian (Bahasa Indonesia)"},{code:"pl",name:"Polish (Polski)"},{code:"vi",name:"Vietnamese (Tiếng Việt)"},{code:"th",name:"Thai (ไทย)"},{code:"ur",name:"Urdu (اردو)"}],pD=()=>{const[t,e]=x.useState(""),i=oi();return E.jsxs("div",{className:"min-h-screen w-full flex",children:[E.jsxs("div",{className:"hidden md:flex w-1/2 h-screen bg-[#1E60B6] relative items-center justify-center",children:[E.jsx("img",{src:cD,alt:"Vector 23",className:"absolute left-4 top-4 w-16 h-16 z-20 -translate-x-[30%] -translate-y-[30%]"}),E.jsx("img",{src:uD,alt:"Vector 19",className:"absolute right-10 top-4 w-20 h-20 z-20 -translate-y-1/3 translate-x-1/3 rotate-12"}),E.jsx("img",{src:dD,alt:"Vector 20",className:"absolute right-0 top-0 w-20 h-20 z-10 -translate-y-[20%] translate-x-[20%]"}),E.jsx("img",{src:oD,alt:"Vector",className:"absolute left-0 top-1/2 -translate-y-1/2 max-w-[90%] max-h-[90%]"}),E.jsx("img",{src:lD,alt:"Home TagoBit",className:"z-10 max-w-[80%] max-h-[80%] object-contain"}),E.jsx("img",{src:qh,className:"max-w-[5%] max-h-[5%] object-contain absolute left-30 top-38 transform z-20"}),E.jsx("img",{src:fD,alt:"Vector 17",className:"absolute left-1/2 bottom-8 w-48 h-16 z-20 -translate-x-1/2 translate-y-1/2"}),E.jsx("img",{src:hD,alt:"Vector 18",className:"absolute left-85 bottom-15 w-48 h-16 z-30 -translate-x-1/2 translate-y-full"})]}),E.jsxs("div",{className:"w-full md:w-1/2 flex flex-col items-center px-4 py-8 relative bg-white min-h-screen justify-between",children:[E.jsxs("div",{className:"w-full flex flex-col items-center",children:[E.jsx("img",{src:qh,alt:"Logo",className:"w-32 h-32 mt-8 mb-8"}),E.jsx("h2",{className:"text-2xl font-Poppins text-[#1A5AC7] mb-10 text-center",children:"Welcome!"}),E.jsxs("div",{className:"w-full mb-10 relative",children:[E.jsxs("select",{value:t,onChange:a=>e(a.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-50 text-base focus:outline-none focus:ring-2 focus:ring-[#1A5AC7] text-gray-700 appearance-none pr-10",children:[E.jsx("option",{value:"",disabled:!0,children:"Select your language"}),mD.map(a=>E.jsx("option",{value:a.code,children:a.name},a.code))]}),E.jsx("span",{className:"pointer-events-none absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:E.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M6 8l4 4 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),E.jsx("button",{disabled:!t,onClick:async()=>{if(t){localStorage.setItem("listenerLanguage",t);const a=localStorage.getItem("token");if(a)try{const l=await(await fetch(`${Ne.baseUrl}/api/v1/auth/update-profile`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({language:t})})).json();console.log("LANGUAGE DEBUG: Backend response:",l),l.user&&(localStorage.setItem("userData",JSON.stringify(l.user)),console.log("LANGUAGE DEBUG: userData in localStorage:",localStorage.getItem("userData")))}catch(s){console.error("LANGUAGE DEBUG: Error updating language",s)}i("/joinpage")}},className:`w-full py-3 rounded-lg font-semibold text-lg transition-colors duration-200 mb-8 ${t?"bg-[#1A5AC7] text-white hover:bg-blue-700 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Join"})]}),E.jsxs("div",{className:"w-full text-center text-gray-400 text-sm tracking-wide mb-4",children:[E.jsx("span",{className:"mr-1",children:"🔒"})," ",E.jsx("span",{children:"audio-translator.tagobit.com"})]})]})]})},gD="/assets/wave-DHyBppIC.png",vD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAsCAYAAAD8WEF4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZuSURBVHgB1VnNb1RVFD/n3jvTiRB5IMW6YvgL2roxrpgaDOyg8SsqkbJBEhOhC3Zqp24wMdiKGyLRlkQ0xkXLyqiJTP8Bp/0LOuxEEF+EmAIz73ju13tvEErv6yuJJ3l9b+7Hub977vm8BfgfEUJJFDWaUQ22jRDIYRS0kxnHRNheo79X4lYzhhJo02CjxkxUFXBKgDhFQBEiIAEQat76DzFogEXo0fTvrckObII2BXbw5ZkRIeQCENT/08nI0cIFDZ5RXyOoHvnjp5MrUJAKg40OzdQHsNJmFpHGYlkhMQF6mZr2bA3u+Yu69NKNX95bhgJUCGzUmIuq29bajGqvxUmOj9UAtMAom2H70UgZV+/dqT4ft44H67GAAlR9unsKlKyDFAiKH8FspGRujJPfJBTpPuJ2/YDQfYrMt8R9Zn4BKgSWpJggISl9DED9toBISQtSb0BJJMXfCpHH6U3wfDwNBShYDaLX5kYqhL/pozUaYM/cHDvaNusJLHunCtTnIRyN3vjheJDuKggkKap7AXt2SbZ40nCEAc3WhQazV1ZjZeS2gpgZmm4Ucpg/txYsq99OMtrjheUAWHRom2xfZmQElBtnJyXBpxoMNpH6r7TQMleAGSTMHzdaV8Z6SqkfQ/PZC3dEwWCNgYBk/+RUVB87Za7KNKLfi5VnogdhphKWz5MAy3rAkrILCyc/sjqpYfhjzvpTwzM7MG8d3XgLWw9WVnKaaqFCBsY3GGDuJyYkXOhNRzF+CaEUDLZnfL9WhQyMFWdmcJgDjeD1FLzNOWkLgkAKd12VKiSUQJ+LJnPqKHRA8JbkkJIfR95fCIO6Fwy1oGQ5JDmlTPXRegMXIVLxEflmTMFr+9PdCW296wJR4XXI6aBzQ5mdeetCgjSO4QNCtL+V3Ho10PGexWKjlZMl5DLCfKplTh3dhrzVufAMyRMICjoeEPmg4FQzc6kOEWTK6sDpaJvqM7ckKlxpw3UWRWwMySUmen2jhuCF51TYJeEeUkIWvtFXRi6TJDifDfcGA9BKejL1RF6CNiBYg7PSROiXnfVYzinQ3V4SXC2sm8/qinVo7LP9+ba4ORZzPrtEOvHWSbV0eavWZZ1wS0k+lyWTu/JvpR+diEs3VqysfTLWyfPdM3ZueKhxtg5FwA41uMaS0SpHgNbQgdmr+T5OnqdtEq0fRQaQNEm3eYNUps9WCKaSsI+0lQOPm83ze+7A+RkUsk2y1t5z8PxwMNikpo6BUjtI6YVlY+jQFw3fd+fDF1ssxUtkpeSASCs5IS0ouwntoky7/m2lquZvf/DCJc9LF54JVw5YUVwiVXZwZTQeDlapJVOeaLCKF1Zqqm/ivcppPvdlJ1FXa7FJKasGRrJKOsC2j3i8vC8n83yqsjal+SdWXbQVtR6FaV1f9+zhi1fZiBvecHi5yeuL7/Yd4fZPV6a4c8o4Xpc0ujBLvs0UCkSfq3+gGTdHUy8weOTLCR4/Z5GYMNe5vnhiXyGwu1+92OAzzfSVb1dYQmMP1k61s+26HBBNZsfGiPWUM2GHPeoiJr0rd86MtvJzBrmWI0p+ZYg7MzRdrstOLBcCq+mZNy7NMsP3fe7PAtDXQUdufvfO0sPGRzPtaI1fNXYc8eToQ33p4FsMNJEMVJdIrrogOn/j+2PrVr0bCnm7j36rpbvfp4BkDhinb33z5jQE0q6jl/leDGbTSsJGk+Wbl98efdzcDYGNJuYiAU9d5f0PWwW0kYvf11gtpv/8+vX5x80H3L5fUNLk6cNuvg/Tq2zMY/FXr1x7HI4NJxPRxEIkZTLHaxz2N4W5+jDmthZ/rWAXOqae7OlzEDtQJA1Ofxs8LkqTb5esMy1R7/Z4PL+xq6TgzGfXyYUm+6aP8pduiPkSu/8bcm32wxWWmHx868J4EwIoGKym6OQC33NVplg4E5CrBHRWrRUac8WNLcWzkoe756F3fzq+MN6BQCoENgV9+sc6vxostmOMaIShRP3MzYnzEdMyXyZfAXl3Pp4dL3wLvimwD1J05ucJltxcypyS8fjcwUUoicKT73Woq9SqNOmqzV8RuqX8L8FTqWBZj42JU3oHVy77crlVOSlP/D0S8o18F8qkcsEiS7ZC2d1G+A3RulSuzg5IUv4+QP9NSrXfYtf0j6JaBVc4ye6YHFioThdUB0qkcrfOVJvhdBEqjQrcX3xU1lWU/gVl0teceDFGYwAAAABJRU5ErkJggg==",yD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAd1SURBVHgBjVg/b1xFEJ+Z9yKnQOKQIqWMwxdITEdlEwmJSBQJHSgSdkQNcREoSUcZQ/IB7IIQgYTcIJqIXD5B/BEuHQ3SWUph4bs3zN/dfZeEeBXn9u3bnZmdP7+ZeQgxJlv3J2sE20gwASAGGNB/deh8PIZhACKSX2D5wfz9vzM+8n2htLpv+veT3Wk+2MuLHz/4RjbeUzl1QSgwxjtodjLbS27eYLuJ/T+WRXQp0OfsJLFwVFrIPmVc5TcA7v97utydT3fn/YXrP23Kyh5Ax87d+KAJFAxDkqBXWNg2k5mTu+9zgYwGctmKkOuxF/3CsoV0HnKivdheW+vFknATL37y8CkgbeplIQm/bmCrpirgeM5FyhC6Kkno2xqY0Kk0ruRTiUFL/g2nsNFzT1eFjt0AKVRi5uRy1dEapSb0thgk2VWud7dzzoF9JxrdNAnmv5QLivsUdgPYheAcX+2F48TsYxI6c8KqRWcRt8UwQrWb0PLbOw03IBdlupyuOBmEaX53AJWKUrrUvMx7F0T11kNHUKiYThgHxsbRlTjlfnShMW+L2IaUKRJDercr+DkIy2LoiccugqFM1Tmx8yHj3QtWhEJ8A7omQgvuO348OIdGufEfQQ70vUEIM+RlSup7GMGTzC0o4lJJxxfQAybcawm9ghcUnZegrb6bFg07j5y8KAEhuYXjY9VKaNOi1W+BTUC5lRG5eVbl2X61NlCXBCptgHEUhlmr0orDWVCUqCjRObogtw6pY7AjlNjocNMgagaspAIWDaKjfwNm6JiDCWZc9NDyphG+cqNxKOeL+aDhbkgAEXUNsLReWZyzZ3USTPOEVooyYCqPhwjdMQxLkamDdjAvJ3LzTTlzI5knXyE6l2g7kLUjO7d6Xp7FveQsbLdXSHdKvOixo0YtBKkVUfPsn0dffARvH3sXbj16KhQ3GxXCYoEb88efz95ydv/CrZ9fyJHvV9YD09RO4oMaKKy304DpOsv6AuBTOOMYCJ8hyUUV57RiIJqdQTgbi572DUmIOP5ijhY9okEseZBbiFrJeJOdXzeBl4JLQtRWTo7m+ztzmyZUoVkAhhUhJrcfX5HIeK9PoQBm8/16ARMGsTp7TWHcD4gRhSVCw8+pMtj+ZV08YQpwTiOQOwuAd3YnO78/V6HF6S8F7mCFnDo66A/FVuvsdQR2Uq1MvvrtAJad0BrWHc8xAZpLlhEZPJMkHAcw+2/D5Px5kWNwJVcsu+8uT1ArEfJUhSsq7DBgSqnanm0C+lJQOECZSrHABUVFrqVmEuwybwRWKx9EXuFhGrX0R1mZgPuyAXaUAAUsRsctGZSiIC5pSctSKNeUavfFwHUU91MNIo6Li8xRYzWo40LCkaYsipQFuFKJmRbwlctVj4mcKIWGiOGVTvKOhOKuLAw01WHavOZSznhpeQQchUCWV7PArMK9VoEZBLBSbdpFuSod21ymMixFNgJlbPCCBhM+J4WOEZMhICAgQf6Gz3hYXObl4rLs/xHinfl0NwZ0fUZd6/I87uk5Hk7fFzmuOW+nm5Cja53CDESxYJpFzZPmHDhKqedhDovhmuml7xWF5Xd5NH9402Bm8vUfczSoUf1aUzT2wY52eLGoC30/mz/4dGZn7/yZBSPWBOZlwFKycZRbrlgrPgtKVB7zPRNkCm8a1DOXGgNap47z1998FoaJnI8A4hLBHoMd0KA+aKo15HYUNylpa3Ln6QTOMjq6ETQsRMWE66KZrbOdXdtUN9PKxdzAXcDNrDJO7j7hCg+2lKpQOV/IDQ8iBIuLl15YG0S2YmGzrV4C02YyOZTHYxiHh7UJCloC+pdEnO3a8XlNhwWQl7fx3e/+4iLXiEytdEuBnFfAvASP1rLajkTQzEuYYgHyAsjpF1XI5Cd4vB0FawxqKdd6X9Ob4hWGUDVV15rQGFNAR+T1bH3C813D5M9uoaikGa2Ry5SbNYEkEoiCtejBZcqM0hTJVoHbrUtfEdakWPbyuraYbq1Mg5Hao03IdOFLdvloKLKSV1qdFqze1aVZvcvhBjgz/3HAO4zngIWqG7otOTgLh9p4xoTLMULAsffnBRmXkoazq2OMnhShTT3+MKQdQ6vtBwgOmcZnS8g1njaSgaPNi6gy82CtqjPfDQ7UJcVg9uT1q0LpNRoiNVqhoCbUjzPcCBtBQVw1/uoZDvLtsAOE2jTRXLZNwvjcsFo9gGMLmks2vR6nD2nKjABPTVTN1TPFCgzVek17JswWi2MNkiPZuBVi1Byimhgs0FoxsdRm+ZmiecnZtOcvZnKISC9ViQ6ymML4UuDfKNz3Ys6ngEc99N09EWQadmwSHNoXOa6fLKJidgwKBbStqdV3kUuLyqJjLM5o1ROkF6bGACo4l/ro4OTehzN6+e0Hz6TT2UHqZuxNE9tfVjbll7C8x6byidQEo2YnK55IW0avViv2gcnSGQZ9b7b819YPuxPabXxDCpYfnq+f67srAo8boHlwsE/AFsFW8MSz5fGc52jXIs/XPQMUepFfNUNqvoQ++YDt4WE4loejl3c3pkn6P+qPZaV9dxvzAAAAAElFTkSuQmCC",bD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAoCAYAAACSN4jeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAa1SURBVHgBtVhRaxxVFD7nzp2ZDSXpiLaNT1198UUw0arUB5sBlT5ITd/0xWYrKBWxDUhpJaUbpdQnE4tQRKEbfPFFukUoBYWkqEQL2vyCdvsWW8GtsZA0u/d4zr0zs5t2N5mN9bCzO3vn3nO/+51zzzl3ENpk8KWpEQIYQvSegg5ijAGl1D2NfKl1+lHzBn/PLf4wPgc9CKY3j75yZoqIjnTtiAj8HOTTamuNT0Wet9rR3idjLi+vNvfX58brkEO0fO0QUICHWQWQ8tYgbqHI/mB6Q/YPOrAtiKzFPeImNK25RkJPneffGHIIDu6dKgL512QGq9BTCFrXeLZi5xFYA9sxwYKYQRSE6SrscwsNiwlw22iUF/95/uDljYBpg3oIFSaaeIW0MnzrwrsLg3s/P8B2KHNbMZ03pQ/pbvzHpfEa5JDB188VDamrPD5iIwu6/dy8ITBFqCJAdlTFTLHD3ro4viAPFi+9N4OkYgJVkXZAj289YbRIXuHa9lfPnoQcsvhNqWYKYZ3CEKgQIt9vzTNO8UQgFylFFmC70kuHajcvHipxc4l73gBhFm1f/lHlHfu+uB7tPVvcaBIBZQoFMoWAwRUgjzAwsNuIJ+UJsWOnxe8OVZiwmDyYsQtggMw08bUzCPW17fu+XJc9ZorBBUhhgYDv8wETZAJIOea6yWKV2au+M0ZIB5mummWPibO/HpZ3jH51eH1gIQk4YS0fMAkPfJGYEXHDAbeqb1eY5pgBVcTnLHPMInmqHI2eizoCS/yL+tikQW5TKgFFwhgplWvQYrVUu/ntWyWDOOn8jk2rMNIahjoCY5aEKROKj/m55nBIrBntBNCLNBrwGXh2p1odJKGlEzDfr5HWBL5P6Hm38+jWrBgyG+ZkLJV6tVTf9sbX6OIqx2ftUad+XhNKTQ/PkYEFb1lNpu3RyFRUCPRhMA1cbsB0e7rS1r+SwAy9EWaFXHS3owlMRw3148M16JCK+jSeJDJHJASFPr3GQOMUnA0X1oklXGBvjFlRbf7peT0NbWodsYmBNI/T/lDQF8xGI24DaSNupmTFopSgZ1GYVRKtXOnMFGoY40Dsdqqx9RF3MDbD2P/yz0NnLfc9FGxZmRXmtOJVGubKqVS9IxO2HChO/i3GC77HlQSNZGtNrMG1niufJBuaJqq7zbX6CIbCQFW025eZwp69LAkxuCbLszS3PVxM8LqaLCswZPNaIjD97x4lfi5aDG3VJln1pkU5M1gxrdUvP/nEOM/MqQqjDHNSbNpyKKkekUwxW6T9xrohM27Dha2sJP3BJqR9UUpnlC19uKvKP9X1hg5M/sJpjKYcKru/6wpW4qVyvKBtcCRrCdyE67tKIy0MTW9L44wwDOBKYP6uG1Tx30dfsGWXW66X7MxNmNRVGeBitN89XDzy8pk9g3y1txlsTPN6ajzxXwLqztHhhfSZBp/zF2/dxBF7FlRJKuPBzS593EEHxGzI4EqL379fkfY7R58TII91GpPlSuohibeLHeMqYDkudLQlU7pHPMh6kaf25NFrfSzb6JuhTEoed4dS3HbqYvqChyDZupSzUNBNZU9/dhzhf4r8XU0p9ZjNDDJRzim0VLC8ChcxYBMRo9381CVAc4FI5I6HeZ0lKXtMEpJ7T0kkJycbNBmU6WLKMCunsQn5xJ7EITl9A22GMUwWZT2143gThO4Vg8xA+daenJLs0c3W79GR2Qh6EBvHPKn9pVDszDj1FSJ3dAsQCkHOChbciSd9LUFb8Hx0bLZU/ySu5VHQXpIzuNGBiZ+L7oGx8doQ7mSW5JBrk6MBczWPWqsxmvhxlkeNuG1jY22d3xVM1k+9OL2RgoGPf22xlCZnybv3uEXyluH6XfTj5Ymnb2yk120S3SjxJqjZKG4rWYzYPJ/2n/hpNirPFtdTQIHfunxtf8HXmLTJWZJsW+jXyQ/G84DKgNXLcY2jY8zldcVGcskCUll6asRg+LurArrIaiO7xfuDp1B4mw1RXVUwtHRs+ALklPs09U/OH+DGsrw+aqUC60Zz2KRSvby71t5/4KP5zJS8qLGliedn4AHIffFu6eTuGd5bMa9yxuVQecsjWx1HjFZXB05dydiLyvNFmydRuYOM6fFguo6sq6j/1JUxNjEfsdxLvHRadus5PuJMg2qMcdNoEtSRmhD/c+LZOfi/gYkUTs8XA/DLzMibNgC7vIWU1ZXp7qPrS8d2PQ4PSHJT33/6tzE2qbxuKq7VYNm6Lc69/EG+HZdHchdgS8efqawajJmgSns7n2gurzZXhh8kKJF/Ab85oVyTkiXIAAAAAElFTkSuQmCC";var Q0={};function SD(t,e){return e.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(a){if(a!=="default"&&!(a in t)){var s=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:function(){return i[a]}})}})}),Object.freeze(t)}var TD=Object.defineProperty,kD=(t,e,i)=>e in t?TD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,X0=(t,e,i)=>kD(t,typeof e!="symbol"?e+"":e,i);class fn{constructor(){X0(this,"_locking"),X0(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const i=new Promise(s=>e=()=>{this._locks-=1,s()}),a=this._locking.then(()=>e);return this._locking=this._locking.then(()=>i),a}}function Et(t,e){if(!t)throw new Error(e)}const CD=34028234663852886e22,ED=-34028234663852886e22,xD=4294967295,wD=2147483647,RD=-2147483648;function zc(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>wD||t<RD)throw new Error("invalid int 32: "+t)}function Hh(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>xD||t<0)throw new Error("invalid uint 32: "+t)}function zT(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>CD||t<ED))throw new Error("invalid float 32: "+t)}const FT=Symbol("@bufbuild/protobuf/enum-type");function AD(t){const e=t[FT];return Et(e,"missing enum type on enum object"),e}function VT(t,e,i,a){t[FT]=qT(e,i.map(s=>({no:s.no,name:s.name,localName:t[s.no]})))}function qT(t,e,i){const a=Object.create(null),s=Object.create(null),l=[];for(const c of e){const d=HT(c);l.push(d),a[c.name]=d,s[c.no]=d}return{typeName:t,values:l,findName(c){return a[c]},findNumber(c){return s[c]}}}function _D(t,e,i){const a={};for(const s of e){const l=HT(s);a[l.localName]=l.no,a[l.no]=l.localName}return VT(a,t,e),a}function HT(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class Hm{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,i){const a=this.getType(),s=a.runtime.bin,l=s.makeReadOptions(i);return s.readMessage(this,l.readerFactory(e),e.byteLength,l),this}fromJson(e,i){const a=this.getType(),s=a.runtime.json,l=s.makeReadOptions(i);return s.readMessage(a,e,l,this),this}fromJsonString(e,i){let a;try{a=JSON.parse(e)}catch(s){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(s instanceof Error?s.message:String(s)))}return this.fromJson(a,i)}toBinary(e){const i=this.getType(),a=i.runtime.bin,s=a.makeWriteOptions(e),l=s.writerFactory();return a.writeMessage(this,l,s),l.finish()}toJson(e){const i=this.getType(),a=i.runtime.json,s=a.makeWriteOptions(e);return a.writeMessage(this,s)}toJsonString(e){var i;const a=this.toJson(e);return JSON.stringify(a,null,(i=e==null?void 0:e.prettySpaces)!==null&&i!==void 0?i:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function OD(t,e,i,a){var s;const l=(s=a==null?void 0:a.localName)!==null&&s!==void 0?s:e.substring(e.lastIndexOf(".")+1),c={[l]:function(d){t.util.initFields(this),t.util.initPartial(d,this)}}[l];return Object.setPrototypeOf(c.prototype,new Hm),Object.assign(c,{runtime:t,typeName:e,fields:t.util.newFieldList(i),fromBinary(d,h){return new c().fromBinary(d,h)},fromJson(d,h){return new c().fromJson(d,h)},fromJsonString(d,h){return new c().fromJsonString(d,h)},equals(d,h){return t.util.equals(c,d,h)}}),c}function ND(){let t=0,e=0;for(let a=0;a<28;a+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<a,(s&128)==0)return this.assertBounds(),[t,e]}let i=this.buf[this.pos++];if(t|=(i&15)<<28,e=(i&112)>>4,(i&128)==0)return this.assertBounds(),[t,e];for(let a=3;a<=31;a+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<a,(s&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function ch(t,e,i){for(let l=0;l<28;l=l+7){const c=t>>>l,d=!(!(c>>>7)&&e==0),h=(d?c|128:c)&255;if(i.push(h),!d)return}const a=t>>>28&15|(e&7)<<4,s=e>>3!=0;if(i.push((s?a|128:a)&255),!!s){for(let l=3;l<31;l=l+7){const c=e>>>l,d=!!(c>>>7),h=(d?c|128:c)&255;if(i.push(h),!d)return}i.push(e>>>31&1)}}const Fc=4294967296;function J0(t){const e=t[0]==="-";e&&(t=t.slice(1));const i=1e6;let a=0,s=0;function l(c,d){const h=Number(t.slice(c,d));s*=i,a=a*i+h,a>=Fc&&(s=s+(a/Fc|0),a=a%Fc)}return l(-24,-18),l(-18,-12),l(-12,-6),l(-6),e?KT(a,s):Gm(a,s)}function DD(t,e){let i=Gm(t,e);const a=i.hi&2147483648;a&&(i=KT(i.lo,i.hi));const s=GT(i.lo,i.hi);return a?"-"+s:s}function GT(t,e){if({lo:t,hi:e}=PD(t,e),e<=2097151)return String(Fc*e+t);const i=t&16777215,a=(t>>>24|e<<8)&16777215,s=e>>16&65535;let l=i+a*6777216+s*6710656,c=a+s*8147497,d=s*2;const h=1e7;return l>=h&&(c+=Math.floor(l/h),l%=h),c>=h&&(d+=Math.floor(c/h),c%=h),d.toString()+Z0(c)+Z0(l)}function PD(t,e){return{lo:t>>>0,hi:e>>>0}}function Gm(t,e){return{lo:t|0,hi:e|0}}function KT(t,e){return e=~e,t?t=~t+1:e+=1,Gm(t,e)}const Z0=t=>{const e=String(t);return"0000000".slice(e.length)+e};function W0(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let i=0;i<9;i++)e.push(t&127|128),t=t>>7;e.push(1)}}function MD(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let i=5;(t&128)!==0&&i<10;i++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function LD(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof Q0!="object"||Q0.BUF_BIGINT_DISABLE!=="1")){const s=BigInt("-9223372036854775808"),l=BigInt("9223372036854775807"),c=BigInt("0"),d=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(h){const f=typeof h=="bigint"?h:BigInt(h);if(f>l||f<s)throw new Error("int64 invalid: ".concat(h));return f},uParse(h){const f=typeof h=="bigint"?h:BigInt(h);if(f>d||f<c)throw new Error("uint64 invalid: ".concat(h));return f},enc(h){return t.setBigInt64(0,this.parse(h),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(h){return t.setBigInt64(0,this.uParse(h),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(h,f){return t.setInt32(0,h,!0),t.setInt32(4,f,!0),t.getBigInt64(0,!0)},uDec(h,f){return t.setInt32(0,h,!0),t.setInt32(4,f,!0),t.getBigUint64(0,!0)}}}const i=s=>Et(/^-?[0-9]+$/.test(s),"int64 invalid: ".concat(s)),a=s=>Et(/^[0-9]+$/.test(s),"uint64 invalid: ".concat(s));return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.toString()),i(s),s},uParse(s){return typeof s!="string"&&(s=s.toString()),a(s),s},enc(s){return typeof s!="string"&&(s=s.toString()),i(s),J0(s)},uEnc(s){return typeof s!="string"&&(s=s.toString()),a(s),J0(s)},dec(s,l){return DD(s,l)},uDec(s,l){return GT(s,l)}}}const pt=LD();var ne;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(ne||(ne={}));var ja;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(ja||(ja={}));function _a(t,e,i){if(e===i)return!0;if(t==ne.BYTES){if(!(e instanceof Uint8Array)||!(i instanceof Uint8Array)||e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==i[a])return!1;return!0}switch(t){case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return e==i}return!1}function Cs(t,e){switch(t){case ne.BOOL:return!1;case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return e==0?pt.zero:"0";case ne.DOUBLE:case ne.FLOAT:return 0;case ne.BYTES:return new Uint8Array(0);case ne.STRING:return"";default:return 0}}function YT(t,e){switch(t){case ne.BOOL:return e===!1;case ne.STRING:return e==="";case ne.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Nt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Nt||(Nt={}));class UD{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let i=new Uint8Array(e),a=0;for(let s=0;s<this.chunks.length;s++)i.set(this.chunks[s],a),a+=this.chunks[s].length;return this.chunks=[],i}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),i=this.stack.pop();if(!i)throw new Error("invalid state, fork stack empty");return this.chunks=i.chunks,this.buf=i.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,i){return this.uint32((e<<3|i)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Hh(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return zc(e),W0(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let i=this.textEncoder.encode(e);return this.uint32(i.byteLength),this.raw(i)}float(e){zT(e);let i=new Uint8Array(4);return new DataView(i.buffer).setFloat32(0,e,!0),this.raw(i)}double(e){let i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),this.raw(i)}fixed32(e){Hh(e);let i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,e,!0),this.raw(i)}sfixed32(e){zc(e);let i=new Uint8Array(4);return new DataView(i.buffer).setInt32(0,e,!0),this.raw(i)}sint32(e){return zc(e),e=(e<<1^e>>31)>>>0,W0(e,this.buf),this}sfixed64(e){let i=new Uint8Array(8),a=new DataView(i.buffer),s=pt.enc(e);return a.setInt32(0,s.lo,!0),a.setInt32(4,s.hi,!0),this.raw(i)}fixed64(e){let i=new Uint8Array(8),a=new DataView(i.buffer),s=pt.uEnc(e);return a.setInt32(0,s.lo,!0),a.setInt32(4,s.hi,!0),this.raw(i)}int64(e){let i=pt.enc(e);return ch(i.lo,i.hi,this.buf),this}sint64(e){let i=pt.enc(e),a=i.hi>>31,s=i.lo<<1^a,l=(i.hi<<1|i.lo>>>31)^a;return ch(s,l,this.buf),this}uint64(e){let i=pt.uEnc(e);return ch(i.lo,i.hi,this.buf),this}}class ID{constructor(e,i){this.varint64=ND,this.uint32=MD,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=i??new TextDecoder}tag(){let e=this.uint32(),i=e>>>3,a=e&7;if(i<=0||a<0||a>5)throw new Error("illegal tag: field no "+i+" wire type "+a);return[i,a]}skip(e,i){let a=this.pos;switch(e){case Nt.Varint:for(;this.buf[this.pos++]&128;);break;case Nt.Bit64:this.pos+=4;case Nt.Bit32:this.pos+=4;break;case Nt.LengthDelimited:let s=this.uint32();this.pos+=s;break;case Nt.StartGroup:for(;;){const[l,c]=this.tag();if(c===Nt.EndGroup){if(i!==void 0&&l!==i)throw new Error("invalid end group tag");break}this.skip(c,l)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(a,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return pt.dec(...this.varint64())}uint64(){return pt.uDec(...this.varint64())}sint64(){let[e,i]=this.varint64(),a=-(e&1);return e=(e>>>1|(i&1)<<31)^a,i=i>>>1^a,pt.dec(e,i)}bool(){let[e,i]=this.varint64();return e!==0||i!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return pt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return pt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),i=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(i,i+e)}string(){return this.textDecoder.decode(this.bytes())}}function jD(t,e,i,a){let s;return{typeName:e,extendee:i,get field(){if(!s){const l=typeof a=="function"?a():a;l.name=e.split(".").pop(),l.jsonName="[".concat(e,"]"),s=t.util.newFieldList([l]).list()[0]}return s},runtime:t}}function QT(t){const e=t.field.localName,i=Object.create(null);return i[e]=BD(t),[i,()=>i[e]]}function BD(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Cs(e.T,e.L);case"message":const i=e.T,a=new i;return i.fieldWrapper?i.fieldWrapper.unwrapField(a):a;case"map":throw"map fields are not allowed to be extensions"}}function zD(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let i=t.length-1;i>=0;--i)if(t[i].no==e.no)return[t[i]];return[]}return t.filter(i=>i.no===e.no)}let Zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),xu=[];for(let t=0;t<Zi.length;t++)xu[Zi[t].charCodeAt(0)]=t;xu[45]=Zi.indexOf("+");xu[95]=Zi.indexOf("/");const XT={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let i=new Uint8Array(e),a=0,s=0,l,c=0;for(let d=0;d<t.length;d++){if(l=xu[t.charCodeAt(d)],l===void 0)switch(t[d]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:c=l,s=1;break;case 1:i[a++]=c<<2|(l&48)>>4,c=l,s=2;break;case 2:i[a++]=(c&15)<<4|(l&60)>>2,c=l,s=3;break;case 3:i[a++]=(c&3)<<6|l,s=0;break}}if(s==1)throw Error("invalid base64 string.");return i.subarray(0,a)},enc(t){let e="",i=0,a,s=0;for(let l=0;l<t.length;l++)switch(a=t[l],i){case 0:e+=Zi[a>>2],s=(a&3)<<4,i=1;break;case 1:e+=Zi[s|a>>4],s=(a&15)<<2,i=2;break;case 2:e+=Zi[s|a>>6],e+=Zi[a&63],i=0;break}return i&&(e+=Zi[s],e+="=",i==1&&(e+="=")),e}};function FD(t,e,i){ZT(e,t);const a=e.runtime.bin.makeReadOptions(i),s=zD(t.getType().runtime.bin.listUnknownFields(t),e.field),[l,c]=QT(e);for(const d of s)e.runtime.bin.readField(l,a.readerFactory(d.data),e.field,d.wireType,a);return c()}function VD(t,e,i,a){ZT(e,t);const s=e.runtime.bin.makeReadOptions(a),l=e.runtime.bin.makeWriteOptions(a);if(JT(t,e)){const f=t.getType().runtime.bin.listUnknownFields(t).filter(p=>p.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const p of f)t.getType().runtime.bin.onUnknownField(t,p.no,p.wireType,p.data)}const c=l.writerFactory();let d=e.field;!d.opt&&!d.repeated&&(d.kind=="enum"||d.kind=="scalar")&&(d=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(d,i,c,l);const h=s.readerFactory(c.finish());for(;h.pos<h.len;){const[f,p]=h.tag(),v=h.skip(p,f);t.getType().runtime.bin.onUnknownField(t,f,p,v)}}function JT(t,e){const i=t.getType();return e.extendee.typeName===i.typeName&&!!i.runtime.bin.listUnknownFields(t).find(a=>a.no==e.field.no)}function ZT(t,e){Et(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function WT(t,e){const i=t.localName;if(t.repeated)return e[i].length>0;if(t.oneof)return e[t.oneof.localName].case===i;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[i]!==void 0:t.kind=="enum"?e[i]!==t.T.values[0].no:!YT(t.T,e[i]);case"message":return e[i]!==void 0;case"map":return Object.keys(e[i]).length>0}}function $0(t,e){const i=t.localName,a=!t.opt&&!t.req;if(t.repeated)e[i]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[i]={};break;case"enum":e[i]=a?t.T.values[0].no:void 0;break;case"scalar":e[i]=a?Cs(t.T,t.L):void 0;break;case"message":e[i]=void 0;break}}function Wi(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(Hm.prototype).every(a=>a in t&&typeof t[a]=="function"))return!1;const i=t.getType();return i===null||typeof i!="function"||!("typeName"in i)||typeof i.typeName!="string"?!1:e===void 0?!0:i.typeName==e.typeName}function $T(t,e){return Wi(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}ne.DOUBLE,ne.FLOAT,ne.INT64,ne.UINT64,ne.INT32,ne.UINT32,ne.BOOL,ne.STRING,ne.BYTES;const eb={ignoreUnknownFields:!1},tb={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function qD(t){return t?Object.assign(Object.assign({},eb),t):eb}function HD(t){return t?Object.assign(Object.assign({},tb),t):tb}const au=Symbol(),Vc=Symbol();function GD(){return{makeReadOptions:qD,makeWriteOptions:HD,readMessage(t,e,i,a){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(bi(e)));a=a??new t;const s=new Map,l=i.typeRegistry;for(const[c,d]of Object.entries(e)){const h=t.fields.findJsonName(c);if(h){if(h.oneof){if(d===null&&h.kind=="scalar")continue;const f=s.get(h.oneof);if(f!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(h.oneof.name,'" present: "').concat(f,'", "').concat(c,'"'));s.set(h.oneof,c)}nb(a,d,h,i,t)}else{let f=!1;if(l!=null&&l.findExtension&&c.startsWith("[")&&c.endsWith("]")){const p=l.findExtension(c.substring(1,c.length-1));if(p&&p.extendee.typeName==t.typeName){f=!0;const[v,y]=QT(p);nb(v,d,p.field,i,p),VD(a,p,y(),i)}}if(!f&&!i.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(c,'" is unknown'))}}return a},writeMessage(t,e){const i=t.getType(),a={};let s;try{for(s of i.fields.byNumber()){if(!WT(s,t)){if(s.req)throw"required field not set";if(!e.emitDefaultValues||!YD(s))continue}const c=s.oneof?t[s.oneof.localName].value:t[s.localName],d=ib(s,c,e);d!==void 0&&(a[e.useProtoFieldName?s.name:s.jsonName]=d)}const l=e.typeRegistry;if(l!=null&&l.findExtensionFor)for(const c of i.runtime.bin.listUnknownFields(t)){const d=l.findExtensionFor(i.typeName,c.no);if(d&&JT(t,d)){const h=FD(t,d,e),f=ib(d.field,h,e);f!==void 0&&(a[d.field.jsonName]=f)}}}catch(l){const c=s?"cannot encode field ".concat(i.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(i.typeName," to JSON"),d=l instanceof Error?l.message:String(l);throw new Error(c+(d.length>0?": ".concat(d):""))}return a},readScalar(t,e,i){return Yo(t,e,i??ja.BIGINT,!0)},writeScalar(t,e,i){if(e!==void 0&&(i||YT(t,e)))return qc(t,e)},debug:bi}}function bi(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function nb(t,e,i,a,s){let l=i.localName;if(i.repeated){if(Et(i.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(s.typeName,".").concat(i.name," from JSON: ").concat(bi(e)));const c=t[l];for(const d of e){if(d===null)throw new Error("cannot decode field ".concat(s.typeName,".").concat(i.name," from JSON: ").concat(bi(d)));switch(i.kind){case"message":c.push(i.T.fromJson(d,a));break;case"enum":const h=uh(i.T,d,a.ignoreUnknownFields,!0);h!==Vc&&c.push(h);break;case"scalar":try{c.push(Yo(i.T,d,i.L,!0))}catch(f){let p="cannot decode field ".concat(s.typeName,".").concat(i.name," from JSON: ").concat(bi(d));throw f instanceof Error&&f.message.length>0&&(p+=": ".concat(f.message)),new Error(p)}break}}}else if(i.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(s.typeName,".").concat(i.name," from JSON: ").concat(bi(e)));const c=t[l];for(const[d,h]of Object.entries(e)){if(h===null)throw new Error("cannot decode field ".concat(s.typeName,".").concat(i.name," from JSON: map value null"));let f;try{f=KD(i.K,d)}catch(p){let v="cannot decode map key for field ".concat(s.typeName,".").concat(i.name," from JSON: ").concat(bi(e));throw p instanceof Error&&p.message.length>0&&(v+=": ".concat(p.message)),new Error(v)}switch(i.V.kind){case"message":c[f]=i.V.T.fromJson(h,a);break;case"enum":const p=uh(i.V.T,h,a.ignoreUnknownFields,!0);p!==Vc&&(c[f]=p);break;case"scalar":try{c[f]=Yo(i.V.T,h,ja.BIGINT,!0)}catch(v){let y="cannot decode map value for field ".concat(s.typeName,".").concat(i.name," from JSON: ").concat(bi(e));throw v instanceof Error&&v.message.length>0&&(y+=": ".concat(v.message)),new Error(y)}break}}}else switch(i.oneof&&(t=t[i.oneof.localName]={case:l},l="value"),i.kind){case"message":const c=i.T;if(e===null&&c.typeName!="google.protobuf.Value")return;let d=t[l];Wi(d)?d.fromJson(e,a):(t[l]=d=c.fromJson(e,a),c.fieldWrapper&&!i.oneof&&(t[l]=c.fieldWrapper.unwrapField(d)));break;case"enum":const h=uh(i.T,e,a.ignoreUnknownFields,!1);switch(h){case au:$0(i,t);break;case Vc:break;default:t[l]=h;break}break;case"scalar":try{const f=Yo(i.T,e,i.L,!1);switch(f){case au:$0(i,t);break;default:t[l]=f;break}}catch(f){let p="cannot decode field ".concat(s.typeName,".").concat(i.name," from JSON: ").concat(bi(e));throw f instanceof Error&&f.message.length>0&&(p+=": ".concat(f.message)),new Error(p)}break}}function KD(t,e){if(t===ne.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Yo(t,e,ja.BIGINT,!0).toString()}function Yo(t,e,i,a){if(e===null)return a?Cs(t,i):au;switch(t){case ne.DOUBLE:case ne.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const s=Number(e);if(Number.isNaN(s)||!Number.isFinite(s))break;return t==ne.FLOAT&&zT(s),s;case ne.INT32:case ne.FIXED32:case ne.SFIXED32:case ne.SINT32:case ne.UINT32:let l;if(typeof e=="number"?l=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(l=Number(e)),l===void 0)break;return t==ne.UINT32||t==ne.FIXED32?Hh(l):zc(l),l;case ne.INT64:case ne.SFIXED64:case ne.SINT64:if(typeof e!="number"&&typeof e!="string")break;const c=pt.parse(e);return i?c.toString():c;case ne.FIXED64:case ne.UINT64:if(typeof e!="number"&&typeof e!="string")break;const d=pt.uParse(e);return i?d.toString():d;case ne.BOOL:if(typeof e!="boolean")break;return e;case ne.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case ne.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return XT.dec(e)}throw new Error}function uh(t,e,i,a){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:a?t.values[0].no:au;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const s=t.findName(e);if(s!==void 0)return s.no;if(i)return Vc;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(bi(e)))}function YD(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function ib(t,e,i){if(t.kind=="map"){Et(typeof e=="object"&&e!=null);const a={},s=Object.entries(e);switch(t.V.kind){case"scalar":for(const[c,d]of s)a[c.toString()]=qc(t.V.T,d);break;case"message":for(const[c,d]of s)a[c.toString()]=d.toJson(i);break;case"enum":const l=t.V.T;for(const[c,d]of s)a[c.toString()]=dh(l,d,i.enumAsInteger);break}return i.emitDefaultValues||s.length>0?a:void 0}if(t.repeated){Et(Array.isArray(e));const a=[];switch(t.kind){case"scalar":for(let s=0;s<e.length;s++)a.push(qc(t.T,e[s]));break;case"enum":for(let s=0;s<e.length;s++)a.push(dh(t.T,e[s],i.enumAsInteger));break;case"message":for(let s=0;s<e.length;s++)a.push(e[s].toJson(i));break}return i.emitDefaultValues||a.length>0?a:void 0}switch(t.kind){case"scalar":return qc(t.T,e);case"enum":return dh(t.T,e,i.enumAsInteger);case"message":return $T(t.T,e).toJson(i)}}function dh(t,e,i){var a;if(Et(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(i)return e;const s=t.findNumber(e);return(a=s==null?void 0:s.name)!==null&&a!==void 0?a:e}function qc(t,e){switch(t){case ne.INT32:case ne.SFIXED32:case ne.SINT32:case ne.FIXED32:case ne.UINT32:return Et(typeof e=="number"),e;case ne.FLOAT:case ne.DOUBLE:return Et(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case ne.STRING:return Et(typeof e=="string"),e;case ne.BOOL:return Et(typeof e=="boolean"),e;case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return Et(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case ne.BYTES:return Et(e instanceof Uint8Array),XT.enc(e)}}const us=Symbol("@bufbuild/protobuf/unknown-fields"),ab={readUnknownFields:!0,readerFactory:t=>new ID(t)},rb={writeUnknownFields:!0,writerFactory:()=>new UD};function QD(t){return t?Object.assign(Object.assign({},ab),t):ab}function XD(t){return t?Object.assign(Object.assign({},rb),t):rb}function JD(){return{makeReadOptions:QD,makeWriteOptions:XD,listUnknownFields(t){var e;return(e=t[us])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[us]},writeUnknownFields(t,e){const a=t[us];if(a)for(const s of a)e.tag(s.no,s.wireType).raw(s.data)},onUnknownField(t,e,i,a){const s=t;Array.isArray(s[us])||(s[us]=[]),s[us].push({no:e,wireType:i,data:a})},readMessage(t,e,i,a,s){const l=t.getType(),c=s?e.len:e.pos+i;let d,h;for(;e.pos<c&&([d,h]=e.tag(),!(s===!0&&h==Nt.EndGroup));){const f=l.fields.find(d);if(!f){const p=e.skip(h,d);a.readUnknownFields&&this.onUnknownField(t,d,h,p);continue}sb(t,e,f,h,a)}if(s&&(h!=Nt.EndGroup||d!==i))throw new Error("invalid end group tag")},readField:sb,writeMessage(t,e,i){const a=t.getType();for(const s of a.fields.byNumber()){if(!WT(s,t)){if(s.req)throw new Error("cannot encode field ".concat(a.typeName,".").concat(s.name," to binary: required field not set"));continue}const l=s.oneof?t[s.oneof.localName].value:t[s.localName];ob(s,l,e,i)}return i.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,i,a){e!==void 0&&ob(t,e,i,a)}}}function sb(t,e,i,a,s){let{repeated:l,localName:c}=i;switch(i.oneof&&(t=t[i.oneof.localName],t.case!=c&&delete t.value,t.case=c,c="value"),i.kind){case"scalar":case"enum":const d=i.kind=="enum"?ne.INT32:i.T;let h=ru;if(i.kind=="scalar"&&i.L>0&&(h=WD),l){let y=t[c];if(a==Nt.LengthDelimited&&d!=ne.STRING&&d!=ne.BYTES){let S=e.uint32()+e.pos;for(;e.pos<S;)y.push(h(e,d))}else y.push(h(e,d))}else t[c]=h(e,d);break;case"message":const f=i.T;l?t[c].push(Hc(e,new f,s,i)):Wi(t[c])?Hc(e,t[c],s,i):(t[c]=Hc(e,new f,s,i),f.fieldWrapper&&!i.oneof&&!i.repeated&&(t[c]=f.fieldWrapper.unwrapField(t[c])));break;case"map":let[p,v]=ZD(i,e,s);t[c][p]=v;break}}function Hc(t,e,i,a){const s=e.getType().runtime.bin,l=a==null?void 0:a.delimited;return s.readMessage(e,t,l?a.no:t.uint32(),i,l),e}function ZD(t,e,i){const a=e.uint32(),s=e.pos+a;let l,c;for(;e.pos<s;){const[d]=e.tag();switch(d){case 1:l=ru(e,t.K);break;case 2:switch(t.V.kind){case"scalar":c=ru(e,t.V.T);break;case"enum":c=e.int32();break;case"message":c=Hc(e,new t.V.T,i,void 0);break}break}}if(l===void 0&&(l=Cs(t.K,ja.BIGINT)),typeof l!="string"&&typeof l!="number"&&(l=l.toString()),c===void 0)switch(t.V.kind){case"scalar":c=Cs(t.V.T,ja.BIGINT);break;case"enum":c=t.V.T.values[0].no;break;case"message":c=new t.V.T;break}return[l,c]}function WD(t,e){const i=ru(t,e);return typeof i=="bigint"?i.toString():i}function ru(t,e){switch(e){case ne.STRING:return t.string();case ne.BOOL:return t.bool();case ne.DOUBLE:return t.double();case ne.FLOAT:return t.float();case ne.INT32:return t.int32();case ne.INT64:return t.int64();case ne.UINT64:return t.uint64();case ne.FIXED64:return t.fixed64();case ne.BYTES:return t.bytes();case ne.FIXED32:return t.fixed32();case ne.SFIXED32:return t.sfixed32();case ne.SFIXED64:return t.sfixed64();case ne.SINT64:return t.sint64();case ne.UINT32:return t.uint32();case ne.SINT32:return t.sint32()}}function ob(t,e,i,a){Et(e!==void 0);const s=t.repeated;switch(t.kind){case"scalar":case"enum":let l=t.kind=="enum"?ne.INT32:t.T;if(s)if(Et(Array.isArray(e)),t.packed)eP(i,l,t.no,e);else for(const c of e)Qo(i,l,t.no,c);else Qo(i,l,t.no,e);break;case"message":if(s){Et(Array.isArray(e));for(const c of e)lb(i,a,t,c)}else lb(i,a,t,e);break;case"map":Et(typeof e=="object"&&e!=null);for(const[c,d]of Object.entries(e))$D(i,a,t,c,d);break}}function $D(t,e,i,a,s){t.tag(i.no,Nt.LengthDelimited),t.fork();let l=a;switch(i.K){case ne.INT32:case ne.FIXED32:case ne.UINT32:case ne.SFIXED32:case ne.SINT32:l=Number.parseInt(a);break;case ne.BOOL:Et(a=="true"||a=="false"),l=a=="true";break}switch(Qo(t,i.K,1,l),i.V.kind){case"scalar":Qo(t,i.V.T,2,s);break;case"enum":Qo(t,ne.INT32,2,s);break;case"message":Et(s!==void 0),t.tag(2,Nt.LengthDelimited).bytes(s.toBinary(e));break}t.join()}function lb(t,e,i,a){const s=$T(i.T,a);i.delimited?t.tag(i.no,Nt.StartGroup).raw(s.toBinary(e)).tag(i.no,Nt.EndGroup):t.tag(i.no,Nt.LengthDelimited).bytes(s.toBinary(e))}function Qo(t,e,i,a){Et(a!==void 0);let[s,l]=ek(e);t.tag(i,s)[l](a)}function eP(t,e,i,a){if(!a.length)return;t.tag(i,Nt.LengthDelimited).fork();let[,s]=ek(e);for(let l=0;l<a.length;l++)t[s](a[l]);t.join()}function ek(t){let e=Nt.Varint;switch(t){case ne.BYTES:case ne.STRING:e=Nt.LengthDelimited;break;case ne.DOUBLE:case ne.FIXED64:case ne.SFIXED64:e=Nt.Bit64;break;case ne.FIXED32:case ne.SFIXED32:case ne.FLOAT:e=Nt.Bit32;break}const i=ne[t].toLowerCase();return[e,i]}function tP(){return{setEnumType:VT,initPartial(t,e){if(t===void 0)return;const i=e.getType();for(const a of i.fields.byMember()){const s=a.localName,l=e,c=t;if(c[s]!=null)switch(a.kind){case"oneof":const d=c[s].case;if(d===void 0)continue;const h=a.findField(d);let f=c[s].value;h&&h.kind=="message"&&!Wi(f,h.T)?f=new h.T(f):h&&h.kind==="scalar"&&h.T===ne.BYTES&&(f=Bo(f)),l[s]={case:d,value:f};break;case"scalar":case"enum":let p=c[s];a.T===ne.BYTES&&(p=a.repeated?p.map(Bo):Bo(p)),l[s]=p;break;case"map":switch(a.V.kind){case"scalar":case"enum":if(a.V.T===ne.BYTES)for(const[k,S]of Object.entries(c[s]))l[s][k]=Bo(S);else Object.assign(l[s],c[s]);break;case"message":const y=a.V.T;for(const k of Object.keys(c[s])){let S=c[s][k];y.fieldWrapper||(S=new y(S)),l[s][k]=S}break}break;case"message":const v=a.T;if(a.repeated)l[s]=c[s].map(y=>Wi(y,v)?y:new v(y));else{const y=c[s];v.fieldWrapper?v.typeName==="google.protobuf.BytesValue"?l[s]=Bo(y):l[s]=y:l[s]=Wi(y,v)?y:new v(y)}break}}},equals(t,e,i){return e===i?!0:!e||!i?!1:t.fields.byMember().every(a=>{const s=e[a.localName],l=i[a.localName];if(a.repeated){if(s.length!==l.length)return!1;switch(a.kind){case"message":return s.every((c,d)=>a.T.equals(c,l[d]));case"scalar":return s.every((c,d)=>_a(a.T,c,l[d]));case"enum":return s.every((c,d)=>_a(ne.INT32,c,l[d]))}throw new Error("repeated cannot contain ".concat(a.kind))}switch(a.kind){case"message":let c=s,d=l;return a.T.fieldWrapper&&(c!==void 0&&!Wi(c)&&(c=a.T.fieldWrapper.wrapField(c)),d!==void 0&&!Wi(d)&&(d=a.T.fieldWrapper.wrapField(d))),a.T.equals(c,d);case"enum":return _a(ne.INT32,s,l);case"scalar":return _a(a.T,s,l);case"oneof":if(s.case!==l.case)return!1;const h=a.findField(s.case);if(h===void 0)return!0;switch(h.kind){case"message":return h.T.equals(s.value,l.value);case"enum":return _a(ne.INT32,s.value,l.value);case"scalar":return _a(h.T,s.value,l.value)}throw new Error("oneof cannot contain ".concat(h.kind));case"map":const f=Object.keys(s).concat(Object.keys(l));switch(a.V.kind){case"message":const p=a.V.T;return f.every(y=>p.equals(s[y],l[y]));case"enum":return f.every(y=>_a(ne.INT32,s[y],l[y]));case"scalar":const v=a.V.T;return f.every(y=>_a(v,s[y],l[y]))}break}})},clone(t){const e=t.getType(),i=new e,a=i;for(const s of e.fields.byMember()){const l=t[s.localName];let c;if(s.repeated)c=l.map(Oc);else if(s.kind=="map"){c=a[s.localName];for(const[d,h]of Object.entries(l))c[d]=Oc(h)}else s.kind=="oneof"?c=s.findField(l.case)?{case:l.case,value:Oc(l.value)}:{case:void 0}:c=Oc(l);a[s.localName]=c}for(const s of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(a,s.no,s.wireType,s.data);return i}}}function Oc(t){if(t===void 0)return t;if(Wi(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Bo(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function nP(t,e,i){return{syntax:t,json:GD(),bin:JD(),util:Object.assign(Object.assign({},tP()),{newFieldList:e,initFields:i}),makeMessageType(a,s,l){return OD(this,a,s,l)},makeEnum:_D,makeEnumType:qT,getEnumType:AD,makeExtension(a,s,l){return jD(this,a,s,l)}}}class iP{constructor(e,i){this._fields=e,this._normalizer=i}findJsonName(e){if(!this.jsonNames){const i={};for(const a of this.list())i[a.jsonName]=i[a.name]=a;this.jsonNames=i}return this.jsonNames[e]}find(e){if(!this.numbers){const i={};for(const a of this.list())i[a.no]=a;this.numbers=i}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,i)=>e.no-i.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let i;for(const a of this.list())a.oneof?a.oneof!==i&&(i=a.oneof,e.push(i)):e.push(a)}return this.members}}function tk(t,e){const i=nk(t);return e?i:cP(lP(i))}function aP(t){return tk(t,!1)}const rP=nk;function nk(t){let e=!1;const i=[];for(let a=0;a<t.length;a++){let s=t.charAt(a);switch(s){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i.push(s),e=!1;break;default:e&&(e=!1,s=s.toUpperCase()),i.push(s);break}}return i.join("")}const sP=new Set(["constructor","toString","toJSON","valueOf"]),oP=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),ik=t=>"".concat(t,"$"),lP=t=>oP.has(t)?ik(t):t,cP=t=>sP.has(t)?ik(t):t;class uP{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=aP(e)}addField(e){Et(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let i=0;i<this.fields.length;i++)this._lookup[this.fields[i].localName]=this.fields[i]}return this._lookup[e]}}function dP(t,e){var i,a,s,l,c,d;const h=[];let f;for(const p of typeof t=="function"?t():t){const v=p;if(v.localName=tk(p.name,p.oneof!==void 0),v.jsonName=(i=p.jsonName)!==null&&i!==void 0?i:rP(p.name),v.repeated=(a=p.repeated)!==null&&a!==void 0?a:!1,p.kind=="scalar"&&(v.L=(s=p.L)!==null&&s!==void 0?s:ja.BIGINT),v.delimited=(l=p.delimited)!==null&&l!==void 0?l:!1,v.req=(c=p.req)!==null&&c!==void 0?c:!1,v.opt=(d=p.opt)!==null&&d!==void 0?d:!1,p.packed===void 0&&(v.packed=p.kind=="enum"||p.kind=="scalar"&&p.T!=ne.BYTES&&p.T!=ne.STRING),p.oneof!==void 0){const y=typeof p.oneof=="string"?p.oneof:p.oneof.name;(!f||f.name!=y)&&(f=new uP(y)),v.oneof=f,f.addField(v)}h.push(v)}return h}const Y=nP("proto3",t=>new iP(t,e=>dP(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const i=e.localName,a=t;if(e.repeated){a[i]=[];continue}switch(e.kind){case"oneof":a[i]={case:void 0};break;case"enum":a[i]=0;break;case"map":a[i]={};break;case"scalar":a[i]=Cs(e.T,e.L);break}}});class Tn extends Hm{constructor(e){super(),this.seconds=pt.zero,this.nanos=0,Y.util.initPartial(e,this)}fromJson(e,i){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(Y.json.debug(e)));const a=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!a)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const s=Date.parse(a[1]+"-"+a[2]+"-"+a[3]+"T"+a[4]+":"+a[5]+":"+a[6]+(a[8]?a[8]:"Z"));if(Number.isNaN(s))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=pt.parse(s/1e3),this.nanos=0,a[7]&&(this.nanos=parseInt("1"+a[7]+"0".repeat(9-a[7].length))-1e9),this}toJson(e){const i=Number(this.seconds)*1e3;if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let a="Z";if(this.nanos>0){const s=(this.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?a="."+s.substring(0,3)+"Z":s.substring(6)==="000"?a="."+s.substring(0,6)+"Z":a="."+s+"Z"}return new Date(i).toISOString().replace(".000Z",a)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Tn.fromDate(new Date)}static fromDate(e){const i=e.getTime();return new Tn({seconds:pt.parse(Math.floor(i/1e3)),nanos:i%1e3*1e6})}static fromBinary(e,i){return new Tn().fromBinary(e,i)}static fromJson(e,i){return new Tn().fromJson(e,i)}static fromJsonString(e,i){return new Tn().fromJsonString(e,i)}static equals(e,i){return Y.util.equals(Tn,e,i)}}Tn.runtime=Y;Tn.typeName="google.protobuf.Timestamp";Tn.fields=Y.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const fP=Y.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Tn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:hP,repeated:!0},{no:5,name:"events",kind:"message",T:pP,repeated:!0}]),hP=Y.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:mP,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),mP=Y.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Tn},{no:3,name:"value",kind:"scalar",T:2}]),pP=Y.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:Tn},{no:7,name:"normalized_end_timestamp",kind:"message",T:Tn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),ak=Y.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),ti=Y.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Lt=Y.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),Km=Y.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Go=Y.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),tl=Y.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),ii=Y.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),ds=Y.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),gP=Y.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Xt=Y.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),wu=Y.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:su,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:vk}]),su=Y.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),vP=Y.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:Y.getEnumType(Lt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),hr=Y.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:Y.getEnumType(vs)},{no:4,name:"tracks",kind:"message",T:hs,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:vP},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:Y.getEnumType(nl)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:Y.getEnumType(ii)},{no:18,name:"kind_details",kind:"enum",T:Y.getEnumType(yP),repeated:!0}]),vs=Y.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),nl=Y.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),yP=Y.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Mn=Y.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),bP=Y.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ur,repeated:!0}]),hs=Y.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:Y.getEnumType(ti)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:Y.getEnumType(Lt)},{no:10,name:"layers",kind:"message",T:ur,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:bP,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:Y.getEnumType(Mn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:vk},{no:19,name:"audio_features",kind:"enum",T:Y.getEnumType(Xt),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:Y.getEnumType(ak)}]),ur=Y.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:Y.getEnumType(Km)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),bn=Y.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:Y.getEnumType(Be)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:sk,oneof:"value"},{no:3,name:"speaker",kind:"message",T:SP,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:ok,oneof:"value"},{no:7,name:"transcription",kind:"message",T:TP,oneof:"value"},{no:8,name:"metrics",kind:"message",T:fP,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Gh,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:lk,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:ck,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:uk,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Yh,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Qh,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Xh,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),Be=Y.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),SP=Y.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:rk,repeated:!0}]),rk=Y.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),sk=Y.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),ok=Y.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),TP=Y.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:kP,repeated:!0}]),kP=Y.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Gh=Y.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),lk=Y.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),ck=Y.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),uk=Y.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:dk,oneof:"value"}]),dk=Y.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),fk=Y.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),hk=Y.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:Y.getEnumType(mk)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),mk=Y.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),CP=Y.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:Y.getEnumType(pk)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),pk=Y.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"}]),gk=Y.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:cb},{no:2,name:"screen",kind:"message",T:cb},{no:3,name:"resume_connection",kind:"enum",T:Y.getEnumType(tl)},{no:4,name:"disabled_codecs",kind:"message",T:EP},{no:5,name:"force_relay",kind:"enum",T:Y.getEnumType(tl)}]),cb=Y.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:Y.getEnumType(tl)}]),EP=Y.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:su,repeated:!0},{no:2,name:"publish",kind:"message",T:su,repeated:!0}]),vk=Y.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Kh=Y.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),yk=Y.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:Y.getEnumType(Kh)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),bk=Y.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Yh=Y.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:Y.getEnumType(Mn)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:yk,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:bk,oneof:"content_header"}],{localName:"DataStream_Header"}),Qh=Y.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Xh=Y.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),ni=Y.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),Jh=Y.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),xP=Y.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),wP=Y.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:mr,oneof:"message"},{no:2,name:"answer",kind:"message",T:mr,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Ym,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Wh,oneof:"message"},{no:5,name:"mute",kind:"message",T:Qm,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Ru,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Sk,oneof:"message"},{no:8,name:"leave",kind:"message",T:Au,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:kk,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:wk,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Rk,oneof:"message"},{no:13,name:"simulate",kind:"message",T:yi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:Ck,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Ok,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Tk,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:NP,oneof:"message"}]),ub=Y.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:RP,oneof:"message"},{no:2,name:"answer",kind:"message",T:mr,oneof:"message"},{no:3,name:"offer",kind:"message",T:mr,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Ym,oneof:"message"},{no:5,name:"update",kind:"message",T:OP,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Xm,oneof:"message"},{no:8,name:"leave",kind:"message",T:Au,oneof:"message"},{no:9,name:"mute",kind:"message",T:Qm,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:DP,oneof:"message"},{no:11,name:"room_update",kind:"message",T:PP,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:LP,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:IP,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:BP,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:zP,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:_P,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:AP,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:VP,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:GP,oneof:"message"},{no:22,name:"request_response",kind:"message",T:KP,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:YP,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:FP,oneof:"message"}]),Zh=Y.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),Wh=Y.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:Y.getEnumType(ti)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:Y.getEnumType(Lt)},{no:9,name:"layers",kind:"message",T:ur,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Zh,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:Y.getEnumType(Mn)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:Y.getEnumType(ak)},{no:17,name:"audio_features",kind:"enum",T:Y.getEnumType(Xt),repeated:!0}]),Ym=Y.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:Y.getEnumType(ni)},{no:3,name:"final",kind:"scalar",T:8}]),Qm=Y.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),RP=Y.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:wu},{no:2,name:"participant",kind:"message",T:hr},{no:3,name:"other_participants",kind:"message",T:hr,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:Ek,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:gk},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:hk},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:su,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),AP=Y.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:Ek,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:gk},{no:3,name:"server_info",kind:"message",T:hk},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),Xm=Y.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:hs}]),_P=Y.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),mr=Y.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),OP=Y.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:hr,repeated:!0}]),Ru=Y.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:fk,repeated:!0}]),Sk=Y.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:Y.getEnumType(Km)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),Tk=Y.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:Y.getEnumType(Xt),repeated:!0}]),NP=Y.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),Au=Y.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:Y.getEnumType(ii)},{no:3,name:"action",kind:"enum",T:Y.getEnumType(ys)},{no:4,name:"regions",kind:"message",T:qP}]),ys=Y.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),kk=Y.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:ur,repeated:!0}]),Ck=Y.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),Ek=Y.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),DP=Y.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:rk,repeated:!0}]),PP=Y.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:wu}]),MP=Y.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:Y.getEnumType(Go)},{no:3,name:"score",kind:"scalar",T:2}]),LP=Y.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:MP,repeated:!0}]),UP=Y.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:Y.getEnumType(Jh)}]),IP=Y.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:UP,repeated:!0}]),Jm=Y.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:Y.getEnumType(Km)},{no:2,name:"enabled",kind:"scalar",T:8}]),jP=Y.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Jm,repeated:!0}]),BP=Y.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Jm,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:jP,repeated:!0}]),xk=Y.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),wk=Y.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:xk,repeated:!0}]),zP=Y.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),FP=Y.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:wu},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:hr},{no:4,name:"other_participants",kind:"message",T:hr,repeated:!0}]),Rk=Y.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:mr},{no:2,name:"subscription",kind:"message",T:Ru},{no:3,name:"publish_tracks",kind:"message",T:Xm,repeated:!0},{no:4,name:"data_channels",kind:"message",T:_k,repeated:!0},{no:5,name:"offer",kind:"message",T:mr},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:Ak,repeated:!0}]),Ak=Y.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),_k=Y.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:Y.getEnumType(ni)}]),yi=Y.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:Y.getEnumType(xP),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),Ok=Y.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),VP=Y.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),qP=Y.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:HP,repeated:!0}]),HP=Y.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),GP=Y.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:Y.getEnumType(gP)}]),KP=Y.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:Y.getEnumType(Zm)},{no:3,name:"message",kind:"scalar",T:9}]),Zm=Y.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),YP=Y.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function QP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gc={exports:{}},XP=Gc.exports,db;function JP(){return db||(db=1,function(t){(function(e,i){t.exports?t.exports=i():e.log=i()})(XP,function(){var e=function(){},i="undefined",a=typeof window!==i&&typeof window.navigator!==i&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],l={},c=null;function d(T,w){var R=T[w];if(typeof R.bind=="function")return R.bind(T);try{return Function.prototype.bind.call(R,T)}catch{return function(){return Function.prototype.apply.apply(R,[T,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(T){return T==="debug"&&(T="log"),typeof console===i?!1:T==="trace"&&a?h:console[T]!==void 0?d(console,T):console.log!==void 0?d(console,"log"):e}function p(){for(var T=this.getLevel(),w=0;w<s.length;w++){var R=s[w];this[R]=w<T?e:this.methodFactory(R,T,this.name)}if(this.log=this.debug,typeof console===i&&T<this.levels.SILENT)return"No console available for logging"}function v(T){return function(){typeof console!==i&&(p.call(this),this[T].apply(this,arguments))}}function y(T,w,R){return f(T)||v.apply(this,arguments)}function k(T,w){var R=this,L,N,A,_="loglevel";typeof T=="string"?_+=":"+T:typeof T=="symbol"&&(_=void 0);function B(ae){var ve=(s[ae]||"silent").toUpperCase();if(!(typeof window===i||!_)){try{window.localStorage[_]=ve;return}catch{}try{window.document.cookie=encodeURIComponent(_)+"="+ve+";"}catch{}}}function I(){var ae;if(!(typeof window===i||!_)){try{ae=window.localStorage[_]}catch{}if(typeof ae===i)try{var ve=window.document.cookie,Fe=encodeURIComponent(_),Xe=ve.indexOf(Fe+"=");Xe!==-1&&(ae=/^([^;]+)/.exec(ve.slice(Xe+Fe.length+1))[1])}catch{}return R.levels[ae]===void 0&&(ae=void 0),ae}}function F(){if(!(typeof window===i||!_)){try{window.localStorage.removeItem(_)}catch{}try{window.document.cookie=encodeURIComponent(_)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function G(ae){var ve=ae;if(typeof ve=="string"&&R.levels[ve.toUpperCase()]!==void 0&&(ve=R.levels[ve.toUpperCase()]),typeof ve=="number"&&ve>=0&&ve<=R.levels.SILENT)return ve;throw new TypeError("log.setLevel() called with invalid level: "+ae)}R.name=T,R.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},R.methodFactory=w||y,R.getLevel=function(){return A??N??L},R.setLevel=function(ae,ve){return A=G(ae),ve!==!1&&B(A),p.call(R)},R.setDefaultLevel=function(ae){N=G(ae),I()||R.setLevel(ae,!1)},R.resetLevel=function(){A=null,F(),p.call(R)},R.enableAll=function(ae){R.setLevel(R.levels.TRACE,ae)},R.disableAll=function(ae){R.setLevel(R.levels.SILENT,ae)},R.rebuild=function(){if(c!==R&&(L=G(c.getLevel())),p.call(R),c===R)for(var ae in l)l[ae].rebuild()},L=G(c?c.getLevel():"WARN");var $=I();$!=null&&(A=G($)),p.call(R)}c=new k,c.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var R=l[w];return R||(R=l[w]=new k(w,c.methodFactory)),R};var S=typeof window!==i?window.log:void 0;return c.noConflict=function(){return typeof window!==i&&window.log===c&&(window.log=S),c},c.getLoggers=function(){return l},c.default=c,c})}(Gc)),Gc.exports}var _u=JP(),$h;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})($h||($h={}));var ri;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(ri||(ri={}));let Ke=_u.getLogger("livekit");Object.values(ri).map(t=>_u.getLogger(t));Ke.setDefaultLevel($h.info);function ia(t){const e=_u.getLogger(t);return e.setDefaultLevel(Ke.getLevel()),e}const ZP=_u.getLogger("lk-e2ee"),zo=7e3,WP=[0,300,2*2*300,3*3*300,4*4*300,zo,zo,zo,zo,zo];class $P{constructor(e){this._retryDelays=e!==void 0?[...e]:WP}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const i=this._retryDelays[e.retryCount];return e.retryCount<=1?i:i+Math.random()*1e3}}function eM(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)e.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(i[a[s]]=t[a[s]]);return i}function D(t,e,i,a){function s(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(p){try{f(a.next(p))}catch(v){c(v)}}function h(p){try{f(a.throw(p))}catch(v){c(v)}}function f(p){p.done?l(p.value):s(p.value).then(d,h)}f((a=a.apply(t,e||[])).next())})}function fb(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],a=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $i(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof fb=="function"?fb(t):t[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(l){i[l]=t[l]&&function(c){return new Promise(function(d,h){c=t[l](c),s(d,h,c.done,c.value)})}}function s(l,c,d,h){Promise.resolve(h).then(function(f){l({value:f,done:d})},c)}}var Nc={exports:{}},hb;function tM(){if(hb)return Nc.exports;hb=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(_,B,I){return Function.prototype.apply.call(_,B,I)},i;t&&typeof t.ownKeys=="function"?i=t.ownKeys:Object.getOwnPropertySymbols?i=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:i=function(_){return Object.getOwnPropertyNames(_)};function a(A){console&&console.warn&&console.warn(A)}var s=Number.isNaN||function(_){return _!==_};function l(){l.init.call(this)}Nc.exports=l,Nc.exports.once=R,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function d(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(A){if(typeof A!="number"||A<0||s(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");c=A}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||s(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function h(A){return A._maxListeners===void 0?l.defaultMaxListeners:A._maxListeners}l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(_){for(var B=[],I=1;I<arguments.length;I++)B.push(arguments[I]);var F=_==="error",G=this._events;if(G!==void 0)F=F&&G.error===void 0;else if(!F)return!1;if(F){var $;if(B.length>0&&($=B[0]),$ instanceof Error)throw $;var ae=new Error("Unhandled error."+($?" ("+$.message+")":""));throw ae.context=$,ae}var ve=G[_];if(ve===void 0)return!1;if(typeof ve=="function")e(ve,this,B);else for(var Fe=ve.length,Xe=S(ve,Fe),I=0;I<Fe;++I)e(Xe[I],this,B);return!0};function f(A,_,B,I){var F,G,$;if(d(B),G=A._events,G===void 0?(G=A._events=Object.create(null),A._eventsCount=0):(G.newListener!==void 0&&(A.emit("newListener",_,B.listener?B.listener:B),G=A._events),$=G[_]),$===void 0)$=G[_]=B,++A._eventsCount;else if(typeof $=="function"?$=G[_]=I?[B,$]:[$,B]:I?$.unshift(B):$.push(B),F=h(A),F>0&&$.length>F&&!$.warned){$.warned=!0;var ae=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");ae.name="MaxListenersExceededWarning",ae.emitter=A,ae.type=_,ae.count=$.length,a(ae)}return A}l.prototype.addListener=function(_,B){return f(this,_,B,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(_,B){return f(this,_,B,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(A,_,B){var I={fired:!1,wrapFn:void 0,target:A,type:_,listener:B},F=p.bind(I);return F.listener=B,I.wrapFn=F,F}l.prototype.once=function(_,B){return d(B),this.on(_,v(this,_,B)),this},l.prototype.prependOnceListener=function(_,B){return d(B),this.prependListener(_,v(this,_,B)),this},l.prototype.removeListener=function(_,B){var I,F,G,$,ae;if(d(B),F=this._events,F===void 0)return this;if(I=F[_],I===void 0)return this;if(I===B||I.listener===B)--this._eventsCount===0?this._events=Object.create(null):(delete F[_],F.removeListener&&this.emit("removeListener",_,I.listener||B));else if(typeof I!="function"){for(G=-1,$=I.length-1;$>=0;$--)if(I[$]===B||I[$].listener===B){ae=I[$].listener,G=$;break}if(G<0)return this;G===0?I.shift():T(I,G),I.length===1&&(F[_]=I[0]),F.removeListener!==void 0&&this.emit("removeListener",_,ae||B)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(_){var B,I,F;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[_]),this;if(arguments.length===0){var G=Object.keys(I),$;for(F=0;F<G.length;++F)$=G[F],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=I[_],typeof B=="function")this.removeListener(_,B);else if(B!==void 0)for(F=B.length-1;F>=0;F--)this.removeListener(_,B[F]);return this};function y(A,_,B){var I=A._events;if(I===void 0)return[];var F=I[_];return F===void 0?[]:typeof F=="function"?B?[F.listener||F]:[F]:B?w(F):S(F,F.length)}l.prototype.listeners=function(_){return y(this,_,!0)},l.prototype.rawListeners=function(_){return y(this,_,!1)},l.listenerCount=function(A,_){return typeof A.listenerCount=="function"?A.listenerCount(_):k.call(A,_)},l.prototype.listenerCount=k;function k(A){var _=this._events;if(_!==void 0){var B=_[A];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function S(A,_){for(var B=new Array(_),I=0;I<_;++I)B[I]=A[I];return B}function T(A,_){for(;_+1<A.length;_++)A[_]=A[_+1];A.pop()}function w(A){for(var _=new Array(A.length),B=0;B<_.length;++B)_[B]=A[B].listener||A[B];return _}function R(A,_){return new Promise(function(B,I){function F($){A.removeListener(_,G),I($)}function G(){typeof A.removeListener=="function"&&A.removeListener("error",F),B([].slice.call(arguments))}N(A,_,G,{once:!0}),_!=="error"&&L(A,F,{once:!0})})}function L(A,_,B){typeof A.on=="function"&&N(A,"error",_,B)}function N(A,_,B,I){if(typeof A.on=="function")I.once?A.once(_,B):A.on(_,B);else if(typeof A.addEventListener=="function")A.addEventListener(_,function F(G){I.once&&A.removeEventListener(_,F),B(G)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Nc.exports}var Ai=tM();let Nk=!0,Dk=!0;function Ko(t,e,i){const a=t.match(e);return a&&a.length>=i&&parseFloat(a[i],10)}function gr(t,e,i){if(!t.RTCPeerConnection)return;const a=t.RTCPeerConnection.prototype,s=a.addEventListener;a.addEventListener=function(c,d){if(c!==e)return s.apply(this,arguments);const h=f=>{const p=i(f);p&&(d.handleEvent?d.handleEvent(p):d(p))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(d,h),s.apply(this,[c,h])};const l=a.removeEventListener;a.removeEventListener=function(c,d){if(c!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(d))return l.apply(this,arguments);const h=this._eventMap[e].get(d);return this._eventMap[e].delete(d),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[c,h])},Object.defineProperty(a,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function nM(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Nk=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function iM(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Dk=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Pk(){if(typeof window=="object"){if(Nk)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Wm(t,e){Dk&&console.warn(t+" is deprecated, please use "+e+" instead.")}function aM(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:i}=t;if(i.userAgentData&&i.userAgentData.brands){const a=i.userAgentData.brands.find(s=>s.brand==="Chromium");if(a)return{browser:"chrome",version:parseInt(a.version,10)}}if(i.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Ko(i.userAgent,/Firefox\/(\d+)\./,1));else if(i.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Ko(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Ko(i.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Ko(i.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function mb(t){return Object.prototype.toString.call(t)==="[object Object]"}function Mk(t){return mb(t)?Object.keys(t).reduce(function(e,i){const a=mb(t[i]),s=a?Mk(t[i]):t[i],l=a&&!Object.keys(s).length;return s===void 0||l?e:Object.assign(e,{[i]:s})},{}):t}function em(t,e,i){!e||i.has(e.id)||(i.set(e.id,e),Object.keys(e).forEach(a=>{a.endsWith("Id")?em(t,t.get(e[a]),i):a.endsWith("Ids")&&e[a].forEach(s=>{em(t,t.get(s),i)})}))}function pb(t,e,i){const a=i?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const l=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&l.push(c)}),l.forEach(c=>{t.forEach(d=>{d.type===a&&d.trackId===c.id&&em(t,d,s)})}),s}const gb=Pk;function Lk(t,e){const i=t&&t.navigator;if(!i.mediaDevices)return;const a=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const h={};return Object.keys(d).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const p=typeof d[f]=="object"?d[f]:{ideal:d[f]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const v=function(y,k){return y?y+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(p.ideal!==void 0){h.optional=h.optional||[];let y={};typeof p.ideal=="number"?(y[v("min",f)]=p.ideal,h.optional.push(y),y={},y[v("max",f)]=p.ideal,h.optional.push(y)):(y[v("",f)]=p.ideal,h.optional.push(y))}p.exact!==void 0&&typeof p.exact!="number"?(h.mandatory=h.mandatory||{},h.mandatory[v("",f)]=p.exact):["min","max"].forEach(y=>{p[y]!==void 0&&(h.mandatory=h.mandatory||{},h.mandatory[v(y,f)]=p[y])})}),d.advanced&&(h.optional=(h.optional||[]).concat(d.advanced)),h},s=function(d,h){if(e.version>=61)return h(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const f=function(p,v,y){v in p&&!(y in p)&&(p[y]=p[v],delete p[v])};d=JSON.parse(JSON.stringify(d)),f(d.audio,"autoGainControl","googAutoGainControl"),f(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=a(d.audio)}if(d&&typeof d.video=="object"){let f=d.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const p=e.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete d.video.facingMode;let v;if(f.exact==="environment"||f.ideal==="environment"?v=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(v=["front"]),v)return i.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let k=y.find(S=>v.some(T=>S.label.toLowerCase().includes(T)));return!k&&y.length&&v.includes("back")&&(k=y[y.length-1]),k&&(d.video.deviceId=f.exact?{exact:k.deviceId}:{ideal:k.deviceId}),d.video=a(d.video),gb("chrome: "+JSON.stringify(d)),h(d)})}d.video=a(d.video)}return gb("chrome: "+JSON.stringify(d)),h(d)},l=function(d){return e.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(d,h,f){s(d,p=>{i.webkitGetUserMedia(p,h,v=>{f&&f(l(v))})})};if(i.getUserMedia=c.bind(i),i.mediaDevices.getUserMedia){const d=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(h){return s(h,f=>d(f).then(p=>{if(f.audio&&!p.getAudioTracks().length||f.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(v=>{v.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(l(p))))}}}function Uk(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Ik(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=a=>{a.stream.addEventListener("addtrack",s=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(d=>d.track&&d.track.id===s.track.id):l={track:s.track};const c=new Event("track");c.track=s.track,c.receiver=l,c.transceiver={receiver:l},c.streams=[a.stream],this.dispatchEvent(c)}),a.stream.getTracks().forEach(s=>{let l;t.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(d=>d.track&&d.track.id===s.id):l={track:s};const c=new Event("track");c.track=s,c.receiver=l,c.transceiver={receiver:l},c.streams=[a.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else gr(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function jk(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=s.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(d,h){let f=s.apply(this,arguments);return f||(f=e(this,d),this._senders.push(f)),f};const l=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(d){l.apply(this,arguments);const h=this._senders.indexOf(d);h!==-1&&this._senders.splice(h,1)}}const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],i.apply(this,[l]),l.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],a.apply(this,[l]),l.getTracks().forEach(c=>{const d=this._senders.find(h=>h.track===c);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(s=>s._pc=this),a},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Bk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const i=t.RTCPeerConnection.prototype.getSenders;i&&(t.RTCPeerConnection.prototype.getSenders=function(){const l=i.apply(this,[]);return l.forEach(c=>c._pc=this),l});const a=t.RTCPeerConnection.prototype.addTrack;a&&(t.RTCPeerConnection.prototype.addTrack=function(){const l=a.apply(this,arguments);return l._pc=this,l}),t.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(c=>pb(c,l.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=i.apply(this,[]);return s.forEach(l=>l._pc=this),s}),gr(t,"track",a=>(a.receiver._pc=a.srcElement,a)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>pb(l,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const a=arguments[0];let s,l,c;return this.getSenders().forEach(d=>{d.track===a&&(s?c=!0:s=d)}),this.getReceivers().forEach(d=>(d.track===a&&(l?c=!0:l=d),d.track===a)),c||s&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function zk(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,d){if(!d)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const h=e.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(h)===-1&&this._shimmedLocalStreams[d.id].push(h):this._shimmedLocalStreams[d.id]=[d,h],h};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(f=>{if(this.getSenders().find(v=>v.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();i.apply(this,arguments);const h=this.getSenders().filter(f=>d.indexOf(f)===-1);this._shimmedLocalStreams[c.id]=[c].concat(h)};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],a.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const h=this._shimmedLocalStreams[d].indexOf(c);h!==-1&&this._shimmedLocalStreams[d].splice(h,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),s.apply(this,arguments)}}function Fk(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return zk(t);const i=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const p=i.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(v=>this._reverseStreams[v.id])};const a=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(v=>{if(this.getSenders().find(k=>k.track===v))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const v=new t.MediaStream(p.getTracks());this._streams[p.id]=v,this._reverseStreams[v.id]=p,p=v}a.apply(this,[p])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},t.RTCPeerConnection.prototype.addTrack=function(p,v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(T=>T===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(T=>T.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[v.id];if(S)S.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const T=new t.MediaStream([p]);this._streams[v.id]=T,this._reverseStreams[T.id]=v,this.addStream(T)}return this.getSenders().find(T=>T.track===p)};function l(f,p){let v=p.sdp;return Object.keys(f._reverseStreams||[]).forEach(y=>{const k=f._reverseStreams[y],S=f._streams[k.id];v=v.replace(new RegExp(S.id,"g"),k.id)}),new RTCSessionDescription({type:p.type,sdp:v})}function c(f,p){let v=p.sdp;return Object.keys(f._reverseStreams||[]).forEach(y=>{const k=f._reverseStreams[y],S=f._streams[k.id];v=v.replace(new RegExp(k.id,"g"),S.id)}),new RTCSessionDescription({type:p.type,sdp:v})}["createOffer","createAnswer"].forEach(function(f){const p=t.RTCPeerConnection.prototype[f],v={[f](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[S=>{const T=l(this,S);y[0].apply(null,[T])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):p.apply(this,arguments).then(S=>l(this,S))}};t.RTCPeerConnection.prototype[f]=v[f]});const d=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=c(this,arguments[0]),d.apply(this,arguments))};const h=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const f=h.get.apply(this);return f.type===""?f:l(this,f)}}),t.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find(T=>p.track===T)&&(y=this._streams[k])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function tm(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]})}function Vk(t,e){gr(t,"negotiationneeded",i=>{const a=i.target;if(!((e.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")&&a.signalingState!=="stable"))return i})}var vb=Object.freeze({__proto__:null,fixNegotiationNeeded:Vk,shimAddTrackRemoveTrack:Fk,shimAddTrackRemoveTrackWithNative:zk,shimGetSendersWithDtmf:jk,shimGetUserMedia:Lk,shimMediaStream:Uk,shimOnTrack:Ik,shimPeerConnection:tm,shimSenderReceiverGetStats:Bk});function qk(t,e){const i=t&&t.navigator,a=t&&t.MediaStreamTrack;if(i.getUserMedia=function(s,l,c){Wm("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(s).then(l,c)},!(e.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const s=function(c,d,h){d in c&&!(h in c)&&(c[h]=c[d],delete c[d])},l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),s(c.audio,"autoGainControl","mozAutoGainControl"),s(c.audio,"noiseSuppression","mozNoiseSuppression")),l(c)},a&&a.prototype.getSettings){const c=a.prototype.getSettings;a.prototype.getSettings=function(){const d=c.apply(this,arguments);return s(d,"mozAutoGainControl","autoGainControl"),s(d,"mozNoiseSuppression","noiseSuppression"),d}}if(a&&a.prototype.applyConstraints){const c=a.prototype.applyConstraints;a.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),s(d,"autoGainControl","mozAutoGainControl"),s(d,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[d])}}}}function rM(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(a){if(!(a&&a.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return a.video===!0?a.video={mediaSource:e}:a.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(a)})}function Hk(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function nm(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const l=t.RTCPeerConnection.prototype[s],c={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=c[s]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[l,c,d]=arguments;return a.apply(this,[l||null]).then(h=>{if(e.version<53&&!c)try{h.forEach(f=>{f.type=i[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;h.forEach((p,v)=>{h.set(v,Object.assign({},p,{type:i[p.type]||p.type}))})}return h}).then(c,d)}}function Gk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(l=>l._pc=this),s});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Kk(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=e.apply(this,[]);return a.forEach(s=>s._pc=this),a}),gr(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Yk(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(i){Wm("removeStream","removeTrack"),this.getSenders().forEach(a=>{a.track&&i.getTracks().includes(a.track)&&this.removeTrack(a)})})}function Qk(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Xk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let a=arguments[1]&&arguments[1].sendEncodings;a===void 0&&(a=[]),a=[...a];const s=a.length>0;s&&a.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(s){const{sender:c}=l,d=c.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=a,c.sendEncodings=a,this.setParametersPromises.push(c.setParameters(d).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return l})}function Jk(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const a=e.apply(this,arguments);return"encodings"in a||(a.encodings=[].concat(this.sendEncodings||[{}])),a})}function Zk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Wk(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var yb=Object.freeze({__proto__:null,shimAddTransceiver:Xk,shimCreateAnswer:Wk,shimCreateOffer:Zk,shimGetDisplayMedia:rM,shimGetParameters:Jk,shimGetUserMedia:qk,shimOnTrack:Hk,shimPeerConnection:nm,shimRTCDataChannel:Qk,shimReceiverGetStats:Kk,shimRemoveStream:Yk,shimSenderGetStats:Gk});function $k(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(a){this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(s=>e.call(this,s,a)),a.getVideoTracks().forEach(s=>e.call(this,s,a))},t.RTCPeerConnection.prototype.addTrack=function(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];return l&&l.forEach(d=>{this._localStreams?this._localStreams.includes(d)||this._localStreams.push(d):this._localStreams=[d]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const a=this._localStreams.indexOf(i);if(a===-1)return;this._localStreams.splice(a,1);const s=i.getTracks();this.getSenders().forEach(l=>{s.includes(l.track)&&this.removeTrack(l)})})}}function eC(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,this.dispatchEvent(l)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(l=>{if(a._remoteStreams||(a._remoteStreams=[]),a._remoteStreams.indexOf(l)>=0)return;a._remoteStreams.push(l);const c=new Event("addstream");c.stream=l,a.dispatchEvent(c)})}),e.apply(a,arguments)}}}function tC(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,i=e.createOffer,a=e.createAnswer,s=e.setLocalDescription,l=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(f,p){const v=arguments.length>=2?arguments[2]:arguments[0],y=i.apply(this,[v]);return p?(y.then(f,p),Promise.resolve()):y},e.createAnswer=function(f,p){const v=arguments.length>=2?arguments[2]:arguments[0],y=a.apply(this,[v]);return p?(y.then(f,p),Promise.resolve()):y};let d=function(h,f,p){const v=s.apply(this,[h]);return p?(v.then(f,p),Promise.resolve()):v};e.setLocalDescription=d,d=function(h,f,p){const v=l.apply(this,[h]);return p?(v.then(f,p),Promise.resolve()):v},e.setRemoteDescription=d,d=function(h,f,p){const v=c.apply(this,[h]);return p?(v.then(f,p),Promise.resolve()):v},e.addIceCandidate=d}function nC(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const i=e.mediaDevices,a=i.getUserMedia.bind(i);e.mediaDevices.getUserMedia=s=>a(iC(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(a,s,l){e.mediaDevices.getUserMedia(a).then(s,l)}).bind(e))}function iC(t){return t&&t.video!==void 0?Object.assign({},t,{video:Mk(t.video)}):t}function aC(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(a,s){if(a&&a.iceServers){const l=[];for(let c=0;c<a.iceServers.length;c++){let d=a.iceServers[c];d.urls===void 0&&d.url?(Wm("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,l.push(d)):l.push(a.iceServers[c])}a.iceServers=l}return new e(a,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function rC(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function sC(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(a){if(a){typeof a.offerToReceiveAudio<"u"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);const s=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");a.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):a.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof a.offerToReceiveVideo<"u"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);const l=this.getTransceivers().find(c=>c.receiver.track.kind==="video");a.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):a.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function oC(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var bb=Object.freeze({__proto__:null,shimAudioContext:oC,shimCallbacksAPI:tC,shimConstraints:iC,shimCreateOfferLegacy:sC,shimGetUserMedia:nC,shimLocalStreamsAPI:$k,shimRTCIceServerUrls:aC,shimRemoteStreamsAPI:eC,shimTrackEventTransceiver:rC}),fh={exports:{}},Sb;function sM(){return Sb||(Sb=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(i){return i.trim().split(`
`).map(a=>a.trim())},e.splitSections=function(i){return i.split(`
m=`).map((s,l)=>(l>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(i){const a=e.splitSections(i);return a&&a[0]},e.getMediaSections=function(i){const a=e.splitSections(i);return a.shift(),a},e.matchPrefix=function(i,a){return e.splitLines(i).filter(s=>s.indexOf(a)===0)},e.parseCandidate=function(i){let a;i.indexOf("a=candidate:")===0?a=i.substring(12).split(" "):a=i.substring(10).split(" ");const s={foundation:a[0],component:{1:"rtp",2:"rtcp"}[a[1]]||a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]};for(let l=8;l<a.length;l+=2)switch(a[l]){case"raddr":s.relatedAddress=a[l+1];break;case"rport":s.relatedPort=parseInt(a[l+1],10);break;case"tcptype":s.tcpType=a[l+1];break;case"ufrag":s.ufrag=a[l+1],s.usernameFragment=a[l+1];break;default:s[a[l]]===void 0&&(s[a[l]]=a[l+1]);break}return s},e.writeCandidate=function(i){const a=[];a.push(i.foundation);const s=i.component;s==="rtp"?a.push(1):s==="rtcp"?a.push(2):a.push(s),a.push(i.protocol.toUpperCase()),a.push(i.priority),a.push(i.address||i.ip),a.push(i.port);const l=i.type;return a.push("typ"),a.push(l),l!=="host"&&i.relatedAddress&&i.relatedPort&&(a.push("raddr"),a.push(i.relatedAddress),a.push("rport"),a.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(a.push("ufrag"),a.push(i.usernameFragment||i.ufrag)),"candidate:"+a.join(" ")},e.parseIceOptions=function(i){return i.substring(14).split(" ")},e.parseRtpMap=function(i){let a=i.substring(9).split(" ");const s={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),s.name=a[0],s.clockRate=parseInt(a[1],10),s.channels=a.length===3?parseInt(a[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(i){let a=i.payloadType;i.preferredPayloadType!==void 0&&(a=i.preferredPayloadType);const s=i.channels||i.numChannels||1;return"a=rtpmap:"+a+" "+i.name+"/"+i.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(i){const a=i.substring(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1],attributes:a.slice(2).join(" ")}},e.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+(i.attributes?" "+i.attributes:"")+`\r
`},e.parseFmtp=function(i){const a={};let s;const l=i.substring(i.indexOf(" ")+1).split(";");for(let c=0;c<l.length;c++)s=l[c].trim().split("="),a[s[0].trim()]=s[1];return a},e.writeFmtp=function(i){let a="",s=i.payloadType;if(i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){const l=[];Object.keys(i.parameters).forEach(c=>{i.parameters[c]!==void 0?l.push(c+"="+i.parameters[c]):l.push(c)}),a+="a=fmtp:"+s+" "+l.join(";")+`\r
`}return a},e.parseRtcpFb=function(i){const a=i.substring(i.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},e.writeRtcpFb=function(i){let a="",s=i.payloadType;return i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(l=>{a+="a=rtcp-fb:"+s+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),a},e.parseSsrcMedia=function(i){const a=i.indexOf(" "),s={ssrc:parseInt(i.substring(7,a),10)},l=i.indexOf(":",a);return l>-1?(s.attribute=i.substring(a+1,l),s.value=i.substring(l+1)):s.attribute=i.substring(a+1),s},e.parseSsrcGroup=function(i){const a=i.substring(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(s=>parseInt(s,10))}},e.getMid=function(i){const a=e.matchPrefix(i,"a=mid:")[0];if(a)return a.substring(6)},e.parseFingerprint=function(i){const a=i.substring(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1].toUpperCase()}},e.getDtlsParameters=function(i,a){return{role:"auto",fingerprints:e.matchPrefix(i+a,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(i,a){let s="a=setup:"+a+`\r
`;return i.fingerprints.forEach(l=>{s+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),s},e.parseCryptoLine=function(i){const a=i.substring(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},e.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?e.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;const a=i.substring(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},e.getCryptoParameters=function(i,a){return e.matchPrefix(i+a,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(i,a){const s=e.matchPrefix(i+a,"a=ice-ufrag:")[0],l=e.matchPrefix(i+a,"a=ice-pwd:")[0];return s&&l?{usernameFragment:s.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(i){let a="a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`;return i.iceLite&&(a+=`a=ice-lite\r
`),a},e.parseRtpParameters=function(i){const a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(i)[0].split(" ");a.profile=l[2];for(let d=3;d<l.length;d++){const h=l[d],f=e.matchPrefix(i,"a=rtpmap:"+h+" ")[0];if(f){const p=e.parseRtpMap(f),v=e.matchPrefix(i,"a=fmtp:"+h+" ");switch(p.parameters=v.length?e.parseFmtp(v[0]):{},p.rtcpFeedback=e.matchPrefix(i,"a=rtcp-fb:"+h+" ").map(e.parseRtcpFb),a.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(p.name.toUpperCase());break}}}e.matchPrefix(i,"a=extmap:").forEach(d=>{a.headerExtensions.push(e.parseExtmap(d))});const c=e.matchPrefix(i,"a=rtcp-fb:* ").map(e.parseRtcpFb);return a.codecs.forEach(d=>{c.forEach(h=>{d.rtcpFeedback.find(p=>p.type===h.type&&p.parameter===h.parameter)||d.rtcpFeedback.push(h)})}),a},e.writeRtpDescription=function(i,a){let s="";s+="m="+i+" ",s+=a.codecs.length>0?"9":"0",s+=" "+(a.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=a.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(c=>{s+=e.writeRtpMap(c),s+=e.writeFmtp(c),s+=e.writeRtcpFb(c)});let l=0;return a.codecs.forEach(c=>{c.maxptime>l&&(l=c.maxptime)}),l>0&&(s+="a=maxptime:"+l+`\r
`),a.headerExtensions&&a.headerExtensions.forEach(c=>{s+=e.writeExtmap(c)}),s},e.parseRtpEncodingParameters=function(i){const a=[],s=e.parseRtpParameters(i),l=s.fecMechanisms.indexOf("RED")!==-1,c=s.fecMechanisms.indexOf("ULPFEC")!==-1,d=e.matchPrefix(i,"a=ssrc:").map(y=>e.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),h=d.length>0&&d[0].ssrc;let f;const p=e.matchPrefix(i,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));p.length>0&&p[0].length>1&&p[0][0]===h&&(f=p[0][1]),s.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let k={ssrc:h,codecPayloadType:parseInt(y.parameters.apt,10)};h&&f&&(k.rtx={ssrc:f}),a.push(k),l&&(k=JSON.parse(JSON.stringify(k)),k.fec={ssrc:h,mechanism:c?"red+ulpfec":"red"},a.push(k))}}),a.length===0&&h&&a.push({ssrc:h});let v=e.matchPrefix(i,"b=");return v.length&&(v[0].indexOf("b=TIAS:")===0?v=parseInt(v[0].substring(7),10):v[0].indexOf("b=AS:")===0?v=parseInt(v[0].substring(5),10)*1e3*.95-50*40*8:v=void 0,a.forEach(y=>{y.maxBitrate=v})),a},e.parseRtcpParameters=function(i){const a={},s=e.matchPrefix(i,"a=ssrc:").map(d=>e.parseSsrcMedia(d)).filter(d=>d.attribute==="cname")[0];s&&(a.cname=s.value,a.ssrc=s.ssrc);const l=e.matchPrefix(i,"a=rtcp-rsize");a.reducedSize=l.length>0,a.compound=l.length===0;const c=e.matchPrefix(i,"a=rtcp-mux");return a.mux=c.length>0,a},e.writeRtcpParameters=function(i){let a="";return i.reducedSize&&(a+=`a=rtcp-rsize\r
`),i.mux&&(a+=`a=rtcp-mux\r
`),i.ssrc!==void 0&&i.cname&&(a+="a=ssrc:"+i.ssrc+" cname:"+i.cname+`\r
`),a},e.parseMsid=function(i){let a;const s=e.matchPrefix(i,"a=msid:");if(s.length===1)return a=s[0].substring(7).split(" "),{stream:a[0],track:a[1]};const l=e.matchPrefix(i,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(l.length>0)return a=l[0].value.split(" "),{stream:a[0],track:a[1]}},e.parseSctpDescription=function(i){const a=e.parseMLine(i),s=e.matchPrefix(i,"a=max-message-size:");let l;s.length>0&&(l=parseInt(s[0].substring(19),10)),isNaN(l)&&(l=65536);const c=e.matchPrefix(i,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:a.fmt,maxMessageSize:l};const d=e.matchPrefix(i,"a=sctpmap:");if(d.length>0){const h=d[0].substring(10).split(" ");return{port:parseInt(h[0],10),protocol:h[1],maxMessageSize:l}}},e.writeSctpDescription=function(i,a){let s=[];return i.protocol!=="DTLS/SCTP"?s=["m="+i.kind+" 9 "+i.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:s=["m="+i.kind+" 9 "+i.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&s.push("a=max-message-size:"+a.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(i,a,s){let l;const c=a!==void 0?a:2;return i?l=i:l=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+l+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(i,a){const s=e.splitLines(i);for(let l=0;l<s.length;l++)switch(s[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[l].substring(2)}return a?e.getDirection(a):"sendrecv"},e.getKind=function(i){return e.splitLines(i)[0].split(" ")[0].substring(2)},e.isRejected=function(i){return i.split(" ",2)[1]==="0"},e.parseMLine=function(i){const s=e.splitLines(i)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(i){const s=e.matchPrefix(i,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;const a=e.splitLines(i);for(let s=0;s<a.length;s++)if(a[s].length<2||a[s].charAt(1)!=="=")return!1;return!0},t.exports=e}(fh)),fh.exports}var lC=sM(),bs=QP(lC),oM=SD({__proto__:null,default:bs},[lC]);function Kc(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(a){if(typeof a=="object"&&a.candidate&&a.candidate.indexOf("a=")===0&&(a=JSON.parse(JSON.stringify(a)),a.candidate=a.candidate.substring(2)),a.candidate&&a.candidate.length){const s=new e(a),l=bs.parseCandidate(a.candidate);for(const c in l)c in s||Object.defineProperty(s,c,{value:l[c]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(a)},t.RTCIceCandidate.prototype=e.prototype,gr(t,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new t.RTCIceCandidate(i.candidate),writable:"false"}),i))}function im(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||gr(t,"icecandidate",e=>{if(e.candidate){const i=bs.parseCandidate(e.candidate.candidate);i.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return e})}function Yc(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const i=function(d){if(!d||!d.sdp)return!1;const h=bs.splitSections(d.sdp);return h.shift(),h.some(f=>{const p=bs.parseMLine(f);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},a=function(d){const h=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(h===null||h.length<2)return-1;const f=parseInt(h[1],10);return f!==f?-1:f},s=function(d){let h=65536;return e.browser==="firefox"&&(e.version<57?d===-1?h=16384:h=2147483637:e.version<60?h=e.version===57?65535:65536:h=2147483637),h},l=function(d,h){let f=65536;e.browser==="firefox"&&e.version===57&&(f=65535);const p=bs.matchPrefix(d.sdp,"a=max-message-size:");return p.length>0?f=parseInt(p[0].substring(19),10):e.browser==="firefox"&&h!==-1&&(f=2147483637),f},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:h}=this.getConfiguration();h==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const h=a(arguments[0]),f=s(h),p=l(arguments[0],h);let v;f===0&&p===0?v=Number.POSITIVE_INFINITY:f===0||p===0?v=Math.max(f,p):v=Math.min(f,p);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return v}}),this._sctp=y}return c.apply(this,arguments)}}function Qc(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(a,s){const l=a.send;a.send=function(){const d=arguments[0],h=d.length||d.size||d.byteLength;if(a.readyState==="open"&&s.sctp&&h>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return l.apply(a,arguments)}}const i=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=i.apply(this,arguments);return e(s,this),s},gr(t,"datachannel",a=>(e(a.channel,a.target),a))}function am(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const a=e[i];e[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const l=s.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const c=new Event("connectionstatechange",s);l.dispatchEvent(c)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function rm(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=s.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:l}):s.sdp=l}return i.apply(this,arguments)}}function Xc(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const i=t.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Jc(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const i=t.RTCPeerConnection.prototype.setLocalDescription;!i||i.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return i.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?i.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>i.apply(this,[c]))})}var lM=Object.freeze({__proto__:null,removeExtmapAllowMixed:rm,shimAddIceCandidateNullOrEmpty:Xc,shimConnectionState:am,shimMaxMessageSize:Yc,shimParameterlessSetLocalDescription:Jc,shimRTCIceCandidate:Kc,shimRTCIceCandidateRelayProtocol:im,shimSendThrowTypeError:Qc});function cM(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const i=Pk,a=aM(t),s={browserDetails:a,commonShim:lM,extractVersion:Ko,disableLog:nM,disableWarnings:iM,sdp:oM};switch(a.browser){case"chrome":if(!vb||!tm||!e.shimChrome)return i("Chrome shim is not included in this adapter release."),s;if(a.version===null)return i("Chrome shim can not determine version, not shimming."),s;i("adapter.js shimming chrome."),s.browserShim=vb,Xc(t,a),Jc(t),Lk(t,a),Uk(t),tm(t,a),Ik(t),Fk(t,a),jk(t),Bk(t),Vk(t,a),Kc(t),im(t),am(t),Yc(t,a),Qc(t),rm(t,a);break;case"firefox":if(!yb||!nm||!e.shimFirefox)return i("Firefox shim is not included in this adapter release."),s;i("adapter.js shimming firefox."),s.browserShim=yb,Xc(t,a),Jc(t),qk(t,a),nm(t,a),Hk(t),Yk(t),Gk(t),Kk(t),Qk(t),Xk(t),Jk(t),Zk(t),Wk(t),Kc(t),am(t),Yc(t,a),Qc(t);break;case"safari":if(!bb||!e.shimSafari)return i("Safari shim is not included in this adapter release."),s;i("adapter.js shimming safari."),s.browserShim=bb,Xc(t,a),Jc(t),aC(t),sC(t),tC(t),$k(t),eC(t),rC(t),nC(t),oC(t),Kc(t),im(t),Yc(t,a),Qc(t),rm(t,a);break;default:i("Unsupported browser!");break}return s}cM({window:typeof window>"u"?void 0:window});const uM=10,Fo="lk_e2ee",dM="LKFrameEncryptionKey",fM={sharedKey:!1,ratchetSalt:dM,ratchetWindowSize:8,failureTolerance:uM,keyringSize:16};var Ua;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Ua||(Ua={}));var Tb;(function(t){t.KeyRatcheted="keyRatcheted"})(Tb||(Tb={}));var Ma;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Ma||(Ma={}));var kb;(function(t){t.Error="cryptorError"})(kb||(kb={}));function hM(){return mM()||sm()}function sm(){return typeof window.RTCRtpScriptTransform<"u"}function mM(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class NU extends Ai.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(i,a,s)=>{Ke.debug("key ratcheted event received",{ratchetResult:i,participantId:a,keyIndex:s})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},fM),e),this.on(Ua.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,i,a){const s={key:e,participantIdentity:i,keyIndex:a};if(!this.options.sharedKey&&!i)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(i??"shared","-").concat(a??0),s),this.emit(Ua.SetKey,s)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,i){this.emit(Ua.RatchetRequest,e,i)}}class Ba extends Error{constructor(e,i){super(i||"an error has occured"),this.name="LiveKitError",this.code=e}}var Qe;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(Qe||(Qe={}));class lt extends Ba{constructor(e,i,a,s){super(1,e),this.name="ConnectionError",this.status=a,this.reason=i,this.context=s,this.reasonName=Qe[i]}}class $m extends Ba{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class ea extends Ba{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class pM extends Ba{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Vt extends Ba{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class om extends Ba{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class Cb extends Ba{constructor(e,i){super(15,e),this.name="PublishTrackError",this.status=i}}class Eb extends Ba{constructor(e,i){super(15,e),this.reason=i,this.reasonName=typeof i=="string"?i:Zm[i]}}var ou;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(ou||(ou={}));(function(t){function e(i){if(i&&"name"in i)return i.name==="NotFoundError"||i.name==="DevicesNotFoundError"?t.NotFound:i.name==="NotAllowedError"||i.name==="PermissionDeniedError"?t.PermissionDenied:i.name==="NotReadableError"||i.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(ou||(ou={}));var xb;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(xb||(xb={}));var oe;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(oe||(oe={}));var me;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(me||(me={}));var he;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(he||(he={}));var ce;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(ce||(ce={}));function gM(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const vM=/version\/(\d+(\.?_?\d+)+)/i;let hh;function Un(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const i=navigator.userAgent.toLowerCase();if(hh===void 0||e){const a=yM.find(s=>{let{test:l}=s;return l.test(i)});hh=a==null?void 0:a.describe(i)}return hh}const yM=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Zc(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:mh(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Zc(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:mh(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Zc(vM,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:mh(t)}}}];function Zc(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const a=e.match(t);return a&&a.length>=i&&a[i]||""}function mh(t){return t.includes("mac os")?Zc(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var bM="2.14.0";const SM=bM,TM=16;class nn{}nn.setTimeout=function(){return setTimeout(...arguments)};nn.setInterval=function(){return setInterval(...arguments)};nn.clearTimeout=function(){return clearTimeout(...arguments)};nn.clearInterval=function(){return clearInterval(...arguments)};const kM=5e3,Vo=[];var Yn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(Yn||(Yn={}));class ie extends Ai.EventEmitter{constructor(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var s;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=ie.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Ke,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),kM):this.handleAppVisibilityChanged()},this.log=ia((s=a.loggerName)!==null&&s!==void 0?s:ri.Track),this.loggerContextCb=a.loggerContextCb,this.setMaxListeners(100),this.kind=i,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=ie.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),He(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let i="audio";this.kind===ie.Kind.Video&&(i="video"),this.attachedElements.length===0&&this.kind===ie.Kind.Video&&this.addAppVisibilityListener(),e||(i==="audio"&&(Vo.forEach(l=>{l.parentElement===null&&!e&&(e=l)}),e&&Vo.splice(Vo.indexOf(e),1)),e||(e=document.createElement(i))),this.attachedElements.includes(e)||this.attachedElements.push(e),ms(this.mediaStreamTrack,e);const a=e.srcObject.getTracks(),s=a.some(l=>l.kind==="audio");return e.play().then(()=>{this.emit(s?ce.AudioPlaybackStarted:ce.VideoPlaybackStarted)}).catch(l=>{l.name==="NotAllowedError"?this.emit(s?ce.AudioPlaybackFailed:ce.VideoPlaybackFailed,l):l.name==="AbortError"?Ke.debug("".concat(s?"audio":"video"," playback aborted, likely due to new play request")):Ke.warn("could not playback ".concat(s?"audio":"video"),l),s&&e&&a.some(c=>c.kind==="video")&&l.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(ce.ElementAttached,e),e}detach(e){try{if(e){Ss(this.mediaStreamTrack,e);const a=this.attachedElements.indexOf(e);return a>=0&&(this.attachedElements.splice(a,1),this.recycleElement(e),this.emit(ce.ElementDetached,e)),e}const i=[];return this.attachedElements.forEach(a=>{Ss(this.mediaStreamTrack,a),i.push(a),this.recycleElement(a),this.emit(ce.ElementDetached,a)}),this.attachedElements=[],i}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=ia(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let i=!0;e.pause(),Vo.forEach(a=>{a.parentElement||(i=!1)}),i&&Vo.push(e)}}handleAppVisibilityChanged(){return D(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===ie.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){kn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){kn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function ms(t,e){let i;e.srcObject instanceof MediaStream?i=e.srcObject:i=new MediaStream;let a;t.kind==="audio"?a=i.getAudioTracks():a=i.getVideoTracks(),a.includes(t)||(a.forEach(s=>{i.removeTrack(s)}),i.addTrack(t)),(!xs()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=i.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==i&&(e.srcObject=i,(xs()||Es())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=i,e.play().catch(()=>{})},0))}function Ss(t,e){if(e.srcObject instanceof MediaStream){const i=e.srcObject;i.removeTrack(t),i.getTracks().length>0?e.srcObject=i:e.srcObject=null}}(function(t){let e;(function(f){f.Audio="audio",f.Video="video",f.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let i;(function(f){f.Camera="camera",f.Microphone="microphone",f.ScreenShare="screen_share",f.ScreenShareAudio="screen_share_audio",f.Unknown="unknown"})(i=t.Source||(t.Source={}));let a;(function(f){f.Active="active",f.Paused="paused",f.Unknown="unknown"})(a=t.StreamState||(t.StreamState={}));function s(f){switch(f){case e.Audio:return ti.AUDIO;case e.Video:return ti.VIDEO;default:return ti.DATA}}t.kindToProto=s;function l(f){switch(f){case ti.AUDIO:return e.Audio;case ti.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=l;function c(f){switch(f){case i.Camera:return Lt.CAMERA;case i.Microphone:return Lt.MICROPHONE;case i.ScreenShare:return Lt.SCREEN_SHARE;case i.ScreenShareAudio:return Lt.SCREEN_SHARE_AUDIO;default:return Lt.UNKNOWN}}t.sourceToProto=c;function d(f){switch(f){case Lt.CAMERA:return i.Camera;case Lt.MICROPHONE:return i.Microphone;case Lt.SCREEN_SHARE:return i.ScreenShare;case Lt.SCREEN_SHARE_AUDIO:return i.ScreenShareAudio;default:return i.Unknown}}t.sourceFromProto=d;function h(f){switch(f){case Jh.ACTIVE:return a.Active;case Jh.PAUSED:return a.Paused;default:return a.Unknown}}t.streamStateFromProto=h})(ie||(ie={}));class at{constructor(e,i,a,s,l){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(i!==void 0&&a!==void 0)this.width=e,this.height=i,this.aspectRatio=e/i,this.encoding={maxBitrate:a,maxFramerate:s,priority:l};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const CM=["vp8","h264"],EM=["vp8","h264","vp9","av1"];function xM(t){return!!CM.find(e=>e===t)}var wb;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(wb||(wb={}));var lm;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(lm||(lm={}));const il={h90:new at(160,90,9e4,20),h180:new at(320,180,16e4,20),h216:new at(384,216,18e4,20),h360:new at(640,360,45e4,20),h540:new at(960,540,8e5,25),h720:new at(1280,720,17e5,30),h1080:new at(1920,1080,3e6,30),h1440:new at(2560,1440,5e6,30),h2160:new at(3840,2160,8e6,30)},cm={h120:new at(160,120,7e4,20),h180:new at(240,180,125e3,20),h240:new at(320,240,14e4,20),h360:new at(480,360,33e4,20),h480:new at(640,480,5e5,20),h540:new at(720,540,6e5,25),h720:new at(960,720,13e5,30),h1080:new at(1440,1080,23e5,30),h1440:new at(1920,1440,38e5,30)},ep={h360fps3:new at(640,360,2e5,3,"medium"),h360fps15:new at(640,360,4e5,15,"medium"),h720fps5:new at(1280,720,8e5,5,"medium"),h720fps15:new at(1280,720,15e5,15,"medium"),h720fps30:new at(1280,720,2e6,30,"medium"),h1080fps15:new at(1920,1080,25e5,15,"medium"),h1080fps30:new at(1920,1080,5e6,30,"medium"),original:new at(0,0,7e6,30,"medium")},wM="|",Rb="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function RM(t){const e=t.split(wM);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function xn(t){return D(this,void 0,void 0,function*(){return new Promise(e=>nn.setTimeout(e,t))})}function um(){return"addTransceiver"in RTCPeerConnection.prototype}function dm(){return"addTrack"in RTCPeerConnection.prototype}function AM(){if(!("getCapabilities"in RTCRtpSender)||xs())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const i of t.codecs)if(i.mimeType==="video/AV1"){e=!0;break}}return e}function _M(){if(!("getCapabilities"in RTCRtpSender)||Es())return!1;if(xs()){const i=Un();if(i!=null&&i.version&&xi(i.version,"16")<0||(i==null?void 0:i.os)==="iOS"&&(i!=null&&i.osVersion)&&xi(i.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const i of t.codecs)if(i.mimeType==="video/VP9"){e=!0;break}}return e}function Ti(t){return t==="av1"||t==="vp9"}function fm(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}function OM(){return typeof RTCPeerConnection>"u"?!1:um()||dm()}function Es(){var t;return((t=Un())===null||t===void 0?void 0:t.name)==="Firefox"}function xs(){var t;return((t=Un())===null||t===void 0?void 0:t.name)==="Safari"}function hm(){const t=Un();return(t==null?void 0:t.name)==="Safari"||(t==null?void 0:t.os)==="iOS"}function NM(){const t=Un();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&xi(t.osVersion,"17")>=0}function DM(t){return t||(t=Un()),(t==null?void 0:t.name)==="Safari"&&xi(t.version,"18.3")>0||(t==null?void 0:t.os)==="iOS"&&!!(t!=null&&t.osVersion)&&xi(t.osVersion,"18.3")>0}function cC(){var t,e;return kn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function PM(){const t=Un(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&xi(e,t.osVersion)>=0?!0:t.name==="Safari"&&xi(e,t.version)>=0}function kn(){return typeof document<"u"}function Ei(){return navigator.product=="ReactNative"}function mm(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function uC(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function dC(){if(!Ei())return;let t=uC();if(t)return t.platform}function Ab(){if(kn())return window.devicePixelRatio;if(Ei()){let t=uC();if(t)return t.devicePixelRatio}return 1}function xi(t,e){const i=t.split("."),a=e.split("."),s=Math.min(i.length,a.length);for(let l=0;l<s;++l){const c=parseInt(i[l],10),d=parseInt(a[l],10);if(c>d)return 1;if(c<d)return-1;if(l===s-1&&c===d)return 0}return t===""&&e!==""?-1:e===""?1:i.length==a.length?0:i.length<a.length?-1:1}function MM(t){for(const e of t)e.target.handleResize(e)}function LM(t){for(const e of t)e.target.handleVisibilityChanged(e)}let ph=null;const _b=()=>(ph||(ph=new ResizeObserver(MM)),ph);let gh=null;const Ob=()=>(gh||(gh=new IntersectionObserver(LM,{root:null,rootMargin:"0px"})),gh);function UM(){var t;const e=new CP({sdk:pk.JS,protocol:TM,version:SM});return Ei()&&(e.os=(t=dC())!==null&&t!==void 0?t:""),e}function Nb(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=document.createElement("canvas");s.width=t,s.height=e;const l=s.getContext("2d");l==null||l.fillRect(0,0,s.width,s.height),a&&l&&(l.beginPath(),l.arc(t/2,e/2,50,0,Math.PI*2,!0),l.closePath(),l.fillStyle="grey",l.fill());const c=s.captureStream(),[d]=c.getTracks();if(!d)throw Error("Could not get empty media stream video track");return d.enabled=i,d}let qo;function vh(){if(!qo){const t=new AudioContext,e=t.createOscillator(),i=t.createGain();i.gain.setValueAtTime(0,0);const a=t.createMediaStreamDestination();if(e.connect(i),i.connect(a),e.start(),[qo]=a.stream.getAudioTracks(),!qo)throw Error("Could not get empty media stream audio track");qo.enabled=!1}return qo.clone()}class ps{constructor(e,i){this.onFinally=i,this.promise=new Promise((a,s)=>D(this,void 0,void 0,function*(){this.resolve=a,this.reject=s,e&&(yield e(a,s))})).finally(()=>{var a;return(a=this.onFinally)===null||a===void 0?void 0:a.call(this)})}}function IM(t){return EM.includes(t)}function Ia(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function jM(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function pm(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function BM(t,e){return t.segments.map(i=>{let{id:a,text:s,language:l,startTime:c,endTime:d,final:h}=i;var f;const p=(f=e.get(a))!==null&&f!==void 0?f:Date.now(),v=Date.now();return h?e.delete(a):e.set(a,p),{id:a,text:s,startTime:Number.parseInt(c.toString()),endTime:Number.parseInt(d.toString()),final:h,language:l,firstReceivedTime:p,lastReceivedTime:v}})}function zM(t){const{id:e,timestamp:i,message:a,editTimestamp:s}=t;return{id:e,timestamp:Number.parseInt(i.toString()),editTimestamp:s?Number.parseInt(s.toString()):void 0,message:a}}function Db(t){switch(t.reason){case Qe.LeaveRequest:return t.context;case Qe.Cancelled:return ii.CLIENT_INITIATED;case Qe.NotAllowed:return ii.USER_REJECTED;case Qe.ServerUnreachable:return ii.JOIN_FAILURE;default:return ii.UNKNOWN_REASON}}function Wc(t){return t!==void 0?Number(t):void 0}function or(t){return t!==void 0?BigInt(t):void 0}function Ts(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function Ci(t){return!!t&&t.kind==ie.Kind.Audio}function vr(t){return!!t&&t.kind==ie.Kind.Video}function Oa(t){return Ts(t)&&vr(t)}function Xi(t){return Ts(t)&&Ci(t)}function gm(t){return!!t&&!t.isLocal}function FM(t){return!!t&&!t.isLocal}function yh(t){return gm(t)&&vr(t)}function VM(t){return t.isLocal}function qM(t,e){const i=[];let a=new TextEncoder().encode(t);for(;a.length>e;){let s=e;for(;s>0;){const l=a[s];if(l!==void 0&&(l&192)!==128)break;s--}i.push(a.slice(0,s)),a=a.slice(s)}return a.length>0&&i.push(a),i}function fC(t,e,i){var a,s,l,c;const{optionsWithoutProcessor:d,audioProcessor:h,videoProcessor:f}=pC(t??{}),p=e==null?void 0:e.processor,v=i==null?void 0:i.processor,y=d??{};return y.audio===!0&&(y.audio={}),y.video===!0&&(y.video={}),y.audio&&(vm(y.audio,e),(a=(l=y.audio).deviceId)!==null&&a!==void 0||(l.deviceId={ideal:"default"}),(h||p)&&(y.audio.processor=h??p)),y.video&&(vm(y.video,i),(s=(c=y.video).deviceId)!==null&&s!==void 0||(c.deviceId={ideal:"default"}),(f||v)&&(y.video.processor=f??v)),y}function vm(t,e){return Object.keys(e).forEach(i=>{t[i]===void 0&&(t[i]=e[i])}),t}function tp(t){var e,i,a,s;const l={};if(t.video)if(typeof t.video=="object"){const c={},d=c,h=t.video;Object.keys(h).forEach(f=>{switch(f){case"resolution":vm(d,h.resolution);break;default:d[f]=h[f]}}),l.video=c,(e=(a=l.video).deviceId)!==null&&e!==void 0||(a.deviceId={ideal:"default"})}else l.video=t.video?{deviceId:{ideal:"default"}}:!1;else l.video=!1;return t.audio?typeof t.audio=="object"?(l.audio=t.audio,(i=(s=l.audio).deviceId)!==null&&i!==void 0||(s.deviceId={ideal:"default"})):l.audio={deviceId:{ideal:"default"}}:l.audio=!1,l}function hC(t){return D(this,arguments,void 0,function(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const a=mC();if(a){const s=a.createAnalyser();s.fftSize=2048;const l=s.frequencyBinCount,c=new Uint8Array(l);a.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(s),yield xn(i),s.getByteTimeDomainData(c);const h=c.some(f=>f!==128&&f!==0);return a.close(),!h}return!1}()})}function mC(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const i=new e({latencyHint:"interactive"});if(i.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const a=()=>D(this,void 0,void 0,function*(){var s;try{i.state==="suspended"&&(yield i.resume())}catch(l){console.warn("Error trying to auto-resume audio context",l)}(s=window.document.body)===null||s===void 0||s.removeEventListener("click",a)});window.document.body.addEventListener("click",a)}return i}}function HM(t){return t==="audioinput"?ie.Source.Microphone:t==="videoinput"?ie.Source.Camera:ie.Source.Unknown}function ym(t){return t===ie.Source.Microphone?"audioinput":t===ie.Source.Camera?"videoinput":void 0}function GM(t){var e,i;let a=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(a=typeof a=="boolean"?{}:a,xs()?a=Object.assign(Object.assign({},a),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):a=Object.assign(Object.assign({},a),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(i=t.audio)!==null&&i!==void 0?i:!1,video:a,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function $c(t){return t.split("/")[1].toLowerCase()}function KM(t){const e=[];return t.forEach(i=>{i.track!==void 0&&e.push(new Xm({cid:i.track.mediaStreamID,track:i.trackInfo}))}),e}function He(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?He(t.track):{})}}function YM(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function QM(t,e){var i;t===void 0&&(t={}),e===void 0&&(e={});const a=[...Object.keys(e),...Object.keys(t)],s={};for(const l of a)t[l]!==e[l]&&(s[l]=(i=e[l])!==null&&i!==void 0?i:"");return s}function pC(t){const e=Object.assign({},t);let i,a;return typeof e.audio=="object"&&e.audio.processor&&(i=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(a=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:i,videoProcessor:a,optionsWithoutProcessor:gM(e)}}function XM(t){switch(t){case Lt.CAMERA:return ie.Source.Camera;case Lt.MICROPHONE:return ie.Source.Microphone;case Lt.SCREEN_SHARE:return ie.Source.ScreenShare;case Lt.SCREEN_SHARE_AUDIO:return ie.Source.ScreenShareAudio;default:return ie.Source.Unknown}}class JM extends Ai.EventEmitter{constructor(e){super(),this.onWorkerMessage=i=>{var a,s;const{kind:l,data:c}=i.data;switch(l){case"error":Ke.error(c.error.message),this.emit(Ma.EncryptionError,c.error);break;case"initAck":c.enabled&&this.keyProvider.getKeys().forEach(d=>{this.postKey(d)});break;case"enable":if(c.enabled&&this.keyProvider.getKeys().forEach(d=>{this.postKey(d)}),this.encryptionEnabled!==c.enabled&&c.participantIdentity===((a=this.room)===null||a===void 0?void 0:a.localParticipant.identity))this.emit(Ma.ParticipantEncryptionStatusChanged,c.enabled,this.room.localParticipant),this.encryptionEnabled=c.enabled;else if(c.participantIdentity){const d=(s=this.room)===null||s===void 0?void 0:s.getParticipantByIdentity(c.participantIdentity);if(!d)throw TypeError("couldn't set encryption status, participant not found".concat(c.participantIdentity));this.emit(Ma.ParticipantEncryptionStatusChanged,c.enabled,d)}break;case"ratchetKey":this.keyProvider.emit(Ua.KeyRatcheted,c.ratchetResult,c.participantIdentity,c.keyIndex);break}},this.onWorkerError=i=>{Ke.error("e2ee worker encountered an error:",{error:i.error}),this.emit(Ma.EncryptionError,i.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!hM())throw new $m("tried to setup end-to-end encryption on an unsupported browser");if(Ke.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const i={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:ZP.getLevel()}};this.worker&&(Ke.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(i))}}setParticipantCryptorEnabled(e,i){Ke.debug("set e2ee to ".concat(e," for participant ").concat(i)),this.postEnable(e,i)}setSifTrailer(e){!e||e.length===0?Ke.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(he.RTPVideoMapUpdate,i=>{this.postRTPMap(i)})}setupEventListeners(e,i){e.on(oe.TrackPublished,(a,s)=>this.setParticipantCryptorEnabled(a.trackInfo.encryption!==Mn.NONE,s.identity)),e.on(oe.ConnectionStateChanged,a=>{a===We.Connected&&e.remoteParticipants.forEach(s=>{s.trackPublications.forEach(l=>{this.setParticipantCryptorEnabled(l.trackInfo.encryption!==Mn.NONE,s.identity)})})}).on(oe.TrackUnsubscribed,(a,s,l)=>{var c;const d={kind:"removeTransform",data:{participantIdentity:l.identity,trackId:a.mediaStreamID}};(c=this.worker)===null||c===void 0||c.postMessage(d)}).on(oe.TrackSubscribed,(a,s,l)=>{this.setupE2EEReceiver(a,l.identity,s.trackInfo)}).on(oe.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");i.getKeys().forEach(a=>{this.postKey(a)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(me.LocalSenderCreated,(a,s)=>D(this,void 0,void 0,function*(){this.setupE2EESender(s,a)})),i.on(Ua.SetKey,a=>this.postKey(a)).on(Ua.RatchetRequest,(a,s)=>this.postRatchetRequest(a,s))}postRatchetRequest(e,i){if(!this.worker)throw Error("could not ratchet key, worker is missing");const a={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:i}};this.worker.postMessage(a)}postKey(e){let{key:i,participantIdentity:a,keyIndex:s}=e;var l;if(!this.worker)throw Error("could not set key, worker is missing");const c={kind:"setKey",data:{participantIdentity:a,isPublisher:a===((l=this.room)===null||l===void 0?void 0:l.localParticipant.identity),key:i,keyIndex:s}};this.worker.postMessage(c)}postEnable(e,i){if(this.worker){const a={kind:"enable",data:{enabled:e,participantIdentity:i}};this.worker.postMessage(a)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var i;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const a={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(a)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const i={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(i)}setupE2EEReceiver(e,i,a){if(e.receiver){if(!(a!=null&&a.mimeType)||a.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,i,e.kind==="video"?$c(a.mimeType):void 0)}}setupE2EESender(e,i){if(!Ts(e)||!i){i||Ke.warn("early return because sender is not ready");return}this.handleSender(i,e.mediaStreamID,void 0)}handleReceiver(e,i,a,s){return D(this,void 0,void 0,function*(){if(this.worker){if(sm()){const l={kind:"decode",participantIdentity:a,trackId:i,codec:s};e.transform=new RTCRtpScriptTransform(this.worker,l)}else{if(Fo in e&&s){const h={kind:"updateCodec",data:{trackId:i,codec:s,participantIdentity:a}};this.worker.postMessage(h);return}let l=e.writableStream,c=e.readableStream;if(!l||!c){const h=e.createEncodedStreams();e.writableStream=h.writable,l=h.writable,e.readableStream=h.readable,c=h.readable}const d={kind:"decode",data:{readableStream:c,writableStream:l,trackId:i,codec:s,participantIdentity:a,isReuse:Fo in e}};this.worker.postMessage(d,[c,l])}e[Fo]=!0}})}handleSender(e,i,a){var s;if(!(Fo in e||!this.worker)){if(!(!((s=this.room)===null||s===void 0)&&s.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(sm()){Ke.info("initialize script transform");const l={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:i,codec:a};e.transform=new RTCRtpScriptTransform(this.worker,l)}else{Ke.info("initialize encoded streams");const l=e.createEncodedStreams(),c={kind:"encode",data:{readableStream:l.readable,writableStream:l.writable,codec:a,trackId:i,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(c,[l.readable,l.writable])}e[Fo]=!0}}}const bh="default";class Jt{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Jt),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return D(this,arguments,void 0,function(i){var a=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var l;if(((l=Jt.userMediaPromiseMap)===null||l===void 0?void 0:l.size)>0){Ke.debug("awaiting getUserMedia promise");try{i?yield Jt.userMediaPromiseMap.get(i):yield Promise.all(Jt.userMediaPromiseMap.values())}catch{Ke.warn("error waiting for media permissons")}}let c=yield navigator.mediaDevices.enumerateDevices();if(s&&!(xs()&&a.hasDeviceInUse(i))&&(c.filter(h=>h.kind===i).length===0||c.some(h=>{const f=h.label==="",p=i?h.kind===i:!0;return f&&p}))){const h={video:i!=="audioinput"&&i!=="audiooutput",audio:i!=="videoinput"&&{deviceId:{ideal:"default"}}},f=yield navigator.mediaDevices.getUserMedia(h);c=yield navigator.mediaDevices.enumerateDevices(),f.getTracks().forEach(p=>{p.stop()})}return a._previousDevices=c,i&&(c=c.filter(d=>d.kind===i)),c}()})}normalizeDeviceId(e,i,a){return D(this,void 0,void 0,function*(){if(i!==bh)return i;const s=yield this.getDevices(e),l=s.find(d=>d.deviceId===bh);if(!l){Ke.warn("could not reliably determine default device");return}const c=s.find(d=>d.deviceId!==bh&&d.groupId===(a??l.groupId));if(!c){Ke.warn("could not reliably determine default device");return}return c==null?void 0:c.deviceId})}hasDeviceInUse(e){return e?Jt.userMediaPromiseMap.has(e):Jt.userMediaPromiseMap.size>0}}Jt.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Jt.userMediaPromiseMap=new Map;var Xo;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Xo||(Xo={}));class ZM{constructor(){this.pendingTasks=new Map,this.taskMutex=new fn,this.nextTaskIndex=0}run(e){return D(this,void 0,void 0,function*(){const i={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Xo.WAITING};this.pendingTasks.set(i.id,i);const a=yield this.taskMutex.lock();try{return i.executedAt=Date.now(),i.status=Xo.RUNNING,yield e()}finally{i.status=Xo.COMPLETED,this.pendingTasks.delete(i.id),a()}})}flush(){return D(this,void 0,void 0,function*(){return this.run(()=>D(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function WM(t,e){const i=new URL(jM(t));return e.forEach((a,s)=>{i.searchParams.set(s,a)}),gC(i,"rtc")}function $M(t){const e=new URL(pm(t));return gC(e,"validate")}function eL(t){return t.endsWith("/")?t:"".concat(t,"/")}function gC(t,e){return t.pathname="".concat(eL(t.pathname)).concat(e),t.toString()}const tL=["syncState","trickle","offer","answer","simulate","leave"];function nL(t){const e=tL.indexOf(t.case)>=0;return Ke.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var dt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(dt||(dt={}));class np{get currentState(){return this.state}get isDisconnected(){return this.state===dt.DISCONNECTING||this.state===dt.DISCONNECTED}get isEstablishingConnection(){return this.state===dt.CONNECTING||this.state===dt.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var a;this.rtt=0,this.state=dt.DISCONNECTED,this.log=Ke,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=ia((a=i.loggerName)!==null&&a!==void 0?a:ri.Signal),this.loggerContextCb=i.loggerContextCb,this.useJSON=e,this.requestQueue=new ZM,this.queuedRequests=[],this.closingLock=new fn,this.connectionLock=new fn,this.state=dt.DISCONNECTED}get logContext(){var e,i;return(i=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&i!==void 0?i:{}}join(e,i,a,s){return D(this,void 0,void 0,function*(){return this.state=dt.CONNECTING,this.options=a,yield this.connect(e,i,a,s)})}reconnect(e,i,a,s){return D(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=dt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,i,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:a,reconnectReason:s}))})}connect(e,i,a,s){this.connectOptions=a;const l=UM(),c=iL(i,l,a),d=WM(e,c),h=$M(d);return new Promise((f,p)=>D(this,void 0,void 0,function*(){const v=yield this.connectionLock.lock();try{const y=()=>D(this,void 0,void 0,function*(){this.close(),clearTimeout(k),p(new lt("room connection has been cancelled (signal)",Qe.Cancelled))}),k=setTimeout(()=>{this.close(),p(new lt("room connection has timed out (signal)",Qe.ServerUnreachable))},a.websocketTimeout);s!=null&&s.aborted&&y(),s==null||s.addEventListener("abort",y);const S=new URL(d);S.searchParams.has("access_token")&&S.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(S),Object.assign({reconnect:a.reconnect,reconnectReason:a.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(d),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(k)},this.ws.onerror=T=>D(this,void 0,void 0,function*(){if(this.state!==dt.CONNECTED){this.state=dt.DISCONNECTED,clearTimeout(k);try{const w=yield fetch(h);if(w.status.toFixed(0).startsWith("4")){const R=yield w.text();p(new lt(R,Qe.NotAllowed,w.status))}else p(new lt("Encountered unknown websocket error during connection: ".concat(T.toString()),Qe.InternalError,w.status))}catch(w){p(new lt(w instanceof Error?w.message:"server was not reachable",Qe.ServerUnreachable))}return}this.handleWSError(T)}),this.ws.onmessage=T=>D(this,void 0,void 0,function*(){var w,R,L;let N;if(typeof T.data=="string"){const A=JSON.parse(T.data);N=ub.fromJson(A,{ignoreUnknownFields:!0})}else if(T.data instanceof ArrayBuffer)N=ub.fromBinary(new Uint8Array(T.data));else{this.log.error("could not decode websocket message: ".concat(typeof T.data),this.logContext);return}if(this.state!==dt.CONNECTED){let A=!1;if(((w=N.message)===null||w===void 0?void 0:w.case)==="join"?(this.state=dt.CONNECTED,s==null||s.removeEventListener("abort",y),this.pingTimeoutDuration=N.message.value.pingTimeout,this.pingIntervalDuration=N.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),f(N.message.value)):this.state===dt.RECONNECTING&&N.message.case!=="leave"?(this.state=dt.CONNECTED,s==null||s.removeEventListener("abort",y),this.startPingInterval(),((R=N.message)===null||R===void 0?void 0:R.case)==="reconnect"?f(N.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),f(void 0),A=!0)):this.isEstablishingConnection&&N.message.case==="leave"?p(new lt("Received leave request while trying to (re)connect",Qe.LeaveRequest,void 0,N.message.value.reason)):a.reconnect||p(new lt("did not receive join response, got ".concat((L=N.message)===null||L===void 0?void 0:L.case," instead"),Qe.InternalError)),!A)return}this.signalLatency&&(yield xn(this.signalLatency)),this.handleSignalResponse(N)}),this.ws.onclose=T=>{this.isEstablishingConnection&&p(new lt("Websocket got closed during a (re)connection attempt",Qe.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:T.reason,code:T.code,wasClean:T.wasClean,state:this.state})),this.handleOnClose(T.reason)}}finally{v()}}))}close(){return D(this,arguments,void 0,function(){var e=this;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const a=yield e.closingLock.lock();try{if(e.clearPingInterval(),i&&(e.state=dt.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const s=new Promise(l=>{e.ws?e.ws.onclose=()=>{l()}:l()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([s,xn(250)])),e.ws=void 0}}finally{i&&(e.state=dt.DISCONNECTED),a()}}()})}sendOffer(e,i){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:lu(e,i)})}sendAnswer(e,i){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:lu(e,i)})}sendIceCandidate(e,i){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Ym({candidateInit:JSON.stringify(e),target:i})})}sendMuteTrack(e,i){return this.sendRequest({case:"mute",value:new Qm({sid:e,muted:i})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,i){return D(this,arguments,void 0,function(a,s){var l=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const d=l.getNextRequestId();return yield l.sendRequest({case:"updateMetadata",value:new Ck({requestId:d,metadata:a,name:s,attributes:c})}),d}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,i){return this.sendRequest({case:"updateLayers",value:new kk({trackSid:e,layers:i})})}sendUpdateSubscriptionPermissions(e,i){return this.sendRequest({case:"subscriptionPermission",value:new wk({allParticipants:e,trackPermissions:i})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:pt.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Ok({timestamp:pt.parse(Date.now()),rtt:pt.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,i){return this.sendRequest({case:"updateAudioTrack",value:new Tk({trackSid:e,features:i})})}sendLeave(){return this.sendRequest({case:"leave",value:new Au({reason:ii.CLIENT_INITIATED,action:ys.DISCONNECT})})}sendRequest(e){return D(this,arguments,void 0,function(i){var a=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!s&&!nL(i)&&a.state===dt.RECONNECTING){a.queuedRequests.push(()=>D(a,void 0,void 0,function*(){yield this.sendRequest(i,!0)}));return}if(s||(yield a.requestQueue.flush()),a.signalLatency&&(yield xn(a.signalLatency)),!a.ws||a.ws.readyState!==a.ws.OPEN){a.log.error("cannot send signal request before connected, type: ".concat(i==null?void 0:i.case),a.logContext);return}const c=new wP({message:i});try{a.useJSON?a.ws.send(c.toJsonString()):a.ws.send(c.toBinary())}catch(d){a.log.error("error sending signal message",Object.assign(Object.assign({},a.logContext),{error:d}))}}()})}handleSignalResponse(e){var i,a;const s=e.message;if(s==null){this.log.debug("received unsupported message",this.logContext);return}let l=!1;if(s.case==="answer"){const c=Pb(s.value);this.onAnswer&&this.onAnswer(c,s.value.id)}else if(s.case==="offer"){const c=Pb(s.value);this.onOffer&&this.onOffer(c,s.value.id)}else if(s.case==="trickle"){const c=JSON.parse(s.value.candidateInit);this.onTrickle&&this.onTrickle(c,s.value.target)}else s.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((i=s.value.participants)!==null&&i!==void 0?i:[]):s.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(s.value):s.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((a=s.value.speakers)!==null&&a!==void 0?a:[]):s.case==="leave"?this.onLeave&&this.onLeave(s.value):s.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(s.value.sid,s.value.muted):s.case==="roomUpdate"?this.onRoomUpdate&&s.value.room&&this.onRoomUpdate(s.value.room):s.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(s.value):s.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(s.value):s.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(s.value):s.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(s.value):s.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(s.value):s.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(s.value):s.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(s.value):s.case==="pong"||(s.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(s.value.lastPingTimestamp.toString()),this.resetPingTimeout(),l=!0):s.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(s.value):s.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(s.value.trackSid):s.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(s.value.token),this.onRoomMoved&&this.onRoomMoved(s.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:s.case})));l||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return D(this,void 0,void 0,function*(){if(this.state===dt.DISCONNECTED)return;const i=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),i&&i(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=nn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&nn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=nn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&nn.clearInterval(this.pingInterval)}}function Pb(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function lu(t,e){return new mr({sdp:t.sdp,type:t.type,id:e})}function iL(t,e,i){var a;const s=new URLSearchParams;return s.set("access_token",t),i.reconnect&&(s.set("reconnect","1"),i.sid&&s.set("sid",i.sid)),s.set("auto_subscribe",i.autoSubscribe?"1":"0"),s.set("sdk",Ei()?"reactnative":"js"),s.set("version",e.version),s.set("protocol",e.protocol.toString()),e.deviceModel&&s.set("device_model",e.deviceModel),e.os&&s.set("os",e.os),e.osVersion&&s.set("os_version",e.osVersion),e.browser&&s.set("browser",e.browser),e.browserVersion&&s.set("browser_version",e.browserVersion),i.adaptiveStream&&s.set("adaptive_stream","1"),i.reconnectReason&&s.set("reconnect_reason",i.reconnectReason.toString()),!((a=navigator.connection)===null||a===void 0)&&a.type&&s.set("network",navigator.connection.type),s}class Mb{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const i=this.buffer[0];if(this._totalSize-i.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class aL{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,i){const a=Date.now();a-this._lastCleanup>this.ttl/2&&this.cleanup();const s=a+this.ttl;return this._map.set(e,{value:i,expiresAt:s}),this}get(e){const i=this._map.get(e);if(i){if(i.expiresAt<Date.now()){this._map.delete(e);return}return i.value}}has(e){const i=this._map.get(e);return i?i.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[i,a]of this._map.entries())a.expiresAt<e&&this._map.delete(i);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[i,a]of this._map.entries())a.expiresAt>=Date.now()&&e(a.value,i,this.asValueMap())}map(e){this.cleanup();const i=[],a=this.asValueMap();for(const[s,l]of a.entries())i.push(e(l,s,a));return i}asValueMap(){const e=new Map;for(const[i,a]of this._map.entries())a.expiresAt>=Date.now()&&e.set(i,a.value);return e}}var Wn={},Sh={},Th={exports:{}},Lb;function ip(){if(Lb)return Th.exports;Lb=1;var t=Th.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var i="candidate:%s %d %s %d %s %d typ %s";return i+=e.raddr!=null?" raddr %s rport %d":"%v%v",i+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(i+=" generation %d"),i+=e["network-id"]!=null?" network-id %d":"%v",i+=e["network-cost"]!=null?" network-cost %d":"%v",i}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var i="ssrc:%d";return e.attribute!=null&&(i+=" %s",e.value!=null&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var i="mediaclk:";return i+=e.id!=null?"id=%s %s":"%v%s",i+=e.mediaClockValue!=null?"=%s":"",i+=e.rateNumerator!=null?" rate=%s":"",i+=e.rateDenominator!=null?"/%s":"",i}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var i=t[e];i.forEach(function(a){a.reg||(a.reg=/(.*)/),a.format||(a.format="%s")})}),Th.exports}var Ub;function rL(){return Ub||(Ub=1,function(t){var e=function(d){return String(Number(d))===d?Number(d):d},i=function(d,h,f,p){if(p&&!f)h[p]=e(d[1]);else for(var v=0;v<f.length;v+=1)d[v+1]!=null&&(h[f[v]]=e(d[v+1]))},a=function(d,h,f){var p=d.name&&d.names;d.push&&!h[d.push]?h[d.push]=[]:p&&!h[d.name]&&(h[d.name]={});var v=d.push?{}:p?h[d.name]:h;i(f.match(d.reg),v,d.names,d.name),d.push&&h[d.push].push(v)},s=ip(),l=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(d){var h={},f=[],p=h;return d.split(/(\r\n|\r|\n)/).filter(l).forEach(function(v){var y=v[0],k=v.slice(2);y==="m"&&(f.push({rtp:[],fmtp:[]}),p=f[f.length-1]);for(var S=0;S<(s[y]||[]).length;S+=1){var T=s[y][S];if(T.reg.test(k))return a(T,p,k)}}),h.media=f,h};var c=function(d,h){var f=h.split(/=(.+)/,2);return f.length===2?d[f[0]]=e(f[1]):f.length===1&&h.length>1&&(d[f[0]]=void 0),d};t.parseParams=function(d){return d.split(/;\s?/).reduce(c,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(d){return d.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(d){for(var h=[],f=d.split(" ").map(e),p=0;p<f.length;p+=3)h.push({component:f[p],ip:f[p+1],port:f[p+2]});return h},t.parseImageAttributes=function(d){return d.split(" ").map(function(h){return h.substring(1,h.length-1).split(",").reduce(c,{})})},t.parseSimulcastStreamList=function(d){return d.split(";").map(function(h){return h.split(",").map(function(f){var p,v=!1;return f[0]!=="~"?p=e(f):(p=e(f.substring(1,f.length)),v=!0),{scid:p,paused:v}})})}}(Sh)),Sh}var kh,Ib;function sL(){if(Ib)return kh;Ib=1;var t=ip(),e=/%[sdv%]/g,i=function(c){var d=1,h=arguments,f=h.length;return c.replace(e,function(p){if(d>=f)return p;var v=h[d];switch(d+=1,p){case"%%":return"%";case"%s":return String(v);case"%d":return Number(v);case"%v":return""}})},a=function(c,d,h){var f=d.format instanceof Function?d.format(d.push?h:h[d.name]):d.format,p=[c+"="+f];if(d.names)for(var v=0;v<d.names.length;v+=1){var y=d.names[v];d.name?p.push(h[d.name][y]):p.push(h[d.names[v]])}else p.push(h[d.name]);return i.apply(null,p)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],l=["i","c","b","a"];return kh=function(c,d){d=d||{},c.version==null&&(c.version=0),c.name==null&&(c.name=" "),c.media.forEach(function(v){v.payloads==null&&(v.payloads="")});var h=d.outerOrder||s,f=d.innerOrder||l,p=[];return h.forEach(function(v){t[v].forEach(function(y){y.name in c&&c[y.name]!=null?p.push(a(v,y,c)):y.push in c&&c[y.push]!=null&&c[y.push].forEach(function(k){p.push(a(v,y,k))})})}),c.media.forEach(function(v){p.push(a("m",t.m[0],v)),f.forEach(function(y){t[y].forEach(function(k){k.name in v&&v[k.name]!=null?p.push(a(y,k,v)):k.push in v&&v[k.push]!=null&&v[k.push].forEach(function(S){p.push(a(y,k,S))})})})}),p.join(`\r
`)+`\r
`},kh}var jb;function oL(){if(jb)return Wn;jb=1;var t=rL(),e=sL(),i=ip();return Wn.grammar=i,Wn.write=e,Wn.parse=t.parse,Wn.parseParams=t.parseParams,Wn.parseFmtpConfig=t.parseFmtpConfig,Wn.parsePayloads=t.parsePayloads,Wn.parseRemoteCandidates=t.parseRemoteCandidates,Wn.parseImageAttributes=t.parseImageAttributes,Wn.parseSimulcastStreamList=t.parseSimulcastStreamList,Wn}var Da=oL();function ap(t,e,i){var a,s,l;e===void 0&&(e=50),i===void 0&&(i={});var c=(a=i.isImmediate)!=null&&a,d=(s=i.callback)!=null&&s,h=i.maxWait,f=Date.now(),p=[];function v(){if(h!==void 0){var k=Date.now()-f;if(k+e>=h)return h-k}return e}var y=function(){var k=[].slice.call(arguments),S=this;return new Promise(function(T,w){var R=c&&l===void 0;if(l!==void 0&&clearTimeout(l),l=setTimeout(function(){if(l=void 0,f=Date.now(),!c){var N=t.apply(S,k);d&&d(N),p.forEach(function(A){return(0,A.resolve)(N)}),p=[]}},v()),R){var L=t.apply(S,k);return d&&d(L),T(L)}p.push({resolve:T,reject:w})})};return y.cancel=function(k){l!==void 0&&clearTimeout(l),p.forEach(function(S){return(0,S.reject)(k)}),p=[]},y}const lL=.7,cL=20,ks={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class Bb extends Ai.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var a;super(),this.log=Ke,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=ap(s=>D(this,void 0,void 0,function*(){this.emit(ks.NegotiationStarted);try{yield this.createAndSendOffer()}catch(l){if(s)s(l);else throw l}}),cL),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=ia((a=i.loggerName)!==null&&a!==void 0?a:ri.PCTransport),this.loggerOptions=i,this.config=e,this._pc=this.createPC(),this.offerLock=new fn}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=i=>{var a;i.candidate&&((a=this.onIceCandidate)===null||a===void 0||a.call(this,i.candidate))},e.onicecandidateerror=i=>{var a;(a=this.onIceCandidateError)===null||a===void 0||a.call(this,i)},e.oniceconnectionstatechange=()=>{var i;(i=this.onIceConnectionStateChange)===null||i===void 0||i.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var i;(i=this.onSignalingStatechange)===null||i===void 0||i.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var i;(i=this.onConnectionStateChange)===null||i===void 0||i.call(this,e.connectionState)},e.ondatachannel=i=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,i)},e.ontrack=i=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,i)},e}get logContext(){var e,i;return Object.assign({},(i=(e=this.loggerOptions).loggerContextCb)===null||i===void 0?void 0:i.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return D(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,i){return D(this,void 0,void 0,function*(){var a;if(e.type==="answer"&&this.latestOfferId>0&&i>0&&i!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:i,latestOfferId:this.latestOfferId})),!1;let s;if(e.type==="offer"){let{stereoMids:l,nackMids:c}=uL(e);this.remoteStereoMids=l,this.remoteNackMids=c}else if(e.type==="answer"){const l=Da.parse((a=e.sdp)!==null&&a!==void 0?a:"");l.media.forEach(c=>{c.type==="audio"&&this.trackBitrates.some(d=>{if(!d.transceiver||c.mid!=d.transceiver.mid)return!1;let h=0;if(c.rtp.some(p=>p.codec.toUpperCase()===d.codec.toUpperCase()?(h=p.payload,!0):!1),h===0)return!0;let f=!1;for(const p of c.fmtp)if(p.payload===h){p.config=p.config.split(";").filter(v=>!v.includes("maxaveragebitrate")).join(";"),d.maxbr>0&&(p.config+=";maxaveragebitrate=".concat(d.maxbr*1e3)),f=!0;break}return f||d.maxbr>0&&c.fmtp.push({payload:h,config:"maxaveragebitrate=".concat(d.maxbr*1e3)}),!0})}),s=Da.write(l)}return yield this.setMungedSDP(e,s,!0),this.pendingCandidates.forEach(l=>{this.pc.addIceCandidate(l)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(ks.NegotiationComplete),e.sdp&&Da.parse(e.sdp).media.forEach(c=>{c.type==="video"&&this.emit(ks.RTPVideoPayloadTypes,c.rtp)})),!0})}createAndSendOffer(e){return D(this,void 0,void 0,function*(){var i;const a=yield this.offerLock.lock();try{const s=this.latestOfferId+1;if(this.latestOfferId=s,this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const d=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&d)yield this._pc.setRemoteDescription(d);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const l=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:l.sdp},this.logContext));const c=Da.parse((i=l.sdp)!==null&&i!==void 0?i:"");if(c.media.forEach(d=>{Fb(d),d.type==="audio"?zb(d,[],[]):d.type==="video"&&this.trackBitrates.some(h=>{if(!d.msid||!h.cid||!d.msid.includes(h.cid))return!1;let f=0;if(d.rtp.some(v=>v.codec.toUpperCase()===h.codec.toUpperCase()?(f=v.payload,!0):!1),f===0||(Ti(h.codec)&&this.ensureVideoDDExtensionForSVC(d,c),h.codec!=="av1"))return!0;const p=Math.round(h.maxbr*lL);for(const v of d.fmtp)if(v.payload===f){v.config.includes("x-google-start-bitrate")||(v.config+=";x-google-start-bitrate=".concat(p));break}return!0})}),this.latestOfferId>s){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:s}));return}yield this.setMungedSDP(l,Da.write(c)),this.onOffer(l,this.latestOfferId)}finally{a()}})}createAndSetAnswer(){return D(this,void 0,void 0,function*(){var e;const i=yield this.pc.createAnswer(),a=Da.parse((e=i.sdp)!==null&&e!==void 0?e:"");return a.media.forEach(s=>{Fb(s),s.type==="audio"&&zb(s,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(i,Da.write(a)),i})}createDataChannel(e,i){return this.pc.createDataChannel(e,i)}addTransceiver(e,i){return this.pc.addTransceiver(e,i)}addTrack(e){if(!this._pc)throw new Vt("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var i;if(!this._pc)throw new Vt("PC closed, cannot configure");return(i=this._pc)===null||i===void 0?void 0:i.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var i;return(i=this._pc)===null||i===void 0?void 0:i.removeTrack(e)}getConnectionState(){var e,i;return(i=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&i!==void 0?i:"closed"}getICEConnectionState(){var e,i;return(i=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&i!==void 0?i:"closed"}getSignallingState(){var e,i;return(i=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&i!==void 0?i:"closed"}getTransceivers(){var e,i;return(i=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&i!==void 0?i:[]}getSenders(){var e,i;return(i=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&i!==void 0?i:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return D(this,void 0,void 0,function*(){var e;if(!this._pc)return;let i="";const a=new Map,s=new Map;if((yield this._pc.getStats()).forEach(d=>{switch(d.type){case"transport":i=d.selectedCandidatePairId;break;case"candidate-pair":i===""&&d.selected&&(i=d.id),a.set(d.id,d);break;case"remote-candidate":s.set(d.id,"".concat(d.address,":").concat(d.port));break}}),i==="")return;const c=(e=a.get(i))===null||e===void 0?void 0:e.remoteCandidateId;if(c!==void 0)return s.get(c)})}setMungedSDP(e,i,a){return D(this,void 0,void 0,function*(){if(i){const s=e.sdp;e.sdp=i;try{this.log.debug("setting munged ".concat(a?"remote":"local"," description"),this.logContext),a?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(l){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:l,sdp:i})),e.sdp=s}}try{a?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(s){let l="unknown error";s instanceof Error?l=s.message:typeof s=="string"&&(l=s);const c={error:l,sdp:e.sdp};throw!a&&this.pc.remoteDescription&&(c.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:c})),new om(l)}})}ensureVideoDDExtensionForSVC(e,i){var a,s;if(!((a=e.ext)===null||a===void 0?void 0:a.some(c=>c.uri===Rb))){if(this.ddExtID===0){let c=0;i.media.forEach(d=>{var h;d.type==="video"&&((h=d.ext)===null||h===void 0||h.forEach(f=>{f.value>c&&(c=f.value)}))}),this.ddExtID=c+1}(s=e.ext)===null||s===void 0||s.push({value:this.ddExtID,uri:Rb})}}}function zb(t,e,i){let a=0;t.rtp.some(s=>s.codec==="opus"?(a=s.payload,!0):!1),a>0&&(t.rtcpFb||(t.rtcpFb=[]),i.includes(t.mid)&&!t.rtcpFb.some(s=>s.payload===a&&s.type==="nack")&&t.rtcpFb.push({payload:a,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(s=>s.payload===a?(s.config.includes("stereo=1")||(s.config+=";stereo=1"),!0):!1))}function uL(t){var e;const i=[],a=[],s=Da.parse((e=t.sdp)!==null&&e!==void 0?e:"");let l=0;return s.media.forEach(c=>{var d;c.type==="audio"&&(c.rtp.some(h=>h.codec==="opus"?(l=h.payload,!0):!1),!((d=c.rtcpFb)===null||d===void 0)&&d.some(h=>h.payload===l&&h.type==="nack")&&a.push(c.mid),c.fmtp.some(h=>h.payload===l?(h.config.includes("sprop-stereo=1")&&i.push(c.mid),!0):!1))}),{stereoMids:i,nackMids:a}}function Fb(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}const bm="vp8",dL={audioPreset:lm.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ep.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:bm,backupCodec:!0,preConnectBuffer:!1},vC={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},yC={deviceId:{ideal:"default"},resolution:il.h720.resolution},fL={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new $P,disconnectOnPageLeave:!0,webAudioMix:!1},rp={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Ct;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Ct||(Ct={}));class hL{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,i,a){var s;this.peerConnectionTimeout=rp.peerConnectionTimeout,this.log=Ke,this.updateState=()=>{var l;const c=this.state,d=this.requiredTransports.map(h=>h.getConnectionState());d.every(h=>h==="connected")?this.state=Ct.CONNECTED:d.some(h=>h==="failed")?this.state=Ct.FAILED:d.some(h=>h==="connecting")?this.state=Ct.CONNECTING:d.every(h=>h==="closed")?this.state=Ct.CLOSED:d.some(h=>h==="closed")?this.state=Ct.CLOSING:d.every(h=>h==="new")&&(this.state=Ct.NEW),c!==this.state&&(this.log.debug("pc state change: from ".concat(Ct[c]," to ").concat(Ct[this.state]),this.logContext),(l=this.onStateChange)===null||l===void 0||l.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=ia((s=a.loggerName)!==null&&s!==void 0?s:ri.PCManager),this.loggerOptions=a,this.isPublisherConnectionRequired=!i,this.isSubscriberConnectionRequired=i,this.publisher=new Bb(e,a),this.subscriber=new Bb(e,a),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=l=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,l,ni.PUBLISHER)},this.subscriber.onIceCandidate=l=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,l,ni.SUBSCRIBER)},this.subscriber.onDataChannel=l=>{var c;(c=this.onDataChannel)===null||c===void 0||c.call(this,l)},this.subscriber.onTrack=l=>{var c;(c=this.onTrack)===null||c===void 0||c.call(this,l)},this.publisher.onOffer=(l,c)=>{var d;(d=this.onPublisherOffer)===null||d===void 0||d.call(this,l,c)},this.state=Ct.NEW,this.connectionLock=new fn,this.remoteOfferLock=new fn}get logContext(){var e,i;return Object.assign({},(i=(e=this.loggerOptions).loggerContextCb)===null||i===void 0?void 0:i.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,i){return this.publisher.setRemoteDescription(e,i)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return D(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const i of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(i)}catch(a){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:a}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return D(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,i){return D(this,void 0,void 0,function*(){i===ni.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,i){return D(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const a=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(e,i))?yield this.subscriber.createAndSetAnswer():void 0}finally{a()}})}updateConfiguration(e,i){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),i&&this.triggerIceRestart()}ensurePCTransportConnection(e,i){return D(this,void 0,void 0,function*(){var a;const s=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((a=this.requiredTransports)===null||a===void 0?void 0:a.map(l=>this.ensureTransportConnected(l,e,i)))}finally{s()}})}negotiate(e){return D(this,void 0,void 0,function*(){return new Promise((i,a)=>D(this,void 0,void 0,function*(){const s=setTimeout(()=>{a("negotiation timed out")},this.peerConnectionTimeout),l=()=>{clearTimeout(s),a("negotiation aborted")};e.signal.addEventListener("abort",l),this.publisher.once(ks.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(ks.NegotiationComplete,()=>{clearTimeout(s),i()})}),yield this.publisher.negotiate(c=>{clearTimeout(s),a(c)})}))})}addPublisherTransceiver(e,i){return this.publisher.addTransceiver(e,i)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,i){return this.publisher.createDataChannel(e,i)}getConnectedAddress(e){return e===ni.PUBLISHER?this.publisher.getConnectedAddress():e===ni.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,i){return D(this,arguments,void 0,function(a,s){var l=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(a.getConnectionState()!=="connected")return new Promise((h,f)=>D(l,void 0,void 0,function*(){const p=()=>{this.log.warn("abort transport connection",this.logContext),nn.clearTimeout(v),f(new lt("room connection has been cancelled",Qe.Cancelled))};s!=null&&s.signal.aborted&&p(),s==null||s.signal.addEventListener("abort",p);const v=nn.setTimeout(()=>{s==null||s.signal.removeEventListener("abort",p),f(new lt("could not establish pc connection",Qe.InternalError))},c);for(;this.state!==Ct.CONNECTED;)if(yield xn(50),s!=null&&s.signal.aborted){f(new lt("room connection has been cancelled",Qe.Cancelled));return}nn.clearTimeout(v),s==null||s.signal.removeEventListener("abort",p),h()}))}()})}}class xt extends Error{constructor(e,i,a){super(i),this.code=e,this.message=Vb(i,xt.MAX_MESSAGE_BYTES),this.data=a?Vb(a,xt.MAX_DATA_BYTES):void 0}static fromProto(e){return new xt(e.code,e.message,e.data)}toProto(){return new dk({code:this.code,message:this.message,data:this.data})}static builtIn(e,i){return new xt(xt.ErrorCode[e],xt.ErrorMessage[e],i)}}xt.MAX_MESSAGE_BYTES=256;xt.MAX_DATA_BYTES=15360;xt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};xt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const bC=15360;function sp(t){return new TextEncoder().encode(t).length}function Vb(t,e){if(sp(t)<=e)return t;let i=0,a=t.length;const s=new TextEncoder;for(;i<a;){const l=Math.floor((i+a+1)/2);s.encode(t.slice(0,l)).length<=e?i=l:a=l-1}return t.slice(0,i)}const op=2e3;function Ou(t,e){if(!e)return 0;let i,a;return"bytesReceived"in t?(i=t.bytesReceived,a=e.bytesReceived):"bytesSent"in t&&(i=t.bytesSent,a=e.bytesSent),i===void 0||a===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(i-a)*8*1e3/(t.timestamp-e.timestamp)}const lp=typeof MediaRecorder<"u";class mL{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const pL=lp?MediaRecorder:mL;class gL extends pL{constructor(e,i){if(!lp)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),i);let a,s;const l=()=>s===void 0,c=()=>{this.removeEventListener("dataavailable",a),this.removeEventListener("stop",c),this.removeEventListener("error",d),s==null||s.close(),s=void 0},d=h=>{s==null||s.error(h),this.removeEventListener("dataavailable",a),this.removeEventListener("stop",c),this.removeEventListener("error",d),s=void 0};this.byteStream=new ReadableStream({start:h=>{s=h,a=f=>D(this,void 0,void 0,function*(){const p=yield f.data.arrayBuffer();l()||h.enqueue(new Uint8Array(p))}),this.addEventListener("dataavailable",a)},cancel:()=>{c()}}),this.addEventListener("stop",c),this.addEventListener("error",d)}}function vL(){return lp}const yL=1e3,bL=1e4;class SC extends ie{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,i,a){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=arguments.length>4?arguments[4]:void 0;super(e,i,l),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=ap(()=>D(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>D(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(ce.Ended,this)},this.reacquireTrack=!1,this.providedByUser=s,this.muteLock=new fn,this.pauseUpstreamLock=new fn,this.processorLock=new fn,this.restartLock=new fn,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),a&&(this._constraints=a)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==ie.Kind.Video)return;const{width:e,height:i}=this._mediaStreamTrack.getSettings();if(e&&i)return{width:e,height:i}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,i;return(i=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&i!==void 0?i:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,i){return D(this,void 0,void 0,function*(){var a;if(e===this._mediaStreamTrack&&!i)return;this._mediaStreamTrack&&(this.attachedElements.forEach(l=>{Ss(this._mediaStreamTrack,l)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let s;if(this.processor&&e){const l=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(ms(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),s=this.processor.processedTrack}finally{l()}}this.sender&&((a=this.sender.transport)===null||a===void 0?void 0:a.state)!=="closed"&&(yield this.sender.replaceTrack(s??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(l=>{ms(s??e,l)}))})}waitForDimensions(){return D(this,arguments,void 0,function(){var e=this;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yL;return function*(){var a;if(e.kind===ie.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((a=Un())===null||a===void 0?void 0:a.os)==="iOS"&&(yield xn(10));const s=Date.now();for(;Date.now()-s<i;){const l=e.dimensions;if(l)return l;yield xn(50)}throw new ea("unable to get track dimensions after timeout")}()})}setDeviceId(e){return D(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Ia(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Ia(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return D(this,arguments,void 0,function(){var e=this;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===ie.Source.ScreenShare)return;const{deviceId:a,groupId:s}=e._mediaStreamTrack.getSettings(),l=e.kind===ie.Kind.Audio?"audioinput":"videoinput";return i?Jt.getInstance().normalizeDeviceId(l,a,s):a}()})}mute(){return D(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return D(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,i){return D(this,void 0,void 0,function*(){if(!this.sender)throw new ea("unable to replace an unpublished track");let a,s;return typeof i=="boolean"?a=i:i!==void 0&&(a=i.userProvidedTrack,s=i.stopProcessor),this.providedByUser=a??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),s&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return D(this,void 0,void 0,function*(){this.manuallyStopped=!1;const i=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:a,facingMode:s}=e,l=eM(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const c={audio:!1,video:!1};this.kind===ie.Kind.Video?c.video=a||s?{deviceId:a,facingMode:s}:!0:c.audio=a?{deviceId:a}:!0,this.attachedElements.forEach(f=>{Ss(this.mediaStreamTrack,f)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const h=(yield navigator.mediaDevices.getUserMedia(c)).getTracks()[0];return yield h.applyConstraints(l),h.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(h),this._constraints=e,this.emit(ce.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{i()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ce.Muted:ce.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return D(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),cC()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return D(this,void 0,void 0,function*(){var e;const i=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(ce.UpstreamPaused,this);const a=Un();if((a==null?void 0:a.name)==="Safari"&&xi(a.version,"12.0")<0)throw new $m("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{i()}})}resumeUpstream(){return D(this,void 0,void 0,function*(){var e;const i=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(ce.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{i()}})}getRTCStatsReport(){return D(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return D(this,arguments,void 0,function(i){var a=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var l;const c=yield a.processorLock.lock();try{a.log.debug("setting up processor",a.logContext);const d=document.createElement(a.kind),h={kind:a.kind,track:a._mediaStreamTrack,element:d,audioContext:a.audioContext};if(yield i.init(h),a.log.debug("processor initialized",a.logContext),a.processor&&(yield a.stopProcessor()),a.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(ms(a._mediaStreamTrack,d),d.muted=!0,d.play().catch(f=>a.log.error("failed to play processor element",Object.assign(Object.assign({},a.logContext),{error:f}))),a.processor=i,a.processorElement=d,a.processor.processedTrack){for(const f of a.attachedElements)f!==a.processorElement&&s&&(Ss(a._mediaStreamTrack,f),ms(a.processor.processedTrack,f));yield(l=a.sender)===null||l===void 0?void 0:l.replaceTrack(a.processor.processedTrack)}a.emit(ce.TrackProcessorUpdate,a.processor)}finally{c()}}()})}getProcessor(){return this.processor}stopProcessor(){return D(this,arguments,void 0,function(){var e=this;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var a,s;e.processor&&(e.log.debug("stopping processor",e.logContext),(a=e.processor.processedTrack)===null||a===void 0||a.stop(),yield e.processor.destroy(),e.processor=void 0,i||((s=e.processorElement)===null||s===void 0||s.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(ce.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!vL()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(!this.localTrackRecorder)this.localTrackRecorder=new gL(this,{mimeType:"audio/webm;codecs=opus"});else{this.log.warn("preconnect buffer already started");return}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},bL)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}}class ws extends SC{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;super(e,ie.Kind.Audio,i,a,l),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>D(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let c;try{c=yield this.getSenderStats()}catch(d){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:d}));return}c&&this.prevStats&&(this._currentBitrate=Ou(c,this.prevStats)),this.prevStats=c}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(ce.AudioTrackFeatureUpdate,this,Xt.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(ce.AudioTrackFeatureUpdate,this,Xt.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=s,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return D(this,void 0,void 0,function*(){const i=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===ie.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{i()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return D(this,void 0,void 0,function*(){const i=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const a=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ia(this._constraints.deviceId);return this.source===ie.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||a)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{i()}})}restartTrack(e){return D(this,void 0,void 0,function*(){let i;if(e){const a=tp({audio:e});typeof a.audio!="boolean"&&(i=a.audio)}yield this.restart(i)})}restart(e){const i=Object.create(null,{restart:{get:()=>super.restart}});return D(this,void 0,void 0,function*(){const a=yield i.restart.call(this,e);return this.checkForSilence(),a})}startMonitor(){kn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},op)))}setProcessor(e){return D(this,void 0,void 0,function*(){var i;const a=yield this.processorLock.lock();try{if(!Ei()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const s={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(s),this.processor=e,this.processor.processedTrack&&(yield(i=this.sender)===null||i===void 0?void 0:i.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(ce.TrackProcessorUpdate,this.processor)}finally{a()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return D(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const i=yield this.sender.getStats();let a;return i.forEach(s=>{s.type==="outbound-rtp"&&(a={type:"audio",streamId:s.id,packetsSent:s.packetsSent,packetsLost:s.packetsLost,bytesSent:s.bytesSent,timestamp:s.timestamp,roundTripTime:s.roundTripTime,jitter:s.jitter})}),a})}checkForSilence(){return D(this,void 0,void 0,function*(){const e=yield hC(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(ce.AudioSilenceDetected)),e})}}function SL(t,e,i){switch(t.kind){case"audio":return new ws(t,e,!1,void 0,i);case"video":return new cu(t,e,!1,i);default:throw new ea("unsupported track type: ".concat(t.kind))}}const TL=Object.values(il),kL=Object.values(cm),CL=Object.values(ep),EL=[il.h180,il.h360],xL=[cm.h180,cm.h360],wL=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(i=>{var a,s;return new at(Math.floor(t.width/i.scaleResolutionDownBy),Math.floor(t.height/i.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(i.scaleResolutionDownBy,2)*(((a=t.encoding.maxFramerate)!==null&&a!==void 0?a:30)/((s=i.fps)!==null&&s!==void 0?s:30))))),i.fps,t.encoding.priority)}),Sm=["q","h","f"];function Tm(t,e,i,a){var s,l;let c=a==null?void 0:a.videoEncoding;t&&(c=a==null?void 0:a.screenShareEncoding);const d=a==null?void 0:a.simulcast,h=a==null?void 0:a.scalabilityMode,f=a==null?void 0:a.videoCodec;if(!c&&!d&&!h||!e||!i)return[{}];c||(c=AL(t,e,i,f),Ke.debug("using video encoding",c));const p=c.maxFramerate,v=new at(e,i,c.maxBitrate,c.maxFramerate,c.priority);if(h&&Ti(f)){const S=new TC(h),T=[];if(S.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(h));const w=Un();if(hm()||Ei()||(w==null?void 0:w.name)==="Chrome"&&xi(w==null?void 0:w.version,"113")<0){const R=S.suffix=="h"?2:3,L=DM(w);for(let N=0;N<S.spatial;N+=1)T.push({rid:Sm[2-N],maxBitrate:c.maxBitrate/Math.pow(R,N),maxFramerate:v.encoding.maxFramerate,scaleResolutionDownBy:L?Math.pow(2,N):void 0});T[0].scalabilityMode=h}else T.push({maxBitrate:c.maxBitrate,maxFramerate:v.encoding.maxFramerate,scalabilityMode:h});return v.encoding.priority&&(T[0].priority=v.encoding.priority,T[0].networkPriority=v.encoding.priority),Ke.debug("using svc encoding",{encodings:T}),T}if(!d)return[c];let y=[];t?y=(s=Hb(a==null?void 0:a.screenShareSimulcastLayers))!==null&&s!==void 0?s:qb(t,v):y=(l=Hb(a==null?void 0:a.videoSimulcastLayers))!==null&&l!==void 0?l:qb(t,v);let k;if(y.length>0){const S=y[0];y.length>1&&([,k]=y);const T=Math.max(e,i);if(T>=960&&k)return Ch(e,i,[S,k,v],p);if(T>=480)return Ch(e,i,[S,v],p)}return Ch(e,i,[v])}function RL(t,e,i){var a,s,l,c;if(!i.backupCodec||i.backupCodec===!0||i.backupCodec.codec===i.videoCodec)return;e!==i.backupCodec.codec&&Ke.warn("requested a different codec than specified as backup",{serverRequested:e,backup:i.backupCodec.codec}),i.videoCodec=e,i.videoEncoding=i.backupCodec.encoding;const d=t.mediaStreamTrack.getSettings(),h=(a=d.width)!==null&&a!==void 0?a:(s=t.dimensions)===null||s===void 0?void 0:s.width,f=(l=d.height)!==null&&l!==void 0?l:(c=t.dimensions)===null||c===void 0?void 0:c.height;return t.source===ie.Source.ScreenShare&&i.simulcast&&(i.simulcast=!1),Tm(t.source===ie.Source.ScreenShare,h,f,i)}function AL(t,e,i,a){const s=_L(t,e,i);let{encoding:l}=s[0];const c=Math.max(e,i);for(let d=0;d<s.length;d+=1){const h=s[d];if(l=h.encoding,h.width>=c)break}if(a)switch(a){case"av1":l=Object.assign({},l),l.maxBitrate=l.maxBitrate*.7;break;case"vp9":l=Object.assign({},l),l.maxBitrate=l.maxBitrate*.85;break}return l}function _L(t,e,i){if(t)return CL;const a=e>i?e/i:i/e;return Math.abs(a-16/9)<Math.abs(a-4/3)?TL:kL}function qb(t,e){if(t)return wL(e);const{width:i,height:a}=e,s=i>a?i/a:a/i;return Math.abs(s-16/9)<Math.abs(s-4/3)?EL:xL}function Ch(t,e,i,a){const s=[];if(i.forEach((l,c)=>{if(c>=Sm.length)return;const d=Math.min(t,e),f={rid:Sm[c],scaleResolutionDownBy:Math.max(1,d/Math.min(l.width,l.height)),maxBitrate:l.encoding.maxBitrate},p=a&&l.encoding.maxFramerate?Math.min(a,l.encoding.maxFramerate):l.encoding.maxFramerate;p&&(f.maxFramerate=p);const v=Es()||c===0;l.encoding.priority&&v&&(f.priority=l.encoding.priority,f.networkPriority=l.encoding.priority),s.push(f)}),Ei()&&dC()==="ios"){let l;s.forEach(d=>{l?d.maxFramerate&&d.maxFramerate>l&&(l=d.maxFramerate):l=d.maxFramerate});let c=!0;s.forEach(d=>{var h;d.maxFramerate!=l&&(c&&(c=!1,Ke.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Ke.info('Setting framerate of encoding "'.concat((h=d.rid)!==null&&h!==void 0?h:"",'" to ').concat(l)),d.maxFramerate=l)})}return s}function Hb(t){if(t)return t.sort((e,i)=>{const{encoding:a}=e,{encoding:s}=i;return a.maxBitrate>s.maxBitrate?1:a.maxBitrate<s.maxBitrate?-1:a.maxBitrate===s.maxBitrate&&a.maxFramerate&&s.maxFramerate?a.maxFramerate>s.maxFramerate?1:-1:0})}class TC{constructor(e){const i=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!i)throw new Error("invalid scalability mode");if(this.spatial=parseInt(i[1]),this.temporal=parseInt(i[2]),i.length>3)switch(i[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=i[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function OL(t){return t.source===ie.Source.ScreenShare||t.constraints.height&&Ia(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const NL=5e3;class cu extends SC{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3?arguments[3]:void 0;super(e,ie.Kind.Video,i,a,s),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>D(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let l;try{l=yield this.getSenderStats()}catch(h){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:h}));return}const c=new Map(l.map(h=>[h.rid,h])),d=l.some(h=>h.qualityLimitationReason==="cpu");if(d!==this.isCpuConstrained&&(this.isCpuConstrained=d,this.isCpuConstrained&&this.emit(ce.CpuConstrained)),this.prevStats){let h=0;c.forEach((f,p)=>{var v;const y=(v=this.prevStats)===null||v===void 0?void 0:v.get(p);h+=Ou(f,y)}),this._currentBitrate=h}this.prevStats=c}),this.senderLock=new fn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var i;if(this.signalClient=e,!kn())return;const a=(i=this.sender)===null||i===void 0?void 0:i.getParameters();a&&(this.encodings=a.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},op))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return D(this,void 0,void 0,function*(){var i,a,s,l,c;yield e.pauseUpstream.call(this);try{for(var d=!0,h=$i(this.simulcastCodecs.values()),f;f=yield h.next(),i=f.done,!i;d=!0)l=f.value,d=!1,yield(c=l.sender)===null||c===void 0?void 0:c.replaceTrack(null)}catch(p){a={error:p}}finally{try{!d&&!i&&(s=h.return)&&(yield s.call(h))}finally{if(a)throw a.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return D(this,void 0,void 0,function*(){var i,a,s,l,c;yield e.resumeUpstream.call(this);try{for(var d=!0,h=$i(this.simulcastCodecs.values()),f;f=yield h.next(),i=f.done,!i;d=!0){l=f.value,d=!1;const p=l;yield(c=p.sender)===null||c===void 0?void 0:c.replaceTrack(p.mediaStreamTrack)}}catch(p){a={error:p}}finally{try{!d&&!i&&(s=h.return)&&(yield s.call(h))}finally{if(a)throw a.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return D(this,void 0,void 0,function*(){const i=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===ie.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{i()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return D(this,void 0,void 0,function*(){const i=yield this.muteLock.lock();try{return this.isMuted?(this.source===ie.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{i()}})}setTrackMuted(e){super.setTrackMuted(e);for(const i of this.simulcastCodecs.values())i.mediaStreamTrack.enabled=!e}getSenderStats(){return D(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const i=[],a=yield this.sender.getStats();return a.forEach(s=>{var l;if(s.type==="outbound-rtp"){const c={type:"video",streamId:s.id,frameHeight:s.frameHeight,frameWidth:s.frameWidth,framesPerSecond:s.framesPerSecond,framesSent:s.framesSent,firCount:s.firCount,pliCount:s.pliCount,nackCount:s.nackCount,packetsSent:s.packetsSent,bytesSent:s.bytesSent,qualityLimitationReason:s.qualityLimitationReason,qualityLimitationDurations:s.qualityLimitationDurations,qualityLimitationResolutionChanges:s.qualityLimitationResolutionChanges,rid:(l=s.rid)!==null&&l!==void 0?l:s.id,retransmittedPacketsSent:s.retransmittedPacketsSent,targetBitrate:s.targetBitrate,timestamp:s.timestamp},d=a.get(s.remoteId);d&&(c.jitter=d.jitter,c.packetsLost=d.packetsLost,c.roundTripTime=d.roundTripTime),i.push(c)}}),i.sort((s,l)=>{var c,d;return((c=l.frameWidth)!==null&&c!==void 0?c:0)-((d=s.frameWidth)!==null&&d!==void 0?d:0)}),i})}setPublishingQuality(e){const i=[];for(let a=Yn.LOW;a<=Yn.HIGH;a+=1)i.push(new Jm({quality:a,enabled:a<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(Ti(this.codec),i)}restartTrack(e){return D(this,void 0,void 0,function*(){var i,a,s,l,c;let d;if(e){const v=tp({video:e});typeof v.video!="boolean"&&(d=v.video)}yield this.restart(d),this.isCpuConstrained=!1;try{for(var h=!0,f=$i(this.simulcastCodecs.values()),p;p=yield f.next(),i=p.done,!i;h=!0){l=p.value,h=!1;const v=l;v.sender&&((c=v.sender.transport)===null||c===void 0?void 0:c.state)!=="closed"&&(v.mediaStreamTrack=this.mediaStreamTrack.clone(),yield v.sender.replaceTrack(v.mediaStreamTrack))}}catch(v){a={error:v}}finally{try{!h&&!i&&(s=f.return)&&(yield s.call(f))}finally{if(a)throw a.error}}})}setProcessor(e){const i=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return D(this,arguments,void 0,function(a){var s=this;let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var c,d,h,f,p,v;if(yield i.setProcessor.call(s,a,l),!((p=s.processor)===null||p===void 0)&&p.processedTrack)try{for(var y=!0,k=$i(s.simulcastCodecs.values()),S;S=yield k.next(),c=S.done,!c;y=!0)f=S.value,y=!1,yield(v=f.sender)===null||v===void 0?void 0:v.replaceTrack(s.processor.processedTrack)}catch(T){d={error:T}}finally{try{!y&&!c&&(h=k.return)&&(yield h.call(k))}finally{if(d)throw d.error}}}()})}setDegradationPreference(e){return D(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const i=this.sender.getParameters();i.degradationPreference=e,this.sender.setParameters(i)}catch(i){this.log.warn("failed to set degradationPreference",Object.assign({error:i},this.logContext))}})}addSimulcastTrack(e,i){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const a={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:i};return this.simulcastCodecs.set(e,a),a}setSimulcastTrackSender(e,i){const a=this.simulcastCodecs.get(e);a&&(a.sender=i,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},NL))}setPublishingCodecs(e){return D(this,void 0,void 0,function*(){var i,a,s,l,c,d,h;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(Ti(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const f=[];try{for(i=!0,a=$i(e);s=yield a.next(),l=s.done,!l;i=!0){h=s.value,i=!1;const p=h;if(!this.codec||this.codec===p.codec)yield this.setPublishingLayers(Ti(p.codec),p.qualities);else{const v=this.simulcastCodecs.get(p.codec);if(this.log.debug("try setPublishingCodec for ".concat(p.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:v})),!v||!v.sender){for(const y of p.qualities)if(y.enabled){f.push(p.codec);break}}else v.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(p.codec),this.logContext),yield Gb(v.sender,v.encodings,p.qualities,this.senderLock,Ti(p.codec),this.log,this.logContext))}}}catch(p){c={error:p}}finally{try{!i&&!l&&(d=a.return)&&(yield d.call(a))}finally{if(c)throw c.error}}return f})}setPublishingLayers(e,i){return D(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:i}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:i})),!(!this.sender||!this.encodings)&&(yield Gb(this.sender,this.encodings,i,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return D(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const i=this.sender.getParameters();i.encodings=i.encodings.map((a,s)=>{var l;return Object.assign(Object.assign({},a),{active:s===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((l=this.mediaStreamTrack.getSettings().height)!==null&&l!==void 0?l:360)/360)),scalabilityMode:s===0&&Ti(this.codec)?"L1T3":void 0,maxFramerate:s===0?15:0,maxBitrate:s===0?a.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:i.encodings})),this.encodings=i.encodings,yield this.sender.setParameters(i)}catch(i){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:i})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return D(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),cC()&&this.isInBackground&&this.source===ie.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Gb(t,e,i,a,s,l,c){return D(this,void 0,void 0,function*(){const d=yield a.lock();l.debug("setPublishingLayersForSender",Object.assign(Object.assign({},c),{sender:t,qualities:i,senderEncodings:e}));try{const h=t.getParameters(),{encodings:f}=h;if(!f)return;if(f.length!==e.length){l.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},c),{encodings:f,senderEncodings:e}));return}let p=!1;!1&&f[0].scalabilityMode||(s&&i.some(k=>k.enabled)&&i.forEach(k=>k.enabled=!0),f.forEach((y,k)=>{var S;let T=(S=y.rid)!==null&&S!==void 0?S:"";T===""&&(T="q");const w=kC(T),R=i.find(L=>L.quality===w);R&&y.active!==R.enabled&&(p=!0,y.active=R.enabled,l.debug("setting layer ".concat(R.quality," to ").concat(y.active?"enabled":"disabled"),c),Es()&&(R.enabled?(y.scaleResolutionDownBy=e[k].scaleResolutionDownBy,y.maxBitrate=e[k].maxBitrate,y.maxFrameRate=e[k].maxFrameRate):(y.scaleResolutionDownBy=4,y.maxBitrate=10,y.maxFrameRate=2)))})),p&&(h.encodings=f,l.debug("setting encodings",Object.assign(Object.assign({},c),{encodings:h.encodings})),yield t.setParameters(h))}finally{d()}})}function kC(t){switch(t){case"f":return Yn.HIGH;case"h":return Yn.MEDIUM;case"q":return Yn.LOW;default:return Yn.HIGH}}function Kb(t,e,i,a){if(!i)return[new ur({quality:Yn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(a){const s=i[0].scalabilityMode,l=new TC(s),c=[],d=l.suffix=="h"?1.5:2,h=l.suffix=="h"?2:3;for(let f=0;f<l.spatial;f+=1)c.push(new ur({quality:Math.min(Yn.HIGH,l.spatial-1)-f,width:Math.ceil(t/Math.pow(d,f)),height:Math.ceil(e/Math.pow(d,f)),bitrate:i[0].maxBitrate?Math.ceil(i[0].maxBitrate/Math.pow(h,f)):0,ssrc:0}));return c}return i.map(s=>{var l,c,d;const h=(l=s.scaleResolutionDownBy)!==null&&l!==void 0?l:1;let f=kC((c=s.rid)!==null&&c!==void 0?c:"");return new ur({quality:f,width:Math.ceil(t/h),height:Math.ceil(e/h),bitrate:(d=s.maxBitrate)!==null&&d!==void 0?d:0,ssrc:0})})}const Yb="_lossy",Qb="_reliable",DL=2*1e3,Eh="leave-reconnect",PL=3e4;var $n;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})($n||($n={}));class ML extends Ai.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var i;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=rp.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=$n.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Ke,this.reliableDataSequence=1,this.reliableMessageBuffer=new Mb,this.reliableReceivedState=new aL(PL),this.handleDataChannel=a=>D(this,[a],void 0,function(s){var l=this;let{channel:c}=s;return function*(){if(c){if(c.label===Qb)l.reliableDCSub=c;else if(c.label===Yb)l.lossyDCSub=c;else return;l.log.debug("on data channel ".concat(c.id,", ").concat(c.label),l.logContext),c.onmessage=l.handleDataMessage}}()}),this.handleDataMessage=a=>D(this,void 0,void 0,function*(){var s,l;const c=yield this.dataProcessLock.lock();try{let d;if(a.data instanceof ArrayBuffer)d=a.data;else if(a.data instanceof Blob)d=yield a.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:a.data}));return}const h=bn.fromBinary(new Uint8Array(d));if(h.sequence>0&&h.participantSid!==""){const f=this.reliableReceivedState.get(h.participantSid);if(f&&h.sequence<=f)return;this.reliableReceivedState.set(h.participantSid,h.sequence)}((s=h.value)===null||s===void 0?void 0:s.case)==="speaker"?this.emit(he.ActiveSpeakersUpdate,h.value.value.speakers):(((l=h.value)===null||l===void 0?void 0:l.case)==="user"&&UL(h,h.value.value),this.emit(he.DataPacketReceived,h))}finally{c()}}),this.handleDataError=a=>{const l=a.currentTarget.maxRetransmits===0?"lossy":"reliable";if(a instanceof ErrorEvent&&a.error){const{error:c}=a.error;this.log.error("DataChannel error on ".concat(l,": ").concat(a.message),Object.assign(Object.assign({},this.logContext),{error:c}))}else this.log.error("Unknown DataChannel error on ".concat(l),Object.assign(Object.assign({},this.logContext),{event:a}))},this.handleBufferedAmountLow=a=>{const l=a.currentTarget.maxRetransmits===0?Be.LOSSY:Be.RELIABLE;this.updateAndEmitDCBufferStatus(l)},this.handleDisconnect=(a,s)=>{if(this._isClosed)return;this.log.warn("".concat(a," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const l=h=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(h,"ms. giving up"),this.logContext),this.emit(he.Disconnected),this.close()},c=Date.now()-this.reconnectStart;let d=this.getNextRetryDelay({elapsedMs:c,retryCount:this.reconnectAttempts});if(d===null){l(c);return}a===Eh&&(d=0),this.log.debug("reconnecting in ".concat(d,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=nn.setTimeout(()=>this.attemptReconnect(s).finally(()=>this.reconnectTimeout=void 0),d)},this.waitForRestarted=()=>new Promise((a,s)=>{this.pcState===$n.Connected&&a();const l=()=>{this.off(he.Disconnected,c),a()},c=()=>{this.off(he.Restarted,l),s()};this.once(he.Restarted,l),this.once(he.Disconnected,c)}),this.updateAndEmitDCBufferStatus=a=>{const s=this.isBufferStatusLow(a);typeof s<"u"&&s!==this.dcBufferStatus.get(a)&&(this.dcBufferStatus.set(a,s),this.emit(he.DCBufferStatusChanged,s,a))},this.isBufferStatusLow=a=>{const s=this.dataChannelForKind(a);if(s)return a===Be.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(s.bufferedAmount),s.bufferedAmount<=s.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===dt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(ds.RR_SIGNAL_DISCONNECTED))},this.log=ia((i=e.loggerName)!==null&&i!==void 0?i:ri.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new np(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new fn,this.dataProcessLock=new fn,this.dcBufferStatus=new Map([[Be.LOSSY,!0],[Be.RELIABLE,!0]]),this.client.onParticipantUpdate=a=>this.emit(he.ParticipantUpdate,a),this.client.onConnectionQuality=a=>this.emit(he.ConnectionQualityUpdate,a),this.client.onRoomUpdate=a=>this.emit(he.RoomUpdate,a),this.client.onSubscriptionError=a=>this.emit(he.SubscriptionError,a),this.client.onSubscriptionPermissionUpdate=a=>this.emit(he.SubscriptionPermissionUpdate,a),this.client.onSpeakersChanged=a=>this.emit(he.SpeakersChanged,a),this.client.onStreamStateUpdate=a=>this.emit(he.StreamStateChanged,a),this.client.onRequestResponse=a=>this.emit(he.SignalRequestResponse,a)}get logContext(){var e,i,a,s,l,c;return{room:(i=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||i===void 0?void 0:i.name,roomID:(s=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.room)===null||s===void 0?void 0:s.sid,participant:(c=(l=this.latestJoinResponse)===null||l===void 0?void 0:l.participant)===null||c===void 0?void 0:c.identity,pID:this.participantSid}}join(e,i,a,s){return D(this,void 0,void 0,function*(){this.url=e,this.token=i,this.signalOpts=a,this.maxJoinAttempts=a.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const l=yield this.client.join(e,i,a,s);return this._isClosed=!1,this.latestJoinResponse=l,this.subscriberPrimary=l.subscriberPrimary,this.pcManager||(yield this.configure(l)),(!this.subscriberPrimary||l.fastPublish)&&this.negotiate(),this.clientConfiguration=l.clientConfiguration,this.emit(he.SignalConnected,l),l}catch(l){if(l instanceof lt&&l.reason===Qe.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,i,a,s);throw l}})}close(){return D(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(he.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return D(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const i=a=>{a&&(a.close(),a.onbufferedamountlow=null,a.onclose=null,a.onclosing=null,a.onerror=null,a.onmessage=null,a.onopen=null)};i(this.lossyDC),i(this.lossyDCSub),i(this.reliableDC),i(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new Mb,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return D(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new ea("a track with the same ID has already been published");return new Promise((i,a)=>{const s=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],a(new lt("publication of local track timed out, no response from server",Qe.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:l=>{clearTimeout(s),i(l)},reject:()=>{clearTimeout(s),a(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:i}=this.pendingTrackResolvers[e.track.id];i&&i(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(i){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:i}))}return!1}updateMuteStatus(e,i){this.client.sendMuteTrack(e,i)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return D(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return D(this,void 0,void 0,function*(){var i,a;if(this.pcManager&&this.pcManager.currentState!==Ct.NEW)return;this.participantSid=(i=e.participant)===null||i===void 0?void 0:i.sid;const s=this.makeRTCConfiguration(e);this.pcManager=new hL(s,e.subscriberPrimary,this.loggerOptions),this.emit(he.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(l,c)=>{this.client.sendIceCandidate(l,c)},this.pcManager.onPublisherOffer=(l,c)=>{this.client.sendOffer(l,c)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(l,c,d)=>D(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(l),this.logContext),["closed","disconnected","failed"].includes(c)&&(this.publisherConnectionPromise=void 0),l===Ct.CONNECTED){const p=this.pcState===$n.New;this.pcState=$n.Connected,p&&this.emit(he.Connected,e)}else l===Ct.FAILED&&this.pcState===$n.Connected&&(this.pcState=$n.Disconnected,this.handleDisconnect("peerconnection failed",d==="failed"?ds.RR_SUBSCRIBER_FAILED:ds.RR_PUBLISHER_FAILED));const h=this.client.isDisconnected||this.client.currentState===dt.RECONNECTING,f=[Ct.FAILED,Ct.CLOSING,Ct.CLOSED].includes(l);h&&f&&!this._isClosed&&this.emit(he.Offline)}),this.pcManager.onTrack=l=>{this.emit(he.MediaTrackAdded,l.track,l.streams[0],l.receiver)},LL((a=e.serverInfo)===null||a===void 0?void 0:a.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,i)=>D(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e,i))}),this.client.onTrickle=(e,i)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:i})),this.pcManager.addIceCandidate(e,i))},this.client.onOffer=(e,i)=>D(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=i,!this.pcManager)return;const a=yield this.pcManager.createSubscriberAnswerFromOffer(e,i);a&&this.client.sendAnswer(a,i)}),this.client.onLocalTrackPublished=e=>{var i;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(i=e.track)===null||i===void 0?void 0:i.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:a}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],a(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(he.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(he.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,i)=>{this.emit(he.RemoteMute,e,i)},this.client.onSubscribedQualityUpdate=e=>{this.emit(he.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var i;this.participantSid=(i=e.participant)===null||i===void 0?void 0:i.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(he.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",ds.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case ys.DISCONNECT:this.emit(he.Disconnected,e==null?void 0:e.reason),this.close();break;case ys.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Eh);break;case ys.RESUME:this.handleDisconnect(Eh)}}}makeRTCConfiguration(e){var i;const a=Object.assign({},this.rtcConfig);if(!((i=this.signalOpts)===null||i===void 0)&&i.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),a.encodedInsertableStreams=!0),e.iceServers&&!a.iceServers){const s=[];e.iceServers.forEach(l=>{const c={urls:l.urls};l.username&&(c.username=l.username),l.credential&&(c.credential=l.credential),s.push(c)}),a.iceServers=s}return e.clientConfiguration&&e.clientConfiguration.forceRelay===tl.ENABLED&&(a.iceTransportPolicy="relay"),a.sdpSemantics="unified-plan",a.continualGatheringPolicy="gather_continually",a}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Yb,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Qb,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,i,a){return D(this,void 0,void 0,function*(){if(um())return yield this.createTransceiverRTCRtpSender(e,i,a);if(dm())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Vt("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,i,a,s){return D(this,void 0,void 0,function*(){if(um())return this.createSimulcastTransceiverSender(e,i,a,s);if(dm())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Vt("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,i,a){return D(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("publisher is closed");const s=[];e.mediaStream&&s.push(e.mediaStream),vr(e)&&(e.codec=i.videoCodec);const l={direction:"sendonly",streams:s};return a&&(l.sendEncodings=a),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,l)).sender})}createSimulcastTransceiverSender(e,i,a,s){return D(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("publisher is closed");const l={direction:"sendonly"};s&&(l.sendEncodings=s);const c=yield this.pcManager.addPublisherTransceiver(i.mediaStreamTrack,l);if(a.videoCodec)return e.setSimulcastTrackSender(a.videoCodec,c.sender),c.sender})}createRTCRtpSender(e){return D(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return D(this,void 0,void 0,function*(){var i,a,s;if(!this._isClosed){if(this.attemptingReconnect){Ke.warn("already attempting reconnect, returning early",this.logContext);return}(((i=this.clientConfiguration)===null||i===void 0?void 0:i.resumeConnection)===tl.DISABLED||((s=(a=this.pcManager)===null||a===void 0?void 0:a.currentState)!==null&&s!==void 0?s:Ct.NEW)===Ct.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(l){this.reconnectAttempts+=1;let c=!0;l instanceof Vt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:l})),c=!1):l instanceof fs||(this.fullReconnectOnNext=!0),c?this.handleDisconnect("reconnect",ds.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(he.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(i){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:i}))}return null}restartConnection(e){return D(this,void 0,void 0,function*(){var i,a,s;try{if(!this.url||!this.token)throw new Vt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(he.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let l;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new fs;l=yield this.join(e??this.url,this.token,this.signalOpts)}catch(c){throw c instanceof lt&&c.reason===Qe.NotAllowed?new Vt("could not reconnect, token might be expired"):new fs}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(he.SignalRestarted,l),yield this.waitForPCReconnected(),this.client.currentState!==dt.CONNECTED)throw new fs("Signal connection got severed during reconnect");(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),this.emit(he.Restarted)}catch(l){const c=yield(a=this.regionUrlProvider)===null||a===void 0?void 0:a.getNextBestRegionUrl();if(c){yield this.restartConnection(c);return}else throw(s=this.regionUrlProvider)===null||s===void 0||s.resetAttempts(),l}})}resumeConnection(e){return D(this,void 0,void 0,function*(){var i;if(!this.url||!this.token)throw new Vt("could not reconnect, url or token not saved");if(!this.pcManager)throw new Vt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(he.Resuming);let a;try{this.setupSignalClientCallbacks(),a=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(s){let l="";throw s instanceof Error&&(l=s.message,this.log.error(s.message,Object.assign(Object.assign({},this.logContext),{error:s}))),s instanceof lt&&s.reason===Qe.NotAllowed?new Vt("could not reconnect, token might be expired"):s instanceof lt&&s.reason===Qe.LeaveRequest?s:new fs(l)}if(this.emit(he.SignalResumed),a){const s=this.makeRTCConfiguration(a);this.pcManager.updateConfiguration(s),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=a.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==dt.CONNECTED)throw new fs("Signal connection got severed during reconnect");this.client.setReconnected(),((i=this.reliableDC)===null||i===void 0?void 0:i.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),a!=null&&a.lastMessageSeq&&this.resendReliableMessagesForResume(a.lastMessageSeq),this.emit(he.Resumed)})}waitForPCInitialConnection(e,i){return D(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(i,e)})}waitForPCReconnected(){return D(this,void 0,void 0,function*(){this.pcState=$n.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield xn(DL),!this.pcManager)throw new Vt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=$n.Connected}catch(e){throw this.pcState=$n.Disconnected,new lt("could not establish PC connection, ".concat(e.message),Qe.InternalError)}})}publishRpcResponse(e,i,a,s){return D(this,void 0,void 0,function*(){const l=new bn({destinationIdentities:[e],kind:Be.RELIABLE,value:{case:"rpcResponse",value:new uk({requestId:i,value:s?{case:"error",value:s.toProto()}:{case:"payload",value:a??""}})}});yield this.sendDataPacket(l,Be.RELIABLE)})}publishRpcAck(e,i){return D(this,void 0,void 0,function*(){const a=new bn({destinationIdentities:[e],kind:Be.RELIABLE,value:{case:"rpcAck",value:new ck({requestId:i})}});yield this.sendDataPacket(a,Be.RELIABLE)})}sendDataPacket(e,i){return D(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(i),i===Be.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const a=e.toBinary(),s=this.dataChannelForKind(i);if(s){if(i===Be.RELIABLE&&this.reliableMessageBuffer.push({data:a,sequence:e.sequence}),this.attemptingReconnect)return;s.send(a)}this.updateAndEmitDCBufferStatus(i)})}resendReliableMessagesForResume(e){return D(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(Be.RELIABLE);const i=this.dataChannelForKind(Be.RELIABLE);i&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(a=>{i.send(a.data)})),this.updateAndEmitDCBufferStatus(Be.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((i,a)=>D(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))i();else{const s=()=>a("Engine closed");for(this.once(he.Closing,s);!this.dcBufferStatus.get(e);)yield xn(10);this.off(he.Closing,s),i()}}))}ensureDataTransportConnected(e){return D(this,arguments,void 0,function(i){var a=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var l;if(!a.pcManager)throw new Vt("PC manager is closed");const c=s?a.pcManager.subscriber:a.pcManager.publisher,d=s?"Subscriber":"Publisher";if(!c)throw new lt("".concat(d," connection not set"),Qe.InternalError);let h=!1;!s&&!a.dataChannelForKind(i,s)&&(a.createDataChannels(),h=!0),!h&&!s&&!a.pcManager.publisher.isICEConnected&&a.pcManager.publisher.getICEConnectionState()!=="checking"&&(h=!0),h&&a.negotiate();const f=a.dataChannelForKind(i,s);if((f==null?void 0:f.readyState)==="open")return;const p=new Date().getTime()+a.peerConnectionTimeout;for(;new Date().getTime()<p;){if(c.isICEConnected&&((l=a.dataChannelForKind(i,s))===null||l===void 0?void 0:l.readyState)==="open")return;yield xn(50)}throw new lt("could not establish ".concat(d," connection, state: ").concat(c.getICEConnectionState()),Qe.InternalError)}()})}ensurePublisherConnected(e){return D(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Ct.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return D(this,void 0,void 0,function*(){return new Promise((e,i)=>D(this,void 0,void 0,function*(){if(!this.pcManager){i(new om("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const a=new AbortController,s=()=>{a.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&i("cannot negotiate on closed engine"),this.on(he.Closing,s),this.pcManager.publisher.once(ks.RTPVideoPayloadTypes,l=>{const c=new Map;l.forEach(d=>{const h=d.codec.toLowerCase();IM(h)&&c.set(d.payload,h)}),this.emit(he.RTPVideoMapUpdate,c)});try{yield this.pcManager.negotiate(a),e()}catch(l){l instanceof om&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ds.RR_UNKNOWN),i(l)}finally{this.off(he.Closing,s)}}))})}dataChannelForKind(e,i){if(i){if(e===Be.LOSSY)return this.lossyDCSub;if(e===Be.RELIABLE)return this.reliableDCSub}else{if(e===Be.LOSSY)return this.lossyDC;if(e===Be.RELIABLE)return this.reliableDC}}sendSyncState(e,i){var a,s;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const l=this.pcManager.subscriber.getLocalDescription(),c=this.pcManager.subscriber.getRemoteDescription(),d=(s=(a=this.signalOpts)===null||a===void 0?void 0:a.autoSubscribe)!==null&&s!==void 0?s:!0,h=new Array,f=new Array;e.forEach(p=>{p.isDesired!==d&&h.push(p.trackSid),p.isEnabled||f.push(p.trackSid)}),this.client.sendSyncState(new Rk({answer:l?lu({sdp:l.sdp,type:l.type}):void 0,offer:c?lu({sdp:c.sdp,type:c.type}):void 0,subscription:new Ru({trackSids:h,subscribe:!d,participantTracks:[]}),publishTracks:KM(i),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:f,datachannelReceiveStates:this.reliableReceivedState.map((p,v)=>new Ak({publisherSid:v,lastSeq:p}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],i=(a,s)=>{(a==null?void 0:a.id)!==void 0&&a.id!==null&&e.push(new _k({label:a.label,id:a.id,target:s}))};return i(this.dataChannelForKind(Be.LOSSY),ni.PUBLISHER),i(this.dataChannelForKind(Be.RELIABLE),ni.PUBLISHER),i(this.dataChannelForKind(Be.LOSSY,!0),ni.SUBSCRIBER),i(this.dataChannelForKind(Be.RELIABLE,!0),ni.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&nn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){kn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){kn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class fs extends Error{}function LL(t){return t!==void 0&&t>13}function UL(t,e){const i=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=i,e.participantIdentity=i;const a=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=a,e.destinationIdentities=a}class km{constructor(e,i){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=i}updateToken(e){this.token=e}isCloud(){return mm(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return D(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const i=this.regionSettings.regions.filter(a=>!this.attemptedRegions.find(s=>s.url===a.url));if(i.length>0){const a=i[0];return this.attemptedRegions.push(a),Ke.debug("next region: ".concat(a.region)),a.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return D(this,void 0,void 0,function*(){const i=yield fetch("".concat(IL(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(i.ok){const a=yield i.json();return this.lastUpdateAt=Date.now(),a}else throw new lt("Could not fetch region settings: ".concat(i.statusText),i.status===401?Qe.NotAllowed:Qe.InternalError,i.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function IL(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class CC{get info(){return this._info}constructor(e,i,a){this.reader=i,this.totalByteSize=a,this._info=e,this.bytesReceived=0}}class jL extends CC{handleChunkReceived(e){var i;this.bytesReceived+=e.content.byteLength;const a=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(i=this.onProgress)===null||i===void 0||i.call(this,a)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>D(this,void 0,void 0,function*(){try{const{done:i,value:a}=yield e.read();return i?{done:!0,value:void 0}:(this.handleChunkReceived(a),{done:!1,value:a.content})}catch{return{done:!0,value:void 0}}}),return(){return D(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return D(this,void 0,void 0,function*(){var e,i,a,s;let l=new Set;try{for(var c=!0,d=$i(this),h;h=yield d.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const f=s;l.add(f)}}catch(f){i={error:f}}finally{try{!c&&!e&&(a=d.return)&&(yield a.call(d))}finally{if(i)throw i.error}}return Array.from(l)})}}class BL extends CC{constructor(e,i,a){super(e,i,a),this.receivedChunks=new Map}handleChunkReceived(e){var i;const a=Wc(e.chunkIndex),s=this.receivedChunks.get(a);if(s&&s.version>e.version)return;this.receivedChunks.set(a,e),this.bytesReceived+=e.content.byteLength;const l=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(i=this.onProgress)===null||i===void 0||i.call(this,l)}[Symbol.asyncIterator](){const e=this.reader.getReader(),i=new TextDecoder;return{next:()=>D(this,void 0,void 0,function*(){try{const{done:a,value:s}=yield e.read();return a?{done:!0,value:void 0}:(this.handleChunkReceived(s),{done:!1,value:i.decode(s.content)})}catch{return{done:!0,value:void 0}}}),return(){return D(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return D(this,void 0,void 0,function*(){var e,i,a,s;let l="";try{for(var c=!0,d=$i(this),h;h=yield d.next(),e=h.done,!e;c=!0)s=h.value,c=!1,l+=s}catch(f){i={error:f}}finally{try{!c&&!e&&(a=d.return)&&(yield a.call(d))}finally{if(i)throw i.error}}return l})}}class EC{constructor(e,i,a){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=a,this.info=i}write(e){return this.defaultWriter.write(e)}close(){return D(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class zL extends EC{}class FL extends EC{}class xC extends ie{constructor(e,i,a,s,l){super(e,a,l),this.sid=i,this.receiver=s}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ce.Muted:ce.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const i=a=>{a.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",i),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(ce.Ended,this))};e.addEventListener("removetrack",i)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return D(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),op)),YM()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var i;this.timeSyncHandle=requestAnimationFrame(()=>e());const a=(i=this.receiver)===null||i===void 0?void 0:i.getSynchronizationSources()[0];if(a){const{timestamp:s,rtpTimestamp:l}=a;l&&this.rtpTimestamp!==l&&(this.emit(ce.TimeSyncUpdate,{timestamp:s,rtpTimestamp:l}),this.rtpTimestamp=l)}};e()}}class VL extends xC{constructor(e,i,a,s,l,c){super(e,i,ie.Kind.Audio,a,c),this.monitorReceiver=()=>D(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const d=yield this.getReceiverStats();d&&this.prevStats&&this.receiver&&(this._currentBitrate=Ou(d,this.prevStats)),this.prevStats=d}),this.audioContext=s,this.webAudioPluginNodes=[],l&&(this.sinkId=l.deviceId)}setVolume(e){var i;for(const a of this.attachedElements)this.audioContext?(i=this.gainNode)===null||i===void 0||i.gain.setTargetAtTime(e,0,.1):a.volume=e;Ei()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Ei())return 1;let e=0;return this.attachedElements.forEach(i=>{i.volume>e&&(e=i.volume)}),e}setSinkId(e){return D(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(i=>{if(fm(i))return i.setSinkId(e)}))})}attach(e){const i=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&fm(e)&&e.setSinkId(this.sinkId).catch(a=>{this.log.error("Failed to set sink id on remote audio track",a,this.logContext)}),this.audioContext&&i&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let i;return e?(i=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(i=super.detach(),this.disconnectWebAudio()),i}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,i){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(i.srcObject);let a=this.sourceNode;this.webAudioPluginNodes.forEach(s=>{a.connect(s),a=s}),this.gainNode=e.createGain(),a.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(ce.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(s=>{this.emit(ce.AudioPlaybackFailed,s)})}disconnectWebAudio(){var e,i;(e=this.gainNode)===null||e===void 0||e.disconnect(),(i=this.sourceNode)===null||i===void 0||i.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return D(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let i;return e.forEach(a=>{a.type==="inbound-rtp"&&(i={type:"audio",streamId:a.id,timestamp:a.timestamp,jitter:a.jitter,bytesReceived:a.bytesReceived,concealedSamples:a.concealedSamples,concealmentEvents:a.concealmentEvents,silentConcealedSamples:a.silentConcealedSamples,silentConcealmentEvents:a.silentConcealmentEvents,totalAudioEnergy:a.totalAudioEnergy,totalSamplesDuration:a.totalSamplesDuration})}),i})}}const xh=100;class qL extends xC{constructor(e,i,a,s,l){super(e,i,ie.Kind.Video,a,l),this.elementInfos=[],this.monitorReceiver=()=>D(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const c=yield this.getReceiverStats();c&&this.prevStats&&this.receiver&&(this._currentBitrate=Ou(c,this.prevStats)),this.prevStats=c}),this.debouncedHandleResize=ap(()=>{this.updateDimensions()},xh),this.adaptiveStreamSettings=s}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(i=>{e?Ss(this._mediaStreamTrack,i):ms(this._mediaStreamTrack,i)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(i=>i.element===e)===void 0){const i=new HL(e);this.observeElementInfo(i)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(i=>i===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const i=this.elementInfos.filter(a=>a===e);for(const a of i)a.stopObserving();this.elementInfos=this.elementInfos.filter(a=>a!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let i=[];if(e)return this.stopObservingElement(e),super.detach(e);i=super.detach();for(const a of i)this.stopObservingElement(a);return i}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return D(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let i,a="",s=new Map;return e.forEach(l=>{l.type==="inbound-rtp"?(a=l.codecId,i={type:"video",streamId:l.id,framesDecoded:l.framesDecoded,framesDropped:l.framesDropped,framesReceived:l.framesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,frameWidth:l.frameWidth,frameHeight:l.frameHeight,pliCount:l.pliCount,firCount:l.firCount,nackCount:l.nackCount,jitter:l.jitter,timestamp:l.timestamp,bytesReceived:l.bytesReceived,decoderImplementation:l.decoderImplementation}):l.type==="codec"&&s.set(l.id,l)}),i&&a!==""&&s.get(a)&&(i.mimeType=s.get(a).mimeType),i})}stopObservingElement(e){const i=this.elementInfos.filter(a=>a.element===e);for(const a of i)this.stopObservingElementInfo(a)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return D(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,i;const a=this.elementInfos.reduce((d,h)=>Math.max(d,h.visibilityChangedAt||0),0),s=!((i=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&i!==void 0)||i?this.isInBackground:!1,l=this.elementInfos.some(d=>d.pictureInPicture),c=this.elementInfos.some(d=>d.visible)&&!s||l;if(this.lastVisible!==c){if(!c&&Date.now()-a<xh){nn.setTimeout(()=>{this.updateVisibility()},xh);return}this.lastVisible=c,this.emit(ce.VisibilityChanged,c,this)}}updateDimensions(){var e,i;let a=0,s=0;const l=this.getPixelDensity();for(const c of this.elementInfos){const d=c.width()*l,h=c.height()*l;d+h>a+s&&(a=d,s=h)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===a&&((i=this.lastDimensions)===null||i===void 0?void 0:i.height)===s||(this.lastDimensions={width:a,height:s},this.emit(ce.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const i=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return i==="screen"?Ab():i||(Ab()>2?2:1)}}class HL{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,i){this.onVisibilityChanged=a=>{var s;const{target:l,isIntersecting:c}=a;l===this.element&&(this.isIntersecting=c,this.isPiP=Ho(this.element),this.visibilityChangedAt=Date.now(),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this))},this.onEnterPiP=()=>{var a,s,l;(s=(a=window.documentPictureInPicture)===null||a===void 0?void 0:a.window)===null||s===void 0||s.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Ho(this.element),(l=this.handleVisibilityChanged)===null||l===void 0||l.call(this)},this.onLeavePiP=()=>{var a;this.isPiP=Ho(this.element),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this)},this.element=e,this.isIntersecting=i??Cm(e),this.isPiP=kn()&&Ho(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,i,a;this.isIntersecting=Cm(this.element),this.isPiP=Ho(this.element),this.element.handleResize=()=>{var s;(s=this.handleResize)===null||s===void 0||s.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,Ob().observe(this.element),_b().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(a=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||a===void 0||a.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,i,a,s,l;(e=Ob())===null||e===void 0||e.unobserve(this.element),(i=_b())===null||i===void 0||i.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(a=window.documentPictureInPicture)===null||a===void 0||a.removeEventListener("enter",this.onEnterPiP),(l=(s=window.documentPictureInPicture)===null||s===void 0?void 0:s.window)===null||l===void 0||l.removeEventListener("pagehide",this.onLeavePiP)}}function Ho(t){var e,i;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Cm(t,(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window):!1}function Cm(t,e){const i=e||window;let a=t.offsetTop,s=t.offsetLeft;const l=t.offsetWidth,c=t.offsetHeight,{hidden:d}=t,{display:h}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,a+=t.offsetTop,s+=t.offsetLeft;return a<i.pageYOffset+i.innerHeight&&s<i.pageXOffset+i.innerWidth&&a+c>i.pageYOffset&&s+l>i.pageXOffset&&!d&&h!=="none"}class Ji extends Ai.EventEmitter{constructor(e,i,a,s){var l;super(),this.metadataMuted=!1,this.encryption=Mn.NONE,this.log=Ke,this.handleMuted=()=>{this.emit(ce.Muted)},this.handleUnmuted=()=>{this.emit(ce.Unmuted)},this.log=ia((l=s==null?void 0:s.loggerName)!==null&&l!==void 0?l:ri.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=i,this.trackName=a,this.source=ie.Source.Unknown}setTrack(e){this.track&&(this.track.off(ce.Muted,this.handleMuted),this.track.off(ce.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(ce.Muted,this.handleMuted),e.on(ce.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),He(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Mn.NONE}get audioTrack(){if(Ci(this.track))return this.track}get videoTrack(){if(vr(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=ie.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===ie.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(Ji||(Ji={}));class Em extends Ji{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,i,a,s){super(e,i.sid,i.name,s),this.track=void 0,this.handleTrackEnded=()=>{this.emit(ce.Ended)},this.handleCpuConstrained=()=>{this.track&&vr(this.track)&&this.emit(ce.CpuConstrained,this.track)},this.updateInfo(i),this.setTrack(a)}setTrack(e){this.track&&(this.track.off(ce.Ended,this.handleTrackEnded),this.track.off(ce.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(ce.Ended,this.handleTrackEnded),e.on(ce.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return D(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return D(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return D(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return D(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(Ci(this.track)){const i=this.track.getSourceTrackSettings(),a=new Set;return i.autoGainControl&&a.add(Xt.TF_AUTO_GAIN_CONTROL),i.echoCancellation&&a.add(Xt.TF_ECHO_CANCELLATION),i.noiseSuppression&&a.add(Xt.TF_NOISE_SUPPRESSION),i.channelCount&&i.channelCount>1&&a.add(Xt.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||a.add(Xt.TF_NO_DTX),this.track.enhancedNoiseCancellation&&a.add(Xt.TF_ENHANCED_NOISE_CANCELLATION),Array.from(a.values())}else return[]}}function Nu(t,e){return D(this,void 0,void 0,function*(){t??(t={});let i=!1;const{audioProcessor:a,videoProcessor:s,optionsWithoutProcessor:l}=pC(t);let c=l.audio,d=l.video;if(a&&typeof l.audio=="object"&&(l.audio.processor=a),s&&typeof l.video=="object"&&(l.video.processor=s),t.audio&&typeof l.audio=="object"&&typeof l.audio.deviceId=="string"){const v=l.audio.deviceId;l.audio.deviceId={exact:v},i=!0,c=Object.assign(Object.assign({},l.audio),{deviceId:{ideal:v}})}if(l.video&&typeof l.video=="object"&&typeof l.video.deviceId=="string"){const v=l.video.deviceId;l.video.deviceId={exact:v},i=!0,d=Object.assign(Object.assign({},l.video),{deviceId:{ideal:v}})}(l.audio===!0||typeof l.audio=="object"&&!l.audio.deviceId)&&(l.audio={deviceId:"default"}),l.video===!0?l.video={deviceId:"default"}:typeof l.video=="object"&&!l.video.deviceId&&(l.video.deviceId="default");const h=fC(l,vC,yC),f=tp(h),p=navigator.mediaDevices.getUserMedia(f);l.audio&&(Jt.userMediaPromiseMap.set("audioinput",p),p.catch(()=>Jt.userMediaPromiseMap.delete("audioinput"))),l.video&&(Jt.userMediaPromiseMap.set("videoinput",p),p.catch(()=>Jt.userMediaPromiseMap.delete("videoinput")));try{const v=yield p;return yield Promise.all(v.getTracks().map(y=>D(this,void 0,void 0,function*(){const k=y.kind==="audio";let S=k?h.audio:h.video;(typeof S=="boolean"||!S)&&(S={});let T;const w=k?f.audio:f.video;typeof w!="boolean"&&(T=w);const R=y.getSettings().deviceId;T!=null&&T.deviceId&&Ia(T.deviceId)!==R?T.deviceId=R:T||(T={deviceId:R});const L=SL(y,T,e);return L.kind===ie.Kind.Video?L.source=ie.Source.Camera:L.kind===ie.Kind.Audio&&(L.source=ie.Source.Microphone),L.mediaStream=v,Ci(L)&&a?yield L.setProcessor(a):vr(L)&&s&&(yield L.setProcessor(s)),L})))}catch(v){if(!i)throw v;return Nu(Object.assign(Object.assign({},t),{audio:c,video:d}),e)}})}function GL(t){return D(this,void 0,void 0,function*(){return(yield Nu({audio:!1,video:!0}))[0]})}function KL(t){return D(this,void 0,void 0,function*(){return(yield Nu({audio:!0,video:!1}))[0]})}var Pa;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Pa||(Pa={}));function YL(t){switch(t){case Go.EXCELLENT:return Pa.Excellent;case Go.GOOD:return Pa.Good;case Go.POOR:return Pa.Poor;case Go.LOST:return Pa.Lost;default:return Pa.Unknown}}class wC extends Ai.EventEmitter{get logContext(){var e,i;return Object.assign({},(i=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||i===void 0?void 0:i.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===nl.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===vs.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,i,a,s,l,c){let d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:nl.STANDARD;var h;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Pa.Unknown,this.log=Ke,this.log=ia((h=c==null?void 0:c.loggerName)!==null&&h!==void 0?h:ri.Participant),this.loggerOptions=c,this.setMaxListeners(100),this.sid=e,this.identity=i,this.name=a,this.metadata=s,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=d,this._attributes=l??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,i]of this.trackPublications)if(i.source===e)return i}getTrackPublicationByName(e){for(const[,i]of this.trackPublications)if(i.trackName===e)return i}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new ps,this.once(me.Active,()=>{var e,i;(i=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||i===void 0||i.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const i=this.getTrackPublication(ie.Source.Camera);return!(!((e=i==null?void 0:i.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const i=this.getTrackPublication(ie.Source.Microphone);return!(!((e=i==null?void 0:i.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(ie.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var i;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===vs.ACTIVE&&((i=this.participantInfo)===null||i===void 0?void 0:i.state)!==vs.ACTIVE&&this.emit(me.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const i=this.metadata!==e,a=this.metadata;this.metadata=e,i&&this.emit(me.ParticipantMetadataChanged,a)}_setName(e){const i=this.name!==e;this.name=e,i&&this.emit(me.ParticipantNameChanged,e)}_setAttributes(e){const i=QM(this.attributes,e);this._attributes=e,Object.keys(i).length>0&&this.emit(me.AttributesChanged,i)}setPermissions(e){var i,a,s,l,c,d;const h=this.permissions,f=e.canPublish!==((i=this.permissions)===null||i===void 0?void 0:i.canPublish)||e.canSubscribe!==((a=this.permissions)===null||a===void 0?void 0:a.canSubscribe)||e.canPublishData!==((s=this.permissions)===null||s===void 0?void 0:s.canPublishData)||e.hidden!==((l=this.permissions)===null||l===void 0?void 0:l.hidden)||e.recorder!==((c=this.permissions)===null||c===void 0?void 0:c.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((p,v)=>{var y;return p!==((y=this.permissions)===null||y===void 0?void 0:y.canPublishSources[v])})||e.canSubscribeMetrics!==((d=this.permissions)===null||d===void 0?void 0:d.canSubscribeMetrics);return this.permissions=e,f&&this.emit(me.ParticipantPermissionsChanged,h),f}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(me.IsSpeakingChanged,e))}setConnectionQuality(e){const i=this._connectionQuality;this._connectionQuality=YL(e),i!==this._connectionQuality&&this.emit(me.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,i;this.activeFuture&&((i=(e=this.activeFuture).reject)===null||i===void 0||i.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(i=>Ci(i.track)&&i.track.setAudioContext(e))}addTrackPublication(e){e.on(ce.Muted,()=>{this.emit(me.TrackMuted,e)}),e.on(ce.Unmuted,()=>{this.emit(me.TrackUnmuted,e)});const i=e;switch(i.track&&(i.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case ie.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case ie.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function QL(t){var e,i,a;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new xk({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(i=t.participantSid)!==null&&i!==void 0?i:"",allTracks:(a=t.allowAll)!==null&&a!==void 0?a:!1,trackSids:t.allowedTrackSids||[]})}const Xb=15e3;class XL extends wC{constructor(e,i,a,s,l){super(e,i,void 0,void 0,void 0,{loggerName:s.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Mn.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new ps)},this.handleReconnected=()=>{var c,d;(d=(c=this.reconnectFuture)===null||c===void 0?void 0:c.resolve)===null||d===void 0||d.call(c),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var c,d,h,f,p,v;this.reconnectFuture&&(this.reconnectFuture.promise.catch(y=>this.log.warn(y.message,this.logContext)),(d=(c=this.reconnectFuture)===null||c===void 0?void 0:c.reject)===null||d===void 0||d.call(c,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((f=(h=this.signalConnectedFuture).reject)===null||f===void 0||f.call(h,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(v=(p=this.activeAgentFuture)===null||p===void 0?void 0:p.reject)===null||v===void 0||v.call(p,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=c=>{var d,h;c.participant&&this.updateInfo(c.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new ps),(h=(d=this.signalConnectedFuture).resolve)===null||h===void 0||h.call(d)},this.handleSignalRequestResponse=c=>{const{requestId:d,reason:h,message:f}=c,p=this.pendingSignalRequests.get(d);p&&(h!==Zm.OK&&p.reject(new Eb(f,h)),this.pendingSignalRequests.delete(d))},this.handleDataPacket=c=>{switch(c.value.case){case"rpcResponse":let d=c.value.value,h=null,f=null;d.value.case==="payload"?h=d.value.value:d.value.case==="error"&&(f=xt.fromProto(d.value.value)),this.handleIncomingRpcResponse(d.requestId,h,f);break;case"rpcAck":let p=c.value.value;this.handleIncomingRpcAck(p.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(c=>QL(c)))},this.onTrackUnmuted=c=>{this.onTrackMuted(c,c.isUpstreamPaused)},this.onTrackMuted=(c,d)=>{if(d===void 0&&(d=!0),!c.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),He(c)));return}this.engine.updateMuteStatus(c.sid,d)},this.onTrackUpstreamPaused=c=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),He(c))),this.onTrackMuted(c,!0)},this.onTrackUpstreamResumed=c=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),He(c))),this.onTrackMuted(c,c.isMuted)},this.onTrackFeatureUpdate=c=>{const d=this.audioTrackPublications.get(c.sid);if(!d){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(c.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(d.trackSid,d.getTrackFeatures())},this.onTrackCpuConstrained=(c,d)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),He(d))),this.emit(me.LocalTrackCpuConstrained,c,d)},this.handleSubscribedQualityUpdate=c=>D(this,void 0,void 0,function*(){var d,h,f,p,v;if(!(!((v=this.roomOptions)===null||v===void 0)&&v.dynacast))return;const y=this.videoTrackPublications.get(c.trackSid);if(!y){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}if(!y.videoTrack)return;const k=yield y.videoTrack.setPublishingCodecs(c.subscribedCodecs);try{for(var S=!0,T=$i(k),w;w=yield T.next(),d=w.done,!d;S=!0){p=w.value,S=!1;const R=p;xM(R)&&(this.log.debug("publish ".concat(R," for ").concat(y.videoTrack.sid),Object.assign(Object.assign({},this.logContext),He(y))),yield this.publishAdditionalCodecForTrack(y.videoTrack,R,y.options))}}catch(R){h={error:R}}finally{try{!S&&!d&&(f=T.return)&&(yield f.call(T))}finally{if(h)throw h.error}}}),this.handleLocalTrackUnpublished=c=>{const d=this.trackPublications.get(c.trackSid);if(!d){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}this.unpublishTrack(d.track)},this.handleTrackEnded=c=>D(this,void 0,void 0,function*(){if(c.source===ie.Source.ScreenShare||c.source===ie.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),He(c))),this.unpublishTrack(c);else if(c.isUserProvided)yield c.mute();else if(Xi(c)||Oa(c))try{if(kn())try{const d=yield navigator==null?void 0:navigator.permissions.query({name:c.source===ie.Source.Camera?"camera":"microphone"});if(d&&d.state==="denied")throw this.log.warn("user has revoked access to ".concat(c.source),Object.assign(Object.assign({},this.logContext),He(c))),d.onchange=()=>{d.state!=="denied"&&(c.isMuted||c.restartTrack(),d.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}c.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),He(c))),Xi(c)?yield c.restartTrack({deviceId:"default"}):yield c.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),He(c))),yield c.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=a,this.roomOptions=s,this.setupEngine(a),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=l}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Mn.NONE}getTrackPublication(e){const i=super.getTrackPublication(e);if(i)return i}getTrackPublicationByName(e){const i=super.getTrackPublicationByName(e);if(i)return i}setupEngine(e){this.engine=e,this.engine.on(he.RemoteMute,(i,a)=>{const s=this.trackPublications.get(i);!s||!s.track||(a?s.mute():s.unmute())}),this.engine.on(he.Connected,this.handleReconnected).on(he.SignalConnected,this.handleSignalConnected).on(he.SignalRestarted,this.handleReconnected).on(he.SignalResumed,this.handleReconnected).on(he.Restarting,this.handleReconnecting).on(he.Resuming,this.handleReconnecting).on(he.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(he.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(he.Disconnected,this.handleDisconnected).on(he.SignalRequestResponse,this.handleSignalRequestResponse).on(he.DataPacketReceived,this.handleDataPacket),this.signalConnectedFuture=void 0}setMetadata(e){return D(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return D(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return D(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return D(this,arguments,void 0,function(i){var a=this;let{metadata:s,name:l,attributes:c}=i;return function*(){return new Promise((d,h)=>D(a,void 0,void 0,function*(){var f,p;try{let v=!1;const y=yield this.engine.client.sendUpdateLocalMetadata((f=s??this.metadata)!==null&&f!==void 0?f:"",(p=l??this.name)!==null&&p!==void 0?p:"",c),k=performance.now();for(this.pendingSignalRequests.set(y,{resolve:d,reject:S=>{h(S),v=!0},values:{name:l,metadata:s,attributes:c}});performance.now()-k<5e3&&!v;){if((!l||this.name===l)&&(!s||this.metadata===s)&&(!c||Object.entries(c).every(S=>{let[T,w]=S;return this.attributes[T]===w||w===""&&!this.attributes[T]}))){this.pendingSignalRequests.delete(y),d();return}yield xn(50)}h(new Eb("Request to update local metadata timed out","TimeoutError"))}catch(v){v instanceof Error&&h(v)}}))}()})}setCameraEnabled(e,i,a){return this.setTrackEnabled(ie.Source.Camera,e,i,a)}setMicrophoneEnabled(e,i,a){return this.setTrackEnabled(ie.Source.Microphone,e,i,a)}setScreenShareEnabled(e,i,a){return this.setTrackEnabled(ie.Source.ScreenShare,e,i,a)}setPermissions(e){const i=this.permissions,a=super.setPermissions(e);return a&&i&&this.emit(me.ParticipantPermissionsChanged,i),a}setE2EEEnabled(e){return D(this,void 0,void 0,function*(){this.encryptionType=e?Mn.GCM:Mn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,i,a,s){return D(this,void 0,void 0,function*(){var l,c;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:i})),this.republishPromise&&(yield this.republishPromise);let d=this.getTrackPublication(e);if(i)if(d)yield d.unmute();else{let h;if(this.pendingPublishing.has(e)){const f=yield this.waitForPendingPublicationOfSource(e);return f||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield f==null?void 0:f.unmute(),f}this.pendingPublishing.add(e);try{switch(e){case ie.Source.Camera:h=yield this.createTracks({video:(l=a)!==null&&l!==void 0?l:!0});break;case ie.Source.Microphone:h=yield this.createTracks({audio:(c=a)!==null&&c!==void 0?c:!0});break;case ie.Source.ScreenShare:h=yield this.createScreenTracks(Object.assign({},a));break;default:throw new ea(e)}}catch(f){throw h==null||h.forEach(p=>{p.stop()}),f instanceof Error&&this.emit(me.MediaDevicesError,f,ym(e)),this.pendingPublishing.delete(e),f}for(const f of h)e===ie.Source.Microphone&&Ci(f)&&(s!=null&&s.preConnectBuffer)&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),f.startPreConnectBuffer());try{const f=[];for(const v of h)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),He(v))),f.push(this.publishTrack(v,s));[d]=yield Promise.all(f)}catch(f){throw h==null||h.forEach(p=>{p.stop()}),f}finally{this.pendingPublishing.delete(e)}}else if(!(d!=null&&d.track)&&this.pendingPublishing.has(e)&&(d=yield this.waitForPendingPublicationOfSource(e),d||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),d&&d.track)if(e===ie.Source.ScreenShare){d=yield this.unpublishTrack(d.track);const h=this.getTrackPublication(ie.Source.ScreenShareAudio);h&&h.track&&this.unpublishTrack(h.track)}else yield d.mute();return d})}enableCameraAndMicrophone(){return D(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(ie.Source.Camera)||this.pendingPublishing.has(ie.Source.Microphone))){this.pendingPublishing.add(ie.Source.Camera),this.pendingPublishing.add(ie.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(i=>this.publishTrack(i)))}finally{this.pendingPublishing.delete(ie.Source.Camera),this.pendingPublishing.delete(ie.Source.Microphone)}}})}createTracks(e){return D(this,void 0,void 0,function*(){var i,a;e??(e={});const s=fC(e,(i=this.roomOptions)===null||i===void 0?void 0:i.audioCaptureDefaults,(a=this.roomOptions)===null||a===void 0?void 0:a.videoCaptureDefaults);try{return(yield Nu(s,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(d=>(Ci(d)&&(this.microphoneError=void 0,d.setAudioContext(this.audioContext),d.source=ie.Source.Microphone,this.emit(me.AudioStreamAcquired)),vr(d)&&(this.cameraError=void 0,d.source=ie.Source.Camera),d))}catch(l){throw l instanceof Error&&(e.audio&&(this.microphoneError=l),e.video&&(this.cameraError=l)),l}})}createScreenTracks(e){return D(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new $m("getDisplayMedia not supported");e.resolution===void 0&&!NM()&&(e.resolution=ep.h1080fps30.resolution);const i=GM(e),a=yield navigator.mediaDevices.getDisplayMedia(i),s=a.getVideoTracks();if(s.length===0)throw new ea("no video track found");const l=new cu(s[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=ie.Source.ScreenShare,e.contentHint&&(l.mediaStreamTrack.contentHint=e.contentHint);const c=[l];if(a.getAudioTracks().length>0){this.emit(me.AudioStreamAcquired);const d=new ws(a.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});d.source=ie.Source.ScreenShareAudio,c.push(d)}return c})}publishTrack(e,i){return D(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,i)})}publishOrRepublishTrack(e,i){return D(this,arguments,void 0,function(a,s){var l=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var d,h,f,p;Xi(a)&&a.setAudioContext(l.audioContext),yield(d=l.reconnectFuture)===null||d===void 0?void 0:d.promise,l.republishPromise&&!c&&(yield l.republishPromise),Ts(a)&&l.pendingPublishPromises.has(a)&&(yield l.pendingPublishPromises.get(a));let v;if(a instanceof MediaStreamTrack)v=a.getConstraints();else{v=a.constraints;let R;switch(a.source){case ie.Source.Microphone:R="audioinput";break;case ie.Source.Camera:R="videoinput"}R&&l.activeDeviceMap.has(R)&&(v=Object.assign(Object.assign({},v),{deviceId:l.activeDeviceMap.get(R)}))}if(a instanceof MediaStreamTrack)switch(a.kind){case"audio":a=new ws(a,v,!0,l.audioContext,{loggerName:l.roomOptions.loggerName,loggerContextCb:()=>l.logContext});break;case"video":a=new cu(a,v,!0,{loggerName:l.roomOptions.loggerName,loggerContextCb:()=>l.logContext});break;default:throw new ea("unsupported MediaStreamTrack kind ".concat(a.kind))}else a.updateLoggerOptions({loggerName:l.roomOptions.loggerName,loggerContextCb:()=>l.logContext});let y;if(l.trackPublications.forEach(R=>{R.track&&R.track===a&&(y=R)}),y)return l.log.warn("track has already been published, skipping",Object.assign(Object.assign({},l.logContext),He(y))),y;const k="channelCount"in a.mediaStreamTrack.getSettings()&&a.mediaStreamTrack.getSettings().channelCount===2||a.mediaStreamTrack.getConstraints().channelCount===2,S=(h=s==null?void 0:s.forceStereo)!==null&&h!==void 0?h:k;S&&(s||(s={}),s.dtx===void 0&&l.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},l.logContext),He(a))),s.red===void 0&&l.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(f=s.dtx)!==null&&f!==void 0||(s.dtx=!1),(p=s.red)!==null&&p!==void 0||(s.red=!1));const T=Object.assign(Object.assign({},l.roomOptions.publishDefaults),s);!PM()&&l.roomOptions.e2ee&&(l.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},l.logContext)),T.simulcast=!1),T.source&&(a.source=T.source);const w=new Promise((R,L)=>D(l,void 0,void 0,function*(){try{if(this.engine.client.currentState!==dt.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:He(a)}));const N=setTimeout(()=>{L(new Cb("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(N);const A=yield this.publish(a,T,S);R(A)}else try{const N=yield this.publish(a,T,S);R(N)}catch(N){L(N)}}catch(N){L(N)}}));l.pendingPublishPromises.set(a,w);try{return yield w}catch(R){throw R}finally{l.pendingPublishPromises.delete(a)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new ps),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),He(e))),!1;const{canPublish:i,canPublishSources:a}=this.permissions;return i&&(a.length===0||a.map(s=>XM(s)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),He(e))),!1)}publish(e,i,a){return D(this,void 0,void 0,function*(){var s,l,c,d,h,f,p,v,y,k;if(!this.hasPermissionsToPublish(e))throw new Cb("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(G=>Ts(e)&&G.source===e.source)&&e.source!==ie.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),He(e))),i.stopMicTrackOnMute&&Ci(e)&&(e.stopOnMute=!0),e.source===ie.Source.ScreenShare&&Es()&&(i.simulcast=!1),i.videoCodec==="av1"&&!AM()&&(i.videoCodec=void 0),i.videoCodec==="vp9"&&!_M()&&(i.videoCodec=void 0),i.videoCodec===void 0&&(i.videoCodec=bm),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(G=>i.videoCodec===$c(G.mime))||(i.videoCodec=$c(this.enabledPublishVideoCodecs[0].mime)));const T=i.videoCodec;e.on(ce.Muted,this.onTrackMuted),e.on(ce.Unmuted,this.onTrackUnmuted),e.on(ce.Ended,this.handleTrackEnded),e.on(ce.UpstreamPaused,this.onTrackUpstreamPaused),e.on(ce.UpstreamResumed,this.onTrackUpstreamResumed),e.on(ce.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const w=[],R=!(!((s=i.dtx)!==null&&s!==void 0)||s),L=e.getSourceTrackSettings();L.autoGainControl&&w.push(Xt.TF_AUTO_GAIN_CONTROL),L.echoCancellation&&w.push(Xt.TF_ECHO_CANCELLATION),L.noiseSuppression&&w.push(Xt.TF_NOISE_SUPPRESSION),L.channelCount&&L.channelCount>1&&w.push(Xt.TF_STEREO),R&&w.push(Xt.TF_NO_DTX),Xi(e)&&e.hasPreConnectBuffer&&w.push(Xt.TF_PRECONNECT_BUFFER);const N=new Wh({cid:e.mediaStreamTrack.id,name:i.name,type:ie.kindToProto(e.kind),muted:e.isMuted,source:ie.sourceToProto(e.source),disableDtx:R,encryption:this.encryptionType,stereo:a,disableRed:this.isE2EEEnabled||!(!((l=i.red)!==null&&l!==void 0)||l),stream:i==null?void 0:i.stream,backupCodecPolicy:i==null?void 0:i.backupCodecPolicy,audioFeatures:w});let A;if(e.kind===ie.Kind.Video){let G={width:0,height:0};try{G=yield e.waitForDimensions()}catch{const ae=(d=(c=this.roomOptions.videoCaptureDefaults)===null||c===void 0?void 0:c.resolution)!==null&&d!==void 0?d:il.h720.resolution;G={width:ae.width,height:ae.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),He(e)),{dims:G}))}N.width=G.width,N.height=G.height,Oa(e)&&(Ti(T)&&(e.source===ie.Source.ScreenShare&&(i.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),He(e))))),i.scalabilityMode=(h=i.scalabilityMode)!==null&&h!==void 0?h:"L3T3_KEY"),N.simulcastCodecs=[new Zh({codec:T,cid:e.mediaStreamTrack.id})],i.backupCodec===!0&&(i.backupCodec={codec:bm}),i.backupCodec&&T!==i.backupCodec.codec&&N.encryption===Mn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),N.simulcastCodecs.push(new Zh({codec:i.backupCodec.codec,cid:""})))),A=Tm(e.source===ie.Source.ScreenShare,N.width,N.height,i),N.layers=Kb(N.width,N.height,A,Ti(i.videoCodec))}else e.kind===ie.Kind.Audio&&(A=[{maxBitrate:(f=i.audioPreset)===null||f===void 0?void 0:f.maxBitrate,priority:(v=(p=i.audioPreset)===null||p===void 0?void 0:p.priority)!==null&&v!==void 0?v:"high",networkPriority:(k=(y=i.audioPreset)===null||y===void 0?void 0:y.priority)!==null&&k!==void 0?k:"high"}]);if(!this.engine||this.engine.isClosed)throw new Vt("cannot publish track when not connected");const _=()=>D(this,void 0,void 0,function*(){var G,$,ae;if(!this.engine.pcManager)throw new Vt("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,i,A),this.emit(me.LocalSenderCreated,e.sender,e),Oa(e)&&((G=i.degradationPreference)!==null&&G!==void 0||(i.degradationPreference=OL(e)),e.setDegradationPreference(i.degradationPreference)),A)if(Es()&&e.kind===ie.Kind.Audio){let ve;for(const Fe of this.engine.pcManager.publisher.getTransceivers())if(Fe.sender===e.sender){ve=Fe;break}ve&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:ve,codec:"opus",maxbr:!(($=A[0])===null||$===void 0)&&$.maxBitrate?A[0].maxBitrate/1e3:0})}else e.codec&&Ti(e.codec)&&(!((ae=A[0])===null||ae===void 0)&&ae.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:N.cid,codec:e.codec,maxbr:A[0].maxBitrate/1e3});yield this.engine.negotiate()});let B;const I=new Promise((G,$)=>D(this,void 0,void 0,function*(){var ae;try{B=yield this.engine.addTrack(N),G(B)}catch(ve){e.sender&&(!((ae=this.engine.pcManager)===null||ae===void 0)&&ae.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(Fe=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),He(e)),{error:Fe}))})),$(ve)}}));if(this.enabledPublishVideoCodecs.length>0)B=(yield Promise.all([I,_()]))[0];else{B=yield I;let G;if(B.codecs.forEach($=>{G===void 0&&(G=$.mimeType)}),G&&e.kind===ie.Kind.Video){const $=$c(G);$!==T&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),He(e)),{codec:$})),i.videoCodec=$,A=Tm(e.source===ie.Source.ScreenShare,N.width,N.height,i))}yield _()}const F=new Em(e.kind,B,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(F.on(ce.CpuConstrained,G=>this.onTrackCpuConstrained(G,F)),F.options=i,e.sid=B.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:A,trackInfo:B})),Oa(e)?e.startMonitor(this.engine.client):Xi(e)&&e.startMonitor(),this.addTrackPublication(F),this.emit(me.LocalTrackPublished,F),Xi(e)&&B.audioFeatures.includes(Xt.TF_PRECONNECT_BUFFER)){const G=e.getPreConnectBuffer();this.on(me.LocalTrackSubscribed,$=>{if($.trackSid===B.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),He(e))),e.stopPreConnectBuffer()}}),G&&new Promise((ae,ve)=>D(this,void 0,void 0,function*(){var Fe,Xe,Re,j,re,ee;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),He(e)));const K=setTimeout(()=>{ve(new Error("agent not active within 10 seconds"))},1e4),J=yield this.waitUntilActiveAgentPresent();clearTimeout(K),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),He(e)));const le=yield this.streamBytes({name:"preconnect-buffer",mimeType:"audio/opus",topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[J.identity],attributes:{trackId:F.trackSid,sampleRate:String((re=L.sampleRate)!==null&&re!==void 0?re:"48000"),channels:String((ee=L.channelCount)!==null&&ee!==void 0?ee:"1")}});try{for(var Ae=!0,P=$i(G),Q;Q=yield P.next(),Fe=Q.done,!Fe;Ae=!0){j=Q.value,Ae=!1;const ke=j;yield le.write(ke)}}catch(ke){Xe={error:ke}}finally{try{!Ae&&!Fe&&(Re=P.return)&&(yield Re.call(P))}finally{if(Xe)throw Xe.error}}yield le.close(),ae()}catch(K){ve(K)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),He(e)))}).catch(ae=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),He(e)),{error:ae}))})}return F})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,i,a){return D(this,void 0,void 0,function*(){var s;if(this.encryptionType!==Mn.NONE)return;let l;if(this.trackPublications.forEach(k=>{k.track&&k.track===e&&(l=k)}),!l)throw new ea("track is not published");if(!Oa(e))throw new ea("track is not a video track");const c=Object.assign(Object.assign({},(s=this.roomOptions)===null||s===void 0?void 0:s.publishDefaults),a),d=RL(e,i,c);if(!d){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),He(e)));return}const h=e.addSimulcastTrack(i,d);if(!h)return;const f=new Wh({cid:h.mediaStreamTrack.id,type:ie.kindToProto(e.kind),muted:e.isMuted,source:ie.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:c.videoCodec,cid:h.mediaStreamTrack.id}]});if(f.layers=Kb(f.width,f.height,d),!this.engine||this.engine.isClosed)throw new Vt("cannot publish track when not connected");const p=()=>D(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,h,c,d),yield this.engine.negotiate()}),y=(yield Promise.all([this.engine.addTrack(f),p()]))[0];this.log.debug("published ".concat(i," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:d,trackInfo:y}))})}unpublishTrack(e,i){return D(this,void 0,void 0,function*(){var a,s;if(Ts(e)){const f=this.pendingPublishPromises.get(e);f&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),He(e))),yield f)}const l=this.getPublicationForTrack(e),c=l?He(l):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),c)),!l||!l.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),c));return}e=l.track,e.off(ce.Muted,this.onTrackMuted),e.off(ce.Unmuted,this.onTrackUnmuted),e.off(ce.Ended,this.handleTrackEnded),e.off(ce.UpstreamPaused,this.onTrackUpstreamPaused),e.off(ce.UpstreamResumed,this.onTrackUpstreamResumed),e.off(ce.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),i===void 0&&(i=(s=(a=this.roomOptions)===null||a===void 0?void 0:a.stopLocalTrackOnUnpublish)!==null&&s!==void 0?s:!0),i?e.stop():e.stopMonitor();let d=!1;const h=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Ct.FAILED&&h)try{for(const f of this.engine.pcManager.publisher.getTransceivers())f.sender===h&&(f.direction="inactive",d=!0);if(this.engine.removeTrack(h)&&(d=!0),Oa(e)){for(const[,f]of e.simulcastCodecs)f.sender&&(this.engine.removeTrack(f.sender)&&(d=!0),f.sender=void 0);e.simulcastCodecs.clear()}}catch(f){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),c),{error:f}))}switch(this.trackPublications.delete(l.trackSid),l.kind){case ie.Kind.Audio:this.audioTrackPublications.delete(l.trackSid);break;case ie.Kind.Video:this.videoTrackPublications.delete(l.trackSid);break}return this.emit(me.LocalTrackUnpublished,l),l.setTrack(void 0),d&&(yield this.engine.negotiate()),l})}unpublishTracks(e){return D(this,void 0,void 0,function*(){return(yield Promise.all(e.map(a=>this.unpublishTrack(a)))).filter(a=>!!a)})}republishAllTracks(e){return D(this,arguments,void 0,function(i){var a=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){a.republishPromise&&(yield a.republishPromise),a.republishPromise=new Promise((l,c)=>D(a,void 0,void 0,function*(){try{const d=[];this.trackPublications.forEach(h=>{h.track&&(i&&(h.options=Object.assign(Object.assign({},h.options),i)),d.push(h))}),yield Promise.all(d.map(h=>D(this,void 0,void 0,function*(){const f=h.track;yield this.unpublishTrack(f,!1),s&&!f.isMuted&&f.source!==ie.Source.ScreenShare&&f.source!==ie.Source.ScreenShareAudio&&(Xi(f)||Oa(f))&&!f.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:h.trackSid})),yield f.restartTrack()),yield this.publishOrRepublishTrack(f,h.options,!0)}))),l()}catch(d){c(d)}finally{this.republishPromise=void 0}})),yield a.republishPromise}()})}publishData(e){return D(this,arguments,void 0,function(i){var a=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const l=s.reliable?Be.RELIABLE:Be.LOSSY,c=s.destinationIdentities,d=s.topic,h=new bn({kind:l,value:{case:"user",value:new sk({participantIdentity:a.identity,payload:i,destinationIdentities:c,topic:d})}});yield a.engine.sendDataPacket(h,l)}()})}publishDtmf(e,i){return D(this,void 0,void 0,function*(){const a=new bn({kind:Be.RELIABLE,value:{case:"sipDtmf",value:new ok({code:e,digit:i})}});yield this.engine.sendDataPacket(a,Be.RELIABLE)})}sendChatMessage(e,i){return D(this,void 0,void 0,function*(){const a={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:i==null?void 0:i.attachments},s=new bn({value:{case:"chatMessage",value:new Gh(Object.assign(Object.assign({},a),{timestamp:pt.parse(a.timestamp)}))}});return yield this.engine.sendDataPacket(s,Be.RELIABLE),this.emit(me.ChatMessage,a),a})}editChatMessage(e,i){return D(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},i),{message:e,editTimestamp:Date.now()}),s=new bn({value:{case:"chatMessage",value:new Gh(Object.assign(Object.assign({},a),{timestamp:pt.parse(a.timestamp),editTimestamp:pt.parse(a.editTimestamp)}))}});return yield this.engine.sendDataPacket(s,Be.RELIABLE),this.emit(me.ChatMessage,a),a})}sendText(e,i){return D(this,void 0,void 0,function*(){var a;const s=crypto.randomUUID(),c=new TextEncoder().encode(e).byteLength,d=(a=i==null?void 0:i.attachments)===null||a===void 0?void 0:a.map(()=>crypto.randomUUID()),h=new Array(d?d.length+1:1).fill(0),f=(v,y)=>{var k;h[y]=v;const S=h.reduce((T,w)=>T+w,0);(k=i==null?void 0:i.onProgress)===null||k===void 0||k.call(i,S)},p=yield this.streamText({streamId:s,totalSize:c,destinationIdentities:i==null?void 0:i.destinationIdentities,topic:i==null?void 0:i.topic,attachedStreamIds:d,attributes:i==null?void 0:i.attributes});return yield p.write(e),f(1,0),yield p.close(),i!=null&&i.attachments&&d&&(yield Promise.all(i.attachments.map((v,y)=>D(this,void 0,void 0,function*(){return this._sendFile(d[y],v,{topic:i.topic,mimeType:v.type,onProgress:k=>{f(k,y+1)}})})))),p.info})}streamText(e){return D(this,void 0,void 0,function*(){var i,a;const s=(i=e==null?void 0:e.streamId)!==null&&i!==void 0?i:crypto.randomUUID(),l={id:s,mimeType:"text/plain",timestamp:Date.now(),topic:(a=e==null?void 0:e.topic)!==null&&a!==void 0?a:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes},c=new Yh({streamId:s,mimeType:l.mimeType,topic:l.topic,timestamp:or(l.timestamp),totalLength:or(e==null?void 0:e.totalSize),attributes:l.attributes,contentHeader:{case:"textHeader",value:new yk({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?Kh.UPDATE:Kh.CREATE})}}),d=e==null?void 0:e.destinationIdentities,h=new bn({destinationIdentities:d,value:{case:"streamHeader",value:c}});yield this.engine.sendDataPacket(h,Be.RELIABLE);let f=0;const p=this,v=new WritableStream({write(S){return D(this,void 0,void 0,function*(){for(const T of qM(S,Xb)){yield p.engine.waitForBufferStatusLow(Be.RELIABLE);const w=new Qh({content:T,streamId:s,chunkIndex:or(f)}),R=new bn({destinationIdentities:d,value:{case:"streamChunk",value:w}});yield p.engine.sendDataPacket(R,Be.RELIABLE),f+=1}})},close(){return D(this,void 0,void 0,function*(){const S=new Xh({streamId:s}),T=new bn({destinationIdentities:d,value:{case:"streamTrailer",value:S}});yield p.engine.sendDataPacket(T,Be.RELIABLE)})},abort(S){console.log("Sink error:",S)}});let y=()=>D(this,void 0,void 0,function*(){yield k.close()});p.engine.once(he.Closing,y);const k=new zL(v,l,()=>this.engine.off(he.Closing,y));return k})}sendFile(e,i){return D(this,void 0,void 0,function*(){const a=crypto.randomUUID();return yield this._sendFile(a,e,i),{id:a}})}_sendFile(e,i,a){return D(this,void 0,void 0,function*(){var s;const l=yield this.streamBytes({streamId:e,totalSize:i.size,name:i.name,mimeType:(s=a==null?void 0:a.mimeType)!==null&&s!==void 0?s:i.type,topic:a==null?void 0:a.topic,destinationIdentities:a==null?void 0:a.destinationIdentities}),c=i.stream().getReader();for(;;){const{done:d,value:h}=yield c.read();if(d)break;yield l.write(h)}return yield l.close(),l.info})}streamBytes(e){return D(this,void 0,void 0,function*(){var i,a,s,l,c;const d=(i=e==null?void 0:e.streamId)!==null&&i!==void 0?i:crypto.randomUUID(),h=e==null?void 0:e.destinationIdentities,f={id:d,mimeType:(a=e==null?void 0:e.mimeType)!==null&&a!==void 0?a:"application/octet-stream",topic:(s=e==null?void 0:e.topic)!==null&&s!==void 0?s:"",timestamp:Date.now(),attributes:e==null?void 0:e.attributes,size:e==null?void 0:e.totalSize,name:(l=e==null?void 0:e.name)!==null&&l!==void 0?l:"unknown"},p=new Yh({totalLength:or((c=f.size)!==null&&c!==void 0?c:0),mimeType:f.mimeType,streamId:d,topic:f.topic,timestamp:or(Date.now()),attributes:f.attributes,contentHeader:{case:"byteHeader",value:new bk({name:f.name})}}),v=new bn({destinationIdentities:h,value:{case:"streamHeader",value:p}});yield this.engine.sendDataPacket(v,Be.RELIABLE);let y=0;const k=new fn,S=this.engine,T=this.log,w=new WritableStream({write(L){return D(this,void 0,void 0,function*(){const N=yield k.lock();let A=0;try{for(;A<L.byteLength;){const _=L.slice(A,A+Xb);yield S.waitForBufferStatusLow(Be.RELIABLE);const B=new bn({destinationIdentities:h,value:{case:"streamChunk",value:new Qh({content:_,streamId:d,chunkIndex:or(y)})}});yield S.sendDataPacket(B,Be.RELIABLE),y+=1,A+=_.byteLength}}finally{N()}})},close(){return D(this,void 0,void 0,function*(){const L=new Xh({streamId:d}),N=new bn({destinationIdentities:h,value:{case:"streamTrailer",value:L}});yield S.sendDataPacket(N,Be.RELIABLE)})},abort(L){T.error("Sink error:",L)}});return new FL(w,f)})}performRpc(e){return D(this,arguments,void 0,function(i){var a=this;let{destinationIdentity:s,method:l,payload:c,responseTimeout:d=1e4}=i;return function*(){return new Promise((f,p)=>D(a,void 0,void 0,function*(){var v,y,k,S;if(sp(c)>bC){p(xt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((y=(v=this.engine.latestJoinResponse)===null||v===void 0?void 0:v.serverInfo)===null||y===void 0)&&y.version&&xi((S=(k=this.engine.latestJoinResponse)===null||k===void 0?void 0:k.serverInfo)===null||S===void 0?void 0:S.version,"1.8.0")<0){p(xt.builtIn("UNSUPPORTED_SERVER"));return}const T=crypto.randomUUID();yield this.publishRpcRequest(s,T,l,c,d-2e3);const w=setTimeout(()=>{this.pendingAcks.delete(T),p(xt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(T),clearTimeout(R)},2e3);this.pendingAcks.set(T,{resolve:()=>{clearTimeout(w)},participantIdentity:s});const R=setTimeout(()=>{this.pendingResponses.delete(T),p(xt.builtIn("RESPONSE_TIMEOUT"))},d);this.pendingResponses.set(T,{resolve:(L,N)=>{clearTimeout(R),this.pendingAcks.has(T)&&(console.warn("RPC response received before ack",T),this.pendingAcks.delete(T),clearTimeout(w)),N?p(N):f(L??"")},participantIdentity:s})}))}()})}registerRpcMethod(e,i){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,i)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=i,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const i=this.pendingAcks.get(e);i?(i.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,i,a){const s=this.pendingResponses.get(e);s?(s.resolve(i,a),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,i,a,s,l){return D(this,void 0,void 0,function*(){const c=new bn({destinationIdentities:[e],kind:Be.RELIABLE,value:{case:"rpcRequest",value:new lk({id:i,method:a,payload:s,responseTimeoutMs:l,version:1})}});yield this.engine.sendDataPacket(c,Be.RELIABLE)})}handleParticipantDisconnected(e){for(const[i,{participantIdentity:a}]of this.pendingAcks)a===e&&this.pendingAcks.delete(i);for(const[i,{participantIdentity:a,resolve:s}]of this.pendingResponses)a===e&&(s(null,xt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(i))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(i=>i.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(i=>{var a,s;const l=this.trackPublications.get(i.sid);if(l){const c=l.isMuted||((s=(a=l.track)===null||a===void 0?void 0:a.isUpstreamPaused)!==null&&s!==void 0?s:!1);c!==i.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),He(l)),{mutedOnServer:c})),this.engine.client.sendMuteTrack(i.sid,c))}}),!0):!1}setActiveAgent(e){var i,a,s,l;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(a=(i=this.activeAgentFuture)===null||i===void 0?void 0:i.resolve)===null||a===void 0||a.call(i,e):(l=(s=this.activeAgentFuture)===null||s===void 0?void 0:s.reject)===null||l===void 0||l.call(s,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new ps),this.activeAgentFuture.promise)}getPublicationForTrack(e){let i;return this.trackPublications.forEach(a=>{const s=a.track;s&&(e instanceof MediaStreamTrack?(Xi(s)||Oa(s))&&s.mediaStreamTrack===e&&(i=a):e===s&&(i=a))}),i}waitForPendingPublicationOfSource(e){return D(this,void 0,void 0,function*(){const a=Date.now();for(;Date.now()<a+1e4;){const s=Array.from(this.pendingPublishPromises.entries()).find(l=>{let[c]=l;return c.source===e});if(s)return s[1];yield xn(20)}})}}class JL extends Ji{constructor(e,i,a,s){super(e,i.sid,i.name,s),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=Yn.HIGH,this.handleEnded=l=>{this.setTrack(void 0),this.emit(ce.Ended,l)},this.handleVisibilityChange=l=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(l),this.logContext),this.disabled=!l,this.emitTrackUpdate()},this.handleVideoDimensionsChange=l=>{this.log.debug("adaptivestream video dimensions ".concat(l.width,"x").concat(l.height),this.logContext),this.videoDimensions=l,this.emitTrackUpdate()},this.subscribed=a,this.updateInfo(i)}setSubscribed(e){const i=this.subscriptionStatus,a=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const s=new Ru({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new fk({participantSid:"",trackSids:[this.trackSid]})]});this.emit(ce.UpdateSubscription,s),this.emitSubscriptionUpdateIfChanged(i),this.emitPermissionUpdateIfChanged(a)}get subscriptionStatus(){return this.subscribed===!1?Ji.SubscriptionStatus.Unsubscribed:super.isSubscribed?Ji.SubscriptionStatus.Subscribed:Ji.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Ji.PermissionStatus.Allowed:Ji.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var i,a;this.isManualOperationAllowed()&&(((i=this.videoDimensions)===null||i===void 0?void 0:i.width)===e.width&&((a=this.videoDimensions)===null||a===void 0?void 0:a.height)===e.height||(yh(this.track)&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&yh(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const i=this.subscriptionStatus,a=this.permissionStatus,s=this.track;s!==e&&(s&&(s.off(ce.VideoDimensionsChanged,this.handleVideoDimensionsChange),s.off(ce.VisibilityChanged,this.handleVisibilityChange),s.off(ce.Ended,this.handleEnded),s.detach(),s.stopMonitor(),this.emit(ce.Unsubscribed,s)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(ce.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(ce.VisibilityChanged,this.handleVisibilityChange),e.on(ce.Ended,this.handleEnded),this.emit(ce.Subscribed,e)),this.emitPermissionUpdateIfChanged(a),this.emitSubscriptionUpdateIfChanged(i))}setAllowed(e){const i=this.subscriptionStatus,a=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(a),this.emitSubscriptionUpdateIfChanged(i)}setSubscriptionError(e){this.emit(ce.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const i=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):i!==e.muted&&this.emit(e.muted?ce.Muted:ce.Unmuted)}emitSubscriptionUpdateIfChanged(e){const i=this.subscriptionStatus;e!==i&&this.emit(ce.SubscriptionStatusChanged,i,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(ce.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===ie.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return yh(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new Sk({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=Yn.HIGH,this.emit(ce.UpdateSettings,e)}}class uu extends wC{static fromParticipantInfo(e,i,a){return new uu(e,i.sid,i.identity,i.name,i.metadata,i.attributes,a,i.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,i,a,s,l,c,d){let h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:nl.STANDARD;super(i,a||"",s,l,c,d,h),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(ce.UpdateSettings,i=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),He(e))),this.signalClient.sendUpdateTrackSettings(i)}),e.on(ce.UpdateSubscription,i=>{i.participantTracks.forEach(a=>{a.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(i)}),e.on(ce.SubscriptionPermissionChanged,i=>{this.emit(me.TrackSubscriptionPermissionChanged,e,i)}),e.on(ce.SubscriptionStatusChanged,i=>{this.emit(me.TrackSubscriptionStatusChanged,e,i)}),e.on(ce.Subscribed,i=>{this.emit(me.TrackSubscribed,i,e)}),e.on(ce.Unsubscribed,i=>{this.emit(me.TrackUnsubscribed,i,e)}),e.on(ce.SubscriptionFailed,i=>{this.emit(me.TrackSubscriptionFailed,e.trackSid,i)})}getTrackPublication(e){const i=super.getTrackPublication(e);if(i)return i}getTrackPublicationByName(e){const i=super.getTrackPublicationByName(e);if(i)return i}setVolume(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ie.Source.Microphone;this.volumeMap.set(i,e);const a=this.getTrackPublication(i);a&&a.track&&a.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ie.Source.Microphone;const i=this.getTrackPublication(e);return i&&i.track?i.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,i,a,s,l,c){let d=this.getTrackPublicationBySid(i);if(d||i.startsWith("TR")||this.trackPublications.forEach(p=>{!d&&e.kind===p.kind.toString()&&(d=p)}),!d){if(c===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:i})),this.emit(me.TrackSubscriptionFailed,i);return}c===void 0&&(c=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,i,a,s,l,c-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),He(d))),this.emit(me.TrackSubscriptionFailed,i);return}const h=e.kind==="video";let f;return h?f=new qL(e,i,s,l):f=new VL(e,i,s,this.audioContext,this.audioOutput),f.source=d.source,f.isMuted=d.isMuted,f.setMediaStream(a),f.start(),d.setTrack(f),this.volumeMap.has(d.source)&&gm(f)&&Ci(f)&&f.setVolume(this.volumeMap.get(d.source)),d}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const i=new Map,a=new Map;return e.tracks.forEach(s=>{var l,c;let d=this.getTrackPublicationBySid(s.sid);if(d)d.updateInfo(s);else{const h=ie.kindFromProto(s.type);if(!h)return;d=new JL(h,s,(l=this.signalClient.connectOptions)===null||l===void 0?void 0:l.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(c=this.loggerOptions)===null||c===void 0?void 0:c.loggerName}),d.updateInfo(s),a.set(s.sid,d);const f=Array.from(this.trackPublications.values()).find(p=>p.source===(d==null?void 0:d.source));f&&d.source!==ie.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(d.source),Object.assign(Object.assign({},this.logContext),{oldTrack:He(f),newTrack:He(d)})),this.addTrackPublication(d)}i.set(s.sid,d)}),this.trackPublications.forEach(s=>{i.has(s.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),He(s))),this.unpublishTrack(s.trackSid,!0))}),a.forEach(s=>{this.emit(me.TrackPublished,s)}),!0}unpublishTrack(e,i){const a=this.trackPublications.get(e);if(!a)return;const{track:s}=a;switch(s&&(s.stop(),a.setTrack(void 0)),this.trackPublications.delete(e),a.kind){case ie.Kind.Audio:this.audioTrackPublications.delete(e);break;case ie.Kind.Video:this.videoTrackPublications.delete(e);break}i&&this.emit(me.TrackUnpublished,a)}setAudioOutput(e){return D(this,void 0,void 0,function*(){this.audioOutput=e;const i=[];this.audioTrackPublications.forEach(a=>{var s;Ci(a.track)&&gm(a.track)&&i.push(a.track.setSinkId((s=e.deviceId)!==null&&s!==void 0?s:"default"))}),yield Promise.all(i)})}emit(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:a})),super.emit(e,...a)}}var We;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(We||(We={}));const ZL=4*1e3;class Rs extends Ai.EventEmitter{constructor(e){var i,a,s,l;if(super(),i=this,this.state=We.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Ke,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(c,d,h)=>D(this,void 0,void 0,function*(){var f;if(!OM())throw Ei()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const p=yield this.disconnectLock.lock();if(this.state===We.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),p(),Promise.resolve();if(this.connectFuture)return p(),this.connectFuture.promise;this.setAndEmitConnectionState(We.Connecting),((f=this.regionUrlProvider)===null||f===void 0?void 0:f.getServerUrl().toString())!==c&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),mm(new URL(c))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new km(c,d):this.regionUrlProvider.updateToken(d),this.regionUrlProvider.fetchRegionSettings().then(k=>{var S;(S=this.regionUrlProvider)===null||S===void 0||S.setServerReportedRegions(k)}).catch(k=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:k}))}));const v=(k,S,T)=>D(this,void 0,void 0,function*(){var w,R;this.abortController&&this.abortController.abort();const L=new AbortController;this.abortController=L,p==null||p();try{yield this.attemptConnection(T??c,d,h,L),this.abortController=void 0,k()}catch(N){if(this.regionUrlProvider&&N instanceof lt&&N.reason!==Qe.Cancelled&&N.reason!==Qe.NotAllowed){let A=null;try{A=yield this.regionUrlProvider.getNextBestRegionUrl((w=this.abortController)===null||w===void 0?void 0:w.signal)}catch(_){if(_ instanceof lt&&(_.status===401||_.reason===Qe.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),S(_);return}}A&&!(!((R=this.abortController)===null||R===void 0)&&R.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(N.message,". Retrying with another region: ").concat(A),this.logContext),this.recreateEngine(),yield v(k,S,A)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Db(N)),S(N))}else{let A=ii.UNKNOWN_REASON;N instanceof lt&&(A=Db(N)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,A),S(N)}}}),y=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new ps((k,S)=>{v(k,S,y)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(c,d,h,f,p,v)=>D(this,void 0,void 0,function*(){var y,k,S;const T=yield h.join(c,d,{autoSubscribe:f.autoSubscribe,adaptiveStream:typeof p.adaptiveStream=="object"?!0:p.adaptiveStream,maxRetries:f.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:f.websocketTimeout},v.signal);let w=T.serverInfo;if(w||(w={version:T.serverVersion,region:T.serverRegion}),this.serverInfo=w,this.log.debug("connected to Livekit Server ".concat(Object.entries(w).map(R=>{let[L,N]=R;return"".concat(L,": ").concat(N)}).join(", ")),{room:(y=T.room)===null||y===void 0?void 0:y.name,roomSid:(k=T.room)===null||k===void 0?void 0:k.sid,identity:(S=T.participant)===null||S===void 0?void 0:S.identity}),!w.version)throw new pM("unknown server version");return w.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),p.dynacast=!1),T}),this.applyJoinResponse=c=>{const d=c.participant;if(this.localParticipant.sid=d.sid,this.localParticipant.identity=d.identity,this.localParticipant.setEnabledPublishCodecs(c.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(c.sifTrailer)}catch(h){this.log.error(h instanceof Error?h.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:h}))}this.handleParticipantUpdates([d,...c.otherParticipants]),c.room&&this.handleRoomUpdate(c.room)},this.attemptConnection=(c,d,h,f)=>D(this,void 0,void 0,function*(){var p,v;this.state===We.Reconnecting||this.isResuming||!((p=this.engine)===null||p===void 0)&&p.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((v=this.regionUrlProvider)===null||v===void 0)&&v.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},rp),h),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const y=yield this.connectSignal(c,d,this.engine,this.connOptions,this.options,f);this.applyJoinResponse(y),this.setupLocalParticipantEvents(),this.emit(oe.SignalConnected)}catch(y){yield this.engine.close(),this.recreateEngine();const k=new lt("could not establish signal connection",Qe.ServerUnreachable);throw y instanceof Error&&(k.message="".concat(k.message,": ").concat(y.message)),y instanceof lt&&(k.reason=y.reason,k.status=y.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:y})),k}if(f.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new lt("Connection attempt aborted",Qe.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,f)}catch(y){throw yield this.engine.close(),this.recreateEngine(),y}kn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),kn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(We.Connected),this.emit(oe.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return D(i,[...d],void 0,function(){var f=this;let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var v,y,k,S;const T=yield f.disconnectLock.lock();try{if(f.state===We.Disconnected){f.log.debug("already disconnected",f.logContext);return}f.log.info("disconnect from room",Object.assign({},f.logContext)),(f.state===We.Connecting||f.state===We.Reconnecting||f.isResuming)&&(f.log.warn("abort connection attempt",f.logContext),(v=f.abortController)===null||v===void 0||v.abort(),(k=(y=f.connectFuture)===null||y===void 0?void 0:y.reject)===null||k===void 0||k.call(y,new lt("Client initiated disconnect",Qe.Cancelled)),f.connectFuture=void 0),!((S=f.engine)===null||S===void 0)&&S.client.isDisconnected||(yield f.engine.client.sendLeave()),f.engine&&(yield f.engine.close()),f.handleDisconnect(p,ii.CLIENT_INITIATED),f.engine=void 0}finally{T()}}()})},this.onPageLeave=()=>D(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>D(this,void 0,void 0,function*(){const c=[],d=Un();if(d&&d.os==="iOS"){const h="livekit-dummy-audio-el";let f=document.getElementById(h);if(!f){f=document.createElement("audio"),f.id=h,f.autoplay=!0,f.hidden=!0;const p=vh();p.enabled=!0;const v=new MediaStream([p]);f.srcObject=v,document.addEventListener("visibilitychange",()=>{f&&(f.srcObject=document.hidden?null:v,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(f),this.once(oe.Disconnected,()=>{f==null||f.remove(),f=null})}c.push(f)}this.remoteParticipants.forEach(h=>{h.audioTrackPublications.forEach(f=>{f.track&&f.track.attachedElements.forEach(p=>{c.push(p)})})});try{yield Promise.all([this.acquireAudioContext(),...c.map(h=>(h.muted=!1,h.play()))]),this.handleAudioPlaybackStarted()}catch(h){throw this.handleAudioPlaybackFailed(h),h}}),this.startVideo=()=>D(this,void 0,void 0,function*(){const c=[];for(const d of this.remoteParticipants.values())d.videoTrackPublications.forEach(h=>{var f;(f=h.track)===null||f===void 0||f.attachedElements.forEach(p=>{c.includes(p)||c.push(p)})});yield Promise.all(c.map(d=>d.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(d=>{d.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const c of this.remoteParticipants.values())this.handleParticipantDisconnected(c.identity,c);this.setAndEmitConnectionState(We.Reconnecting)&&this.emit(oe.Reconnecting)},this.handleSignalRestarted=c=>D(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(c.serverRegion),Object.assign(Object.assign({},this.logContext),{region:c.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(c);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(d){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:d}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:c.serverRegion}))}catch{return}this.setAndEmitConnectionState(We.Connected),this.emit(oe.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=c=>{c.forEach(d=>{var h;if(d.identity===this.localParticipant.identity){this.localParticipant.updateInfo(d);return}d.identity===""&&(d.identity=(h=this.sidToIdentity.get(d.sid))!==null&&h!==void 0?h:"");let f=this.remoteParticipants.get(d.identity);d.state===vs.DISCONNECTED?this.handleParticipantDisconnected(d.identity,f):f=this.getOrCreateParticipant(d.identity,d)})},this.handleActiveSpeakersUpdate=c=>{const d=[],h={};c.forEach(f=>{if(h[f.sid]=!0,f.sid===this.localParticipant.sid)this.localParticipant.audioLevel=f.level,this.localParticipant.setIsSpeaking(!0),d.push(this.localParticipant);else{const p=this.getRemoteParticipantBySid(f.sid);p&&(p.audioLevel=f.level,p.setIsSpeaking(!0),d.push(p))}}),h[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(f=>{h[f.sid]||(f.audioLevel=0,f.setIsSpeaking(!1))}),this.activeSpeakers=d,this.emitWhenConnected(oe.ActiveSpeakersChanged,d)},this.handleSpeakersChanged=c=>{const d=new Map;this.activeSpeakers.forEach(f=>{const p=this.remoteParticipants.get(f.identity);p&&p.sid!==f.sid||d.set(f.sid,f)}),c.forEach(f=>{let p=this.getRemoteParticipantBySid(f.sid);f.sid===this.localParticipant.sid&&(p=this.localParticipant),p&&(p.audioLevel=f.level,p.setIsSpeaking(f.active),f.active?d.set(f.sid,p):d.delete(f.sid))});const h=Array.from(d.values());h.sort((f,p)=>p.audioLevel-f.audioLevel),this.activeSpeakers=h,this.emitWhenConnected(oe.ActiveSpeakersChanged,h)},this.handleStreamStateUpdate=c=>{c.streamStates.forEach(d=>{const h=this.getRemoteParticipantBySid(d.participantSid);if(!h)return;const f=h.getTrackPublicationBySid(d.trackSid);if(!f||!f.track)return;const p=ie.streamStateFromProto(d.state);p!==f.track.streamState&&(f.track.streamState=p,h.emit(me.TrackStreamStateChanged,f,f.track.streamState),this.emitWhenConnected(oe.TrackStreamStateChanged,f,f.track.streamState,h))})},this.handleSubscriptionPermissionUpdate=c=>{const d=this.getRemoteParticipantBySid(c.participantSid);if(!d)return;const h=d.getTrackPublicationBySid(c.trackSid);h&&h.setAllowed(c.allowed)},this.handleSubscriptionError=c=>{const d=Array.from(this.remoteParticipants.values()).find(f=>f.trackPublications.has(c.trackSid));if(!d)return;const h=d.getTrackPublicationBySid(c.trackSid);h&&h.setSubscriptionError(c.err)},this.handleDataPacket=c=>{const d=this.remoteParticipants.get(c.participantIdentity);if(c.value.case==="user")this.handleUserPacket(d,c.value.value,c.kind);else if(c.value.case==="transcription")this.handleTranscription(d,c.value.value);else if(c.value.case==="sipDtmf")this.handleSipDtmf(d,c.value.value);else if(c.value.case==="chatMessage")this.handleChatMessage(d,c.value.value);else if(c.value.case==="metrics")this.handleMetrics(c.value.value,d);else if(c.value.case==="streamHeader")this.handleStreamHeader(c.value.value,c.participantIdentity);else if(c.value.case==="streamChunk")this.handleStreamChunk(c.value.value);else if(c.value.case==="streamTrailer")this.handleStreamTrailer(c.value.value);else if(c.value.case==="rpcRequest"){const h=c.value.value;this.handleIncomingRpcRequest(c.participantIdentity,h.id,h.method,h.payload,h.responseTimeoutMs,h.version)}},this.handleUserPacket=(c,d,h)=>{this.emit(oe.DataReceived,d.payload,c,h,d.topic),c==null||c.emit(me.DataReceived,d.payload,h)},this.handleSipDtmf=(c,d)=>{this.emit(oe.SipDTMFReceived,d,c),c==null||c.emit(me.SipDTMFReceived,d)},this.bufferedSegments=new Map,this.handleTranscription=(c,d)=>{const h=d.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(d.transcribedParticipantIdentity),f=h==null?void 0:h.trackPublications.get(d.trackId),p=BM(d,this.transcriptionReceivedTimes);f==null||f.emit(ce.TranscriptionReceived,p),h==null||h.emit(me.TranscriptionReceived,p,f),this.emit(oe.TranscriptionReceived,p,h,f)},this.handleChatMessage=(c,d)=>{const h=zM(d);this.emit(oe.ChatMessage,h,c)},this.handleMetrics=(c,d)=>{this.emit(oe.MetricsReceived,c,d)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(oe.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=c=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:c})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(oe.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(oe.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(oe.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>D(this,void 0,void 0,function*(){var c;((c=Un())===null||c===void 0?void 0:c.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(oe.MediaDevicesChanged)}),this.handleRoomUpdate=c=>{const d=this.roomInfo;this.roomInfo=c,d&&d.metadata!==c.metadata&&this.emitWhenConnected(oe.RoomMetadataChanged,c.metadata),(d==null?void 0:d.activeRecording)!==c.activeRecording&&this.emitWhenConnected(oe.RecordingStatusChanged,c.activeRecording)},this.handleConnectionQualityUpdate=c=>{c.updates.forEach(d=>{if(d.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(d.quality);return}const h=this.getRemoteParticipantBySid(d.participantSid);h&&h.setConnectionQuality(d.quality)})},this.onLocalParticipantMetadataChanged=c=>{this.emit(oe.ParticipantMetadataChanged,c,this.localParticipant)},this.onLocalParticipantNameChanged=c=>{this.emit(oe.ParticipantNameChanged,c,this.localParticipant)},this.onLocalAttributesChanged=c=>{this.emit(oe.ParticipantAttributesChanged,c,this.localParticipant)},this.onLocalTrackMuted=c=>{this.emit(oe.TrackMuted,c,this.localParticipant)},this.onLocalTrackUnmuted=c=>{this.emit(oe.TrackUnmuted,c,this.localParticipant)},this.onTrackProcessorUpdate=c=>{var d;(d=c==null?void 0:c.onPublish)===null||d===void 0||d.call(c,this)},this.onLocalTrackPublished=c=>D(this,void 0,void 0,function*(){var d,h,f,p,v,y;(d=c.track)===null||d===void 0||d.on(ce.TrackProcessorUpdate,this.onTrackProcessorUpdate),(h=c.track)===null||h===void 0||h.on(ce.Restarted,this.onLocalTrackRestarted),(v=(p=(f=c.track)===null||f===void 0?void 0:f.getProcessor())===null||p===void 0?void 0:p.onPublish)===null||v===void 0||v.call(p,this),this.emit(oe.LocalTrackPublished,c,this.localParticipant),Xi(c.track)&&(yield c.track.checkForSilence())&&this.emit(oe.LocalAudioSilenceDetected,c);const k=yield(y=c.track)===null||y===void 0?void 0:y.getDeviceId(!1),S=ym(c.source);S&&k&&k!==this.localParticipant.activeDeviceMap.get(S)&&(this.localParticipant.activeDeviceMap.set(S,k),this.emit(oe.ActiveDeviceChanged,S,k))}),this.onLocalTrackUnpublished=c=>{var d,h;(d=c.track)===null||d===void 0||d.off(ce.TrackProcessorUpdate,this.onTrackProcessorUpdate),(h=c.track)===null||h===void 0||h.off(ce.Restarted,this.onLocalTrackRestarted),this.emit(oe.LocalTrackUnpublished,c,this.localParticipant)},this.onLocalTrackRestarted=c=>D(this,void 0,void 0,function*(){const d=yield c.getDeviceId(!1),h=ym(c.source);h&&d&&d!==this.localParticipant.activeDeviceMap.get(h)&&(this.log.debug("local track restarted, setting ".concat(h," ").concat(d," active"),this.logContext),this.localParticipant.activeDeviceMap.set(h,d),this.emit(oe.ActiveDeviceChanged,h,d))}),this.onLocalConnectionQualityChanged=c=>{this.emit(oe.ConnectionQualityChanged,c,this.localParticipant)},this.onMediaDevicesError=(c,d)=>{this.emit(oe.MediaDevicesError,c,d)},this.onLocalParticipantPermissionsChanged=c=>{this.emit(oe.ParticipantPermissionsChanged,c,this.localParticipant)},this.onLocalChatMessageSent=c=>{this.emit(oe.ChatMessage,c,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},fL),e),this.log=ia((a=this.options.loggerName)!==null&&a!==void 0?a:ri.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},vC),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},yC),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},dL),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new fn,this.localParticipant=new XL("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ia(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ia(this.options.audioCaptureDefaults.deviceId)),!((s=this.options.audioOutput)===null||s===void 0)&&s.deviceId&&this.switchActiveDevice("audiooutput",Ia(this.options.audioOutput.deviceId)).catch(c=>this.log.warn("Could not set audio output: ".concat(c.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),kn()){const c=new AbortController;(l=navigator.mediaDevices)===null||l===void 0||l.addEventListener("devicechange",this.handleDeviceChange,{signal:c.signal}),Rs.cleanupRegistry&&Rs.cleanupRegistry.register(this,()=>{c.abort()})}}registerTextStreamHandler(e,i){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,i)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,i){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,i)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,i){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,i)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,i,a,s,l,c){return D(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,i),c!==1){yield this.engine.publishRpcResponse(e,i,null,xt.builtIn("UNSUPPORTED_VERSION"));return}const d=this.rpcHandlers.get(a);if(!d){yield this.engine.publishRpcResponse(e,i,null,xt.builtIn("UNSUPPORTED_METHOD"));return}let h=null,f=null;try{const p=yield d({requestId:i,callerIdentity:e,payload:s,responseTimeout:l});sp(p)>bC?(h=xt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(a))):f=p}catch(p){p instanceof xt?h=p:(console.warn("Uncaught error returned by RPC handler for ".concat(a,". Returning APPLICATION_ERROR instead."),p),h=xt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,i,f,h)})}setE2EEEnabled(e){return D(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new JM(this.options.e2ee),this.e2eeManager.on(Ma.ParticipantEncryptionStatusChanged,(i,a)=>{VM(a)&&(this.isE2EEEnabled=i),this.emit(oe.ParticipantEncryptionStatusChanged,i,a)}),this.e2eeManager.on(Ma.EncryptionError,i=>this.emit(oe.EncryptionError,i)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,i;return(i=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&i!==void 0?i:!1}getSid(){return D(this,void 0,void 0,function*(){return this.state===We.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,i)=>{const a=s=>{s.sid!==""&&(this.engine.off(he.RoomUpdate,a),e(s.sid))};this.engine.on(he.RoomUpdate,a),this.once(oe.Disconnected,()=>{this.engine.off(he.RoomUpdate,a),i("Room disconnected before room server id was available")})})})}get name(){var e,i;return(i=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&i!==void 0?i:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,i;return(i=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&i!==void 0?i:0}get numPublishers(){var e,i;return(i=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&i!==void 0?i:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new ML(this.options),this.engine.on(he.ParticipantUpdate,this.handleParticipantUpdates).on(he.RoomUpdate,this.handleRoomUpdate).on(he.SpeakersChanged,this.handleSpeakersChanged).on(he.StreamStateChanged,this.handleStreamStateUpdate).on(he.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(he.SubscriptionError,this.handleSubscriptionError).on(he.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(he.MediaTrackAdded,(e,i,a)=>{this.onTrackAdded(e,i,a)}).on(he.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(he.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(he.DataPacketReceived,this.handleDataPacket).on(he.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(We.SignalReconnecting)&&this.emit(oe.SignalReconnecting)}).on(he.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(We.Connected)&&this.emit(oe.Reconnected)}).on(he.SignalResumed,()=>{this.bufferedEvents=[],(this.state===We.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(he.Restarting,this.handleRestarting).on(he.SignalRestarted,this.handleSignalRestarted).on(he.Offline,()=>{this.setAndEmitConnectionState(We.Reconnecting)&&this.emit(oe.Reconnecting)}).on(he.DCBufferStatusChanged,(e,i)=>{this.emit(oe.DCBufferStatusChanged,e,i)}).on(he.LocalTrackSubscribed,e=>{const i=this.localParticipant.getTrackPublications().find(a=>{let{trackSid:s}=a;return s===e});if(!i){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(me.LocalTrackSubscribed,i),this.emitWhenConnected(oe.LocalTrackSubscribed,i,this.localParticipant)}).on(he.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((i,a)=>{this.handleParticipantDisconnected(a,i)}),this.emit(oe.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Jt.getInstance().getDevices(e,i)}prepareConnection(e,i){return D(this,void 0,void 0,function*(){if(this.state===We.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(mm(new URL(e))&&i){this.regionUrlProvider=new km(e,i);const a=yield this.regionUrlProvider.getNextBestRegionUrl();a&&this.state===We.Disconnected&&(this.regionUrl=a,yield fetch(pm(a),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(a),this.logContext))}else yield fetch(pm(e),{method:"HEAD"})}catch(a){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:a}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,i){return D(this,void 0,void 0,function*(){let a=()=>{},s;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":s=new yi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":s=new yi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":s=new yi({scenario:{case:"serverLeave",value:!0}});break;case"migration":s=new yi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":a=()=>D(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),s=new yi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":a=()=>D(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),s=new yi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":s=new yi({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),a=()=>D(this,void 0,void 0,function*(){const l=this.engine.client.onLeave;l&&l(new Au({reason:ii.CLIENT_INITIATED,action:ys.RECONNECT}))});break;case"subscriber-bandwidth":if(i===void 0||typeof i!="number")throw new Error("subscriber-bandwidth requires a number as argument");s=new yi({scenario:{case:"subscriberBandwidth",value:or(i)}});break;case"leave-full-reconnect":s=new yi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}s&&(yield this.engine.client.sendSimulateScenario(s),yield a())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,i){return D(this,arguments,void 0,function(a,s){var l=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var d,h,f,p,v,y,k;let S=!0,T=!1;const w=c?{exact:s}:s;if(a==="audioinput"){T=l.localParticipant.audioTrackPublications.size===0;const R=(d=l.getActiveDevice(a))!==null&&d!==void 0?d:l.options.audioCaptureDefaults.deviceId;l.options.audioCaptureDefaults.deviceId=w;const L=Array.from(l.localParticipant.audioTrackPublications.values()).filter(A=>A.source===ie.Source.Microphone);try{S=(yield Promise.all(L.map(A=>{var _;return(_=A.audioTrack)===null||_===void 0?void 0:_.setDeviceId(w)}))).every(A=>A===!0)}catch(A){throw l.options.audioCaptureDefaults.deviceId=R,A}const N=L.some(A=>{var _,B;return(B=(_=A.track)===null||_===void 0?void 0:_.isMuted)!==null&&B!==void 0?B:!1});S&&N&&(T=!0)}else if(a==="videoinput"){T=l.localParticipant.videoTrackPublications.size===0;const R=(h=l.getActiveDevice(a))!==null&&h!==void 0?h:l.options.videoCaptureDefaults.deviceId;l.options.videoCaptureDefaults.deviceId=w;const L=Array.from(l.localParticipant.videoTrackPublications.values()).filter(N=>N.source===ie.Source.Camera);try{S=(yield Promise.all(L.map(N=>{var A;return(A=N.videoTrack)===null||A===void 0?void 0:A.setDeviceId(w)}))).every(N=>N===!0)}catch(N){throw l.options.videoCaptureDefaults.deviceId=R,N}}else if(a==="audiooutput"){if(T=!0,!fm()&&!l.options.webAudioMix||l.options.webAudioMix&&l.audioContext&&!("setSinkId"in l.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");l.options.webAudioMix&&(s=(f=yield Jt.getInstance().normalizeDeviceId("audiooutput",s))!==null&&f!==void 0?f:""),(p=(k=l.options).audioOutput)!==null&&p!==void 0||(k.audioOutput={});const R=(v=l.getActiveDevice(a))!==null&&v!==void 0?v:l.options.audioOutput.deviceId;l.options.audioOutput.deviceId=s;try{l.options.webAudioMix&&((y=l.audioContext)===null||y===void 0||y.setSinkId(s)),yield Promise.all(Array.from(l.remoteParticipants.values()).map(L=>L.setAudioOutput({deviceId:s})))}catch(L){throw l.options.audioOutput.deviceId=R,L}}return T&&(l.localParticipant.activeDeviceMap.set(a,s),l.emit(oe.ActiveDeviceChanged,a,s)),S}()})}setupLocalParticipantEvents(){this.localParticipant.on(me.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(me.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(me.AttributesChanged,this.onLocalAttributesChanged).on(me.TrackMuted,this.onLocalTrackMuted).on(me.TrackUnmuted,this.onLocalTrackUnmuted).on(me.LocalTrackPublished,this.onLocalTrackPublished).on(me.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(me.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(me.MediaDevicesError,this.onMediaDevicesError).on(me.AudioStreamAcquired,this.startAudio).on(me.ChatMessage,this.onLocalChatMessageSent).on(me.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,i,a){if(this.state===We.Connecting||this.state===We.Reconnecting){const p=()=>{this.onTrackAdded(e,i,a),v()},v=()=>{this.off(oe.Reconnected,p),this.off(oe.Connected,p),this.off(oe.Disconnected,v)};this.once(oe.Reconnected,p),this.once(oe.Connected,p),this.once(oe.Disconnected,v);return}if(this.state===We.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const s=RM(i.id),l=s[0];let c=s[1],d=e.id;if(c&&c.startsWith("TR")&&(d=c),l===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const h=Array.from(this.remoteParticipants.values()).find(p=>p.sid===l);if(!h){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(l),this.logContext);return}let f;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?f=this.options.adaptiveStream:f={}),h.addSubscribedMediaTrack(e,d,i,a,f)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1?arguments[1]:void 0;var a;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==We.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(s=>{s.trackPublications.forEach(l=>{s.unpublishTrack(l.trackSid)})}),this.localParticipant.trackPublications.forEach(s=>{var l,c,d;s.track&&this.localParticipant.unpublishTrack(s.track,e),e?((l=s.track)===null||l===void 0||l.detach(),(c=s.track)===null||c===void 0||c.stop()):(d=s.track)===null||d===void 0||d.stopMonitor()}),this.localParticipant.off(me.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(me.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(me.AttributesChanged,this.onLocalAttributesChanged).off(me.TrackMuted,this.onLocalTrackMuted).off(me.TrackUnmuted,this.onLocalTrackUnmuted).off(me.LocalTrackPublished,this.onLocalTrackPublished).off(me.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(me.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(me.MediaDevicesError,this.onMediaDevicesError).off(me.AudioStreamAcquired,this.startAudio).off(me.ChatMessage,this.onLocalChatMessageSent).off(me.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),kn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(a=navigator.mediaDevices)===null||a===void 0||a.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(We.Disconnected),this.emit(oe.Disconnected,i)}}}handleParticipantDisconnected(e,i){var a;this.remoteParticipants.delete(e),i&&(i.trackPublications.forEach(s=>{i.unpublishTrack(s.trackSid,!0)}),this.emit(oe.ParticipantDisconnected,i),i.setDisconnected(),(a=this.localParticipant)===null||a===void 0||a.handleParticipantDisconnected(i.identity))}handleStreamHeader(e,i){return D(this,void 0,void 0,function*(){var a;if(e.contentHeader.case==="byteHeader"){const s=this.byteStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let l;const c={id:e.streamId,name:(a=e.contentHeader.value.name)!==null&&a!==void 0?a:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Wc(e.timestamp),attributes:e.attributes},d=new ReadableStream({start:h=>{l=h,this.byteStreamControllers.set(e.streamId,{info:c,controller:l,startTime:Date.now()})}});s(new jL(c,d,Wc(e.totalLength)),{identity:i})}else if(e.contentHeader.case==="textHeader"){const s=this.textStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let l;const c={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},d=new ReadableStream({start:h=>{l=h,this.textStreamControllers.set(e.streamId,{info:c,controller:l,startTime:Date.now()})}});s(new BL(c,d,Wc(e.totalLength)),{identity:i})}})}handleStreamChunk(e){const i=this.byteStreamControllers.get(e.streamId);i&&e.content.length>0&&i.controller.enqueue(e);const a=this.textStreamControllers.get(e.streamId);a&&e.content.length>0&&a.controller.enqueue(e)}handleStreamTrailer(e){const i=this.textStreamControllers.get(e.streamId);i&&(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.textStreamControllers.delete(e.streamId));const a=this.byteStreamControllers.get(e.streamId);a&&(a.info.attributes=Object.assign(Object.assign({},a.info.attributes),e.attributes),a.controller.close(),this.byteStreamControllers.delete(e.streamId))}selectDefaultDevices(){return D(this,void 0,void 0,function*(){var e,i,a;const s=Jt.getInstance().previousDevices,l=yield Jt.getInstance().getDevices(void 0,!1),c=Un();if((c==null?void 0:c.name)==="Chrome"&&c.os!=="iOS")for(let h of l){const f=s.find(p=>p.deviceId===h.deviceId);f&&f.label!==""&&f.kind===h.kind&&f.label!==h.label&&this.getActiveDevice(h.kind)==="default"&&this.emit(oe.ActiveDeviceChanged,h.kind,h.deviceId)}const d=["audiooutput","audioinput","videoinput"];for(let h of d){const f=HM(h),p=this.localParticipant.getTrackPublication(f);if(p&&(!((e=p.track)===null||e===void 0)&&e.isUserProvided))continue;const v=l.filter(k=>k.kind===h),y=this.getActiveDevice(h);if(y===((i=s.filter(k=>k.kind===h)[0])===null||i===void 0?void 0:i.deviceId)&&v.length>0&&((a=v[0])===null||a===void 0?void 0:a.deviceId)!==y){yield this.switchActiveDevice(h,v[0].deviceId);continue}h==="audioinput"&&!hm()||h==="videoinput"||v.length>0&&!v.find(k=>k.deviceId===this.getActiveDevice(h))&&(h!=="audiooutput"||!hm())&&(yield this.switchActiveDevice(h,v[0].deviceId))}})}acquireAudioContext(){return D(this,void 0,void 0,function*(){var e,i;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=mC())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(s=>s.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),xn(200)])}catch(s){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:s}))}const a=((i=this.audioContext)===null||i===void 0?void 0:i.state)==="running";a!==this.canPlaybackAudio&&(this.audioEnabled=a,this.emit(oe.AudioPlaybackStatusChanged,a))})}createParticipant(e,i){var a;let s;return i?s=uu.fromParticipantInfo(this.engine.client,i,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):s=new uu(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&s.setAudioContext(this.audioContext),!((a=this.options.audioOutput)===null||a===void 0)&&a.deviceId&&s.setAudioOutput(this.options.audioOutput).catch(l=>this.log.warn("Could not set audio output: ".concat(l.message),this.logContext)),s}getOrCreateParticipant(e,i){if(this.remoteParticipants.has(e)){const s=this.remoteParticipants.get(e);return i&&s.updateInfo(i)&&this.sidToIdentity.set(i.sid,i.identity),s}const a=this.createParticipant(e,i);return this.remoteParticipants.set(e,a),this.sidToIdentity.set(i.sid,i.identity),this.emitWhenConnected(oe.ParticipantConnected,a),a.on(me.TrackPublished,s=>{this.emitWhenConnected(oe.TrackPublished,s,a)}).on(me.TrackSubscribed,(s,l)=>{s.kind===ie.Kind.Audio?(s.on(ce.AudioPlaybackStarted,this.handleAudioPlaybackStarted),s.on(ce.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):s.kind===ie.Kind.Video&&(s.on(ce.VideoPlaybackFailed,this.handleVideoPlaybackFailed),s.on(ce.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(oe.TrackSubscribed,s,l,a)}).on(me.TrackUnpublished,s=>{this.emit(oe.TrackUnpublished,s,a)}).on(me.TrackUnsubscribed,(s,l)=>{this.emit(oe.TrackUnsubscribed,s,l,a)}).on(me.TrackMuted,s=>{this.emitWhenConnected(oe.TrackMuted,s,a)}).on(me.TrackUnmuted,s=>{this.emitWhenConnected(oe.TrackUnmuted,s,a)}).on(me.ParticipantMetadataChanged,s=>{this.emitWhenConnected(oe.ParticipantMetadataChanged,s,a)}).on(me.ParticipantNameChanged,s=>{this.emitWhenConnected(oe.ParticipantNameChanged,s,a)}).on(me.AttributesChanged,s=>{this.emitWhenConnected(oe.ParticipantAttributesChanged,s,a)}).on(me.ConnectionQualityChanged,s=>{this.emitWhenConnected(oe.ConnectionQualityChanged,s,a)}).on(me.ParticipantPermissionsChanged,s=>{this.emitWhenConnected(oe.ParticipantPermissionsChanged,s,a)}).on(me.TrackSubscriptionStatusChanged,(s,l)=>{this.emitWhenConnected(oe.TrackSubscriptionStatusChanged,s,l,a)}).on(me.TrackSubscriptionFailed,(s,l)=>{this.emit(oe.TrackSubscriptionFailed,s,a,l)}).on(me.TrackSubscriptionPermissionChanged,(s,l)=>{this.emitWhenConnected(oe.TrackSubscriptionPermissionChanged,s,l,a)}).on(me.Active,()=>{this.emitWhenConnected(oe.ParticipantActive,a),a.kind===nl.AGENT&&this.localParticipant.setActiveAgent(a)}),i&&a.updateInfo(i),a}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((a,s)=>(a.push(...s.getTrackPublications()),a),[]),i=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,i)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const i of e.videoTrackPublications.values())i.isSubscribed&&FM(i)&&i.emitTrackUpdate()}getRemoteParticipantBySid(e){const i=this.sidToIdentity.get(e);if(i)return this.remoteParticipants.get(i)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=nn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,ii.STATE_MISMATCH))):e=0},ZL)}clearConnectionReconcile(){this.connectionReconcileInterval&&nn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(oe.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[i,a]=e;this.emit(i,...a)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];if(this.state===We.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,a]);else if(this.state===We.Connected)return this.emit(e,...a);return!1}simulateParticipants(e){return D(this,void 0,void 0,function*(){var i,a;const s=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),l=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new wu({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:pt.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new hr({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(oe.SignalConnected),this.emit(oe.Connected),this.setAndEmitConnectionState(We.Connected),s.video){const c=new Em(ie.Kind.Video,new hs({source:Lt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ti.AUDIO,name:"video-dummy"}),new cu(s.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:Nb(160*((i=l.aspectRatios[0])!==null&&i!==void 0?i:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(me.LocalTrackPublished,c)}if(s.audio){const c=new Em(ie.Kind.Audio,new hs({source:Lt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ti.AUDIO}),new ws(s.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:vh(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(me.LocalTrackPublished,c)}for(let c=0;c<l.count-1;c+=1){let d=new hr({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(c),state:vs.ACTIVE,tracks:[],joinedAt:pt.parse(Date.now())});const h=this.getOrCreateParticipant(d.identity,d);if(l.video){const f=Nb(160*((a=l.aspectRatios[c%l.aspectRatios.length])!==null&&a!==void 0?a:1),160,!1,!0),p=new hs({source:Lt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ti.AUDIO});h.addSubscribedMediaTrack(f,p.sid,new MediaStream([f]),new RTCRtpReceiver),d.tracks=[...d.tracks,p]}if(l.audio){const f=vh(),p=new hs({source:Lt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ti.AUDIO});h.addSubscribedMediaTrack(f,p.sid,new MediaStream([f]),new RTCRtpReceiver),d.tracks=[...d.tracks,p]}h.updateInfo(d)}})}emit(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];if(e!==oe.ActiveSpeakersChanged&&e!==oe.TranscriptionReceived){const l=RC(a).filter(c=>c!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:l}))}return super.emit(e,...a)}}Rs.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function RC(t){return t.map(e=>{if(e)return Array.isArray(e)?RC(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var ei;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(ei||(ei={}));class za extends Ai.EventEmitter{constructor(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=ei.IDLE,this.logs=[],this.options={},this.url=e,this.token=i,this.name=this.constructor.name,this.room=new Rs(a.roomOptions),this.connectOptions=a.connectOptions,this.options=a}run(e){return D(this,void 0,void 0,function*(){if(this.status!==ei.IDLE)throw Error("check is running already");this.setStatus(ei.RUNNING);try{yield this.perform()}catch(i){i instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(i.message):this.appendError(i.message))}return yield this.disconnect(),yield new Promise(i=>setTimeout(i,500)),this.status!==ei.SKIPPED&&this.setStatus(this.isSuccess()?ei.SUCCESS:ei.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return D(this,void 0,void 0,function*(){return this.room.state===We.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return D(this,void 0,void 0,function*(){this.room&&this.room.state!==We.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(ei.SKIPPED)}switchProtocol(e){return D(this,void 0,void 0,function*(){let i=!1,a=!1;if(this.room.on(oe.Reconnecting,()=>{i=!0}),this.room.once(oe.Reconnected,()=>{a=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(l=>setTimeout(l,1e3)),!i)return;const s=Date.now()+1e4;for(;Date.now()<s;){if(a)return;yield xn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class WL extends za{get description(){return"Cloud regions"}perform(){return D(this,void 0,void 0,function*(){const e=new km(this.url,this.token);if(!e.isCloud()){this.skip();return}const i=[],a=new Set;for(let l=0;l<3;l++){const c=yield e.getNextBestRegionUrl();if(!c)break;if(a.has(c))continue;a.add(c);const d=yield this.checkCloudRegion(c);this.appendMessage("".concat(d.region," RTT: ").concat(d.rtt,"ms, duration: ").concat(d.duration,"ms")),i.push(d)}i.sort((l,c)=>(l.duration-c.duration)*.5+(l.rtt-c.rtt)*.5);const s=i[0];this.bestStats=s,this.appendMessage("best Cloud region: ".concat(s.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return D(this,void 0,void 0,function*(){var i,a;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const s=(i=this.room.serverInfo)===null||i===void 0?void 0:i.region;if(!s)throw new Error("Region not found");const l=yield this.room.localParticipant.streamText({topic:"test"}),c=1e3,h=1e6/c,f="A".repeat(c),p=Date.now();for(let S=0;S<h;S++)yield l.write(f);yield l.close();const v=Date.now(),y=yield(a=this.room.engine.pcManager)===null||a===void 0?void 0:a.publisher.getStats(),k={region:s,rtt:1e4,duration:v-p};return y==null||y.forEach(S=>{S.type==="candidate-pair"&&S.nominated&&(k.rtt=S.currentRoundTripTime*1e3)}),yield this.disconnect(),k})}}const wh=1e4;class $L extends za{get description(){return"Connection via UDP vs TCP"}perform(){return D(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),i=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-i.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-i.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=i):this.appendMessage("best connection quality via udp");const a=this.bestStats;this.appendMessage("upstream bitrate: ".concat((a.bitrateTotal/a.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((a.rttTotal/a.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((a.jitterTotal/a.count*1e3).toFixed(2)," ms")),a.packetsLost>0&&this.appendWarning("packets lost: ".concat((a.packetsLost/a.packetsSent*100).toFixed(2),"%")),a.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((a.qualityLimitationDurations.bandwidth/(wh/1e3)*100).toFixed(2),"%")),a.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((a.qualityLimitationDurations.cpu/(wh/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return D(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const i=document.createElement("canvas");i.width=1280,i.height=720;const a=i.getContext("2d");if(!a)throw new Error("Could not get canvas context");let s=0;const l=()=>{s=(s+1)%360,a.fillStyle="hsl(".concat(s,", 100%, 50%)"),a.fillRect(0,0,i.width,i.height),requestAnimationFrame(l)};l();const d=i.captureStream(30).getVideoTracks()[0],f=(yield this.room.localParticipant.publishTrack(d,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,p={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},v=setInterval(()=>D(this,void 0,void 0,function*(){const y=yield f.getRTCStatsReport();y==null||y.forEach(k=>{k.type==="outbound-rtp"?(p.packetsSent=k.packetsSent,p.qualityLimitationDurations=k.qualityLimitationDurations,p.bitrateTotal+=k.targetBitrate,p.count++):k.type==="remote-inbound-rtp"&&(p.packetsLost=k.packetsLost,p.rttTotal+=k.roundTripTime,p.jitterTotal+=k.jitter)})}),1e3);return yield new Promise(y=>setTimeout(y,wh)),clearInterval(v),d.stop(),i.remove(),yield this.disconnect(),p})}}class eU extends za{get description(){return"Can publish audio"}perform(){return D(this,void 0,void 0,function*(){var e;const i=yield this.connect(),a=yield KL();if(yield hC(a,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),i.localParticipant.publishTrack(a),yield new Promise(d=>setTimeout(d,3e3));const l=yield(e=a.sender)===null||e===void 0?void 0:e.getStats();if(!l)throw new Error("Could not get RTCStats");let c=0;if(l.forEach(d=>{d.type==="outbound-rtp"&&(d.kind==="audio"||!d.kind&&d.mediaType==="audio")&&(c=d.packetsSent)}),c===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(c," audio packets"))})}}class tU extends za{get description(){return"Can publish video"}perform(){return D(this,void 0,void 0,function*(){var e;const i=yield this.connect(),a=yield GL();yield this.checkForVideo(a.mediaStreamTrack),i.localParticipant.publishTrack(a),yield new Promise(c=>setTimeout(c,5e3));const s=yield(e=a.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let l=0;if(s.forEach(c=>{c.type==="outbound-rtp"&&(c.kind==="video"||!c.kind&&c.mediaType==="video")&&(l+=c.packetsSent)}),l===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(l," video packets"))})}checkForVideo(e){return D(this,void 0,void 0,function*(){const i=new MediaStream;i.addTrack(e.clone());const a=document.createElement("video");a.srcObject=i,a.muted=!0,yield new Promise(s=>{a.onplay=()=>{setTimeout(()=>{var l,c,d,h;const f=document.createElement("canvas"),p=e.getSettings(),v=(c=(l=p.width)!==null&&l!==void 0?l:a.videoWidth)!==null&&c!==void 0?c:1280,y=(h=(d=p.height)!==null&&d!==void 0?d:a.videoHeight)!==null&&h!==void 0?h:720;f.width=v,f.height=y;const k=f.getContext("2d");k.drawImage(a,0,0);const T=k.getImageData(0,0,f.width,f.height).data;let w=!0;for(let R=0;R<T.length;R+=4)if(T[R]!==0||T[R+1]!==0||T[R+2]!==0){w=!1;break}w?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),s()},1e3)},a.play()}),i.getTracks().forEach(s=>s.stop()),a.remove()})}}class nU extends za{get description(){return"Resuming connection after interruption"}perform(){return D(this,void 0,void 0,function*(){var e;const i=yield this.connect();let a=!1,s=!1,l;const c=new Promise(f=>{setTimeout(f,5e3),l=f}),d=()=>{a=!0};i.on(oe.SignalReconnecting,d).on(oe.Reconnecting,d).on(oe.Reconnected,()=>{s=!0,l(!0)}),(e=i.engine.client.ws)===null||e===void 0||e.close();const h=i.engine.client.onClose;if(h&&h(""),yield c,a){if(!s||i.state!==We.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class iU extends za{get description(){return"Can connect via TURN"}perform(){return D(this,void 0,void 0,function*(){var e,i;const a=new np,s=yield a.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let l=!1,c=!1,d=!1;for(let h of s.iceServers)for(let f of h.urls)f.startsWith("turn:")?(c=!0,d=!0):f.startsWith("turns:")&&(c=!0,d=!0,l=!0),f.startsWith("stun:")&&(d=!0);d?c&&!l&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield a.close(),!((i=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||i===void 0)&&i.iceServers||c?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(h=>setTimeout(h,0)))})}}class aU extends za{get description(){return"Establishing WebRTC connection"}perform(){return D(this,void 0,void 0,function*(){let e=!1,i=!1;this.room.on(oe.SignalConnected,()=>{const a=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(s,l)=>{if(s.candidate){const c=new RTCIceCandidate(s);let d="".concat(c.protocol," ").concat(c.address,":").concat(c.port," ").concat(c.type);c.address&&(rU(c.address)?d+=" (private)":c.protocol==="tcp"&&c.tcpType==="passive"?(e=!0,d+=" (passive)"):c.protocol==="udp"&&(i=!0)),this.appendMessage(d)}a&&a(s,l)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=s=>{s instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(s.errorCode," ").concat(s.errorText," ").concat(s.url))})});try{yield this.connect(),Ke.info("now the room is connected")}catch(a){throw this.appendWarning("ports need to be open on firewall in order to connect."),a}e||this.appendWarning("Server is not configured for ICE/TCP"),i||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function rU(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const i=parseInt(e[1],10);if(i>=16&&i<=31)return!0}}return!1}class sU extends za{get description(){return"Connecting to signal connection via WebSocket"}perform(){return D(this,void 0,void 0,function*(){var e,i,a;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let s=new np;const l=yield s.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(l.serverVersion,".")),((e=l.serverInfo)===null||e===void 0?void 0:e.edition)===mk.Cloud&&(!((i=l.serverInfo)===null||i===void 0)&&i.region)&&this.appendMessage("LiveKit Cloud: ".concat((a=l.serverInfo)===null||a===void 0?void 0:a.region)),yield s.close()})}}class DU extends Ai.EventEmitter{constructor(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=i,this.options=a}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:ei.IDLE,name:"",description:""}),e}updateCheck(e,i){this.checkResults.set(e,i),this.emit("checkUpdate",e,i)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==ei.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return D(this,void 0,void 0,function*(){const i=this.getNextCheckId(),a=new e(this.url,this.token,this.options),s=c=>{this.updateCheck(i,c)};a.on("update",s);const l=yield a.run();return a.off("update",s),l})}checkWebsocket(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(sU)})}checkWebRTC(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(aU)})}checkTURN(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(iU)})}checkReconnect(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(nU)})}checkPublishAudio(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(eU)})}checkPublishVideo(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(tU)})}checkConnectionProtocol(){return D(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck($L);if(e.data&&"protocol"in e.data){const i=e.data;this.options.protocol=i.protocol}return e})}checkCloudRegion(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(WL)})}}function oU(t,e,i,a){const[s,l]=x.useState(null),[c,d]=x.useState(!1),[h,f]=x.useState([]),p=x.useRef(null);return x.useEffect(()=>{if(!t||!e||!i||!a)return;let v=null;return(async()=>{v=new Rs,v.on("participantConnected",k=>{console.log("[LIVEKIT] participantConnected:",k.identity)}),v.on("participantDisconnected",k=>{console.log("[LIVEKIT] participantDisconnected:",k.identity)}),v.on("connected",()=>{console.log("[LIVEKIT] Room connected:",{roomSid:t,userId:e})}),v.on("disconnected",()=>{console.log("[LIVEKIT] Room disconnected:",{roomSid:t,userId:e})}),v.on("dataReceived",(k,S,T)=>{try{const w=JSON.parse(new TextDecoder().decode(k));f(R=>[...R,{...w,participant:S,kind:T}]),console.log("[LIVEKIT] Data message received:",w)}catch(w){console.error("[LIVEKIT] Failed to parse data message:",w)}});try{await v.connect(i,a),l(v),p.current=v,d(!0)}catch(k){console.error("[LIVEKIT] Failed to connect:",k,{wsUrl:i,token:a,roomSid:t,userId:e})}})(),()=>{p.current&&(p.current.disconnect(),d(!1))}},[t,e,i,a]),{room:s,isConnected:c,dataMessages:h}}const Dc="http://localhost:3000/api/v1";class Jb{static encodeWAV(e,i=16e3){const a=new ArrayBuffer(44+e.length*2),s=new DataView(a),l=(d,h)=>{for(let f=0;f<h.length;f++)s.setUint8(d+f,h.charCodeAt(f))};l(0,"RIFF"),s.setUint32(4,36+e.length*2,!0),l(8,"WAVE"),l(12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,1,!0),s.setUint32(24,i,!0),s.setUint32(28,i*2,!0),s.setUint16(32,2,!0),s.setUint16(34,16,!0),l(36,"data"),s.setUint32(40,e.length*2,!0);let c=44;for(let d=0;d<e.length;d++){const h=Math.max(-1,Math.min(1,e[d]));s.setInt16(c,h*32767,!0),c+=2}return new Blob([a],{type:"audio/wav"})}static async processAudioBuffer(e){const i=e.getChannelData(0),a=16e3;let s;return e.sampleRate!==a?s=this.resample(i,e.sampleRate,a):s=i,this.encodeWAV(s,a)}static resample(e,i,a){if(i===a)return e;const s=i/a,l=Math.round(e.length/s),c=new Float32Array(l);for(let d=0;d<l;d++){const h=d*s,f=Math.floor(h),p=h-f;f+1<e.length?c[d]=e[f]*(1-p)+e[f+1]*p:c[d]=e[f]}return c}}const lU=()=>{var qt,In;const[t,e]=x.useState(""),[i,a]=x.useState(!1),[s,l]=x.useState(!1),[c,d]=x.useState(!1),[h,f]=x.useState(!0),p=x.useRef(null),v=x.useRef(null),y=x.useRef(null),k=x.useRef([]),S=x.useRef(0),[T,w]=x.useState([]),[R,L]=x.useState(null),N=x.useRef(null),{roomId:A,role:_}=x.useContext(qm),B=oi(),I=Ne.getUserLanguage();localStorage.getItem("listenerLanguage");const[F,G]=x.useState(null),[$,ae]=x.useState(null),[ve,Fe]=x.useState(null),[Xe,Re]=x.useState(null),[j,re]=x.useState("disconnected"),[ee,Ae]=x.useState([]),P=()=>{const se=localStorage.getItem("token");if(!se)return null;try{const ue=JSON.parse(atob(se.split(".")[1]));return ue.userId||ue.id||ue.sub}catch(ue){return console.error("Error decoding token:",ue),null}};x.useEffect(()=>{const se=Ne.getUserData(),ue=(se==null?void 0:se.id)||(se==null?void 0:se.userId)||P();if(!A){ln.error("Missing room ID. Please select a room again."),console.error("[JoinPage] Missing roomId. Redirecting to dashboard."),B("/");return}if(!ue){ln.error("Missing user ID. Please log in again."),console.error("[JoinPage] Missing userId. Redirecting to login."),B("/login");return}A&&ue&&!F&&(console.log("[LIVEKIT] Initializing connection with:",{roomId:A,userId:ue}),Q(A,ue))},[A,F,B]);const Q=async(se,ue)=>{try{console.log("[LIVEKIT] Requesting token for room:",{roomId:se,userId:ue});const pe=await fetch(`${Dc}/livekit/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:se,userId:ue})}),de=await pe.json();if(!pe.ok||!de.success){console.error("[LIVEKIT] Token request failed:",de),ln.error(de.message||"Failed to get LiveKit token.");return}if(!de.token||!de.wsUrl){console.error("[LIVEKIT] Missing token or wsUrl in backend response:",de),ln.error("Invalid token response from backend.");return}console.log("[LIVEKIT] Received token and wsUrl:",{token:de.token,wsUrl:de.wsUrl}),G(de.token),ae(de.wsUrl),Fe(se),Re(ue)}catch(pe){console.error("[LIVEKIT] Error joining:",pe),ln.error("Failed to connect to LiveKit. Please try again.")}},{room:K,isConnected:J,dataMessages:le}=oU(ve||"",Xe||"",$||"",F||"");x.useEffect(()=>{!K&&ve&&Xe&&$&&F&&(console.error("[LIVEKIT] Connection failed with params:",{livekitRoomName:ve,livekitUserName:Xe,livekitWsUrl:$,livekitToken:F}),ln.error("Failed to connect to LiveKit room. Please check your network or room status."))},[K,ve,Xe,$,F]),x.useEffect(()=>{if(!K)return;const se=pe=>{console.log("[LIVEKIT] Participant connected:",pe.identity),Ae(de=>[...de,pe]),pe.on("trackPublished",de=>{console.log("[LIVEKIT] Track published:",{participant:pe.identity,kind:de.kind,trackSid:de.trackSid})})},ue=pe=>{console.log("[LIVEKIT] Participant disconnected:",pe.identity),Ae(de=>de.filter(Ce=>Ce!==pe))};return K.on(oe.ParticipantConnected,se).on(oe.ParticipantDisconnected,ue),Ae(Array.from(K.remoteParticipants.values())),()=>{K.off(oe.ParticipantConnected,se).off(oe.ParticipantDisconnected,ue)}},[K]),x.useEffect(()=>{const se=Ne.getUserData(),ue=(se==null?void 0:se.id)||(se==null?void 0:se.userId)||P();A&&ue&&!F&&(console.log("[LIVEKIT] Initializing connection..."),Q(A,ue))},[A,F]);const ke=x.useRef(null);x.useEffect(()=>{if(_!=="creator"||!i||!R||!K||!J)return;(async()=>{try{if(ke.current&&(await K.localParticipant.unpublishTrack(ke.current),ke.current.stop(),ke.current=null),K.localParticipant.getTrackPublications().filter(xe=>{var Ue;return((Ue=xe.track)==null?void 0:Ue.kind)==="audio"}).length>0){console.log("[LIVEKIT] Audio track already published, skipping.");return}console.log("[LIVEKIT] Publishing audio track...");const de=R.getAudioTracks()[0].clone(),Ce=new ws(de);await K.localParticipant.publishTrack(Ce),ke.current=Ce,console.log("[LIVEKIT] Audio track published successfully")}catch(ue){console.error("[LIVEKIT] Error publishing audio:",ue)}})()},[_,i,R,K,J]),x.useEffect(()=>{var ue;if(console.log("Received dataMessages:",le),!(le!=null&&le.length))return;const se=le[le.length-1];se.type==="transcription"&&((ue=se.text)!=null&&ue.trim())&&ge(se)},[le]);const ge=async se=>{e(""),N.current&&clearTimeout(N.current);try{const ue=localStorage.getItem("listenerLanguage")||I||"en",pe=se.language||"en";if(ue===pe){e(se.text),w(Ue=>[...Ue.slice(-19),{...se,translatedText:se.text,language:ue}]),N.current=setTimeout(()=>e(""),5e3);return}const xe=(await(await fetch(`${Dc}/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:se.text,targetLang:ue,sourceLang:pe||"auto"})})).json()).translatedText||se.text;e(xe),w(Ue=>[...Ue.slice(-19),{...se,text:se.text,translatedText:xe,language:ue}]),N.current=setTimeout(()=>e(""),5e3),_==="listener"&&Le(xe,ue)}catch(ue){console.error("Translation error:",ue),e(se.text),w(pe=>[...pe.slice(-19),{...se,language:I,translatedText:se.text}]),N.current=setTimeout(()=>e(""),5e3)}},Le=async(se,ue)=>{try{const de=await(await fetch(`${Dc}/audio/tts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:se,language:ue})})).json();de.audioContent&&await new Audio(`data:audio/mp3;base64,${de.audioContent}`).play()}catch(pe){console.error("TTS playback error:",pe)}},Ge=async(se,ue)=>{if(!K||K.state!=="connected"){console.warn("[LIVEKIT] Cannot publish - room not connected");return}const pe=K.localParticipant.identity,de=K.localParticipant.name||pe,Ce={type:"transcription",text:se,language:ue,timestamp:Date.now(),isLocal:!0,participantName:de,participantId:pe,sender:pe};try{console.log("[LIVEKIT] Publishing transcription:",Ce),await K.localParticipant.publishData(new TextEncoder().encode(JSON.stringify(Ce)),{topic:"transcription",reliable:!0}),w(xe=>[...xe.slice(-19),Ce]),e(se)}catch(xe){console.error("[LIVEKIT] Failed to publish transcription:",xe)}};let ft=!1;const an=()=>localStorage.getItem("listenerLanguage")||I;x.useRef([]);const wn=async(se,ue,pe)=>{if(ft)return;ft=!0;const de=P();if(!de||!A){ln.error("Missing user or room information"),ft=!1;return}try{d(!0);const Ce=await se.arrayBuffer(),xe=btoa(String.fromCharCode(...new Uint8Array(Ce))),Ue=await fetch(`${Dc}/audio/process`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({userId:de,roomId:A,chunkIndex:ue,totalChunks:pe,audio:xe,targetLanguageCode:an(),audioFormat:"wav"})});if(!Ue.ok)throw new Error(`HTTP error! status: ${Ue.status}`);const bt=await Ue.json();if(console.log("AUDIO DEBUG: Backend response:",bt),bt.text&&bt.text.trim()&&bt.audioContent){if(_==="listener")try{console.log("TTS DEBUG: Attempting to play TTS audio. audioContent length:",bt.audioContent.length);const rn=new Blob([Uint8Array.from(atob(bt.audioContent),un=>un.charCodeAt(0))],{type:"audio/mp3"}),ht=URL.createObjectURL(rn),St=new Audio(ht);St.onplay=()=>console.log("TTS DEBUG: Audio playback started"),St.onerror=un=>console.error("TTS DEBUG: Audio playback error",un),St.play().catch(un=>console.error("TTS DEBUG: Audio play() promise rejected",un))}catch(rn){console.error("TTS DEBUG: Error creating or playing audio",rn)}else console.log("AUDIO DEBUG: Creator, skipping TTS playback.");const Zt=new CustomEvent("transcription",{detail:{text:bt.text,language:bt.language||I,isLocal:!0,participantName:"You"}});console.log("AUDIO DEBUG: Dispatching transcription event:",Zt.detail),window.dispatchEvent(Zt),await Ge(bt.text,bt.language||I)}else console.log("AUDIO DEBUG: No TTS or transcription to play/show.")}catch(Ce){console.error("Error processing audio chunk:",Ce),ln.error("Failed to process audio: "+(Ce instanceof Error?Ce.message:"Unknown error"))}finally{d(!1),ft=!1}},hn=async()=>{if(y.current&&(y.current.port.postMessage({type:"stop"}),y.current.disconnect(),y.current=null),v.current&&(v.current.disconnect(),v.current=null),p.current&&p.current.state!=="closed"&&(await p.current.close(),p.current=null),R==null||R.getTracks().forEach(se=>se.stop()),k.current.length>0)try{const se=k.current.reduce((Ue,bt)=>Ue+bt.length,0),ue=new Float32Array(se);let pe=0;for(const Ue of k.current)ue.set(Ue,pe),pe+=Ue.length;const Ce=new AudioContext().createBuffer(1,ue.length,16e3);Ce.copyToChannel(ue,0);const xe=await Jb.processAudioBuffer(Ce);await wn(xe,S.current,S.current+1),k.current=[]}catch(se){console.error("Error processing final chunk:",se)}a(!1),l(!1),S.current=0,L(null),ln.success("Recording stopped")},Fa=async()=>{if(_!=="creator")return ln.error("Only creator can start recording");if(console.log("AUDIO DEBUG: Starting speech, requesting mic..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("AUDIO DEBUG: getUserMedia not supported");return}try{const se=await navigator.mediaDevices.getUserMedia({audio:!0});L(se),console.log("AUDIO DEBUG: Mic stream started",se),p.current&&await p.current.close(),p.current=new AudioContext({sampleRate:16e3}),v.current=p.current.createMediaStreamSource(se),await p.current.audioWorklet.addModule("/src/audio-processor.js"),y.current=new AudioWorkletNode(p.current,"audio-processor"),k.current=[],S.current=0;let ue=[],pe=0;const de=32e3;let Ce=null;const xe=8e3;let Ue=null;y.current.port.onmessage=async bt=>{const Zt=bt.data,rn=new Float32Array(Zt);if(ue.push(rn),pe+=rn.length,pe>=de)try{let ht=new Float32Array(pe+(Ce?Ce.length:0)),St=0;Ce&&(ht.set(Ce,St),St+=Ce.length);for(const ui of ue)ht.set(ui,St),St+=ui.length;if(ht.length>=xe?Ce=ht.slice(ht.length-xe):Ce=ht.slice(),!p.current)return;Ue?Ue.length!==ht.length&&(Ue=p.current.createBuffer(1,ht.length,16e3)):Ue=p.current.createBuffer(1,ht.length,16e3),Ue.copyToChannel(ht,0);const un=await Jb.processAudioBuffer(Ue);await wn(un,S.current,-1),ue=[],pe=0,S.current++}catch(ht){console.error("Error processing audio chunk:",ht)}},v.current.connect(y.current),y.current.connect(p.current.destination),a(!0),l(!1),ln.success("Recording started (WAV format)")}catch(se){console.error("Error starting speech:",se),ln.error("Failed to start speech: "+(se instanceof Error?se.message:String(se))),l(!1)}},_i=()=>{if(_!=="creator")return ln.error("Only the creator can control mic");if(s||c)return ln.info("Please wait...");i?hn():Fa()},Ls=async()=>{i&&await hn(),B("/"),ln.info("Left the room")},yr=()=>_!=="creator"?{className:"w-9 h-9 opacity-40",disabled:!0}:s||c?{className:"w-9 h-9 animate-pulse opacity-70",disabled:!0}:i?{className:"w-9 h-9 animate-pulse opacity-100",disabled:!1}:{className:"w-9 h-9 opacity-70 hover:opacity-100",disabled:!1},It=()=>T.slice(-5).map((se,ue)=>E.jsx("div",{style:{marginBottom:4},children:se.translatedText||se.text},ue)),br=()=>s?"Connecting...":c?"🔄 Processing audio...":i?"🔴 Recording - Speak now (WAV)":"Click microphone to start";x.useEffect(()=>{(!A||!_)&&(console.warn("[JoinPage] Missing roomId or role, redirecting to dashboard."),B("/"))},[A,_,B]),x.useEffect(()=>{!A||!_||console.log("[DEBUG] useEffect running",{roomId:A,role:_})},[A,_]),x.useEffect(()=>{if(console.log("[LIVEKIT] Publish effect:",{role:_,isRecording:i,micStream:R,livekitRoom:K,isLivekitConnected:J}),_==="creator"&&i&&R&&K&&J)if(K.localParticipant.getTrackPublications().forEach(pe=>{if(pe.track&&pe.track.kind==="audio"){const de=pe.track;de&&typeof de.stop=="function"&&(console.log("[LIVEKIT][DEBUG] Unpublishing previous audio track:",pe.track.sid),K.localParticipant.unpublishTrack(de))}}),K.localParticipant.getTrackPublications().some(pe=>{var de;return((de=pe.track)==null?void 0:de.kind)==="audio"}))console.log("[LIVEKIT] Audio track already published.");else{console.log("[LIVEKIT] Publishing audio track to LiveKit...");const pe=new ws(R.getAudioTracks()[0]);K.localParticipant.publishTrack(pe).then(de=>{var xe,Ue,bt;console.log("[LIVEKIT][DEBUG] Audio track published:",{id:(xe=de.track)==null?void 0:xe.sid,muted:(Ue=de.track)==null?void 0:Ue.isMuted,kind:(bt=de.track)==null?void 0:bt.kind,pub:de});const Ce=K.localParticipant.getTrackPublications();console.log("[LIVEKIT][DEBUG] Local track publications after publish:",Ce.map(Zt=>{var rn,ht,St;return{kind:(rn=Zt.track)==null?void 0:rn.kind,id:(ht=Zt.track)==null?void 0:ht.sid,muted:(St=Zt.track)==null?void 0:St.isMuted}}))})}},[_,i,R,K,J]),x.useEffect(()=>{if(_==="listener"&&K&&J){const se=Array.from(K.remoteParticipants.values());console.log("[LIVEKIT][DEBUG] Remote participants after connect:",se.map(ue=>{const pe=ue;return{identity:pe.identity,tracks:pe.getTrackPublications().map(de=>{var Ce,xe,Ue;return{kind:(Ce=de.track)==null?void 0:Ce.kind,id:(xe=de.track)==null?void 0:xe.sid,muted:(Ue=de.track)==null?void 0:Ue.isMuted}})}})),se.forEach(ue=>{const pe=ue;pe.getTrackPublications().forEach(de=>{var Ce,xe,Ue;console.log("[LIVEKIT][DEBUG] Remote participant track:",{participant:pe.identity,kind:(Ce=de.track)==null?void 0:Ce.kind,id:(xe=de.track)==null?void 0:xe.sid,muted:(Ue=de.track)==null?void 0:Ue.isMuted,pub:de})})}),K.on("trackSubscriptionFailed",(ue,pe,de)=>{console.error("[LIVEKIT][DEBUG] Track subscription failed:",{trackSid:ue,participant:pe.identity,reason:de})}),K.on("trackSubscribed",(ue,pe,de)=>{console.log("[LIVEKIT][DEBUG] trackSubscribed event:",{participant:de.identity,kind:ue.kind,id:ue.sid,muted:ue.isMuted}),ue.kind==="audio"&&console.log("[LIVEKIT] Listener received audio track from:",de.identity)}),K.on("participantConnected",ue=>{console.log("[LIVEKIT] Listener sees participant connected:",ue.identity),ue.getTrackPublications().forEach(pe=>{var de,Ce,xe;console.log("[LIVEKIT][DEBUG] New participant track:",{participant:ue.identity,kind:(de=pe.track)==null?void 0:de.kind,id:(Ce=pe.track)==null?void 0:Ce.sid,muted:(xe=pe.track)==null?void 0:xe.isMuted,pub:pe})})}),K.on("participantDisconnected",ue=>{console.log("[LIVEKIT] Listener sees participant disconnected:",ue.identity)}),console.log("[LIVEKIT][DEBUG] Room state after connect:",{localParticipant:K.localParticipant.identity,remoteParticipants:Array.from(K.remoteParticipants.values()).map(ue=>ue.identity),allParticipants:K.remoteParticipants})}},[_,K,J]),x.useEffect(()=>{_==="creator"&&K&&J&&(K.on("participantConnected",se=>{console.log("[LIVEKIT] Creator sees participant connected:",se.identity),se.getTrackPublications().forEach(ue=>{var pe,de,Ce;console.log("[LIVEKIT][DEBUG] New participant track:",{participant:se.identity,kind:(pe=ue.track)==null?void 0:pe.kind,id:(de=ue.track)==null?void 0:de.sid,muted:(Ce=ue.track)==null?void 0:Ce.isMuted,pub:ue})})}),K.on("participantDisconnected",se=>{console.log("[LIVEKIT] Creator sees participant disconnected:",se.identity)}),console.log("[LIVEKIT][DEBUG] Room state after connect:",{localParticipant:K.localParticipant.identity,remoteParticipants:Array.from(K.remoteParticipants.values()).map(se=>se.identity),allParticipants:K.remoteParticipants}))},[_,K,J]);const[mn,Sr]=x.useState([]);x.useEffect(()=>{if(_!=="listener"||!K||!J)return;const se=[];Array.from(K.remoteParticipants.values()).forEach(pe=>{pe.getTrackPublications().forEach(de=>{de.track&&de.track.kind==="audio"&&se.push(de.track)})}),Sr(se)},[_,K,J,le]);const Oi=yr();return E.jsx("div",{className:"min-h-screen w-full bg-[#F8F8F8] flex items-center justify-center",children:E.jsxs("div",{className:"w-full max-w-5xl rounded-3xl bg-white p-4 md:p-10 mx-2 md:mx-auto my-8 flex flex-col",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 relative min-h-[500px]",children:[E.jsxs("div",{className:"bg-white flex flex-col items-center justify-between py-10 px-2 relative",children:[E.jsx("img",{src:gD,alt:"wave",className:"w-[260px] h-[260px] object-contain mt-6 mb-2 p-2"}),E.jsxs("div",{className:"md:hidden text-center my-6",children:[E.jsxs("h2",{className:"text-xl font-bold text-[#1E60B6] mb-2",children:["Live Caption (",(qt=Ne.supportedLanguages.find(se=>se.code===I))==null?void 0:qt.name,")"]}),h&&E.jsx("div",{className:"bg-gray-100 px-4 py-3 rounded-lg text-left min-h-[48px] max-h-[120px] overflow-y-auto",children:It()})]}),E.jsxs("div",{className:"flex justify-center gap-20 mb-2 mt-8",children:[E.jsx("button",{onClick:_i,disabled:Oi.disabled,children:E.jsx("img",{src:vD,alt:"Mic",className:Oi.className})}),E.jsx("img",{src:yD,alt:"Caption",className:`w-9 h-9 cursor-pointer transition-opacity ${h?"":"opacity-30 grayscale"}`,title:h?"Hide Captions":"Show Captions",onClick:()=>f(se=>!se)}),E.jsx("button",{onClick:Ls,children:E.jsx("img",{src:bD,alt:"Leave",className:"w-9 h-9"})})]})]}),E.jsx("div",{className:"hidden md:flex items-center justify-center pl-12",children:E.jsxs("div",{className:"text-[#484848] max-w-md",children:[E.jsxs("h2",{className:"text-xl font-bold text-[#1E60B6] mb-2",children:["Live Caption (",(In=Ne.supportedLanguages.find(se=>se.code===I))==null?void 0:In.name,")"]}),h&&E.jsx("div",{className:"bg-gray-100 px-4 py-3 rounded-lg min-h-[48px] max-h-[120px] overflow-y-auto",children:It()}),E.jsx("div",{className:"text-sm text-gray-500 mt-2",children:br()}),T.length>1&&E.jsxs("div",{className:"mt-4",children:[E.jsx("div",{className:"text-sm font-semibold mb-2",children:"Recent Messages:"}),E.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:T.slice(-3).map((se,ue)=>E.jsx("div",{className:"text-xs bg-gray-50 rounded px-2 py-1",children:se.text},ue))})]})]})}),E.jsx("div",{className:"hidden md:block absolute top-10 bottom-10 left-1/2 w-px bg-[#CBCBCB]",style:{transform:"translateX(-50%)"}})]}),_==="listener"&&mn.map((se,ue)=>{const Ce=(localStorage.getItem("listenerLanguage")||I||"en")!=="en-US";return E.jsx("audio",{ref:xe=>{xe&&se&&(se.attach(xe),xe.autoplay=!0,xe.muted=Ce,xe.style.display="none")}},ue)})]})})};function cU(){const[t,e]=x.useState(localStorage.getItem("isAuthenticated")==="true"),i=oi(),a=s=>{e(s),i("/"),localStorage.setItem("isAuthenticated","true")};return E.jsxs(E.Fragment,{children:[E.jsx(S_,{}),E.jsxs(Bx,{children:[E.jsx(Qi,{path:"/signup",element:E.jsx(C_,{})}),E.jsx(Qi,{path:"/login",element:E.jsx(T_,{onLogin:()=>a(!0)})}),E.jsx(Qi,{path:"/verify-email",element:E.jsx(nD,{})}),E.jsx(Qi,{path:"/languageselector",element:E.jsx(pD,{})}),E.jsx(Qi,{path:"/joinpage",element:E.jsx(lU,{})}),t?E.jsxs(E.Fragment,{children:[E.jsx(Qi,{path:"/",element:E.jsx(Y0,{children:E.jsx(tD,{})})}),E.jsx(Qi,{path:"/settings",element:E.jsx(Y0,{children:E.jsx(k_,{})})})]}):E.jsx(E.Fragment,{children:E.jsx(Qi,{path:"*",element:E.jsx(Ix,{to:"/login",replace:!0})})})]})]})}Y1.createRoot(document.getElementById("root")).render(E.jsx(x.StrictMode,{children:E.jsx(cw,{children:E.jsx(eD,{children:E.jsx(cU,{})})})}));
